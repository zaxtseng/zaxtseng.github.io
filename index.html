<!DOCTYPE html>





<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="Zax&apos;s BLOG">
<meta name="keywords" content="javascript, Vue, HTML5">
<meta property="og:type" content="website">
<meta property="og:title" content="Zax&#39;s BLOG">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Zax&#39;s BLOG">
<meta property="og:description" content="Zax&apos;s BLOG">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zax&#39;s BLOG">
<meta name="twitter:description" content="Zax&apos;s BLOG">
  <link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Zax's BLOG</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zax's BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/07/Vue-js基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/07/Vue-js基础/" class="post-title-link" itemprop="url">Vue.js基础</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-07 09:42:13" itemprop="dateCreated datePublished" datetime="2019-09-07T09:42:13+08:00">2019-09-07</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-08 18:36:13" itemprop="dateModified" datetime="2019-09-08T18:36:13+08:00">2019-09-08</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>Vue是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。</p>
<h1 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h1><p>在html内引入:<br><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</code><br>工程化时最好使用<code>vue/cli</code>构建.</p>
<h1 id="实例和数据绑定"><a href="#实例和数据绑定" class="headerlink" title="实例和数据绑定"></a>实例和数据绑定</h1><p>通过构造函数<code>Vue</code>就可以创建一个<code>Vue</code>的实例.并启动<code>Vue</code>应用.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    data: &#123;<span class="attr">msg</span>: <span class="string">'hello world'</span> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>el</code>用于指定页面中的DOM元素来挂载Vue实例.可以是标签,可以是css语法.<br>通过<code>Vue</code>实例的<code>data</code>选项,可以声明应用内可以双向绑定的数据.建议所有会用到的数据都预先在<code>data</code>内声明,也可以指向一个已有的变量.值可以先设置默认值.<br>挂载成功后,可以通过<code>app.$el</code>来访问该元素,<code>Vue</code>实例本身也代理了<code>data</code>对象里的所有属性,所以可以这样访问:<br>访问Vue实例的属性: <code>app.$el, app.$data</code>.<br>访问data元素的属性: <code>app.msg</code></p>
<h1 id="生命周期钩子"><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h1><p>钩子(hook),可以理解为挂载点.在整个Vue实例创建过程中,有一些挂载点.<br><img src="https://cn.vuejs.org/images/lifecycle.png" alt="Alt"></p>
<blockquote>
<p>所有的生命周期钩子自动绑定 this 上下文到实例中，因此你可以访问数据，对属性和方法进行运算。这意味着你<strong>不能使用箭头函数来定义一个生命周期方法</strong> (例如 created: () =&gt; this.fetchTodos())。这是因为箭头函数绑定了父上下文，因此 this 与你期待的 Vue 实例不同，this.fetchTodos 的行为未定义。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">生命周期钩子</th>
<th align="left">类型</th>
<th align="left">详细</th>
</tr>
</thead>
<tbody><tr>
<td align="left">beforeCreate</td>
<td align="left">Function</td>
<td align="left">在实例初始化之后，数据观测 (data observer) 和 event/watcher 事件配置之前被调用。</td>
</tr>
<tr>
<td align="left"><strong>created</strong></td>
<td align="left">Function</td>
<td align="left">在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测 (data observer)，属性和方法的运算，watch/event 事件回调。然而，挂载阶段还没开始，<code>$el</code>属性目前不可见。</td>
</tr>
<tr>
<td align="left">beforeMoute</td>
<td align="left">Function</td>
<td align="left">在挂载开始之前被调用：相关的<code>render</code>函数首次被调用。</td>
</tr>
<tr>
<td align="left"><strong>mounted</strong></td>
<td align="left">Function</td>
<td align="left"><code>el</code>被新创建的<code>vm.$el</code>替换，并挂载到实例上去之后调用该钩子。如果 root 实例挂载了一个文档内元素，当<code>mounted</code>被调用时<code>vm.$el</code>也在文档内。</td>
</tr>
<tr>
<td align="left">beforeUpdate</td>
<td align="left">Function</td>
<td align="left">数据更新时调用，发生在虚拟 DOM 打补丁之前。这里适合在更新之前访问现有的 DOM，比如手动移除已添加的事件监听器。</td>
</tr>
<tr>
<td align="left"><strong>updated</strong></td>
<td align="left">Function</td>
<td align="left">由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。当这个钩子被调用时，组件 DOM 已经更新，所以你现在可以执行依赖于 DOM 的操作。然而在大多数情况下，你应该避免在此期间更改状态。如果要相应状态改变，通常最好使用计算属性或<code>watcher</code>取而代之</td>
</tr>
<tr>
<td align="left">actived</td>
<td align="left">Function</td>
<td align="left">keep-alive 组件激活时调用。</td>
</tr>
<tr>
<td align="left">deactivated</td>
<td align="left">Function</td>
<td align="left">keep-alive 组件停用时调用。</td>
</tr>
<tr>
<td align="left">beforeDestroy</td>
<td align="left">Function</td>
<td align="left">实例销毁之前调用。在这一步，实例仍然完全可用。</td>
</tr>
<tr>
<td align="left"><strong>destroyed</strong></td>
<td align="left">Function</td>
<td align="left">Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。</td>
</tr>
<tr>
<td align="left">errorCaptured</td>
<td align="left"><code>(err: Error, vm: Component, info: string) =&gt; ?boolean</code></td>
<td align="left">当捕获一个来自子孙组件的错误时被调用。此钩子会收到三个参数：错误对象、发生错误的组件实例以及一个包含错误来源信息的字符串。此钩子可以返回<code>false</code>以阻止该错误继续向上传播。</td>
</tr>
</tbody></table>
<blockquote>
<p>注意<code>mounted</code>不会承诺所有的子组件也都一起被挂载。如果你希望等到整个视图都渲染完毕，可以用<code>vm.$nextTick</code>替换掉<code>mounted</code>：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Code that will run only after the</span></span><br><span class="line">    <span class="comment">// entire view has been rendered</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意<code>updated</code>不会承诺所有的子组件也都一起被重绘。如果你希望等到整个视图都重绘完毕，可以用<code>vm.$nextTick</code>替换掉<code>updated</code>：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">updated: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Code that will run only after the</span></span><br><span class="line">    <span class="comment">// entire view has been re-rendered</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="文本插值和表达式"><a href="#文本插值和表达式" class="headerlink" title="文本插值和表达式"></a>文本插值和表达式</h1><p>使用双大括号(Mustache语法)的方法是最基本的文本插值的语法,它会自动将双向绑定的数据实时显示出来.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;Message: &#123;&#123; msg &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过使用 v-once 指令，你也能执行一次性地插值，当数据改变时，插值处的内容不会更新。但请留心这会影响到该节点上的其它数据绑定：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span v-once&gt;这个将不会改变: &#123;&#123; msg &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h2><p>双大括号会将数据解释为普通文本，而非 HTML 代码。为了输出真正的 HTML，你需要使用 <code>v-html</code> 指令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Using mustaches: &#123;&#123; rawHtml &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;Using v-html directive: &lt;span v-html="rawHtml"&gt;&lt;/</span>span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>你的站点上动态渲染的任意 HTML 可能会非常危险，因为它很容易导致 XSS 攻击。请只对可信内容使用 HTML 插值，绝不要对用户提供的内容使用插值。</p>
</blockquote>
<h2 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h2><p><code>v-bind</code>可缩写成<code>:</code>.<br>双大括号语法不能作用在 HTML 特性上，遇到这种情况应该使用 v-bind 指令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:id=<span class="string">"dynamicId"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>对于布尔特性 (它们只要存在就意味着值为 true)，v-bind 工作起来略有不同，在这个例子中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-bind:disabled=<span class="string">"isButtonDisabled"</span>&gt;Button&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果<code>isButtonDisabled</code>的值是<code>null、undefined</code>或<code>false</code>，则<code>disabled</code>特性甚至不会被包含在渲染出来的 <code>&lt;button&gt;</code> 元素中。</p>
<h2 id="js表达式"><a href="#js表达式" class="headerlink" title="js表达式"></a>js表达式</h2><p> Vue .js 只支持单个表达式，不支持语句和流控制。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; number + <span class="number">1</span> &#125;&#125;</span><br><span class="line">&#123;&#123; ok ? <span class="string">'YES'</span> : <span class="string">'NO'</span> &#125;&#125;</span><br><span class="line">&#123;&#123; message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>) &#125;&#125;</span><br><span class="line">&lt;div v-bind:id=<span class="string">"'list-' + id"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="comment">//文本插值的形式，其中不能书写表达式,支持单个表达式</span></span><br></pre></td></tr></table></figure>

<p>以下例子不会生效</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 这是语句，不是表达式 --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">var</span> a = <span class="number">1</span> &#125;&#125;</span><br><span class="line">&lt;!-- 流控制也不会生效，请使用三元表达式 --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">if</span> (ok) &#123; <span class="keyword">return</span> message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"example"</span>&gt;</span><br><span class="line">  &#123;&#123; message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>) &#125;&#125;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里是想要显示变量 message 的翻转字符串,但是更复杂的就需要计算属性.<br>所有的计算属性都以函数的形式写在 Vue 实例内的<code>computed</code>选项内，最终返回计算后的结果。<br>范例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"example"</span>&gt;</span><br><span class="line">&lt;p&gt;message: <span class="string">"&#123;&#123; message &#125;&#125;"</span>&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;reversed message: "&#123;&#123; reversedMessage &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: <span class="string">'hello'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="comment">//计算属性的getter</span></span><br><span class="line">    reversedMessage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">//this指向vm实例</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.message.split(<span class="string">''</span>).reverse.().join(<span class="string">''</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//结果：</span></span><br><span class="line"><span class="comment">//message: "hello"</span></span><br><span class="line"><span class="comment">//reversed message: "olleh"</span></span><br></pre></td></tr></table></figure>

<h2 id="计算属性缓存"><a href="#计算属性缓存" class="headerlink" title="计算属性缓存"></a>计算属性缓存</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在组件中</span></span><br><span class="line">methods: &#123;</span><br><span class="line">  reversedMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用methods方法也可以起到和计算属性同样效果<br><strong>区别</strong>:<br>methods: 如果调用方法,只要页面重新渲染.方法就会重新执行,不需要渲染就不需要重新执行<br>计算属性: 不管渲不渲染,只要计算属性依赖的数据不变,就不会变<br><em>何时使用</em>: 取决于是否需要缓存,当遍历大量数组或大量计算,应该使用计算属性.</p>
<h2 id="计算属性的setter"><a href="#计算属性的setter" class="headerlink" title="计算属性的setter"></a>计算属性的setter</h2><p>计算属性默认只有<code>getter</code>，不过在需要时你也可以提供一个<code>setter</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">computed: &#123;</span><br><span class="line">  fullName: &#123;</span><br><span class="line">    <span class="comment">// getter</span></span><br><span class="line">    <span class="keyword">get</span>: function () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">' '</span> + <span class="keyword">this</span>.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// setter</span></span><br><span class="line">    <span class="keyword">set</span>: function (newValue) &#123;</span><br><span class="line">      <span class="keyword">var</span> names = newValue.split(<span class="string">' '</span>)</span><br><span class="line">      <span class="keyword">this</span>.firstName = names[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">this</span>.lastName = names[names.length - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>现在再运行 vm.fullName = ‘John Doe’ 时，setter 会被调用，vm.firstName 和 vm.lastName 也会相应地被更新。</p>
<h1 id="v-bind与class和style的绑定"><a href="#v-bind与class和style的绑定" class="headerlink" title="v-bind与class和style的绑定"></a>v-bind与class和style的绑定</h1><p>应用场景: dom元素经常绑定一些class类名或style样式</p>
<h2 id="对象语法"><a href="#对象语法" class="headerlink" title="对象语法"></a>对象语法</h2><p>可以给<code>v-bind:class</code>传一个对象,动态切换class:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"&#123; active: isActive &#125;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>也可以传入多个属性来动态切换class.<code>v-bind:class</code>指令也可以与普通class属性共存.<br>绑定的数据对象也可以写在<code>data</code>里.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"classObject"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">data: &#123;</span><br><span class="line">  classObject: &#123;</span><br><span class="line">    active: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">'text-danger'</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>当class的表达式过长或者逻辑复杂,可以绑定一个计算属性.一般当条件多于两个时,就可以使用<code>data</code>或<code>computed</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"classObject"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">data: &#123;</span><br><span class="line">  isActive: <span class="literal">true</span>,</span><br><span class="line">  error: <span class="literal">null</span></span><br><span class="line">&#125;,</span><br><span class="line">computed: &#123;</span><br><span class="line">  classObject: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      active: <span class="keyword">this</span>.isActive &amp;&amp; !<span class="keyword">this</span>.error,</span><br><span class="line">      <span class="string">'text-danger'</span>: <span class="keyword">this</span>.error &amp;&amp; <span class="keyword">this</span>.error.type === <span class="string">'fatal'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="数组语法"><a href="#数组语法" class="headerlink" title="数组语法"></a>数组语法</h2><p>当应用多个class时,可以使用数组语法,给<code>v-bind:class</code>绑定一个数组.数组成员直接对应类名.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"[activeClass, errorClass]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">data: &#123;</span><br><span class="line">  activeClass: <span class="string">'active'</span>,</span><br><span class="line">  errorClass: <span class="string">'text-danger'</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>渲染为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"active text-danger"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>根据条件切换,也可以使用三元表达式:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"[isActive ? activeClass : '', errorClass]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>也可以数组语法,对象语法混用:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"[&#123; active: isActive &#125;, errorClass]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h1 id="绑定内联样式"><a href="#绑定内联样式" class="headerlink" title="绑定内联样式"></a>绑定内联样式</h1><h2 id="对象语法-1"><a href="#对象语法-1" class="headerlink" title="对象语法"></a>对象语法</h2><p><code>v-bind:style</code>的对象语法十分直观——看着非常像CSS，但其实是一个JavaScript对象.CSS属性名可以用驼峰式 (camelCase) 或短横线分隔 (kebab-case，记得用引号括起来) 来命名：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:style=<span class="string">"&#123;color: activeColor, fontSize: fontSize + 'px' &#125;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">data: &#123;</span><br><span class="line">  color: <span class="string">'red'</span>,</span><br><span class="line">  fontSize: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>同样的，对象语法常常结合返回对象的计算属性使用。</p>
<h2 id="数组语法-1"><a href="#数组语法-1" class="headerlink" title="数组语法"></a>数组语法</h2><p>数组语法可以将多个样式对象应用到同一个元素上：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind=<span class="string">"[baseStyles, overridingStyles]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>应用多个样式对象时,可以使用数组语法.在实际业务中,style的数组语法并不常用,因为往往可以写在一个对象里面.而较为常用的应当是计算属性.<br>使用<code>:style</code>时,Vue会自动给特殊的css属性名称增加前缀,比如transform,无需再加前缀属性.</p>
</blockquote>
<h1 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h1><h2 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h2><p>解决因为初始化慢,导致页面闪动的情况.这个指令可以隐藏未编译的 Mustache 标签直到实例准备完毕.<br>一般和<code>CSS规则</code>如 <code>[v-cloak] { display: none }</code>配合使用(需要写到css里).</p>
<h2 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h2><p>只渲染元素和组件一次.之后的重新渲染被当做静态内容跳过,用于优化性能.<br>写在标签里.</p>
<h2 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h2><p>跳过这个元素和他子元素的编译过程.可以加快编译.</p>
<h2 id="其他的单独写"><a href="#其他的单独写" class="headerlink" title="其他的单独写"></a>其他的单独写</h2><p>v-text, v-html, v-show, v-if, v-else, v-else-if, v-for, v-on, v-bind, v-model, v-slot.</p>
<h1 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h1><h2 id="v-if-v-else-v-else-if"><a href="#v-if-v-else-v-else-if" class="headerlink" title="v-if,v-else,v-else-if"></a>v-if,v-else,v-else-if</h2><p>用法: 根据表达式值的真假条件渲染元素.在切换时元素及它的数据绑定/组件被销毁并重建.<br>如果元素是<code>&lt;template&gt;</code>,将提出他的内容作为条件块.<br>当条件变化时,该指令触发过渡效果.</p>
<blockquote>
<p>当和<code>v-for</code>一起使用时,<code>v-for</code>的优先级更高.</p>
</blockquote>
<p>也可以用 v-else 添加一个“else 块”：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 v-<span class="keyword">if</span>=<span class="string">"awesome"</span>&gt;Vue is awesome!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;h1 v-<span class="keyword">else</span>&gt;Oh no 😢&lt;<span class="regexp">/h1&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="在-lt-template-gt-上使用v-if"><a href="#在-lt-template-gt-上使用v-if" class="headerlink" title="在&lt;template&gt;上使用v-if"></a>在<code>&lt;template&gt;</code>上使用<code>v-if</code></h3><p>因为<code>v-if</code>是一个指令，所以必须将它添加到一个元素上。但是如果想切换多个元素呢？此时可以把一个<code>&lt;template&gt;</code>元素当做不可见的包裹元素，并在上面使用<code>v-if</code>。最终的渲染结果将不包含<code>&lt;template&gt;</code>元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">"ok"</span>&gt;</span><br><span class="line">  &lt;h1&gt;Title&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">  &lt;p&gt;Paragraph 1&lt;/</span>p&gt;</span><br><span class="line">  &lt;p&gt;Paragraph <span class="number">2</span>&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br></pre></td></tr></table></figure>

<p><code>v-else-if</code>，顾名思义，充当 <code>v-if</code> 的“else-if 块”，可以连续使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-<span class="keyword">if</span>=<span class="string">"type === 'A'"</span>&gt;</span><br><span class="line">  A</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div v-else-if="type === 'B'"&gt;</span></span><br><span class="line"><span class="regexp">  B</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;div v-<span class="keyword">else</span>-<span class="keyword">if</span>=<span class="string">"type === 'C'"</span>&gt;</span><br><span class="line">  C</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div v-else&gt;</span></span><br><span class="line"><span class="regexp">  Not A/</span>B/C</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="用key管理可复用元素"><a href="#用key管理可复用元素" class="headerlink" title="用key管理可复用元素"></a>用<code>key</code>管理可复用元素</h2><p>Vue会尽可能高效地渲染元素，通常会复用已有元素而不是从头开始渲染.<code>&lt;input&gt;</code>不会被替换掉——仅仅是替换了它的 <code>placeholder</code>。<br>如果要表达“这两个元素是完全独立的，不要复用它们”。只需添加一个具有唯一值的<code>key</code>属性即可.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">"loginType === 'username'"</span>&gt;</span><br><span class="line">  &lt;label&gt;Username&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">  &lt;input placeholder="Enter your username" key="username-input"&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;template v-<span class="keyword">else</span>&gt;</span><br><span class="line">  &lt;label&gt;Email&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">  &lt;input placeholder="Enter your email address" key="email-input"&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 v-show=<span class="string">"ok"</span>&gt;Hello!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><code>v-show</code>只是切换css属性<code>display</code>.<code>v-show</code>不支持<code>&lt;template&gt;</code>元素,也不支持<code>v-else</code>.</p>
<h3 id="v-if和v-show相比"><a href="#v-if和v-show相比" class="headerlink" title="v-if和v-show相比"></a>v-if和v-show相比</h3><p><code>v-if</code>: 真正的条件渲染,条件为真就渲染,为false就移除.<br><code>v-show</code>: 不管初始条件是什么,都会渲染.只是切换css的display属性.<br>总结: 如果需要非常频繁地切换，则使用<code>v-show</code>较好；如果在运行时条件很少改变，则使用<code>v-if</code>较好</p>
<h2 id="v-for列表渲染"><a href="#v-for列表渲染" class="headerlink" title="v-for列表渲染"></a>v-for列表渲染</h2><p>两种使用场景:</p>
<ol>
<li>遍历多个对象</li>
<li>遍历一个对象的多个属性</li>
</ol>
<p>遍历数组语法: <code>v-for=&quot;(item, index) in items&quot;</code><br>第一个是数组元素名,第二个是索引.<br>遍历对象的多个属性语法: <code>v-for=&quot;(value, name, index) in object&quot;</code><br>第一个是属性值,第二个是属性名,第三个是索引.</p>
<h2 id="数组更新过滤排序"><a href="#数组更新过滤排序" class="headerlink" title="数组更新过滤排序"></a>数组更新过滤排序</h2><p>改变数组的一系列方法：</p>
<ul>
<li>push()</li>
<li>pop()</li>
<li>shift()</li>
<li>unshift()</li>
<li>splice()</li>
<li>sort()</li>
<li>reverse()</li>
</ul>
<p>两个数组变动Vue检测不到:</p>
<ol>
<li>改变数组指定项,<code>vm.items[indexOfItem] = newValue</code></li>
<li>改变数组长度,<code>vm.items.length = newLength</code></li>
</ol>
<p>解决办法:<br>改变指定项: Vue.set(app.arr, 1, ‘car’)<br>改变数组长度: app.arr.splice(1)</p>
<h2 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h2><p><code>v-on</code>用来绑定事件监听器.<code>v-on</code>可以缩写成<code>@</code>.<br>在普通元素上,<code>v­-on</code>可以监听原生的DOM事件，除了<code>click</code>外，还有<code>dblclick</code>、<code>keyup</code>,<code>mousemove</code>等。<br>表达式可以是一个方法名，这些方法都写在Vue实例的methods属性内，并且是函数的形式，<br>函数内的<code>this</code>指向的是当前Vue实例本身，因此可以直接使用<code>this.xxx</code>的形式来访问或修改数据.</p>
<blockquote>
<p>如果方法中带有参数，但是没有加括号，默认传原生事件对象event</p>
</blockquote>
<p>从2.6.0开始，可以用方括号括起来的JavaScript表达式作为一个指令的参数：<br><code>&lt;a v-bind:[attributeName]=&quot;url&quot;&gt; ... &lt;/a&gt;</code><br>方括号里的属性可以被替换.<br>可以使用动态参数为一个动态的事件名绑定处理函数：<br><code>&lt;a v-on:[eventName]=&quot;doSomething&quot;&gt; ... &lt;/a&gt;</code><br>当 <code>eventName</code>的值为 “focus” 时,<code>v-on:[eventName]</code>将等价于 <code>v-on:focus</code>。</p>
<blockquote>
<p>动态参数表达式有一些语法约束，因为某些字符，例如空格和引号，放在HTML特性名里是无效的。同样，在DOM中使用模板时你需要回避大写键名。</p>
</blockquote>
<h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><p>在Vue中传入event对象用<code>$event</code><br>修饰符 (modifier) 是以半角句号 . 指明的特殊后缀，用于指出一个指令应该以特殊方式绑定。<br><code>.stop</code> 阻止单击事件冒泡 <code>&lt;a v-on:click.stop=&quot;doThis&quot;&gt;&lt;/a&gt;</code><br><code>.prevent</code> 提交事件不再重载页面<br><code>.capture</code> 添加事件侦听器时使用时间捕获模式<br><code>.self</code> 只当事件在该元素本身（而不是子元素）触发时触发回调<br><code>.once</code>只执行一次的方法</p>
<h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><p>用于在表单类元素上双向绑定<br>可以用于input框，以及textarea等<br>注意:所显示的值只依赖于所绑定的数据，不再关心初始化时的插入的value</p>
<h2 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model=<span class="string">"message"</span> placeholder=<span class="string">"edit me"</span>&gt;</span><br><span class="line">&lt;p&gt;Message is: &#123;&#123; message &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="单选按钮"><a href="#单选按钮" class="headerlink" title="单选按钮"></a>单选按钮</h3><ol>
<li>单个单选按钮，直接用v-­bind绑定一个布尔值，用v-­model是不可以的 </li>
<li>如果是组合使用，就需要v-­model来配合value使用，绑定选中的单选框的value值.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"example-4"</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">"radio"</span> id=<span class="string">"one"</span> value=<span class="string">"One"</span> v-model=<span class="string">"picked"</span>&gt;</span><br><span class="line">  &lt;label <span class="keyword">for</span>=<span class="string">"one"</span>&gt;One&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">  &lt;br&gt;</span></span><br><span class="line"><span class="regexp">  &lt;input type="radio" id="two" value="Two" v-model="picked"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;label for="two"&gt;Two&lt;/</span>label&gt;</span><br><span class="line">  &lt;br&gt;</span><br><span class="line">  &lt;span&gt;Picked: &#123;&#123; picked &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example-4'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    picked: <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="复选框"><a href="#复选框" class="headerlink" title="复选框"></a>复选框</h3><p>单个复选框,绑定到布尔值:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"checkbox"</span> id=<span class="string">"checkbox"</span> v-model=<span class="string">"checked"</span>&gt;</span><br><span class="line">&lt;label <span class="keyword">for</span>=<span class="string">"checkbox"</span>&gt;&#123;&#123; label &#125;&#125;&lt;<span class="regexp">/label&gt;</span></span><br></pre></td></tr></table></figure>

<p>多个复选框,绑定到同一个数组:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">'example-3'</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">"checkbox"</span> id=<span class="string">"jack"</span> value=<span class="string">"Jack"</span> v-model=<span class="string">"checkedNames"</span>&gt;</span><br><span class="line">  &lt;label <span class="keyword">for</span>=<span class="string">"jack"</span>&gt;Jack&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">  &lt;input type="checkbox" id="john" value="John" v-model="checkedNames"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;label for="john"&gt;John&lt;/</span>label&gt;</span><br><span class="line">  &lt;input type=<span class="string">"checkbox"</span> id=<span class="string">"mike"</span> value=<span class="string">"Mike"</span> v-model=<span class="string">"checkedNames"</span>&gt;</span><br><span class="line">  &lt;label <span class="keyword">for</span>=<span class="string">"mike"</span>&gt;Mike&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">  &lt;br&gt;</span></span><br><span class="line"><span class="regexp">  &lt;span&gt;Checked names: &#123;&#123; checkedNames &#125;&#125;&lt;/</span>span&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">new Vue(&#123;</span></span><br><span class="line"><span class="regexp">  el: "#example-3",</span></span><br><span class="line"><span class="regexp">  data: &#123;</span></span><br><span class="line"><span class="regexp">    checkedNames: []</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="下拉框"><a href="#下拉框" class="headerlink" title="下拉框"></a>下拉框</h3><p>单选下拉:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"example-5"</span>&gt;</span><br><span class="line">  &lt;select v-model=<span class="string">"selected"</span>&gt;</span><br><span class="line">    &lt;option disabled value=<span class="string">""</span>&gt;请选择&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">    &lt;option&gt;A&lt;/</span>option&gt;</span><br><span class="line">    &lt;option&gt;B&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">    &lt;option&gt;C&lt;/</span>option&gt;</span><br><span class="line">  &lt;<span class="regexp">/select&gt;</span></span><br><span class="line"><span class="regexp">  &lt;span&gt;Selected: &#123;&#123; selected &#125;&#125;&lt;/</span>span&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">  new Vue(&#123;</span></span><br><span class="line"><span class="regexp">    el: "#example-5",</span></span><br><span class="line"><span class="regexp">    data: &#123;</span></span><br><span class="line"><span class="regexp">      selected: ''</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;)</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>

<p>多选下拉:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"example-6"</span>&gt;</span><br><span class="line">  &lt;select v-model=<span class="string">"selected"</span> multiple style=<span class="string">"width: 50px"</span>&gt;</span><br><span class="line">    &lt;option&gt;A&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">    &lt;option&gt;B&lt;/</span>option&gt;</span><br><span class="line">    &lt;option&gt;C&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>select&gt;</span><br><span class="line">  &lt;span&gt;Selected: &#123;&#123; selected &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example-6'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    selected: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/Express/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/06/Express/" class="post-title-link" itemprop="url">Express</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-06 14:30:24 / 修改时间：18:46:17" itemprop="dateCreated datePublished" datetime="2019-09-06T14:30:24+08:00">2019-09-06</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/" itemprop="url" rel="index"><span itemprop="name">后端</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>Express是基于Node.js平台的web开发框架.</p>
<h1 id="快速创建"><a href="#快速创建" class="headerlink" title="快速创建"></a>快速创建</h1><p>使用以下命令安装express</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> express-generator -g</span><br></pre></td></tr></table></figure>

<p>使用<code>-h</code>选项显示命令选项</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">express -h</span><br><span class="line">  Usage: express [<span class="keyword">options</span>][dir]</span><br><span class="line">  //用法</span><br><span class="line"></span><br><span class="line">  Option<span class="variable">s:</span></span><br><span class="line"></span><br><span class="line">    -h, --<span class="keyword">help</span>          output usage information</span><br><span class="line">        --<span class="keyword">version</span>       output the <span class="keyword">version</span> <span class="keyword">number</span></span><br><span class="line">    -<span class="keyword">e</span>, --ejs           <span class="built_in">add</span> ejs engine support</span><br><span class="line">        --hbs           <span class="built_in">add</span> handlebars engine support</span><br><span class="line">        --pug           <span class="built_in">add</span> pug engine support</span><br><span class="line">    -H, --hogan         <span class="built_in">add</span> hogan.js engine support</span><br><span class="line">        --<span class="keyword">no</span>-<span class="keyword">view</span>       generate without <span class="keyword">view</span> engine</span><br><span class="line">    -v, --<span class="keyword">view</span> <span class="symbol">&lt;engine&gt;</span> <span class="built_in">add</span> <span class="keyword">view</span> <span class="symbol">&lt;engine&gt;</span> support (ejs|hbs|hjs|jade|pug|twig|vash) (defaults <span class="keyword">to</span> jade)</span><br><span class="line">    -<span class="keyword">c</span>, --css <span class="symbol">&lt;engine&gt;</span>  <span class="built_in">add</span> stylesheet <span class="symbol">&lt;engine&gt;</span> support (less|stylus|compass|sass) (defaults <span class="keyword">to</span> plain css)</span><br><span class="line">        --git           <span class="built_in">add</span> .gitignore</span><br><span class="line">    -<span class="keyword">f</span>, --force         force <span class="keyword">on</span> non-<span class="built_in">empty</span> directory</span><br></pre></td></tr></table></figure>

<p>例如，以下语句在当前工作目录中创建名为 myapp 的 Express 应用程序：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ express --view=pug myapp</span><br><span class="line"></span><br><span class="line">   <span class="string">create :</span> myapp</span><br><span class="line">   <span class="string">create :</span> myapp/<span class="keyword">package</span>.json</span><br><span class="line">   <span class="string">create :</span> myapp/app.js</span><br><span class="line">   <span class="string">create :</span> myapp/<span class="keyword">public</span></span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/public/</span>javascripts</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/public/</span>images</span><br><span class="line">   <span class="string">create :</span> myapp/routes</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/routes/</span>index.js</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/routes/</span>users.js</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/public/</span>stylesheets</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/public/</span>stylesheets/style.css</span><br><span class="line">   <span class="string">create :</span> myapp/views</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/views/</span>index.pug</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/views/</span>layout.pug</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/views/</span>error.pug</span><br><span class="line">   <span class="string">create :</span> myapp/bin</span><br><span class="line">   <span class="string">create :</span> myapp<span class="regexp">/bin/</span>www</span><br></pre></td></tr></table></figure>

<p>然后安装依赖项:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> myapp</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>在Mac或Linux下采用以下命令运行此程序</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DEBUG</span>=myapp:* npm start</span><br></pre></td></tr></table></figure>

<p>在windows上</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">set</span> <span class="attribute">DEBUG</span>=myapp:* &amp; npm start</span><br></pre></td></tr></table></figure>

<p>然后在浏览器输入`<a href="http://localhost:3000访问" target="_blank" rel="noopener">http://localhost:3000访问</a></p>
<h1 id="基本路由"><a href="#基本路由" class="headerlink" title="基本路由"></a>基本路由</h1><p>中间件: 处理请求的函数.<br>模板引擎: <code>&lt;%= 写入的变量名 %&gt;</code>,其中变量名可以在其他地方赋值,这样就可以批量改变变量了.</p>
<h1 id="后台"><a href="#后台" class="headerlink" title="后台"></a>后台</h1><p>基本页面: 创建,列表,展示</p>
<h2 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h2><p>提供图像,css和js之类的静态文件,请使用express.static内置中间件函数.<br>使用以下代码在名为public的目录中提供图像,css和js之类的静态文件</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="keyword">use</span>(express.<span class="keyword">static</span>('<span class="keyword">public</span>'))</span><br></pre></td></tr></table></figure>

<p>现在，可以访问位于 public 目录中的文件：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">http:</span><span class="comment">//localhost:3000/images/kitten.jpg</span></span><br><span class="line"><span class="string">http:</span><span class="comment">//localhost:3000/css/style.css</span></span><br><span class="line"><span class="string">http:</span><span class="comment">//localhost:3000/js/app.js</span></span><br><span class="line"><span class="string">http:</span><span class="comment">//localhost:3000/images/bg.png</span></span><br><span class="line"><span class="string">http:</span><span class="comment">//localhost:3000/hello.html</span></span><br><span class="line"></span><br><span class="line">要使用多个静态资源目录，请多次调用 express.<span class="keyword">static</span> 中间件函数：</span><br></pre></td></tr></table></figure>

<p>app.use(express.static(‘public’));<br>app.use(express.static(‘files’));</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Express 以您使用 express<span class="selector-class">.static</span> 中间件函数设置静态目录的顺序来查找文件。</span><br><span class="line"></span><br><span class="line">要为 express<span class="selector-class">.static</span> 函数提供的文件创建虚拟路径前缀（路径并不实际存在于文件系统中），请为静态目录指定安装路径，如下所示：</span><br></pre></td></tr></table></figure>

<p>app.use(‘/static’, express.static(‘public’));</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>向 express.static 函数提供的路径相对于您在其中启动 node 进程的目录。如果从另一个目录运行 Express 应用程序，那么对于提供资源的目录使用绝对路径会更安全：</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="keyword">use</span>('/<span class="keyword">static</span>', express.<span class="keyword">static</span>(__dirname + '/<span class="keyword">public</span>'));</span><br></pre></td></tr></table></figure>

<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>基本路由示例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> app = express() <span class="comment">//在`myapp/bin/www`里创建了app的服务器</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    red.send(<span class="string">'hello world'</span>)<span class="comment">//给浏览器发一个hello world</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="路由方法"><a href="#路由方法" class="headerlink" title="路由方法"></a>路由方法</h3><p>GET和POST的示例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET</span></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'GET request to the homepage'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//POST</span></span><br><span class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'POST request to the homepage'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>有一种特殊路由方法：<code>app.all()</code>，它并非派生自 HTTP 方法。该方法用于在所有请求方法的路径中装入中间件函数。</p>
<p>在以下示例中，无论您使用 GET、POST、PUT、DELETE 还是在 http 模块中支持的其他任何 HTTP 请求方法，都将为针对“/secret”的请求执行处理程序。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">'/secret'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Accessing the secret section ...'</span>);</span><br><span class="line">  next(); <span class="comment">// pass control to the next handler</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="路由路径"><a href="#路由路径" class="headerlink" title="路由路径"></a>路由路径</h3><p>‘/‘表示根路径</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'root'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>和’/about’路径匹配</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/about'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'random.txt'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="基于字符串模式的匹配"><a href="#基于字符串模式的匹配" class="headerlink" title="基于字符串模式的匹配"></a>基于字符串模式的匹配</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此路由路径将匹配 abcd、abbcd、abbbcd 等。</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab+cd'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'ab+cd'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//此路由路径将匹配 abcd、abbcd、abbbcd 等。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab+cd'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'ab+cd'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//此路由路径将匹配 abcd、abxcd、abRABDOMcd、ab123cd 等。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab*cd'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'ab*cd'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//此路由路径将匹配 /abe 和 /abcde。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab(cd)?e'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"> res.send(<span class="string">'ab(cd)?e'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>字符 ?、+、* 和 () 是其正则表达式同应项的子集。基于字符串的路径按字面理解连字符 (-) 和点 (.)。</p>
<h4 id="路由处理程序"><a href="#路由处理程序" class="headerlink" title="路由处理程序"></a>路由处理程序</h4><p>可以提供多个回调函数，以类似于中间件的行为方式来处理请求。<br>唯一例外是这些回调函数可能调用 next(‘route’) 来绕过剩余的路由回调。<br>可以使用此机制对路由施加先决条件，在没有理由继续执行当前路由的情况下，可将控制权传递给后续路由。</p>
<p>路由处理程序的形式可以是一个函数、一组函数或者两者的结合，如以下示例中所示。</p>
<p>单个回调函数可以处理一个路由。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/example/a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from A!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>多个回调函数可以处理一个路由（确保您指定 next 对象）。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/example/b'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'the response will be sent by the next function ...'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from B!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>一组回调函数可以处理一个路由。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cb0 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB0'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cb1 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB1'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cb2 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from C!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/example/c'</span>, [cb0, cb1, cb2]);</span><br></pre></td></tr></table></figure>

<p>独立函数与一组函数的组合可以处理一个路由。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cb0 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB0'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cb1 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB1'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/example/d'</span>, [cb0, cb1], <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'the response will be sent by the next function ...'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from D!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="响应方法"><a href="#响应方法" class="headerlink" title="响应方法"></a>响应方法</h1><p>响应对象 (res) 的方法可以向客户端发送响应，并终止请求/响应循环。如果没有从路由处理程序调用其中任何方法，客户端请求将保持挂起状态。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">res.download()</td>
<td align="left">提示将要下载文件。</td>
</tr>
<tr>
<td align="left">res.end()</td>
<td align="left">结束响应进程。</td>
</tr>
<tr>
<td align="left">res.json()</td>
<td align="left">发送 JSON 响应。</td>
</tr>
<tr>
<td align="left">res.jsonp()</td>
<td align="left">在 JSONP 的支持下发送 JSON 响应。</td>
</tr>
<tr>
<td align="left">res.redirect()</td>
<td align="left">重定向请求。</td>
</tr>
<tr>
<td align="left">res.render()</td>
<td align="left">呈现视图模板。</td>
</tr>
<tr>
<td align="left">res.send()</td>
<td align="left">发送各种类型的响应。</td>
</tr>
<tr>
<td align="left">res.sendFile</td>
<td align="left">以八位元流形式发送文件。</td>
</tr>
<tr>
<td align="left">res.sendStatus()</td>
<td align="left">设置响应状态码并以响应主体形式发送其字符串表示。</td>
</tr>
</tbody></table>
<h1 id="app-route"><a href="#app-route" class="headerlink" title="app.route()"></a>app.route()</h1><p>可以使用<code>app.route()</code>为路由路径创建可连接的路由处理程序<br>因为在单一位置指定路径,可以减少冗杂和输入错误.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app.route(<span class="string">'/book'</span>)</span><br><span class="line">    .get(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">        res.send(<span class="string">'get a book'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    .post(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">        res.send(<span class="string">'add a book'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    .put(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">        res.send(<span class="string">'update a book'</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h1 id="express-Router"><a href="#express-Router" class="headerlink" title="express.Router"></a>express.Router</h1><p>使用 express.Router 类来创建可安装的模块化路由处理程序。Router 实例是完整的中间件和路由系统；因此，常常将其称为“微型应用程序”。</p>
<p>以下示例将路由器创建为模块，在其中装入中间件，定义一些路由，然后安装在主应用程序的路径中。</p>
<p>在应用程序目录中创建名为 birds.js 的路由器文件，其中包含以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// middleware that is specific to this router</span></span><br><span class="line"><span class="comment">//use是不管get还是post都可以匹配</span></span><br><span class="line">router.use(<span class="function"><span class="keyword">function</span> <span class="title">timeLog</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Time: '</span>, <span class="built_in">Date</span>.now());</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// define the home page route</span></span><br><span class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Birds home page'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// define the about route</span></span><br><span class="line">router.get(<span class="string">'/about'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'About birds'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>

<p>接着，在应用程序中装入路由器模块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> birds = <span class="built_in">require</span>(<span class="string">'./birds'</span>);</span><br><span class="line">...</span><br><span class="line">app.use(<span class="string">'/birds'</span>, birds);</span><br></pre></td></tr></table></figure>

<p>此应用程序现在可处理针对 /birds 和 /birds/about 的请求，调用特定于此路由的 timeLog 中间件函数。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/05/ES6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/05/ES6/" class="post-title-link" itemprop="url">ES6</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-05 13:59:32 / 修改时间：19:56:13" itemprop="dateCreated datePublished" datetime="2019-09-05T13:59:32+08:00">2019-09-05</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/ES6/" itemprop="url" rel="index"><span itemprop="name">ES6</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>ES6常见语法</p>
<h1 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h1><ol>
<li><p>var可声明前置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> a</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>let不可声明前置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span> <span class="comment">//报错</span></span><br><span class="line"><span class="keyword">let</span> a</span><br></pre></td></tr></table></figure>
</li>
<li><p>let不可重复声明</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">4</span> <span class="comment">//报错</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span> <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>存在块级作用域</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i) <span class="comment">//块级作用域只在大括号内,出了大括号,i并没有声明,会报错</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i) <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>暂时性死区: 在let声明变量之前都是该变量的死区,在死区内该变量不可使用.不能被声明也不能被获取.</p>
<ol start="5">
<li>const声明的常量不可改变<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line">a = <span class="number">2</span><span class="comment">//报错</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line">obj.a = <span class="number">2</span>  <span class="comment">//正常</span></span><br><span class="line">obj = &#123;<span class="attr">a</span>: <span class="number">2</span>&#125; <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>const 对象等于引用类型,obj存的是<code>{a: 1}</code>的地址,里面的东西改变并不影响地址.而<code>obj = {a: 2}</code>是赋给一个新的地址,发生了改变,会报错.</p>
<ol start="6">
<li>适用于let同样适用于const</li>
</ol>
<p>ES6可以大量使用let,如果认定模块不改变,可以使用const</p>
<h1 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h1><h2 id="关于数组的解构赋值"><a href="#关于数组的解构赋值" class="headerlink" title="关于数组的解构赋值"></a>关于数组的解构赋值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c) </span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, [b], c] = [<span class="number">2</span>, [<span class="number">3</span>], <span class="number">4</span>]</span><br><span class="line">a <span class="comment">//2</span></span><br><span class="line">b <span class="comment">//3</span></span><br><span class="line">c <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a] = <span class="number">1</span> <span class="comment">//报错,因为[a]是一个数组,把值赋值给数组就报错了</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>默认值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b = <span class="number">2</span>] = [<span class="number">3</span>]</span><br><span class="line">a <span class="comment">// 3</span></span><br><span class="line">b <span class="comment">// 2,因为b没有对应值,所以是undefined,使用默认值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b = <span class="number">2</span>] = [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">a <span class="comment">//3</span></span><br><span class="line">b <span class="comment">//4</span></span><br><span class="line">数组对应对值有没有？如果没有（数组对没有指<span class="literal">undefined</span>）就使用默认值，如果有就使用对应值</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a=<span class="number">2</span>, b=<span class="number">3</span>] = [<span class="literal">undefined</span>, <span class="literal">null</span>]</span><br><span class="line">a <span class="comment">//2</span></span><br><span class="line">b <span class="comment">//null</span></span><br><span class="line"><span class="keyword">let</span> [a=<span class="number">1</span>, b=a] = [<span class="number">2</span>]</span><br><span class="line">a <span class="comment">//2</span></span><br><span class="line">b <span class="comment">//2,因为b没有对应值,所以是undefined,使用默认值,此时a的默认值为2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对象的解构赋值<br>前置知识</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [name, age] = [<span class="string">'hunger'</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> p1 = &#123;name, age&#125;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">let</span> p2 = &#123;<span class="attr">name</span>: name, <span class="attr">age</span>: age&#125;</span><br><span class="line">解构范例</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = &#123;<span class="attr">name</span>: <span class="string">'jirengu'</span>, <span class="attr">age</span>: <span class="number">4</span>&#125;</span><br><span class="line">name <span class="comment">//‘jirengu’</span></span><br><span class="line">age <span class="comment">//4</span></span><br><span class="line">以上代码等同于</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name</span><br><span class="line"><span class="keyword">let</span> age</span><br><span class="line">(&#123;<span class="attr">name</span>: name, <span class="attr">age</span>: age&#125; = &#123;<span class="attr">name</span>: <span class="string">'jirengu'</span>, <span class="attr">age</span>: <span class="number">4</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>默认值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x, y=<span class="number">5</span>&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;</span><br><span class="line">x <span class="comment">//1</span></span><br><span class="line">y <span class="comment">//5</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数解构</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[x=<span class="number">1</span>, y=<span class="number">2</span>]</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x+y</span><br><span class="line">&#125;</span><br><span class="line">add() <span class="comment">//Error</span></span><br><span class="line">add([<span class="number">2</span>]) <span class="comment">//4</span></span><br><span class="line">add([<span class="number">3</span>,<span class="number">4</span>]) <span class="comment">//7</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">&#123;x, y&#125;=&#123;x:<span class="number">0</span>, y:<span class="number">0</span>&#125;, &#123;a=<span class="number">1</span>, b=<span class="number">1</span>&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [x+a, y+b]</span><br><span class="line">&#125;</span><br><span class="line">sum(&#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>&#125;, &#123;<span class="attr">a</span>:<span class="number">2</span>&#125;) <span class="comment">//[3, 3]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>作用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">[x, y] = [y, x]</span><br><span class="line">x <span class="comment">//2</span></span><br><span class="line">y <span class="comment">// 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">&#123;url, type=‘GET’&#125;</span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">ajax(&#123;<span class="attr">url</span>: ‘http:<span class="comment">//localhost:3000/getData’&#125;)</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="字符串-数组-对象"><a href="#字符串-数组-对象" class="headerlink" title="字符串,数组,对象"></a>字符串,数组,对象</h1><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ol>
<li><p>多行字符串</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str =<span class="string">`</span></span><br><span class="line"><span class="string">Hi,</span></span><br><span class="line"><span class="string">This is jirengu.com.</span></span><br><span class="line"><span class="string">You can study frontend here.</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串模板</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> website = <span class="string">'jirengucom'</span></span><br><span class="line"><span class="keyword">let</span> who = <span class="string">'You'</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`Hi</span></span><br><span class="line"><span class="string">This is <span class="subst">$&#123;website&#125;</span>.</span></span><br><span class="line"><span class="string"><span class="subst">$&#123;who&#125;</span> can study frontend here</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="comment">//$&#123;&#125;,可以替换变量</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data= [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> liArr = data.map(<span class="function"><span class="params">v</span>=&gt;</span><span class="string">`&lt;li&gt;<span class="subst">$&#123;v&#125;</span>&lt;/li&gt;`</span>).join(<span class="string">''</span>)</span><br><span class="line"><span class="keyword">var</span> html = <span class="string">`&lt;ul&gt;<span class="subst">$&#123;liArr&#125;</span>&lt;/ul&gt;`</span></span><br><span class="line"><span class="built_in">console</span>.log(html)</span><br><span class="line"><span class="comment">//"&lt;ul&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;li&gt;3&lt;/li&gt;&lt;li&gt;4&lt;/li&gt;&lt;/ul&gt;"</span></span><br></pre></td></tr></table></figure>

<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><ol>
<li><p>扩展</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="built_in">console</span>.log(...a)  <span class="comment">// 1, 2,这三个点相当于脱壳,把数组的壳拿掉</span></span><br><span class="line"><span class="keyword">var</span> b = [...a, <span class="number">3</span>]</span><br><span class="line">b <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = b.concat([<span class="number">4</span>, <span class="number">5</span>]) <span class="comment">//b拼接[4,5]变成[1,2,3,4,5]</span></span><br><span class="line"><span class="keyword">var</span> d = [...b, <span class="number">4</span>, <span class="number">5</span>] <span class="comment">//直接把脱壳后的1,2,3放入数组中</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数参数的扩展</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params">...arr</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr.sort())</span><br><span class="line">&#125;</span><br><span class="line">sort(<span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>)  <span class="comment">//[1, 3, 5]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(...arr)</span><br><span class="line">&#125;</span><br><span class="line">max([<span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>])  <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>类数组对象转数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ps = <span class="built_in">document</span>.querySelectorAll(<span class="string">'p'</span>);</span><br><span class="line"><span class="built_in">Array</span>.from(ps).forEach(<span class="function"><span class="params">p</span>=&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p.innerText);</span><br><span class="line">&#125;);</span><br><span class="line">[...ps].forEach(<span class="function"><span class="params">p</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(p.innerText)&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><ol>
<li>默认值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name=<span class="string">'jirengu'</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi, <span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">sayHi()</span><br><span class="line">sayHi(<span class="string">'ruoyu'</span>)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params">url, &#123; body=<span class="string">''</span>, method = <span class="string">'GET'</span>, headers = &#123;&#125; &#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(method);</span><br><span class="line">&#125;</span><br><span class="line">fetch(<span class="string">'http://example.com'</span>)<span class="comment">//如果没有定义那么就是undefined,使用默认值,如果传入了参数,那就使用传入值</span></span><br></pre></td></tr></table></figure>

<p>以下两种写法的区别?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ex1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m1</span>(<span class="params">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ex2 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m2</span>(<span class="params">&#123;x, y&#125; = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数没有参数的情况</span></span><br><span class="line">m1() <span class="comment">// [0, 0]</span></span><br><span class="line">m2() <span class="comment">// [0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 和 y 都有值的情况</span></span><br><span class="line">m1(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;) <span class="comment">// [3, 8]</span></span><br><span class="line">m2(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;) <span class="comment">// [3, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 有值，y 无值的情况</span></span><br><span class="line">m1(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;) <span class="comment">// [3, 0]</span></span><br><span class="line">m2(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;) <span class="comment">// [3, undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 和 y 都无值的情况</span></span><br><span class="line">m1(&#123;&#125;) <span class="comment">// [0, 0];把&#123;&#125;赋给(x = 0,y = 0)</span></span><br><span class="line">m2(&#123;&#125;) <span class="comment">// [undefined, undefined];把&#123;&#125;赋给&#123;x,y&#125;,也就是把undefined, undefined赋给&#123;x,y&#125;</span></span><br><span class="line"></span><br><span class="line">m1(&#123;<span class="attr">z</span>: <span class="number">3</span>&#125;) <span class="comment">// [0, 0]</span></span><br><span class="line">m2(&#123;<span class="attr">z</span>: <span class="number">3</span>&#125;) <span class="comment">// [undefined, undefined]</span></span><br></pre></td></tr></table></figure>

<p>ex1： 调用函数需要你传递一个对象，如果你没传对象就用默认值对象{}，默认值对象里面都是 undefined， 所以属性使用初始值</p>
<p>ex2：参数需要是一个对象，如果没传对象，就用默认值对象{ x: 0, y: 0 }如果传了对象，就使用你传递的对象</p>
<ol start="2">
<li>箭头函数<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">v</span> =&gt;</span> v+<span class="number">1</span></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;<span class="keyword">return</span> v+<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">()</span> =&gt;</span> <span class="number">5</span>;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function">(<span class="params">num1, num2</span>) =&gt;</span> num1 + num2;<span class="comment">//适用于立刻返回,即把代码写成一行的情况</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组的平方</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.map(<span class="function"><span class="params">v</span>=&gt;</span>v*v)</span><br><span class="line">arr2 <span class="comment">//[1, 4, 9]</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>箭头函数里面的 this<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'id:'</span>, <span class="keyword">this</span>.id);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  等同于如下ES5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'id:'</span>, _this.id);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'jirengu'</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> people = &#123;name, age&#125; <span class="comment">//&#123;name:'jirengu', age:3&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = &#123;</span><br><span class="line">selector: <span class="string">'#app'</span>,</span><br><span class="line"><span class="comment">//函数简写</span></span><br><span class="line">init() &#123;</span><br><span class="line">&#125;,</span><br><span class="line">bind() &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">app.init()</span><br></pre></td></tr></table></figure>

<h1 id="类和继承"><a href="#类和继承" class="headerlink" title="类和继承"></a>类和继承</h1><ol>
<li><p>构造函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayHello() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">等价于</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(  <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">'hunger'</span>, <span class="number">2</span>);</span><br><span class="line">静态方法</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventCenter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> fire() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'fire'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> on()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'on'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">等同于</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">EventCenter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">EventCenter.fire = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">EventCenter.on = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>继承</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayHello() &#123;</span><br><span class="line">      <span class="comment">//写的函数会直接放到原型上</span></span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age, score) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name, age); </span><br><span class="line">    <span class="keyword">this</span>.score = score;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayScore() &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(  <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old, i get <span class="subst">$&#123;<span class="keyword">this</span>.score&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><p>写法1</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// profile.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> firstName = <span class="string">'Michael'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> lastName = <span class="string">'Jackson'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> year = <span class="number">1958</span>;</span><br><span class="line"><span class="comment">//useage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;firstName, lastName, year&#125; <span class="keyword">from</span> <span class="string">'./profile'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(firstName)</span><br></pre></td></tr></table></figure>

<p>写法2</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstName = <span class="string">'Michael'</span>;</span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">'Jackson'</span>;</span><br><span class="line"><span class="keyword">var</span> year = <span class="number">1958</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;firstName, lastName, year&#125;;</span><br><span class="line"><span class="comment">//useage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;firstName, lastName, year&#125; <span class="keyword">from</span> <span class="string">'./profile'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(firstName)</span><br></pre></td></tr></table></figure>

<p>写法3</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//helper.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getYear</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;getName, getYear&#125; <span class="keyword">from</span> <span class="string">'./helper'</span>;</span><br><span class="line">getName()</span><br></pre></td></tr></table></figure>

<p>写法4</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//helper.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getYear</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;getName, getYear&#125;</span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;getName, getYear&#125; <span class="keyword">from</span> <span class="string">'./helper'</span>;</span><br><span class="line">getName()</span><br></pre></td></tr></table></figure>

<p>写法5</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export-default.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// import-default.js</span></span><br><span class="line"><span class="keyword">import</span> getName <span class="keyword">from</span> <span class="string">'./export-default'</span></span><br><span class="line">getName()</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/01/Node-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/01/Node-js/" class="post-title-link" itemprop="url">Node.js</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-01 14:27:58 / 修改时间：17:31:20" itemprop="dateCreated datePublished" datetime="2019-09-01T14:27:58+08:00">2019-09-01</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/" itemprop="url" rel="index"><span itemprop="name">后端</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a>node.js</h1><p>基础</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">node index.js <span class="comment">//启动服务器</span></span><br><span class="line">index.js文件中引入http模块</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>) <span class="comment">//引入http模块</span></span><br><span class="line"><span class="keyword">var</span> server = http.creatserve(fn(res,req))<span class="comment">//创建服务器</span></span><br><span class="line">response.end() <span class="comment">//结束</span></span><br><span class="line">server.listen(<span class="number">9000</span>) <span class="comment">//启动服务器，监听9000端口</span></span><br><span class="line">res.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/plain; chartset=gbk"</span>)</span><br><span class="line"><span class="comment">//设置响应头</span></span><br><span class="line">res.writeHead(<span class="number">200</span>,<span class="string">"ok"</span>) <span class="comment">//设置状态码</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"open http://localhost:9000"</span>)</span><br></pre></td></tr></table></figure>

<p>进阶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>) <span class="comment">//引入http模块</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>) <span class="comment">//自动处理路径问题</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>) <span class="comment">//读写文件</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">"url"</span>) <span class="comment">//解析url</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">staticRoot</span>(<span class="params">staticPath, req, res</span>)</span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> pathObj = url.parse(req.url, <span class="literal">true</span>)    </span><br><span class="line">  <span class="comment">//url.parse是node.js方法，将一个URL字符串转换成对象并返回</span></span><br><span class="line">  <span class="built_in">console</span>.log(pathObj)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span>(pathObj.pathname === <span class="string">"/"</span>)&#123;</span><br><span class="line">    pathObj.pathname += <span class="string">"index.html"</span></span><br><span class="line"> &#125; <span class="comment">//不加后缀可以默认加后缀</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> filePath = path.join(staticPath, pathObj.pathname)</span><br><span class="line"><span class="comment">//拼接文件地址</span></span><br><span class="line">fs.readFile(filePath, <span class="string">"binary"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, fileContent</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">     res.writeHead(<span class="number">404</span>, <span class="string">"not found"</span>)</span><br><span class="line">     res.end(<span class="string">"&lt;h1&gt;404 Not Found&lt;/h1&gt;"</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, <span class="string">"ok"</span>)</span><br><span class="line">    res.write(fileContent, <span class="string">"binary"</span>)</span><br><span class="line">    res.end()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"path.join(_dirname, "</span><span class="keyword">static</span><span class="string">")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var server = http.createServer(function(res,req)&#123;</span></span><br><span class="line"><span class="string">   staticRoot(path.join(__dirname, "</span><span class="keyword">static</span><span class="string">"), req, res) </span></span><br><span class="line"><span class="string">   //__dirname代表当前文件</span></span><br><span class="line"><span class="string">server.listen(8080)</span></span><br><span class="line"><span class="string">console.log("</span>visit http:<span class="comment">//localhost:8080")</span></span><br></pre></td></tr></table></figure>

<h1 id="常用API"><a href="#常用API" class="headerlink" title="常用API"></a>常用API</h1><h2 id="fs-readFile-path-options-callback-fs-writeFile-file-data-options-callback"><a href="#fs-readFile-path-options-callback-fs-writeFile-file-data-options-callback" class="headerlink" title="fs.readFile(path[,options],callback)/fs.writeFile(file,data[,options],callback)"></a>fs.readFile(path[,options],callback)/fs.writeFile(file,data[,options],callback)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)  <span class="comment">//引入fs模块</span></span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'flie.txt'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'error'</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(str)</span><br><span class="line">        <span class="comment">//要去掉字符串里的数字空格</span></span><br><span class="line">        <span class="keyword">const</span> strAfter = str.replace(<span class="regexp">/\d/gm</span>, <span class="string">''</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(strAfter)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//去掉数字后把strAfter写出来</span></span><br><span class="line">        fs.writeFile(<span class="string">'fileAfter.txt'</span>, strAfter, (err)=&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(err) <span class="keyword">throw</span> err; <span class="comment">//如果报错直接使用throw抛出</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'the file has been save!'</span>);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>将上面的去数字的方法封装成函数,单独写一个文件,并调用<br>创建<code>stringApi.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceDigit</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/\d/gm</span>, <span class="string">''</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.replaceDigit = replaceDigit <span class="comment">//把这个封装好的函数暴露出来可以使用了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//封装好后在上面的代码里就可以使用了</span></span><br><span class="line"><span class="comment">//先引入</span></span><br><span class="line"><span class="keyword">let</span> strApi = <span class="built_in">require</span>(<span class="string">'./stringApi'</span>) <span class="comment">//如果在同级目录下,直接使用相对路径引入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//然后将上面的代码const strAfter = str.replace(/\d/gm, '')替换成</span></span><br><span class="line"><span class="keyword">const</span> strAfter = strApi.replaceDigit(str)</span><br></pre></td></tr></table></figure>

<h1 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h1><p>如果需要一些功能,node.js自带的没有,可以去npm官网上找一些其他人发布的npm包.<br>找到之后,首先进行安装</p>
<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>记录保存模块依赖,当没有依赖时,比如下载其他人的项目里没有依赖,可以使用<code>npm.init</code>初始化,将package.json中记录的模块依赖全都下载下来,方便.</p>
<h2 id="npm切换源工具"><a href="#npm切换源工具" class="headerlink" title="npm切换源工具"></a>npm切换源工具</h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -<span class="keyword">g</span> nrm <span class="comment">//安装nrm工具</span></span><br><span class="line">nrm <span class="keyword">ls</span> <span class="comment">//查看nrm支持的源的列表</span></span><br><span class="line">nrm <span class="keyword">use</span> taobao <span class="comment">//使用淘宝的源</span></span><br><span class="line">nrm <span class="keyword">use</span> npm <span class="comment">//切换回npm源</span></span><br></pre></td></tr></table></figure>

<h2 id="NPM-Script"><a href="#NPM-Script" class="headerlink" title="NPM Script"></a>NPM Script</h2><p>在package.json文件里有一个scripts对象,写入里面的命令可以比较方便快捷的执行.直接<code>npm xxx</code>就可以执行.而且会自动搜索路径,不用写相对路径.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"css:autoprefixer"</span>: <span class="string">"postcss -u autoprefixer -r dist/css/*"</span>,</span><br><span class="line">    <span class="attr">"css:compress"</span>: <span class="string">"csso in.css --output out.css"</span>,</span><br><span class="line">    <span class="attr">"js:lint"</span>: <span class="string">"eslint src/js"</span>,</span><br><span class="line">    <span class="attr">"js:uglify"</span>: <span class="string">"mkdir -p dist/js &amp;&amp; uglifyjs src/js/*.js -m -o dist/js/app.js"</span>,</span><br><span class="line">    <span class="attr">"image:imagemin"</span>: <span class="string">"app=imagemin-cli npm run check; imagemin src/images dist/images -p"</span>,</span><br><span class="line">    <span class="attr">"server"</span>: <span class="string">"browser-sync start --server --files 'dist/css/*.css, dist/js/*.js'"</span>,</span><br><span class="line">    <span class="attr">"watch"</span>: <span class="string">"onchange 'src/js/*.js' -- npm run css:compress"</span>,</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"npm run server"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> run css:autoprefixer</span><br><span class="line"><span class="built_in">npm</span> start</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/01/前端工程化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/01/前端工程化/" class="post-title-link" itemprop="url">前端工程化</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-01 14:26:50" itemprop="dateCreated datePublished" datetime="2019-09-01T14:26:50+08:00">2019-09-01</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-04 20:20:28" itemprop="dateModified" datetime="2019-09-04T20:20:28+08:00">2019-09-04</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/前端工程化/" itemprop="url" rel="index"><span itemprop="name">前端工程化</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="模块化初探"><a href="#模块化初探" class="headerlink" title="模块化初探"></a>模块化初探</h1><h2 id="模块化系统的风格"><a href="#模块化系统的风格" class="headerlink" title="模块化系统的风格"></a>模块化系统的风格</h2><p>模块化的价值<br> 最主要的目的：</p>
<ul>
<li>解决命名冲突</li>
<li>依赖管理<br>其他价值:</li>
<li>提高代码可读性</li>
<li>代码解耦，提高复用性</li>
</ul>
<h3 id="lt-script-gt-标签风格"><a href="#lt-script-gt-标签风格" class="headerlink" title="&lt;script&gt;标签风格"></a><code>&lt;script&gt;</code>标签风格</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"module1.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script src=<span class="string">"module2.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script src=<span class="string">"module3.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>各个模块把接口暴露给全局对象,比如window.各个模块通过全局对象进行相互访问<br>出现的问题:</p>
<ol>
<li>全局对象的冲突</li>
<li>加载的顺序很重要</li>
<li>开发者需要解决模块的依赖问题</li>
<li>在大项目中模块非常多难以维护<h3 id="CommonJs-同步的require"><a href="#CommonJs-同步的require" class="headerlink" title="CommonJs: 同步的require"></a>CommonJs: 同步的require</h3>使用同步的<code>require</code>方法来加载依赖和返回暴露的接口.一个模块可以通过<code>exports</code>对象添加属性,或者设置<code>module.exports</code>的值来描述暴露对象.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'moudle'</span>)</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'../file.js'</span>)</span><br><span class="line">exports.doStuff = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">moudle.exports = someValue</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>优点: </p>
<ol>
<li>服务端代码可以被复用.</li>
<li>npm有大量的代码</li>
<li>使用方便<br>缺点: </li>
<li>阻塞调用无法在网络环境应用,网络请求是异步的</li>
<li>不能并行<code>require</code>多个模块<h4 id="CommonJS规范"><a href="#CommonJS规范" class="headerlink" title="CommonJS规范"></a>CommonJS规范</h4></li>
<li>在一个模块中，存在一个自由的变量”require”，它是一个函数。<br>这个”require”函数接收一个模块标识符。<br>“require”返回外部模块所输出的API。</li>
<li>在一个模块中，会存在一个名为”exports”的自由变量，它是一个对象，模块可以在执行的时候把自身的API加入到其中。</li>
<li>模块必须使用”exports”对象来做为输出的唯一表示。<h3 id="AMD规范-异步的require"><a href="#AMD规范-异步的require" class="headerlink" title="AMD规范: 异步的require"></a>AMD规范: 异步的require</h3>AMD主要解决两个问题:</li>
<li>多个js文件可能有依赖关系，被依赖的文件需要早于依赖它的文件加载到浏览器</li>
<li>js加载的时候浏览器会停止页面渲染，加载文件越多，页面失去响应时间越长<h4 id="requireJS语法"><a href="#requireJS语法" class="headerlink" title="requireJS语法"></a>requireJS语法</h4>RequireJS 遵循 AMD 规范，用于解决命名冲突和文件依赖的问题.<br>requireJS定义了一个函数 define，它是全局变量，用来定义模块<br><code>define(id?, dependencies?, factory);</code></li>
<li>id：可选参数，用来定义模块的标识，如果没有提供该参数，脚本文件名（去掉拓展名）</li>
<li>dependencies：是一个当前模块依赖的模块名称数组</li>
<li>factory：工厂方法，模块初始化要执行的函数或对象。如果为函数，它应该只被执行一次。如果是对象，此对象应该为模块的输出值</li>
</ol>
<p>在页面上使用require函数加载模块<br><code>require([dependencies], function(){});</code><br>require()函数接受两个参数:</p>
<ol>
<li>第一个参数是一个数组，表示所依赖的模块</li>
<li>第二个参数是一个回调函数，当前面指定的模块都加载成功后，它将被调用。加载的模块会以参数形式传入该函数，从而在回调函数内部就可以使用这些模块.</li>
</ol>
<p>require()函数在加载依赖的函数的时候是异步加载的，这样浏览器不会失去响应，它指定的回调函数，只有前面的模块都加载成功后，才会运行，解决了依赖性的问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">'moudle'</span>, <span class="string">'../file'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">moudle, file</span>)</span>&#123; <span class="comment">/* ... */</span>&#125;)</span><br><span class="line">define(<span class="string">'moudle'</span>,[<span class="string">'dep1'</span>, <span class="string">'dep2'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">d1, d2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> someExportedValue</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><ol>
<li>新建一个文件夹,cd到它的目录下.执行<code>npm init -y</code>命令</li>
<li>执行<code>npm install --save--dev webpack</code>命令安装(也可以全局安装)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/配置</span><br><span class="line">touch webpack.config.js</span><br><span class="line">vi  webpack.config.js</span><br><span class="line"><span class="comment">//在里面写以下内容</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">const path = require('path');</span></span><br><span class="line"><span class="comment">module.exports = &#123;</span></span><br><span class="line"><span class="comment">  entry: './src/index.js', //入口</span></span><br><span class="line"><span class="comment">  output: &#123;</span></span><br><span class="line"><span class="comment">    filename: 'bundle.js',</span></span><br><span class="line"><span class="comment">    path: path.resolve(__dirname, 'dist')</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125;;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建文件</span></span><br><span class="line">touch src/index.js</span><br><span class="line"></span><br><span class="line"><span class="comment">//运行webpack</span></span><br><span class="line">npx webpack  <span class="comment">//这时会多出dist目录，里面有bundle.js文件</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h1><h3 id="1-在index-js里写"><a href="#1-在index-js里写" class="headerlink" title="1.在index.js里写"></a>1.在index.js里写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//再运行webpack:</span></span><br><span class="line">npx webpack</span><br><span class="line"></span><br><span class="line"><span class="comment">//再看bundle.js，这时会多出来一行console.log(1)</span></span><br></pre></td></tr></table></figure>

<h3 id="2-安装babel-loader自动转换es6"><a href="#2-安装babel-loader自动转换es6" class="headerlink" title="2.安装babel-loader自动转换es6"></a>2.安装babel-loader自动转换es6</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装v6，命令行</span></span><br><span class="line">npm install babel-loader babel-core babel-preset-env webpack</span><br><span class="line"></span><br><span class="line"><span class="comment">//将这个复制到webpack的配置文件webpack.config.js里，加在output的下面</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">'env'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//加在output的下面，复制完后成这样</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">'env'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>运行npx webpack<br>若出现can’t find ‘…’或can’t resolve ‘…’的报错，则安装省略号里的东西npm i ‘省略号’<br>注意：若是Couldn’t find preset “env”，不要安装env，而是npm i babel-preset-env</p>
</blockquote>
<h3 id="3-使用babel"><a href="#3-使用babel" class="headerlink" title="3.使用babel"></a>3.使用babel</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当你在写index.js里写</span></span><br><span class="line"><span class="keyword">let</span> a=<span class="number">1</span></span><br><span class="line"><span class="comment">//它就会帮你自动转换成es5了</span></span><br></pre></td></tr></table></figure>

<h3 id="NPM-脚本-NPM-Scripts"><a href="#NPM-脚本-NPM-Scripts" class="headerlink" title="NPM 脚本(NPM Scripts)"></a>NPM 脚本(NPM Scripts)</h3><p>在package.json文件中写入npm脚本,就可以使用<code>npm run build</code>替代<code>npx</code>命令.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  &#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"webpack-demo"</span>,</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">    <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">    <span class="string">"scripts"</span>: &#123;</span><br><span class="line">      <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">+     <span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"keywords"</span>: [],</span><br><span class="line">    <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">    <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">      <span class="string">"webpack"</span>: <span class="string">"^4.0.1"</span>,</span><br><span class="line">      <span class="string">"webpack-cli"</span>: <span class="string">"^2.0.9"</span>,</span><br><span class="line">      <span class="string">"lodash"</span>: <span class="string">"^4.17.5"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="管理资源-css-图片之类"><a href="#管理资源-css-图片之类" class="headerlink" title="管理资源(css,图片之类)"></a>管理资源(css,图片之类)</h3><h4 id="加载CSS"><a href="#加载CSS" class="headerlink" title="加载CSS"></a>加载CSS</h4><ol>
<li>需要先安装style-laoder和css-loader<br><code>npm install --save-dev style-loader css-loader</code></li>
<li>然后在<code>webpack.config.js</code>文件里添加规则<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">+   <span class="built_in">module</span>: &#123;</span><br><span class="line">+     rules: [</span><br><span class="line">+       &#123;</span><br><span class="line">+         test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">+         use: [</span><br><span class="line">+           <span class="string">'style-loader'</span>,</span><br><span class="line">+           <span class="string">'css-loader'</span></span><br><span class="line">+         ]</span><br><span class="line">+       &#125;</span><br><span class="line">+     ]</span><br><span class="line">+   &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>webpack 根据正则表达式，来确定应该查找哪些文件，并将其提供给指定的 loader。在这种情况下，以 .css 结尾的全部文件，都将被提供给 style-loader 和 css-loader。<br>  这使你可以在依赖于此样式的文件中<code>import &#39;./style.css&#39;</code>。现在，当该模块运行时，含有 CSS 字符串的<code>&lt;style&gt;</code>标签，将被插入到 html 文件的 <code>&lt;head&gt;</code>中。</p>
</blockquote>
<h4 id="加载图片"><a href="#加载图片" class="headerlink" title="加载图片"></a>加载图片</h4><ol>
<li><p>安装<code>npm install --save-dev file-loader</code>插件</p>
</li>
<li><p>配置<code>webpack.config.js</code>文件<br>现在，当你 <code>import MyImage from &#39;./my-image.png&#39;</code>，该图像将被处理并添加到 output 目录，<br><em>并且</em> <code>MyImage</code> 变量将包含该图像在处理后的最终 url。当使用 css-loader 时，如上所示，<br>你的 CSS 中的<code>url(&#39;./my-image.png&#39;)</code> 会使用类似的过程去处理。loader 会识别这是一个本地文件，<br>并将 <code>&#39;./my-image.png&#39;</code>路径，替换为输出目录中图像的最终路径。<br>html-loader 以相同的方式处理 <code>&lt;img src=&quot;./my-image.png&quot; /&gt;</code>。</p>
</li>
<li><p>在src文件夹下创建icon.png.</p>
</li>
<li><p>修改<code>src/index.js</code>文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span>;</span><br><span class="line">  <span class="keyword">import</span> <span class="string">'./style.css'</span>;</span><br><span class="line">+ <span class="keyword">import</span> Icon <span class="keyword">from</span> <span class="string">'./icon.png'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">component</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lodash，现在由此脚本导入</span></span><br><span class="line">    element.innerHTML = _.join([<span class="string">'Hello'</span>, <span class="string">'webpack'</span>], <span class="string">' '</span>);</span><br><span class="line">    element.classList.add(<span class="string">'hello'</span>);</span><br><span class="line"></span><br><span class="line">+   <span class="comment">// 将图像添加到我们现有的 div。</span></span><br><span class="line">+   <span class="keyword">var</span> myIcon = <span class="keyword">new</span> Image();</span><br><span class="line">+   myIcon.src = Icon;</span><br><span class="line">+</span><br><span class="line">+   element.appendChild(myIcon);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(component());</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>src/style.css</code>中引入图片</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  <span class="selector-class">.hello</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">+   <span class="attribute">background</span>: url(<span class="string">'./icon.png'</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新构建<code>npm run build</code></p>
<h1 id="Glup"><a href="#Glup" class="headerlink" title="Glup"></a>Glup</h1></li>
</ol>
<p><strong>简介</strong><br>它是一款nodejs应用。<br>它是打造前端工作流的利器，打包、压缩、合并、git、远程操作…，<br>简单易用<br>无快不破<br>高质量的插件</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p> 安装gulp<br><code>npm install -g gulp</code><br>如果报<code>Error: EACCES, open &#39;/Users/xxx/xxx.lock</code>错误。<br>先执行：<code>sudo chown -R $(whoami) $HOME/.npm</code></p>
<p>如果使用npm安装插件太慢（被墙），<br>可执行 <code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code><br>先安装cnpm, 之后再安装插件时用cnpm安装<code>cnpm install gulp</code></p>
<ol start="2">
<li>安装各种插件<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">npm install --save gulp            <span class="comment">//本地使用gulp</span></span><br><span class="line">npm install --save gulp-imagemin   <span class="comment">//压缩图片</span></span><br><span class="line">npm install --save gulp-minify-css <span class="comment">//压缩css</span></span><br><span class="line">npm install --save gulp-ruby-sass  <span class="comment">//sass</span></span><br><span class="line">npm install --save gulp-jshint     <span class="comment">//js代码检测</span></span><br><span class="line">npm install --save gulp-uglify     <span class="comment">//js压缩</span></span><br><span class="line">npm install --save gulp-concat     <span class="comment">//文件合并</span></span><br><span class="line">npm install --save gulp-rename     <span class="comment">//文件重命名</span></span><br><span class="line">npm install --save png-sprite      <span class="comment">//png合并</span></span><br><span class="line">npm install --save gulp-htmlmin    <span class="comment">//压缩html</span></span><br><span class="line">npm install --save gulp-clean      <span class="comment">//清空文件夹</span></span><br><span class="line">npm install --save browser-sync    <span class="comment">//文件修改浏览器自动刷新</span></span><br><span class="line">npm install --save gulp-shell      <span class="comment">//执行shell命令</span></span><br><span class="line">npm install --save gulp-ssh        <span class="comment">//操作远程机器</span></span><br><span class="line">npm install --save run-sequence    <span class="comment">//task顺序执行</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>或者根据package.json 自动安装。把package.json拷贝到自己的工程目录下，进入目录，执行:<code>npm install</code></p>
<h1 id="语法gulp-API"><a href="#语法gulp-API" class="headerlink" title="语法gulp API"></a>语法gulp API</h1><h2 id="gulp-src-globs-options"><a href="#gulp-src-globs-options" class="headerlink" title="gulp.src(globs[,options])"></a>gulp.src(globs[,options])</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(<span class="string">'client/templates/*.jade'</span>)</span><br><span class="line">  .pipe(jade())</span><br><span class="line">  .pipe(minify()) <span class="comment">//压缩文件</span></span><br><span class="line">  .pipe(gulp.dest(<span class="string">'build/minified_templates'</span>));</span><br></pre></td></tr></table></figure>

<p>作用: 输出符合所提供的匹配模式或数组的文件.<br><strong>globs</strong> 类型: string或Array<br>所要读取的glob或者包含globs的数组.可以是地址<br><strong>options</strong> 类型:object<br>额外的选项参数</p>
<h2 id="gulp-dest-path-options"><a href="#gulp-dest-path-options" class="headerlink" title="gulp.dest(path[,options])"></a>gulp.dest(path[,options])</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(<span class="string">'./client/templates/*.jade'</span>)</span><br><span class="line">  .pipe(jade())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./build/templates'</span>))</span><br><span class="line">  .pipe(minify())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./build/minified_templates'</span>));</span><br></pre></td></tr></table></figure>

<p>文件被pipe进来,dest生成或者写入一个文件.<br><strong>path</strong><br>文件将被写入的路径（输出目录）。</p>
<h2 id="gulp-task-name-deps-fn"><a href="#gulp-task-name-deps-fn" class="headerlink" title="gulp.task(name[,deps],fn)"></a>gulp.task(name[,deps],fn)</h2><p>定义一个实现任务</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'somename'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//任务</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>name</strong><br>任务名字<br><strong>deps</strong> 类型: array<br>一个包含任务列表的数组,这些任务会在你当前运行任务之前完成.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'mytask'</span>, [<span class="string">'array'</span>, <span class="string">'of'</span>, <span class="string">'task'</span>, <span class="string">'names'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//任务</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>fn</strong><br>该函数定义任务所要执行的一些操作。通常来说，它会是这种形式：gulp.src().pipe(someplugin())。</p>
<h2 id="gulp-watch-glob-opts-tasks"><a href="#gulp-watch-glob-opts-tasks" class="headerlink" title="gulp.watch(glob[, opts], tasks)"></a>gulp.watch(glob[, opts], tasks)</h2><p>监视文件，并且可以在文件发生改动时候做一些事情。它总会返回一个 EventEmitter 来发射（emit） change 事件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> watcher = gulp.watch(<span class="string">'js/**/*.js'</span>, [<span class="string">'uglify'</span>,<span class="string">'reload'</span>]);</span><br><span class="line">watcher.on(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'File '</span> + event.path + <span class="string">' was '</span> + event.type + <span class="string">', running tasks...'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="gulp使用实例"><a href="#gulp使用实例" class="headerlink" title="gulp使用实例"></a>gulp使用实例</h1><h2 id="范例1-压缩合并"><a href="#范例1-压缩合并" class="headerlink" title="范例1. 压缩合并"></a>范例1. 压缩合并</h2><p>demo1目录结构如下。把demo1中的 index.html压缩，把src里面的less编译、合并、压缩、重命名、存储到dist。src里面的图片压缩、合并存储到dist。src里面的js做代码检查，压缩，合并，存储到dist。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">+ demo1</span><br><span class="line">    + dist</span><br><span class="line">        + css</span><br><span class="line">            - merge<span class="selector-class">.min</span><span class="selector-class">.css</span></span><br><span class="line">        + js</span><br><span class="line">            - merge<span class="selector-class">.min</span><span class="selector-class">.js</span></span><br><span class="line">        + imgs</span><br><span class="line">            - <span class="number">1</span>.png</span><br><span class="line">            - <span class="number">2</span>.png</span><br><span class="line">        - index.html</span><br><span class="line">    + src</span><br><span class="line">        + css</span><br><span class="line">            - <span class="selector-tag">a</span>.css</span><br><span class="line">            - <span class="selector-tag">b</span>.css</span><br><span class="line">        + js</span><br><span class="line">            - <span class="selector-tag">a</span>.js</span><br><span class="line">            - <span class="selector-tag">b</span>.js</span><br><span class="line">        + imgs</span><br><span class="line">            - <span class="number">1</span>.png</span><br><span class="line">            - <span class="number">2</span>.png</span><br><span class="line">        - index.html</span><br></pre></td></tr></table></figure>

<p>创建gulpfile.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入组件</span></span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>), <span class="comment">// CSS压缩</span></span><br><span class="line">    uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>), <span class="comment">// js压缩</span></span><br><span class="line">    concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>), <span class="comment">// 合并文件</span></span><br><span class="line">    rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>), <span class="comment">// 重命名</span></span><br><span class="line">    clean = <span class="built_in">require</span>(<span class="string">'gulp-clean'</span>), <span class="comment">//清空文件夹</span></span><br><span class="line">    minhtml = <span class="built_in">require</span>(<span class="string">'gulp-htmlmin'</span>), <span class="comment">//html压缩</span></span><br><span class="line">    jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>), <span class="comment">//js代码规范性检查</span></span><br><span class="line">    imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>); <span class="comment">//图片压缩</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/*.html'</span>)</span><br><span class="line">    .pipe(minhtml(&#123;<span class="attr">collapseWhitespace</span>: <span class="literal">true</span>&#125;)) <span class="comment">//html压缩</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">argument</span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/css/*.css'</span>)</span><br><span class="line">        .pipe(concat(<span class="string">'merge.css'</span>)) <span class="comment">// CSS压缩</span></span><br><span class="line">        .pipe(rename(&#123;</span><br><span class="line">            suffix: <span class="string">'.min'</span> <span class="comment">// 重命名</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(minifycss()) <span class="comment">// CSS压缩</span></span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dist/css/'</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">argument</span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/js/*.js'</span>)</span><br><span class="line">        .pipe(jshint())  <span class="comment">//js代码规范性检查</span></span><br><span class="line">        .pipe(jshint.reporter(<span class="string">'default'</span>))</span><br><span class="line">        .pipe(concat(<span class="string">'merge.js'</span>)) <span class="comment">// 合并文件</span></span><br><span class="line">        .pipe(rename(&#123;</span><br><span class="line">            suffix: <span class="string">'.min'</span>  <span class="comment">// 重命名</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(uglify())    <span class="comment">// js压缩</span></span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dist/js/'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'img'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">argument</span>)</span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/imgs/*'</span>)  </span><br><span class="line">        .pipe(imagemin())  <span class="comment">//图片压缩</span></span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dist/imgs'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'clear'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'dist/*'</span>,&#123;<span class="attr">read</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">        .pipe(clean());  <span class="comment">//清空文件夹</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, [<span class="string">'html'</span>, <span class="string">'css'</span>, <span class="string">'js'</span>, <span class="string">'img'</span>]);</span><br></pre></td></tr></table></figure>

<p>最后命令行<code>gulp build;</code><br>可实现src目录下的html压缩，css、js合并压缩，图片压缩，最后放入 dist目录下</p>
<h2 id="范例2-监控变动自动同步"><a href="#范例2-监控变动自动同步" class="headerlink" title="范例2. 监控变动自动同步"></a>范例2. 监控变动自动同步</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入组件</span></span><br><span class="line"><span class="keyword">var</span> browserSync = <span class="built_in">require</span>(<span class="string">'browser-sync'</span>).create();   <span class="comment">//用于浏览器自动刷新</span></span><br><span class="line"><span class="keyword">var</span> scp = <span class="built_in">require</span>(<span class="string">'gulp-scp2'</span>);                       <span class="comment">//用于scp到远程机器</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);             </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'reload'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    browserSync.reload();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'server'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    browserSync.init(&#123;</span><br><span class="line">        server: &#123;</span><br><span class="line">            baseDir: <span class="string">"./src"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    gulp.watch([<span class="string">'**/*.css'</span>, <span class="string">'**/*.js'</span>, <span class="string">'**/*.html'</span>], [<span class="string">'reload'</span>, <span class="string">'scp'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'scp'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'src/**/*'</span>)</span><br><span class="line">        .pipe(scp(&#123;</span><br><span class="line">            host: <span class="string">'121.40.201.213'</span>,</span><br><span class="line">            username: <span class="string">'root'</span>,</span><br><span class="line">            privateKey: fs.readFileSync(<span class="string">'/Users/wingo/.ssh/id_rsa'</span>),</span><br><span class="line">            dest: <span class="string">'/var/www/fe.jirengu.com'</span>,</span><br><span class="line">            watch: <span class="function"><span class="keyword">function</span>(<span class="params">client</span>) </span>&#123;</span><br><span class="line">                client.on(<span class="string">'write'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'write %s'</span>, o.destination);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;))</span><br><span class="line">        .on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>命令行执行:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gulp scp;  <span class="comment">// 可把本地开发环境代码拷贝到服务器</span></span><br><span class="line">gulp server; <span class="comment">//可在本地创建服务器，本地开发浏览器立刻刷新</span></span><br></pre></td></tr></table></figure>

<h2 id="范例3-监控项目文件变动，自动压缩、合并、打包、添加版本号"><a href="#范例3-监控项目文件变动，自动压缩、合并、打包、添加版本号" class="headerlink" title="范例3.  监控项目文件变动，自动压缩、合并、打包、添加版本号"></a>范例3.  监控项目文件变动，自动压缩、合并、打包、添加版本号</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br><span class="line"><span class="regexp">&lt;head&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!-- build:css css/m</span>erge.css --&gt;</span><br><span class="line">  &lt;link href=<span class="string">"css/a.css"</span> rel=<span class="string">"stylesheet"</span>&gt;</span><br><span class="line">  &lt;link href=<span class="string">"css/b.css"</span> rel=<span class="string">"stylesheet"</span>&gt;</span><br><span class="line">&lt;!-- endbuild --&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;p&gt;demo1-工程化手动版&lt;/</span>p&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- build:js js/merge.js --&gt;</span><br><span class="line">  &lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"js/a.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  &lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"js/b.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- endbuild --&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<p>设置gulpfile.js文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);    </span><br><span class="line"><span class="keyword">var</span> rev = <span class="built_in">require</span>(<span class="string">'gulp-rev'</span>);   <span class="comment">//添加版本号</span></span><br><span class="line"><span class="keyword">var</span> revReplace = <span class="built_in">require</span>(<span class="string">'gulp-rev-replace'</span>);  <span class="comment">//版本号替换</span></span><br><span class="line"><span class="keyword">var</span> useref = <span class="built_in">require</span>(<span class="string">'gulp-useref'</span>);   <span class="comment">//解析html资源定位</span></span><br><span class="line"><span class="keyword">var</span> filter = <span class="built_in">require</span>(<span class="string">'gulp-filter'</span>);   <span class="comment">//过滤数据</span></span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);  </span><br><span class="line"><span class="keyword">var</span> csso = <span class="built_in">require</span>(<span class="string">'gulp-csso'</span>);      <span class="comment">//css优化压缩</span></span><br><span class="line"><span class="keyword">var</span> clean = <span class="built_in">require</span>(<span class="string">'gulp-clean'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">"index"</span>, [<span class="string">'clear'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> jsFilter = filter(<span class="string">"**/*.js"</span>, &#123;<span class="attr">restore</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">  <span class="keyword">var</span> cssFilter = filter(<span class="string">"**/*.css"</span>, &#123;<span class="attr">restore</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> userefAssets = useref.assets();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">"src/index.html"</span>)</span><br><span class="line">    .pipe(userefAssets)      <span class="comment">// Concatenate with gulp-useref</span></span><br><span class="line">    .pipe(jsFilter)</span><br><span class="line">    .pipe(uglify())             <span class="comment">// Minify any javascript sources</span></span><br><span class="line">    .pipe(jsFilter.restore)</span><br><span class="line">    .pipe(cssFilter)</span><br><span class="line">    .pipe(csso())               <span class="comment">// Minify any CSS sources</span></span><br><span class="line">    .pipe(cssFilter.restore)</span><br><span class="line">    .pipe(rev())                <span class="comment">// Rename the concatenated files</span></span><br><span class="line">    .pipe(userefAssets.restore())</span><br><span class="line">    .pipe(useref())</span><br><span class="line">    .pipe(revReplace())         <span class="comment">// Substitute in new filenames</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'clear'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'dist/*'</span>,&#123;<span class="attr">read</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">        .pipe(clean());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="范例4-本地shell命令，-远程shell，-任务顺序执行…"><a href="#范例4-本地shell命令，-远程shell，-任务顺序执行…" class="headerlink" title="范例4. 本地shell命令， 远程shell， 任务顺序执行…"></a>范例4. 本地shell命令， 远程shell， 任务顺序执行…</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> shell = <span class="built_in">require</span>(<span class="string">'gulp-shell'</span>);</span><br><span class="line"><span class="keyword">var</span> runSequence = <span class="built_in">require</span>(<span class="string">'run-sequence'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> GulpSSH = <span class="built_in">require</span>(<span class="string">'gulp-ssh'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//shell操作, </span></span><br><span class="line">gulp.task(<span class="string">'git'</span>, shell.task([<span class="string">'git add .'</span>, <span class="string">'git commit -am "dd"'</span>, <span class="string">'git push -u origin dev'</span>]));</span><br><span class="line">gulp.task(<span class="string">'clear'</span>, shell.task([<span class="string">'find . -name ".DS_Store" -depth -exec rm &#123;&#125; \\;'</span>]));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//操作远程主机</span></span><br><span class="line"><span class="keyword">var</span> gulpSSH = <span class="keyword">new</span> GulpSSH(&#123;</span><br><span class="line">    ignoreErrors: <span class="literal">false</span>,</span><br><span class="line">    sshConfig: &#123;</span><br><span class="line">        host: <span class="string">'121.40.201.213'</span>,</span><br><span class="line">        port: <span class="number">22</span>,</span><br><span class="line">        username: <span class="string">'root'</span>,</span><br><span class="line">        privateKey: fs.readFileSync(<span class="string">'/Users/wingo/.ssh/id_rsa'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'remote'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulpSSH</span><br><span class="line">        .shell([<span class="string">'cd /var/www/fe.jirengu.com'</span>, <span class="string">'git pull origin dev'</span>, <span class="string">'rm -rf _runtime'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    runSequence(</span><br><span class="line">        <span class="string">'git'</span>,</span><br><span class="line">        <span class="string">'clear'</span>,</span><br><span class="line">        <span class="string">'remote'</span>,</span><br><span class="line">        callback</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.watch([<span class="string">'**/*.css'</span>, <span class="string">'**/*.js'</span>, <span class="string">'**/*.html'</span>, <span class="string">'**/*.php'</span>], [<span class="string">'build'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/27/JS进阶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/27/JS进阶/" class="post-title-link" itemprop="url">JS进阶</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-27 19:52:10" itemprop="dateCreated datePublished" datetime="2019-08-27T19:52:10+08:00">2019-08-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-01 14:22:11" itemprop="dateModified" datetime="2019-09-01T14:22:11+08:00">2019-09-01</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/JS进阶/" itemprop="url" rel="index"><span itemprop="name">JS进阶</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="构造对象"><a href="#构造对象" class="headerlink" title="构造对象"></a>构造对象</h1><h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><p>new运算符接受一个函数F及其参数: new F(arguments…).这个一过程分为:</p>
<ol>
<li>创建类的实例.这步是把一个空的对象的proto属性设置为F.prototype.</li>
<li>初始化实例.函数F被传入参数并调用.关键字this被设定为该实例.</li>
<li>返回实例.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p1 = <span class="keyword">new</span> person(<span class="string">'tom'</span>, <span class="number">12</span>)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><p>instanceof是一个操作符,可以判断对象是否为某个类型的实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p1 <span class="keyword">instanceof</span> person<span class="comment">//true,说明p1是由person创造的</span></span><br><span class="line">p1 <span class="keyword">instanceof</span> <span class="built_in">Object</span><span class="comment">//true,</span></span><br><span class="line"></span><br><span class="line">p1 <span class="keyword">instanceof</span> <span class="built_in">Number</span><span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h1 id="原型与原型链"><a href="#原型与原型链" class="headerlink" title="原型与原型链"></a>原型与原型链</h1><ol>
<li>当<code>new</code>一个函数的时候会创建一个对象,<code>函数.prototype</code>等于<code>被创建对象.__proto__</code></li>
<li>一切函数都是由Function这个函数创建的,所以<code>Function.prototye === 被创建函数.__proto__</code></li>
<li>一切函数的原型对象都是由<code>Object</code>这个函数创建的,所以<code>Object.prototype === 一切函数.prototype.__proto__</code><h1 id="this"><a href="#this" class="headerlink" title="this"></a>this</h1>在函数被直接调用时<code>this</code>绑定到全局对象.即window<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>)<span class="comment">//指向window</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)<span class="comment">//指向window</span></span><br><span class="line">&#125; </span><br><span class="line">fn1()<span class="comment">//相当于window.fn1()</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="内部函数"><a href="#内部函数" class="headerlink" title="内部函数"></a>内部函数</h2><p>函数嵌套产生的内部函数的<code>this</code>不是他的父函数,仍然是全局,window</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn0</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fn()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn0()</span><br></pre></td></tr></table></figure>

<h2 id="setTimeOut-和setInterval"><a href="#setTimeOut-和setInterval" class="headerlink" title="setTimeOut()和setInterval()"></a>setTimeOut()和setInterval()</h2><p>这两个函数执行的函数this也是全局</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;, <span class="number">200</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h1 id="DOM对象绑定事件"><a href="#DOM对象绑定事件" class="headerlink" title="DOM对象绑定事件"></a>DOM对象绑定事件</h1><p>在事件处理程序中this代表事件源DOM对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">var</span> _document = <span class="keyword">this</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(_document);</span><br><span class="line">    &#125;, <span class="number">200</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Function-prototype-bind"><a href="#Function-prototype-bind" class="headerlink" title="Function.prototype.bind()"></a>Function.prototype.bind()</h2><p>bind改变this的指向.返回一个新函数,并使函数内部的this为传入的第一个参数</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var fn3 = obj1.fn.bind(obj1)<span class="comment">;</span></span><br><span class="line">fn3()<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用call和apply设置this"><a href="#使用call和apply设置this" class="headerlink" title="使用call和apply设置this"></a>使用call和apply设置this</h2><p>call,apply调用一个函数,传入函数执行上下文及其参数</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span>.<span class="title">call</span></span>(context,param1,param2...)<span class="comment">//接受参数列表</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span>.<span class="title">apply</span></span>(context,paramArray)<span class="comment">//接收参数数组</span></span><br></pre></td></tr></table></figure>

<p>第一个参数都是希望设置的this对象<br>举例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现一个函数可以遍历传入的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//arguments.forEach无法执行,因为arguments不是数组,使用call将forEach的this指向arguments,使之可以遍历</span></span><br><span class="line">    <span class="built_in">Array</span>.prototype.forEach.call(<span class="built_in">arguments</span>,<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">6</span>)<span class="comment">//函数就可以遍历了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>()&#123;</span></span><br><span class="line">    var <span class="built_in">result</span> = <span class="number">0</span></span><br><span class="line">   <span class="comment"> //arguments.forEach无法执行,因为arguments不是数组,使用call将forEach的this指向arguments,使之可以遍历</span></span><br><span class="line">    Array.prototype.forEach.call(arguments,<span class="function"><span class="keyword">function</span>(<span class="title">value</span>)&#123;</span></span><br><span class="line">        console.<span class="built_in">log</span>(<span class="built_in">value</span>)</span><br><span class="line">        <span class="literal">return</span> <span class="built_in">result</span> += <span class="built_in">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="built_in">result</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sum</span>(<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">6</span><span class="comment">)//函数就可以将传入值相加了</span></span><br></pre></td></tr></table></figure>

<h2 id="argument"><a href="#argument" class="headerlink" title="argument"></a>argument</h2><ol>
<li>在函数调用时，会自动在该函数内部生成一个名为 arguments的隐藏对象</li>
<li>该对象类似于数组，可以使用[]运算符获取函数调用时传递的实参</li>
<li>只有函数被调用时，arguments对象才会创建，未调用时其值为null<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn5</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">    name = <span class="string">'XXX'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">1</span>] = <span class="number">30</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line">fn5(<span class="string">'Byron'</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="研究this"><a href="#研究this" class="headerlink" title="研究this"></a>研究this</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> obj = &#123;</span><br><span class="line">  foo: function()&#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> bar = obj.foo</span><br><span class="line">obj.foo() <span class="comment">// 打印出的 this 是 obj</span></span><br><span class="line"><span class="function"><span class="title">bar</span><span class="params">()</span></span> <span class="comment">// 打印出的 this 是 window</span></span><br></pre></td></tr></table></figure>

<p>实际上的正常调用方式<br><code>func.call(context, p1, p2)</code><br>其他简化方式都可以转化</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">func</span><span class="params">(p1, p2)</span></span> 等价于</span><br><span class="line">func.call(undefined, p1, p2)</span><br><span class="line"></span><br><span class="line">obj<span class="selector-class">.child</span><span class="selector-class">.method</span>(p1, p2) 等价于</span><br><span class="line">obj<span class="selector-class">.child</span><span class="selector-class">.method</span><span class="selector-class">.call</span>(obj<span class="selector-class">.child</span>, p1, p2)</span><br></pre></td></tr></table></figure>

<p>this，就是上面代码中的 context。就这么简单。</p>
<p>this 是你 call 一个函数时传的 context，由于你从来不用 call 形式的函数调用，所以你一直不知道。</p>
<blockquote>
<p>浏览器规则:如果你传的 context 就 null 或者 undefined，那么 window 对象就是默认的 context（严格模式下默认 context 是 undefined）</p>
</blockquote>
<p>上面的代码就解释的通了</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> obj = &#123;</span><br><span class="line">  foo: function()&#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> bar = obj.foo</span><br><span class="line">obj.foo() <span class="comment">// 转换为 obj.foo.call(obj)，this 就是 obj</span></span><br><span class="line"><span class="function"><span class="title">bar</span><span class="params">()</span></span> </span><br><span class="line"><span class="comment">// 转换为 bar.call()</span></span><br><span class="line"><span class="comment">// 由于没有传 context</span></span><br><span class="line"><span class="comment">// 所以 this 就是 undefined</span></span><br><span class="line"><span class="comment">// 最后浏览器给你一个默认的 this —— window 对象</span></span><br></pre></td></tr></table></figure>

<h3 id="Event-Handler中的this"><a href="#Event-Handler中的this" class="headerlink" title="Event Handler中的this"></a>Event Handler中的this</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(<span class="string">'click'</span> ,<span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// 请问这里的 this 是什么</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当使用 addEventListener() 为一个元素注册事件的时候，句柄里的 this 值是该元素的引用。其与传递给句柄的 event 参数的 currentTarget 属性的值一样。</p>
</blockquote>
<h3 id="jQuery-Event-Handler-中的-this"><a href="#jQuery-Event-Handler-中的-this" class="headerlink" title="jQuery Event Handler 中的 this"></a>jQuery Event Handler 中的 this</h3><p>那么下面代码中的 this 是什么呢：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ul.on(<span class="string">'click'</span>, <span class="string">'li'</span> , <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当jQuery的调用处理程序时，this关键字指向的是当前正在执行事件的元素。对于直接事件而言，this 代表绑定事件的元素。对于代理事件而言，this 则代表了与 selector 相匹配的元素。(注意，如果事件是从后代元素冒泡上来的话，那么 this 就有可能不等于 event.target。)若要使用 jQuery 的相关方法，可以根据当前元素创建一个 jQuery 对象，即使用 $(this)。</p>
</blockquote>
<h3 id="语法"><a href="#语法" class="headerlink" title="[]语法"></a>[]语法</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function fn ()&#123; console.log(this) &#125;</span><br><span class="line">var arr = [fn, fn2]</span><br><span class="line">arr[<span class="string">0</span>](<span class="link"></span>) // 这里面的 this 又是什么呢？</span><br></pre></td></tr></table></figure>

<p>我们可以把 arr0 想象为arr.0( )，虽然后者的语法错了，但是形式与转换代码里的 obj.child.method(p1, p2) 对应上了，于是就可以愉快的转换了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">         <span class="selector-tag">arr</span><span class="selector-attr">[0]</span>() </span><br><span class="line">假想为    <span class="selector-tag">arr</span><span class="selector-class">.0</span>()</span><br><span class="line">然后转换为 <span class="selector-tag">arr</span><span class="selector-class">.0</span><span class="selector-class">.call</span>(<span class="selector-tag">arr</span>)</span><br><span class="line">那么里面的 <span class="selector-tag">this</span> 就是 <span class="selector-tag">arr</span> 了</span><br></pre></td></tr></table></figure>

<h2 id="call、apply-、函数执行的本质"><a href="#call、apply-、函数执行的本质" class="headerlink" title="call、apply 、函数执行的本质"></a>call、apply 、函数执行的本质</h2><p>当我们执行一个函数，以下几种调用方式等价</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">fn.call(<span class="literal">undefined</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fn.apply(<span class="literal">undefined</span>, [<span class="number">1</span>, <span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<p>在严格模式下， fn 里的 this 就是 call 的第一个参数，也就是 undefined。<br>在非严格模式下(不加”use strict”)， call 传递的第一个参数如果是 undefined 或者 null， 那 this 会自动替换为 Window 对象</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> obj = &#123;</span><br><span class="line">   fn: function(<span class="selector-tag">a</span>, b)&#123;</span><br><span class="line">       console.log(this)</span><br><span class="line">   &#125;,</span><br><span class="line">   child: &#123;</span><br><span class="line">       fn2: function()&#123;</span><br><span class="line">           console.log(this)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.fn(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">obj<span class="selector-class">.fn</span><span class="selector-class">.call</span>(obj, <span class="number">1</span>, <span class="number">2</span>)         <span class="comment">// 所以 this 是 obj</span></span><br><span class="line">obj<span class="selector-class">.fn</span><span class="selector-class">.apply</span>(obj, [<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">obj<span class="selector-class">.child</span><span class="selector-class">.fn2</span>()</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">obj<span class="selector-class">.child</span><span class="selector-class">.fn2</span><span class="selector-class">.call</span>(obj.chid)    <span class="comment">// 所以 this 是 obj.child</span></span><br></pre></td></tr></table></figure>

<h2 id="箭头函数中的this"><a href="#箭头函数中的this" class="headerlink" title="箭头函数中的this"></a>箭头函数中的this</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = &#123;</span><br><span class="line">  fn1: <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//app</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn2(a)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//app</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn3: <span class="function">(<span class="params">a</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//window</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.fn2.call(app)</span><br><span class="line">app.fn3.call(它上一级环境下的<span class="keyword">this</span>)</span><br></pre></td></tr></table></figure>

<p>箭头函数的复杂情况示例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = &#123;</span><br><span class="line">  fn1()&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    &#125;,<span class="number">10</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  fn2()&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    &#125;,<span class="number">20</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  fn3()&#123;</span><br><span class="line">    setTimeout((<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    &#125;).bind(<span class="keyword">this</span>),<span class="number">30</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  fn4: <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    &#125;,<span class="number">40</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.fn1()</span><br><span class="line">app.fn2()</span><br><span class="line">app.fn3()</span><br><span class="line">app.fn4()</span><br><span class="line"></span><br><span class="line">以上代码相当于</span><br><span class="line"><span class="keyword">var</span> app = &#123;</span><br><span class="line">  fn1()&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//过10ms后执行</span></span><br><span class="line">    <span class="comment">//fn.call(undefined),所以输出window</span></span><br><span class="line">  &#125;,</span><br><span class="line">    fn2()&#123;</span><br><span class="line">      <span class="comment">//过20ms执行箭头函数</span></span><br><span class="line">      <span class="comment">//箭头函数里没有资格有自己的this,借用setTimeout外面的this,也就是app</span></span><br><span class="line">    &#125;,</span><br><span class="line">    fn3()&#123;</span><br><span class="line">      <span class="comment">//创建了一个新函数,这个新函数绑定了外面的this,也就是app</span></span><br><span class="line">      <span class="comment">//20ms后执行新函数,输出this,也就是刚刚绑定的app</span></span><br><span class="line">    &#125;,</span><br><span class="line">    fn4: <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">//过40ms执行箭头函数</span></span><br><span class="line">      <span class="comment">//箭头函数里没有资格有自己的this,借用setTimeout外面的this</span></span><br><span class="line">      <span class="comment">//setTimeout所在的fn4也是箭头函数,没资格拥有自己的this,借用外面的this,也就是window</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="函数的执行环境"><a href="#函数的执行环境" class="headerlink" title="函数的执行环境"></a>函数的执行环境</h1><p>JavaScript中的函数既可以被当作普通函数执行，也可以作为对象的方法执行，这是导致 this 含义如此丰富的主要原因</p>
<p>一个函数被执行时，会创建一个执行环境（ExecutionContext），函数的所有的行为均发生在此执行环境中，构建该执行环境时，JavaScript 首先会创建 arguments变量，其中包含调用函数时传入的参数</p>
<p>接下来创建作用域链，然后初始化变量。首先初始化函数的形参表，值为 arguments变量中对应的值，如果 arguments变量中没有对应值，则该形参初始化为 undefined。</p>
<p>如果该函数中含有内部函数，则初始化这些内部函数。如果没有，继续初始化该函数内定义的局部变量，需要注意的是此时这些变量初始化为 undefined，其赋值操作在执行环境（ExecutionContext）创建成功后，函数执行时才会执行，这点对于我们理解JavaScript中的变量作用域非常重要，最后为this变量赋值，会根据函数调用方式的不同，赋给this全局对象，当前对象等</p>
<p>至此函数的执行环境（ExecutionContext）创建成功，函数开始逐行执行，所需变量均从之前构建好的执行环境（ExecutionContext）中读取.</p>
<h2 id="三种变量"><a href="#三种变量" class="headerlink" title="三种变量"></a>三种变量</h2><p>实例变量：（this）类的实例才能访问到的变量</p>
<p>静态变量：（属性）直接类型对象能访问到的变量</p>
<p>私有变量：（局部变量）当前作用域内有效的变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ClassA</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>; <span class="comment">//私有变量，只有函数内部可以访问</span></span><br><span class="line">    <span class="keyword">this</span>.b = <span class="number">2</span>; <span class="comment">//实例变量，只有实例可以访问</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ClassA.c = <span class="number">3</span>; <span class="comment">// 静态变量，也就是属性，类型访问</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// error</span></span><br><span class="line"><span class="built_in">console</span>.log(ClassA.b) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(ClassA.c) <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> classa = <span class="keyword">new</span> ClassA();</span><br><span class="line"><span class="built_in">console</span>.log(classa.a);<span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(classa.b);<span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(classa.c);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><p>继承是指一个对象直接使用另一个对象的属性和方法.<br>如果实现以下两点就实现了继承</p>
<ol>
<li>得到一个类的属性</li>
<li>得到一个类的方法<h2 id="属性的获取"><a href="#属性的获取" class="headerlink" title="属性的获取"></a>属性的获取</h2>对象属性的获取是通过构造函数的执行.在一个类中执行另外一个类的构造函数,就可以把属性赋值到自己内部,但是需要把环境改到自己的作用域内,用<code>call</code>修改this的指向即可.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.printName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">name,sex,age</span>)</span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>,name,sex)</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> Male(<span class="string">'Tom'</span>,<span class="string">'male'</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(m.sex) <span class="comment">//'male'</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="继承的范例"><a href="#继承的范例" class="headerlink" title="继承的范例"></a>继承的范例</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">name,sex,age</span>)</span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, sex)</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Male.prototype = <span class="built_in">Object</span>.create(Person.prototype)</span><br><span class="line"></span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, sex</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.printName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">name, sex, age</span>)</span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, age)</span><br><span class="line">  <span class="keyword">this</span>.sex = sex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Male.prototype = <span class="keyword">new</span> Person()</span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line">Male.prototype.constuctor = Male</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> man = <span class="keyword">new</span> Male(<span class="string">'Tom'</span>, <span class="string">'Male'</span>, <span class="number">10</span>)</span><br><span class="line">man.printName()<span class="comment">//'Tom'</span></span><br></pre></td></tr></table></figure>

<h2 id="hasOwnProperty-NaN"><a href="#hasOwnProperty-NaN" class="headerlink" title="hasOwnProperty"></a>hasOwnProperty</h2><p>判断属性是自己的还是继承的</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">m</span><span class="selector-class">.hasOwnProperty</span>(<span class="string">'name'</span>)<span class="comment">//true</span></span><br><span class="line"><span class="selector-tag">m</span><span class="selector-class">.hasOwnProperty</span>(<span class="string">'printName'</span>)<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h1 id="Promise对象"><a href="#Promise对象" class="headerlink" title="Promise对象"></a>Promise对象</h1><h2 id="回调地狱"><a href="#回调地狱" class="headerlink" title="回调地狱"></a>回调地狱</h2><p>下列代码实现按顺序执行,1秒后执行fn1,再过1秒执行fn2,再过1秒执行fn3</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'fn1'</span>)</span><br><span class="line">    callback()</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'fn2'</span>)</span><br><span class="line">    callback()</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'fn3'</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn1(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  fn2(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    fn3()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>由于层层嵌套,形成回调地狱.(如果套个十几二十个,真的要崩溃)</p>
<h2 id="什么是Promise"><a href="#什么是Promise" class="headerlink" title="什么是Promise"></a>什么是Promise</h2><p>Promise是一个对象,对象里存储着状态.分别是pending(等待态),fulfilled(完成态),rejected(拒绝态)<br>Promise 启动之后，当满足成功的条件时我们让状态从 pending 变成 fullfilled （执行 resolve）；当满足失败的条件，我们让状态从 pending 变成 rejected（执行 reject）</p>
<h3 id="Promise范例"><a href="#Promise范例" class="headerlink" title="Promise范例"></a>Promise范例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取IP</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIp</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>,<span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getIp'</span>,<span class="literal">true</span>)</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responText)</span><br><span class="line">      resolve(retJson.ip)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      reject(<span class="string">'获取IP失败'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//从IP获取城市</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCityFromIp</span>(<span class="params">ip</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>, <span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getCityFromIp?ip='</span>+ip, <span class="literal">true</span>)</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responText)</span><br><span class="line">      resolve(retJson.city)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      reject(<span class="string">'获取city失败'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过城市获取天气</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWeatherFromCity</span>(<span class="params">city&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">  return new Promise(function(resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>, <span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getWeatherFromCity?city='</span>+city, <span class="literal">true</span>)</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responText)</span><br><span class="line">      resolve(retJson)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      reject(<span class="string">'获取天气失败'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">getIp().then(<span class="function"><span class="keyword">function</span>(<span class="params">ip</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> getCityFromIp(ip)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">city</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> getWeatherFromCity(city)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'出现了错误'</span>,e)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//getIP()得到一个promise对象,传入ip,返回另一个promise对象,依次往下</span></span><br><span class="line"><span class="comment">//中途报错直接执行catch()</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCityFromIp</span>(<span class="params">ip</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>,<span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getCityFromIp?ip='</span>+ip<span class="string">',true)</span></span><br><span class="line"><span class="string">    xhr.onload = function()&#123;</span></span><br><span class="line"><span class="string">      var retJson = JSON.parse(xhr.responText)</span></span><br><span class="line"><span class="string">      resolve(retJson)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    xhr.onerror = function()&#123;</span></span><br><span class="line"><span class="string">      reject('</span>获取city失败<span class="string">')</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    xhr.send()</span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var p1 = getCityFromIp('</span><span class="number">10.10</span><span class="number">.10</span><span class="number">.1</span><span class="string">')</span></span><br><span class="line"><span class="string">var p2 = getCityFromIp('</span><span class="number">10.10</span><span class="number">.10</span><span class="number">.2</span><span class="string">')</span></span><br><span class="line"><span class="string">var p3 = getCityFromIp('</span><span class="number">10.10</span><span class="number">.10</span><span class="number">.3</span><span class="string">')</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//Promise.all, 当所有的 Promise 对象都完成后再执行</span></span><br><span class="line"><span class="string">Promise.all([p1,p2,p3]).then(data =&gt; &#123;</span></span><br><span class="line"><span class="string">  console.log(data)</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCityFromIp</span>(<span class="params">ip</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>, <span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getCityFromIp?ip='</span>+ip, <span class="literal">true</span>)</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responseText)  <span class="comment">// &#123;"city": "hangzhou","ip": "23.45.12.34"&#125;</span></span><br><span class="line">      resolve(retJson)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      reject(<span class="string">'获取city失败'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      xhr.send()</span><br><span class="line">    &#125;, <span class="built_in">Math</span>.random()*<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> promise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = getCityFromIp(<span class="string">'10.10.10.1'</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = getCityFromIp(<span class="string">'10.10.10.2'</span>)</span><br><span class="line"><span class="keyword">var</span> p3 = getCityFromIp(<span class="string">'10.10.10.3'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Promise.race, 谁的先输出就先执行谁</span></span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2, p3]).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="callback-amp-Promise-amp-async-await"><a href="#callback-amp-Promise-amp-async-await" class="headerlink" title="callback&amp;Promise&amp;async/await"></a>callback&amp;Promise&amp;async/await</h1><p>把一个需求不断简化<br>需求如下:</p>
<ol>
<li>读取 a.md 文件，得到内容</li>
<li>把内容转换成 HTML 字符串</li>
<li>把HTML 字符串写入 b.html</li>
</ol>
<h2 id="callback-处理"><a href="#callback-处理" class="headerlink" title="callback()处理"></a>callback()处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> markdown = <span class="built_in">require</span>(<span class="string">'markdown'</span>).markdown</span><br><span class="line">fs.readFile(<span class="string">'a.md'</span>, <span class="string">'UTF-8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err,str</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> html = markown.toHTML(str)</span><br><span class="line">  fs.writeFile(<span class="string">'b.html'</span>, html, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'write.success'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="ES6语法简化处理"><a href="#ES6语法简化处理" class="headerlink" title="ES6语法简化处理"></a>ES6语法简化处理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">let</span> markdown = <span class="built_in">require</span>(<span class="string">'markdown'</span>).markdown</span><br><span class="line">fs.readFile(<span class="string">'a.md'</span>, <span class="string">'UTF-8'</span>, (err, str)=&gt;&#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> html = markdown.toHTML(str)</span><br><span class="line">  fs.writeFile(<span class="string">'b.html'</span>, html, (err)=&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'write.success'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Promise处理"><a href="#Promise处理" class="headerlink" title="Promise处理"></a>Promise处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> markdown = <span class="built_in">require</span>(<span class="string">'markdown'</span>).markdown</span><br><span class="line"></span><br><span class="line">readFile(<span class="string">'a.md'</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">mdStr</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> markdown.toHTML(mdStr) <span class="comment">//返回结果作为下个回调函数</span></span><br><span class="line">  &#125;).then(<span class="function"><span class="params">html</span>=&gt;</span>&#123;</span><br><span class="line">    writeFile(<span class="string">'b.html'</span>, html)</span><br><span class="line">  &#125;).catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//对读取文件进行包装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    fs.readFlie(url, <span class="string">'UTF-8'</span>, (err, str)=&gt;&#123;</span><br><span class="line">      <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'readFlie error'</span>))</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        resolve(str)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//对写入文件进行包装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeFile</span>(<span class="params">url, data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    fs.writeFile(url, data, (err, str)=&gt;&#123;</span><br><span class="line">      <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'write error'</span>))</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用模块改装上面代码"><a href="#使用模块改装上面代码" class="headerlink" title="使用模块改装上面代码"></a>使用模块改装上面代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> markdown = <span class="built_in">require</span>(<span class="string">'markdown'</span>).markdown</span><br><span class="line"><span class="keyword">const</span> fsp = <span class="built_in">require</span>(<span class="string">'fs-promise'</span>) <span class="comment">//用于把fs变promise化</span></span><br><span class="line"><span class="keyword">let</span> onerror = <span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">'something wrong'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fsp.readFile(<span class="string">'a.md'</span>, <span class="string">'UTF-8'</span>)</span><br><span class="line">    .then(<span class="function">(<span class="params">mdStr</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> markdown.toHTML(mdStr)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">html</span>=&gt;</span>&#123;</span><br><span class="line">      fsp.writeFile(<span class="string">'b.html'</span>, html)</span><br><span class="line">    &#125;).catch(onerror)</span><br></pre></td></tr></table></figure>

<h2 id="async-await处理"><a href="#async-await处理" class="headerlink" title="async/await处理"></a>async/await处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> markdown = <span class="built_in">require</span>(<span class="string">'markdown'</span>).markdown</span><br><span class="line"><span class="keyword">const</span> fsp = <span class="built_in">require</span>(<span class="string">'fs-promise'</span>)</span><br><span class="line"><span class="keyword">let</span> onerror = <span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">'sonething wrong'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> mdStr = <span class="keyword">await</span> fsp.readFile(<span class="string">'a.md'</span>, <span class="string">'UTF-8'</span>)</span><br><span class="line">  <span class="keyword">let</span> html = markdown.toHTML(mdStr)</span><br><span class="line">  <span class="keyword">await</span> fsp.writeFile(<span class="string">'b.html'</span>, html)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start().catch(onerror)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/27/canvas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/27/canvas/" class="post-title-link" itemprop="url">canvas画板</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-27 13:39:26" itemprop="dateCreated datePublished" datetime="2019-08-27T13:39:26+08:00">2019-08-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-03 09:49:48" itemprop="dateModified" datetime="2019-09-03T09:49:48+08:00">2019-09-03</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/JS基础/" itemprop="url" rel="index"><span itemprop="name">JS基础</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>canvas本身没有绘图能力，只是定义了一个容器，都是由canvas内部的CanvasRenderingContext2D对象来做，需要我们用 JavaScript脚本 完成绘制工作。</p>
<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><ol>
<li><p>html引入<code>&lt;canvas&gt;</code>标签<br><code>&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;</code></p>
</li>
<li><p>js获取<code>&lt;canvas&gt;</code>属性,使用2d绘制上下文.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = getElementById(<span class="string">"canvas"</span>)</span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line"><span class="comment">//使用context进行绘制</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置宽高<br>使用<code>canvas.width</code>设置宽度.<code>canvas.height</code>设置高度.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;canvas id=<span class="string">"canvas"</span> sytle=<span class="string">"border: 1px solid #aaa;display: block;margin: 50px auto;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>)</span><br><span class="line">        canvas.width: <span class="number">1024</span>;</span><br><span class="line">        canvas.height: <span class="number">768</span>;</span><br><span class="line">        <span class="keyword">if</span>(canvas.getContext(<span class="string">"2d"</span>))&#123;</span><br><span class="line">            <span class="comment">//如果浏览器支持canvas,可以使用</span></span><br><span class="line">            <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            alert(<span class="string">'当前浏览器不支持,请使用谷歌浏览器'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>设置全屏</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pageWidth = <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line"><span class="keyword">let</span> pageHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line"></span><br><span class="line">canvas.width = pageWidth;</span><br><span class="line">canvas.height = pageHeight;</span><br></pre></td></tr></table></figure>

<h2 id="绘制线段"><a href="#绘制线段" class="headerlink" title="绘制线段"></a>绘制线段</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line">conext.beginPath()<span class="comment">//开始第一段绘制,与其他绘制可以区别开</span></span><br><span class="line">context.moveTo(<span class="number">100</span>,<span class="number">100</span>)<span class="comment">//以画布左上角为原点,从坐标(100,100)开始</span></span><br><span class="line">context.lineTO(<span class="number">700</span>,<span class="number">700</span>)<span class="comment">//把线画到(700,700)位置</span></span><br><span class="line">context.lineTO(<span class="number">100</span>,<span class="number">700</span>)<span class="comment">//折到(100,700)位置</span></span><br><span class="line">context.lineTO(<span class="number">100</span>,<span class="number">100</span>)<span class="comment">//线段完成封闭,形成三角形</span></span><br><span class="line">context.closePath()<span class="comment">//结束本段状态</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">context.fillStyle=<span class="string">"rgab(168,168,168)"</span><span class="comment">//设置三角形填充颜色</span></span><br><span class="line">context.fill()<span class="comment">//执行填充颜色</span></span><br><span class="line"></span><br><span class="line">context.lineWidth = <span class="number">5</span> <span class="comment">//设置线段宽度</span></span><br><span class="line">context.strokeStyle = <span class="string">"red"</span> <span class="comment">//设置线段颜色</span></span><br><span class="line">context.stroke<span class="comment">//执行绘图</span></span><br><span class="line"></span><br><span class="line">conext.beginPath()<span class="comment">//开始第二段绘制,与其他绘制可以区别开</span></span><br><span class="line">context.moveTo(<span class="number">200</span>,<span class="number">100</span>)<span class="comment">//以画布左上角为原点,从坐标(200,100)开始</span></span><br><span class="line">context.lineTO(<span class="number">700</span>,<span class="number">600</span>)<span class="comment">//把线画到(700,600)位置</span></span><br><span class="line">context.closePath()<span class="comment">//结束本段状态</span></span><br><span class="line"></span><br><span class="line">context.strokeStyle = <span class="string">"blue"</span> <span class="comment">//设置线段颜色</span></span><br><span class="line">context.stroke<span class="comment">//执行第二段绘图</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>标签属性</li>
</ol>
<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">height</td>
<td align="left">设置 canvas 的高度</td>
</tr>
<tr>
<td align="left">width</td>
<td align="left">设置 canvas 的宽度</td>
</tr>
<tr>
<td align="left">fill()</td>
<td align="left">可以填充</td>
</tr>
<tr>
<td align="left">fillRect(x,y,width,height)</td>
<td align="left">绘制一个矩形边框</td>
</tr>
<tr>
<td align="left">fillRect(x,y,width,height)</td>
<td align="left">绘制一个填充的矩形</td>
</tr>
<tr>
<td align="left">clearRect(x,y,width,height)</td>
<td align="left">清除指定矩形区域，让清除部分完全透明</td>
</tr>
<tr>
<td align="left">ctx.strokeStyle</td>
<td align="left">可以改变画笔颜色</td>
</tr>
<tr>
<td align="left">ctx.beginPath()</td>
<td align="left">设置开始路径</td>
</tr>
<tr>
<td align="left">ctx.moveTo(x,y)</td>
<td align="left">设置起点</td>
</tr>
<tr>
<td align="left">ctx.lineTo(x,y)</td>
<td align="left">设置终点</td>
</tr>
<tr>
<td align="left">ctx.stroke()</td>
<td align="left">绘制</td>
</tr>
<tr>
<td align="left">ctx.closePath()</td>
<td align="left">结束路径</td>
</tr>
<tr>
<td align="left">ctx.arc(弧形圆心x坐标，y坐标，半径，起始角(以3点钟的位置开始)，结束角、方向(true表示逆时针，false表示顺时针))</td>
<td align="left">绘制一个弧形</td>
</tr>
<tr>
<td align="left">ctx.quadraticCurveTo(cpx,cpy,x,y)参数是控制点x坐标，控制点y坐标，结束点x坐标，结束点y坐标</td>
<td align="left">绘制二次贝塞尔曲线</td>
</tr>
<tr>
<td align="left">ctx.quadraticCurveTo(cpx1,cpy1,cpx2,cpy2,x,y)参数是控制点1的x坐标，控制点1的y坐标，控制点2的x坐标，控制点2的y坐标，结束点x坐标，结束点y坐标</td>
<td align="left">绘制三次贝塞尔曲线</td>
</tr>
</tbody></table>
<ol start="3">
<li>canvas画板代码实现<h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS Bin<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"actions"</span><span class="attr">class</span>=<span class="string">"actions x"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">"pen"</span><span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#icon-pencil"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">"eraser"</span><span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#icon-eraser"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">"clear"</span><span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#icon-delete"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">"download"</span><span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#icon-download"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">'colorCir'</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"black"</span><span class="attr">class</span>=<span class="string">"black"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"red"</span><span class="attr">class</span>=<span class="string">"red"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"yellow"</span><span class="attr">class</span>=<span class="string">"yellow"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"blue"</span><span class="attr">class</span>=<span class="string">"blue"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">'lineWidth'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"thin"</span> <span class="attr">class</span>=<span class="string">"thin"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"thick"</span> <span class="attr">class</span>=<span class="string">"thick"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>:<span class="number">#eee</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.colorCir</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid grey;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>:<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.red</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>:red;</span><br><span class="line">&#125;     </span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.yellow</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>:yellow;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.blue</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>:blue;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.black</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>:black;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.red</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.yellow</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.blue</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colorCir</span> <span class="selector-class">.black</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1em</span>; <span class="attribute">height</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: -<span class="number">0.15em</span>;</span><br><span class="line">    <span class="attribute">fill</span>: currentColor;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#canvas</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.actions</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>:<span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.actions</span> <span class="selector-tag">svg</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.actions</span> <span class="selector-tag">svg</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">fill</span>:red; </span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lineWidth</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">left</span>:-<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">140px</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lineWidth</span> <span class="selector-class">.thin</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">border-top</span>:<span class="number">2px</span> solid black;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lineWidth</span> <span class="selector-class">.thick</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">border-top</span>:<span class="number">6px</span> solid black;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lineWidth</span> <span class="selector-class">.thin</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lineWidth</span> <span class="selector-class">.thick</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas=<span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="keyword">var</span> context=canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> using=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> lastPoint=&#123;</span><br><span class="line">    x:<span class="literal">undefined</span>,</span><br><span class="line">    y:<span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*画板逻辑 */</span></span><br><span class="line"></span><br><span class="line">autoSetSize(canvas);</span><br><span class="line"></span><br><span class="line">listenToUser(canvas);</span><br><span class="line"></span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"><span class="comment">//画笔、橡皮擦按钮替换</span></span><br><span class="line"><span class="keyword">var</span> eraserEnabled=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">pen.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    eraserEnabled=<span class="literal">false</span>;</span><br><span class="line">    pen.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    eraser.classList.remove(<span class="string">'active'</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eraser.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    eraserEnabled=<span class="literal">true</span>;</span><br><span class="line">    eraser.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    pen.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//颜色替换并高亮</span></span><br><span class="line">red.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"red"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"red"</span>;</span><br><span class="line">    red.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    yellow.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    blue.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    black.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line">yellow.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"yellow"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"yellow"</span>;</span><br><span class="line">    yellow.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    red.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    blue.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    black.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line">blue.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"blue"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"blue"</span>;</span><br><span class="line">    blue.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    yellow.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    red.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    black.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line">black.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"black"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"black"</span>;</span><br><span class="line">    black.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    yellow.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    blue.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    red.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"></span><br><span class="line">thin.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    thin.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    thick.classList.remove(<span class="string">'active'</span>);    </span><br><span class="line">    context.lineWidth=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">thick.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    thick.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    thin.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    context.lineWidth=<span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">clear.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvas.clientWidth,canvas.clientHeight);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">download.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = canvas.toDataURL(<span class="string">'image/png'</span>);</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line">    a.href=url;</span><br><span class="line">    a.download=<span class="string">'my drawing'</span>;</span><br><span class="line">    a.click();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//drawLine</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawLine</span>(<span class="params">x1,y1,x2,y2</span>)</span>&#123;</span><br><span class="line">    context.beginPath();</span><br><span class="line">    context.moveTo(x1,y1);</span><br><span class="line">    context.lineTo(x2,y2);</span><br><span class="line">    context.stroke();</span><br><span class="line">    context.closePath();  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//drawCir</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawCir</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">context.beginPath()</span><br><span class="line">context.arc(x,y,<span class="number">0.1</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI*<span class="number">2</span>);</span><br><span class="line">context.fill();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重置canvas画板宽高</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCanvasSize</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pageWidth=<span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">    <span class="keyword">var</span> pageHeight=<span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">   </span><br><span class="line">    canvas.width = pageWidth;</span><br><span class="line">    canvas.height = pageHeight;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自动设置canvas画板宽高</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">autoSetSize</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    setCanvasSize();    </span><br><span class="line">    <span class="built_in">window</span>.onresize =<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        setCanvasSize();</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preventBehavior</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"touchmove"</span>, preventBehavior, <span class="literal">false</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listenToUser</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//特性检测</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">document</span>.body.ontouchstart!== <span class="literal">undefined</span> )&#123;                    </span><br><span class="line">        <span class="comment">//是触屏设备</span></span><br><span class="line">        canvas.ontouchstart =<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.touches[<span class="number">0</span>].clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.touches[<span class="number">0</span>].clientY;</span><br><span class="line">            using=<span class="literal">true</span>;</span><br><span class="line">            lastPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;;</span><br><span class="line">            <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                drawCir(x,y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        canvas.ontouchmove = <span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.touches[<span class="number">0</span>].clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.touches[<span class="number">0</span>].clientY;</span><br><span class="line">            <span class="keyword">var</span> newPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;</span><br><span class="line">            <span class="keyword">if</span>(using)&#123;</span><br><span class="line">                <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                    context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    drawCir(x,y);</span><br><span class="line">                    drawLine(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y)</span><br><span class="line">                    lastPoint=newPoint;      </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        canvas.ontouchend = <span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            using=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//不是触屏设备</span></span><br><span class="line">        canvas.onmousedown=<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.clientY;</span><br><span class="line">            using=<span class="literal">true</span>;</span><br><span class="line">            lastPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;;</span><br><span class="line">            <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                drawCir(x,y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//鼠标移动监听</span></span><br><span class="line">        canvas.onmousemove=<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.clientY;</span><br><span class="line">            <span class="keyword">var</span> newPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;</span><br><span class="line">            <span class="keyword">if</span>(using)&#123;</span><br><span class="line">                <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                    context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    drawCir(x,y);</span><br><span class="line">                    drawLine(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y)</span><br><span class="line">                    lastPoint=newPoint;      </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;       </span><br><span class="line">        <span class="comment">//鼠标松开监听</span></span><br><span class="line">        canvas.onmouseup=<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            using=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/23/css/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/23/css/" class="post-title-link" itemprop="url">CSS</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-23 16:54:50" itemprop="dateCreated datePublished" datetime="2019-08-23T16:54:50+08:00">2019-08-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-08-27 14:16:16" itemprop="dateModified" datetime="2019-08-27T14:16:16+08:00">2019-08-27</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/css/" itemprop="url" rel="index"><span itemprop="name">css</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/css/css3/" itemprop="url" rel="index"><span itemprop="name">css3</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>css,即层叠样式表,可以为网页添加样式.</p>
<h1 id="应用方式"><a href="#应用方式" class="headerlink" title="应用方式"></a>应用方式</h1><h2 id="外部样式表"><a href="#外部样式表" class="headerlink" title="外部样式表"></a>外部样式表</h2><ol>
<li><p>通过<code>&lt;link&gt;</code>引入<br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;index.css&quot;&gt;</code></p>
</li>
<li><p>通过<code>@import</code>引入,注意末尾加;号,CSS语法,只能在CSS内使用.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@<span class="keyword">import</span> url(<span class="string">"index.css"</span>);</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"index.css"</span>;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>媒体查询(响应式)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@media (min-width: <span class="number">801</span>px) &#123;</span><br><span class="line">  body &#123;</span><br><span class="line">    margin: <span class="number">0</span> auto;</span><br><span class="line">    width: <span class="number">800</span>px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="内部样式表"><a href="#内部样式表" class="headerlink" title="内部样式表"></a>内部样式表</h2><p>将css放到<code>&lt;style&gt;</code>元素中,一般放到文档的<code>&lt;&gt;</code>中.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span> /&gt;</span><br><span class="line">&lt;title&gt;CSS&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;style&gt;</span></span><br><span class="line"><span class="regexp">h1 &#123;</span></span><br><span class="line"><span class="regexp">    background: red;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;h1&gt;AMD yes!&lt;/</span>h1&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="内联样式"><a href="#内联样式" class="headerlink" title="内联样式"></a>内联样式</h2><p><code>&lt;p style=&quot;background: red; font-size: 20px;&quot;&gt;AMD yes!&lt;p&gt;</code></p>
<h1 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h1><table>
<thead>
<tr>
<th align="left">基本选择器</th>
<th align="left">名称</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">*</td>
<td align="left">通用选择器</td>
<td align="left">匹配任何元素</td>
</tr>
<tr>
<td align="left">E</td>
<td align="left">标签选择器</td>
<td align="left">匹配所有使用E标签的元素</td>
</tr>
<tr>
<td align="left">.info</td>
<td align="left">class选择器</td>
<td align="left">匹配所有class属性中包含info的元素</td>
</tr>
<tr>
<td align="left">#footer</td>
<td align="left">id选择器</td>
<td align="left">匹配所有id属性等于footer的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">组合选择器</th>
<th align="left">名称</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E,F</td>
<td align="left">多元素选择器</td>
<td align="left">同时匹配所有E元素或F元素</td>
</tr>
<tr>
<td align="left">E F</td>
<td align="left">后代选择器</td>
<td align="left">匹配所有属于E元素后代的F元素</td>
</tr>
<tr>
<td align="left">E&gt;F</td>
<td align="left">子元素选择器</td>
<td align="left">匹配所有E元素的直接子元素</td>
</tr>
<tr>
<td align="left">E+F</td>
<td align="left">直接相邻元素选择器</td>
<td align="left">匹配E元素后的直接相邻元素</td>
</tr>
<tr>
<td align="left">E~F</td>
<td align="left">兄弟元素选择器</td>
<td align="left">匹配E元素后的所有兄弟元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">属性选择器</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E[attr]</td>
<td align="left">匹配所有具有attr属性的E元素</td>
</tr>
<tr>
<td align="left">E[attr=val]</td>
<td align="left">匹配所有attr属性等于val的E元素</td>
</tr>
<tr>
<td align="left">E[attr~=val]</td>
<td align="left">匹配所有attr属性具有多个空格分隔的值,其中一个等于val的E元素</td>
</tr>
<tr>
<td align="left">E[attr</td>
<td align="left">=val]</td>
</tr>
<tr>
<td align="left">E[attr*=val]</td>
<td align="left">匹配所有attr属性中包含val的E元素</td>
</tr>
<tr>
<td align="left">E[attr^=val]</td>
<td align="left">匹配所有attr属性中以val开头的E元素</td>
</tr>
<tr>
<td align="left">E[attr$=val]</td>
<td align="left">匹配所有attr属性中以val结尾的E元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">伪类</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E:first-child</td>
<td align="left">匹配父元素的第一个子元素</td>
</tr>
<tr>
<td align="left">E:link</td>
<td align="left">匹配所有未被点击的链接</td>
</tr>
<tr>
<td align="left">E:visited</td>
<td align="left">匹配所有已被点击的链接</td>
</tr>
<tr>
<td align="left">E:active</td>
<td align="left">匹配鼠标已经按下没有释放的E元素</td>
</tr>
<tr>
<td align="left">E:hover</td>
<td align="left">匹配鼠标悬停其上的E元素</td>
</tr>
<tr>
<td align="left">E:focus</td>
<td align="left">匹配获得焦点的E元素</td>
</tr>
<tr>
<td align="left">E:enabled</td>
<td align="left">匹配表单中激活的元素</td>
</tr>
<tr>
<td align="left">E:disabled</td>
<td align="left">匹配表单中禁用的元素</td>
</tr>
<tr>
<td align="left">E:checked</td>
<td align="left">匹配表单中被选中的radio或者checkbox元素</td>
</tr>
<tr>
<td align="left">E:root</td>
<td align="left">匹配文档的根元素,对于html文档,就是html元素</td>
</tr>
<tr>
<td align="left">E:nth-child(n)</td>
<td align="left">匹配其父元素的第n个子元素,第一个编号为1</td>
</tr>
<tr>
<td align="left">E:nth-last-child(n)</td>
<td align="left">匹配其父元素的倒数第n个子元素,第一个编号为1</td>
</tr>
<tr>
<td align="left">E:nth-of-type</td>
<td align="left">与nth-child类似,但仅匹配使用同种标签的元素</td>
</tr>
<tr>
<td align="left">E:nth-last-child</td>
<td align="left">与nth-last-child类似,但仅匹配使用同种标签的元素</td>
</tr>
<tr>
<td align="left">E:last-child</td>
<td align="left">匹配父元素的最后一个元素</td>
</tr>
<tr>
<td align="left">E:first-of-type</td>
<td align="left">匹配父元素下使用同种标签的第一个子元素</td>
</tr>
<tr>
<td align="left">E:last-of-type</td>
<td align="left">匹配父元素下使用同种标签的最后一个子元素</td>
</tr>
<tr>
<td align="left">E:only-child</td>
<td align="left">匹配父元素下仅有的一个子元素，等同于:first-child:last-child或 :nth-child(1):nth-last-child(1)</td>
</tr>
<tr>
<td align="left">E:only-of-type</td>
<td align="left">匹配父元素下使用同种标签的唯一一个子元素，等同于:first-of-type:last-of-type或 :nth-of-type(1):nth-last-of-type(1)</td>
</tr>
<tr>
<td align="left">E:empty</td>
<td align="left">匹配一个不包含任何子元素的元素,注意,文本节点也被看做子元素</td>
</tr>
<tr>
<td align="left">E:not(s)</td>
<td align="left">匹配不符合当前选择器的任何元素</td>
</tr>
<tr>
<td align="left">E:target</td>
<td align="left">代表一个唯一的页面元素(目标元素)，其id 与当前URL片段匹配</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">伪元素</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E::first-line</td>
<td align="left">匹配E元素的第一行</td>
</tr>
<tr>
<td align="left">E::first-letter</td>
<td align="left">匹配E元素的第一个字母</td>
</tr>
<tr>
<td align="left">E::before</td>
<td align="left">在E元素之前插入生成的内容</td>
</tr>
<tr>
<td align="left">E::after</td>
<td align="left">在E元素之后插入生成的内容</td>
</tr>
<tr>
<td align="left">E::selection</td>
<td align="left">匹配用户当前选中的元素</td>
</tr>
<tr>
<td align="left">&gt;伪元素必须要有<code>content</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"># 选择器优先级</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">!important优先级最高(由于IE不支持!important，所以也可以利用它区分不同的浏览器。)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">行内样式 &gt; id样式 &gt; class样式 &gt; 标签名样式</td>
<td align="left"></td>
</tr>
</tbody></table>
<h1 id="CSS基本样式"><a href="#CSS基本样式" class="headerlink" title="CSS基本样式"></a>CSS基本样式</h1><p>div（块级元素）：高度是由内部文档流元素高度的总和决定的。<strong>文档流</strong>：文档内元素的流动方向，<strong>内联元素</strong>是从左往右，<strong>块级元素</strong>是从上往下<br>span（内联元素）：高度是由其中文字高度决定的，内联元素设置width和height是无效的，上下的margin和padding也无效，要将它们设为<code>display:inline-block</code>才有效。</p>
<ul>
<li>常见块级元素: <code>div h1~h6 p hr form ul ol li table td tr th dl dt dd pre</code></li>
<li>常见内联元素: <code>em strong span a br img button input label select textarea code script</code><blockquote>
<p>尽量不写height和width，这两个属性会引出很多bug，要宽高的时候可以用padding，但img最好先写width，因为可以先占位，因为引用图片时浏览器不知道图片大小，所有等图片下载完成，它后面的元素又要重新排位置，若先写好width，则不用重排，知道height也可以先写好height。<br>另外span元素设置padding的时候要将它设为display:inline-block，因为内联元素不能设置宽高，inline-block具有inline的同行特性，也具有block的高度特性。<br>对于display:inline(内联元素)的元素，设置width/height/上下margin和padding都是无效的</p>
</blockquote>
<h2 id="inline-block"><a href="#inline-block" class="headerlink" title="inline-block"></a>inline-block</h2></li>
</ul>
<ol>
<li>inline-block 之间空隙</li>
</ol>
<ul>
<li>inline-block 之间有空格、Tab、换行符。</li>
<li>给父元素设置 font-size: 0，在 inline-block 元素上重新设置 font-size。</li>
</ul>
<ol start="2">
<li>inline-block 导致父元素增高若干像素</li>
</ol>
<ul>
<li>给 inline-block 元素设置 vertical-align: top</li>
</ul>
<p><strong>通用解决办法</strong> 不要设置 inline-block，使用 float 或 flex。</p>
<h2 id="浏览器默认样式"><a href="#浏览器默认样式" class="headerlink" title="浏览器默认样式"></a>浏览器默认样式</h2><p>浏览器对某些元素设置有默认样式，如 h1, ul, li 等。</p>
<h3 id="常见处理方式"><a href="#常见处理方式" class="headerlink" title="常见处理方式"></a>常见处理方式</h3><ol>
<li>Normalize.css</li>
<li>CSS Reset</li>
<li>简单去除<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  margin: <span class="number">0</span>;</span><br><span class="line">  padding: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="CSS常见样式"><a href="#CSS常见样式" class="headerlink" title="CSS常见样式"></a>CSS常见样式</h2><h3 id="边框border"><a href="#边框border" class="headerlink" title="边框border"></a>边框border</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  border-width: <span class="number">1</span>px;</span><br><span class="line">  border-color: red;</span><br><span class="line">  border-style: solid;</span><br><span class="line">  border-bottom: none;<span class="comment">//下边框消失</span></span><br><span class="line">  border-radius: <span class="number">50</span>%;<span class="comment">//圆角</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line">.box2 &#123;</span><br><span class="line">  border: <span class="number">1</span>px red solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="内边距padding"><a href="#内边距padding" class="headerlink" title="内边距padding"></a>内边距padding</h3><p><code>padding: 10px 20px 30px;//按照上右下左,即顺时针,缺哪个补哪个,缺左边,按20px补上.</code></p>
<h3 id="外边距margin"><a href="#外边距margin" class="headerlink" title="外边距margin"></a>外边距margin</h3><p>margin可以合写,可以分开.可以是数值,可以是百分比(相对于父元素).还可以是负值.有外边距合并问题</p>
<h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><ul>
<li>块级: block,list-item,table</li>
<li>行内: inline,inline-table,inline-block<h3 id="font"><a href="#font" class="headerlink" title="font"></a>font</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">body&#123; </span><br><span class="line">  font: <span class="number">12</span>px/<span class="number">1.5</span> Arial;</span><br><span class="line">&#125;</span><br><span class="line">p&#123;</span><br><span class="line">  line-height: <span class="number">1.5</span>;<span class="comment">//行高是字体的1.5倍</span></span><br><span class="line">  font-size: <span class="number">14</span>px;<span class="comment">//字体大小</span></span><br><span class="line">  font-family: Arial;<span class="comment">//字体</span></span><br><span class="line">  font-weight: bold;<span class="comment">//文字粗度,粗体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>Chrome默认字体是16px,最小字体是12px.</p>
</blockquote>
<h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><ul>
<li>text-aglin: 文本对齐方式,left,right,center,justify</li>
<li>text-ident: 文案第一行缩进距离</li>
<li>text-decoration: 划线,none,underline,line-through,overline</li>
<li>text-transform: 改变文字大小写,none,uppercase,lowercase,captialize</li>
<li>word-spacing: 可以改变字(单词)之间的标准间距</li>
<li>letter-spacing: 字母之间的间隔<h4 id="单行文本溢出加…"><a href="#单行文本溢出加…" class="headerlink" title="单行文本溢出加…"></a>单行文本溢出加…</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.box&gt;h3 &#123;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  text-overflow: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><ul>
<li>单词: red,blue,black,pink,yellow</li>
<li>十六进制: #000000(黑),#fff(白),#eee(淡灰),#ccc(灰色),#666(深灰)</li>
<li>rgb:rgb(255,255,255)白色,rgba(0,0,0,0.5)透明度为0.5的黑色<h3 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h3>px rpx em rem的区别</li>
</ul>
<ol>
<li>px是像素pixel，相对于屏幕分辨率的单位</li>
<li>em是相对单位，相对于当前对象内的文本尺寸。如果没有设置，则相对浏览器默认尺寸16px，1em=16px。<br>为了简化，可以将body里font-size=62.5%，那么em就是16px*62%=10px。1em=10px</li>
</ol>
<p><strong>em特点</strong>：em值不固定，会继承父元素字体大小</p>
<ol start="3">
<li>rem是root em。只相对于html根元素</li>
<li>rpx是微信小程序的方案<br>1px=2rpx</li>
<li>vh vw: 相对单位,1vw为屏幕宽度的1%<h3 id="background"><a href="#background" class="headerlink" title="background"></a>background</h3></li>
</ol>
<ul>
<li>background-color: transparent 透明背景;颜色值;半透明浮层的背景颜色建议使用 rgba() 而不是 opacity 设置透明度。</li>
<li>background-image: url(../images/bg.png);// 属性用于给元素设置一张或多张背景图。</li>
<li>background-repeat 控制背景图片的重复方式。<code>no-repeat</code>不重复;<code>repeat-x</code>水平方向重复;<code>repeat-y</code> 垂直方向重复;</li>
<li>background-position 设置背景图的位置。<code>x y</code>;<code>x% y%</code>;<code>[top|center|bottom][left|center|right]</code></li>
<li>background-size 设定背景图片的大小。IE9 以下不支持;<code>cover</code>缩放背景图片以完全覆盖背景区，可能背景图片部分看不见;<code>contain</code>缩放背景图片以完全装入背景区，可能背景区部分空白。</li>
<li>background-clip: 设置元素背景区域覆盖的范围.border-box 覆盖至边框的最外围;padding-box 覆盖至内边距的最外围;content-box 仅覆盖元素内容区域</li>
</ul>
<p>缩写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.avatar &#123;</span><br><span class="line">  background: #fff url(avatar.svg) no-repeat left center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="隐藏or透明"><a href="#隐藏or透明" class="headerlink" title="隐藏or透明"></a>隐藏or透明</h3><ul>
<li>opacity: 0;//透明度为0,整体</li>
<li>visibility: hidden;//和opacity: 0;类似</li>
<li>display: none;//消失,不占用位置</li>
<li>background-color: rgba(0,0,0,0.2);//只是背景色透明<h3 id="box-shadow"><a href="#box-shadow" class="headerlink" title="box-shadow"></a>box-shadow</h3><code>box-shadow: -16px 0 16px 1px rgba(102,102,102,0.4);</code><br>第一个值代表阴影左右偏移，正数往右，负数往左<br>第二个值代表上下偏移，正往下，负往上<br>第三个值越大，模糊面积越大越淡<br>第四个值取正值时，阴影扩大，取负值时，阴影收缩<h3 id="line-height"><a href="#line-height" class="headerlink" title="line-height"></a>line-height</h3></li>
<li>line-height: 2;//本身字体高度的2倍</li>
<li>line-height: 200%;//父元素高度的2倍,父元素没写行高就是默认16px*2=32px</li>
<li>height=line-height;//垂直居中单行文本<h3 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h3></li>
<li>标准盒模型: border-box,即padding,border不在width,height范围内</li>
<li>IE盒模型: content-box,即width=content尺寸+padding+border<blockquote>
<p>css3可以设置<code>box-sizing: content-box;//标准盒模型</code></p>
</blockquote>
<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2>CSS position属性用于指定一个元素在文档中的定位方式。<br>语法: <code>static | relative | absolute | sticky | fixed</code></li>
</ul>
<ol>
<li>static: 该关键字指定元素使用正常的布局行为，即元素在文档常规流中当前的布局位置。此时 <code>top, right, bottom, left 和 z-index</code> 属性无效。</li>
<li>relative: 该关键字下，元素先放置在未添加定位时的位置，再在不改变页面布局的前提下调整元素位置（因此会在此元素未添加定位时所在位置留下空白）。<code>position:relative</code> 对 table元素无效.</li>
<li>absolute: 不为元素预留空间，通过指定元素相对于最近的非 static 定位父元素的偏移，来确定元素位置。绝对定位的元素可以设置外边距（margins），且不会与其他边距合并。</li>
<li>fixed: 不为元素预留空间，而是通过指定元素相对于屏幕视口（viewport）的位置来指定元素位置。元素的位置在屏幕滚动时不会改变。fixed 属性会创建新的层叠上下文。当元素祖先的 transform  属性非 none 时，容器由视口改为该祖先。</li>
<li>sticky: 盒位置根据正常流计算(这称为正常流动中的位置)，然后相对于该元素在流中的 flow root（BFC）和 containing block（最近的块级祖先元素）定位。在所有情况下（即便被定位元素为 table 时），该元素定位均不对后续元素造成影响。当元素 B 被粘性定位时，后续元素的位置仍按照 B 未定位时的位置来确定。<h3 id="相对定位-relative"><a href="#相对定位-relative" class="headerlink" title="相对定位(relative)"></a>相对定位(relative)</h3>相对定位的元素是在文档中的正常位置偏移给定的值，但是不影响其他元素的偏移。<h3 id="绝对定位-absolute-fixed"><a href="#绝对定位-absolute-fixed" class="headerlink" title="绝对定位(absolute,fixed)"></a>绝对定位(absolute,fixed)</h3>相对定位的元素并未脱离文档流，而绝对定位的元素则脱离了文档流。在布置文档流中其它元素时，绝对定位元素不占据空间。绝对定位元素相对于最近的非 static 祖先元素定位。当这样的祖先元素不存在时，则相对于ICB（inital container block, 初始包含块）。<h3 id="固定定位-fixed"><a href="#固定定位-fixed" class="headerlink" title="固定定位(fixed)"></a>固定定位(fixed)</h3>固定定位与绝对定位相似，但元素的包含块为 viewport 视口。该定位方式常用于创建在滚动屏幕时仍固定在相同位置的元素。<h3 id="粘性定位-sticky"><a href="#粘性定位-sticky" class="headerlink" title="粘性定位(sticky)"></a>粘性定位(sticky)</h3>粘性定位可以被认为是相对定位和固定定位的混合。元素在跨越特定阈值前为相对定位，之后为固定定位。<br><code>#one { position: sticky; top: 10px; }</code><br>在 viewport 视口滚动到元素 top 距离小于 10px 之前，元素为相对定位。之后，元素将固定在与顶部距离 10px 的位置，直到 viewport 视口回滚到阈值以下。(理解为大于10px时,属于相对定位,可以在页面滚动时随之滚动,当距视口10px时,固定了,就像粘在那里了)<h2 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h2><code>float: left;//向左浮动</code></li>
</ol>
<ul>
<li>浮动元素并不是完全意义上的脱离文档流,至少普通元素里的文本可以发现,行内元素也可以发现</li>
<li>设置浮动会让块级元素从左到右或从右到左排列.</li>
<li>块级元素设置浮动呈现inline-block特性,不再撑开父元素,宽度也会收缩</li>
<li>行内元素设置浮动呈现inline-block特性,可以设置宽高.<h3 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h3>问题:</li>
<li>对后续元素位置产生影响</li>
<li>父容器高度计算出现问题<br>通用解决方案<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">父元素加clearfix</span><br><span class="line">.clearfix::after&#123;</span><br><span class="line">  content:<span class="string">''</span>;</span><br><span class="line">  display: block;</span><br><span class="line">  clear: both;</span><br><span class="line">&#125;</span><br><span class="line">.clearfix&#123;</span><br><span class="line">  *zoom: <span class="number">1</span></span><br><span class="line">  <span class="comment">//兼容IE6,7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="BFC-块级格式化上下文"><a href="#BFC-块级格式化上下文" class="headerlink" title="BFC(块级格式化上下文)"></a>BFC(块级格式化上下文)</h2><p>决定了其子元素将如何定位,以及其他元素的关系和相互作用<br>在正常流中的盒子要么属于块级格式化上下文,要么属于内联格式化上下文</p>
<h3 id="BFC的产生"><a href="#BFC的产生" class="headerlink" title="BFC的产生"></a>BFC的产生</h3><ol>
<li>根元素</li>
<li>float不为none;</li>
<li>position: absolute/fixed;</li>
<li>display: inline-block/flex/inline-flex/table-cell;</li>
<li>overflow不为visible;</li>
</ol>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ol>
<li>内部的Box会在垂直方向，一个接一个地放置。</li>
<li>Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠每个元素的margin box的左边，与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。</li>
<li>BFC的区域不会与float box重叠。</li>
<li>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</li>
<li>计算BFC的高度时，浮动元素也参与计算<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3></li>
<li>阻止margin合并</li>
<li>contain float</li>
</ol>
<h2 id="边距合并"><a href="#边距合并" class="headerlink" title="边距合并"></a>边距合并</h2><h3 id="合并场景"><a href="#合并场景" class="headerlink" title="合并场景"></a>合并场景</h3><ol>
<li>相邻元素合并,间距为二者中较大值</li>
<li>父子合并</li>
<li>自己合并<h3 id="取消合并"><a href="#取消合并" class="headerlink" title="取消合并"></a>取消合并</h3></li>
<li>加border,padding</li>
<li>BFC</li>
</ol>
<h1 id="CSS布局"><a href="#CSS布局" class="headerlink" title="CSS布局"></a>CSS布局</h1><h2 id="单栏布局"><a href="#单栏布局" class="headerlink" title="单栏布局"></a>单栏布局</h2><p>方式: 定宽+水平居中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">.layout&#123;</span><br><span class="line">max-width: <span class="number">100</span>px;</span><br><span class="line">margin: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<p>通栏的话再加一层div,单独给div设置背景色即可</p>
<h2 id="双列布局"><a href="#双列布局" class="headerlink" title="双列布局"></a>双列布局</h2><p>固定margin+浮动元素<br>先设置浮动,再设置普通元素,最后清除浮动</p>
<h2 id="flex布局"><a href="#flex布局" class="headerlink" title="flex布局"></a>flex布局</h2><h3 id="display-flex"><a href="#display-flex" class="headerlink" title="display:flex"></a>display:flex</h3><p>一个容器 设置了<code>display:flex</code>属性,就定义了一个flex容器.它的直接子元素会接受这个flex环境.</p>
<h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.container&#123;</span><br><span class="line">    flex-direction: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置子元素在父容器中的位置<br>1.row默认值,水平从左到右<br>2.row-reverse,从右到左<br>3.column,垂直从上到下<br>4.column-reverse,垂直从下到上</p>
<h3 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h3><p>设置换行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  flex-wrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br><span class="line">依次为:不换行,换行,换行切颠倒顺序</span><br></pre></td></tr></table></figure>

<h3 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h3><p><code>flex-direction</code>和<code>flex-wrap</code>的缩写,默认值<code>row nowrap</code><br><code>flex-flow: &lt;&#39;flex-direction&#39;&gt; || &lt;&#39;flex-wrap&#39;&gt;</code></p>
<h3 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h3><p>设置子元素在水平方向上的对齐方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  justify-content: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br><span class="line">分别是水平靠左,水平靠右,水平居中,均匀分布,均匀分布且两端保留子元素间距一半(空间包裹)</span><br></pre></td></tr></table></figure>

<h3 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h3><p>设置子元素在垂直方向上的对齐方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  align-items: flex-start |  flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br><span class="line">分别是垂直靠上,垂直靠下,垂直居中,垂直基线对齐,垂直方向拉伸</span><br></pre></td></tr></table></figure>

<h3 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h3><p>设置子元素整体内容的在垂直方向上的对齐方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  align-content: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br><span class="line">分别是整体靠上,整体靠下,整体居中,整体垂直拉伸,整体垂直均匀排列,整体均匀分布且垂直两端保留间距一半空间</span><br></pre></td></tr></table></figure>

<h2 id="用在子元素上的属性"><a href="#用在子元素上的属性" class="headerlink" title="用在子元素上的属性"></a>用在子元素上的属性</h2><h3 id="order"><a href="#order" class="headerlink" title="order"></a>order</h3><p>默认情况下flex order会按照书写顺序排列,可以通过order属性改变,数值小的在前面,也可以是负数.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  order: <span class="xml"><span class="tag">&lt;<span class="name">integer</span>&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h3><p><code>.item {flex-grow: 1}</code><br>按比例瓜分父元素剩余的空间,1即分一份.不写默认是0</p>
<h3 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h3><p>基准宽度</p>
<h3 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h3><p>按比例吸收超出的空间.不写默认是1</p>
<h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><blockquote>
<p>flex-grow,flex-shrink,flex-basis的缩写</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item&#123;</span><br><span class="line">  flex: none | [ <span class="xml"><span class="tag">&lt;<span class="name">'flex-grow'</span>&gt;</span> <span class="tag">&lt;<span class="name">'flex-shrink'</span>&gt;</span> || <span class="tag">&lt;<span class="name">''flex-basis'</span>&gt;</span>]</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="aglin-self"><a href="#aglin-self" class="headerlink" title="aglin-self"></a>aglin-self</h3><p>单独修改自身的属性</p>
<h2 id="Grid布局"><a href="#Grid布局" class="headerlink" title="Grid布局"></a>Grid布局</h2><h3 id="父元素Grid-container的属性"><a href="#父元素Grid-container的属性" class="headerlink" title="父元素Grid container的属性"></a>父元素Grid container的属性</h3><h4 id="display-1"><a href="#display-1" class="headerlink" title="display"></a>display</h4><p>将元素定义为gird container,并为其建立新的网格格式化上下文</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  display: grid | inline-grid |   subgrid;</span><br><span class="line">&#125;</span><br><span class="line">分别是生成一个块级网格;一行网格;如果本身是gird-item,可从父元素获取行列大小</span><br></pre></td></tr></table></figure>

<h3 id="gird-template-columns和gird-template-rows"><a href="#gird-template-columns和gird-template-rows" class="headerlink" title="gird-template-columns和gird-template-rows"></a>gird-template-columns和gird-template-rows</h3><p>设置网格的列和行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  gird-template-columns: <span class="number">40</span>px <span class="number">50</span>px auto <span class="number">50</span>px <span class="number">40</span>px;</span><br><span class="line">  grid-template-rows: <span class="number">25</span>% <span class="number">100</span>px auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>简化写法’’</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line"> gird-template-columns: repeat(<span class="number">3</span>, <span class="number">20</span>px [col-start]) <span class="number">5</span>%;</span><br><span class="line">&#125;</span><br><span class="line">等价于</span><br><span class="line">.container&#123;</span><br><span class="line">  gird-template-columns: <span class="number">20</span>px [col-start] <span class="number">20</span>px [col-start] <span class="number">20</span>px [col-start] <span class="number">5</span>%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>“fr”单位允许将轨道大小设置为网格容器自由空间的一部分.<br>如下代码会将每个gird item设置为gird container宽度的三分之一</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  .grid-template-columns: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="gird-template-areas"><a href="#gird-template-areas" class="headerlink" title="gird-template-areas"></a>gird-template-areas</h3><ol>
<li><gird-area-name>  — 使用gird-area属性设置的网络区域的名称</gird-area-name></li>
<li>.  — 点号代表一个空网格单元</li>
<li>none — 没有定义网格单元<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.item-a &#123;</span><br><span class="line">  grid-area: header;</span><br><span class="line">&#125;</span><br><span class="line">.item-b &#123;</span><br><span class="line">  grid-area: main;</span><br><span class="line">&#125;</span><br><span class="line">.item-c &#123;</span><br><span class="line">  grid-area: sidebar;</span><br><span class="line">&#125;</span><br><span class="line">.item-d &#123;</span><br><span class="line">  grid-area: footer;</span><br><span class="line">&#125;</span><br><span class="line">.container &#123;</span><br><span class="line">  grid-template-columns: <span class="number">50</span>px <span class="number">50</span>px <span class="number">50</span>px <span class="number">50</span>px;</span><br><span class="line">  grid-template-rows: auto;</span><br><span class="line">  grid-template-areas: </span><br><span class="line">    <span class="string">"header header header header"</span></span><br><span class="line">    <span class="string">"main main . sidebar"</span></span><br><span class="line">    <span class="string">"footer footer footer footer"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>这将创建一个四列宽三行高的网格。 整个第一行将由 header 区域组成。 中间一行将由两个 main 区域、一个空单元格和一个 sidebar 区域组成。 最后一行是footer区域组成。</p>
<h1 id="居中"><a href="#居中" class="headerlink" title="居中"></a>居中</h1><h2 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h2><ol>
<li><p><strong>块级元素水平居中</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">margin-left:auto;</span><br><span class="line">margin-right:auto;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>内联元素水平居中，给它们的父元素加上</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-align:center;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>若不是内联元素想让它居中，可加<code>display:inline-block</code>，加了之后一般还要加下面这句，不然可能会有bug（下面可能会空出一行）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vertical-align: top;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>让导航栏横过来，并在同一行里均匀分布</strong><br>给ul加css<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ul&#123;</span><br><span class="line">  display:flex;  </span><br><span class="line">  justyfy-content:space-between;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>去掉li的<code>float:left</code><br>去掉ul的<code>clearfix</code></p>
<h2 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h2><ol>
<li><strong>若父元素没有写height，则直接在父元素写</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">padding: <span class="number">10</span>px <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>子元素就可以居中，所以尽量避免父亲高度确定</p>
<ol start="2">
<li><strong>让一个元素在父级元素中绝对居中</strong><br>方法一：<br>给父级元素加:<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">position:relative;   <span class="comment">//若父级元素是body可以不用加</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>再给自己加：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line"> position: absolute;</span><br><span class="line"> top: <span class="number">0</span>;</span><br><span class="line"> left: <span class="number">0</span>;</span><br><span class="line"> bottom: <span class="number">0</span>;</span><br><span class="line"> right: <span class="number">0</span>;</span><br><span class="line"> margin: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法二：（若不兼容IE，工作中只要用这一种方法即可，最简单，Chrome，移动端都可以用）<br>给父元素加：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">display: flex;               <span class="comment">//让它变成一个弹性盒</span></span><br><span class="line">justify-content: center;     <span class="comment">//水平居中</span></span><br><span class="line">align-items: center;         <span class="comment">//垂直居中</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>table自带居中（兼容IE）</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.parent&#123;</span><br><span class="line">  border: <span class="number">1</span>px solid red;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.child&#123;</span><br><span class="line">  border: <span class="number">1</span>px solid green;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;table class="parent"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;tr&gt;</span></span><br><span class="line"><span class="regexp">    &lt;td class="child"&gt;</span></span><br><span class="line"><span class="regexp">      文字</span></span><br><span class="line"><span class="regexp">    &lt;/</span>td&gt;</span><br><span class="line">  &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>table&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>文字会居中</p>
<ol start="4">
<li><p><strong>用div假扮table（兼容IE）</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">div.table&#123;</span><br><span class="line">  display: table;</span><br><span class="line">  border: <span class="number">1</span>px solid red;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.tr&#123;</span><br><span class="line">  display: table-row;</span><br><span class="line">  border: <span class="number">1</span>px solid green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.td&#123;</span><br><span class="line">  display: table-cell;</span><br><span class="line">  border: <span class="number">1</span>px solid blue;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="table"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div class="tr"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div class="td"&gt;</span></span><br><span class="line"><span class="regexp">        文字</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>用100%高度的before和after</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">.parent&#123;</span><br><span class="line">  border: <span class="number">3</span>px solid red;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child&#123;</span><br><span class="line">  border: <span class="number">3</span>px solid black;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: <span class="number">300</span>px;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.parent:before&#123;</span><br><span class="line">  content:<span class="string">''</span>;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line">.parent:after&#123;</span><br><span class="line">  content:<span class="string">''</span>;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>绝对定位加上margin-top: -自身height的50%</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.parent&#123;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">  border: <span class="number">1</span>px solid red;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.child&#123;</span><br><span class="line">  border: <span class="number">1</span>px solid green;</span><br><span class="line">  width: <span class="number">300</span>px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: <span class="number">50</span>%;</span><br><span class="line">  left: <span class="number">50</span>%;</span><br><span class="line">  margin-left: <span class="number">-150</span>px;</span><br><span class="line">  height: <span class="number">20</span>px;</span><br><span class="line">  margin-top: <span class="number">-10</span>px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="parent"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div class="child"&gt;</span></span><br><span class="line"><span class="regexp">    文字</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="媒体查询-响应式"><a href="#媒体查询-响应式" class="headerlink" title="媒体查询(响应式)"></a>媒体查询(响应式)</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="comment">/* 屏幕宽度为300px-325px时的css样式  */</span></span><br><span class="line">  @media(min-width: <span class="number">300</span>px) and (max-width: <span class="number">325</span>px)&#123;  </span><br><span class="line">    body&#123;</span><br><span class="line">     background: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 屏幕宽度小于450px时的css样式  */</span></span><br><span class="line">  @media(max-width: <span class="number">450</span>px)&#123;  </span><br><span class="line">    body&#123;</span><br><span class="line">     background: black;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 这样前面那个就没用了，被覆盖了  */</span></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>一般不用第一个方法，直接引用一个手机版的css即可</p>
</blockquote>
<p><code>&lt;link rel=&quot;stylesheet&quot; media=&quot;(max-width:768px)&quot; href=&quot;mobile.css&quot;&gt;</code><br>在屏幕宽度小于768px时，就会渲染这个css，要把这个引用写在main.css之后，把main.css覆盖。<br>并加上meta:vp<br><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;</code></p>
<h1 id="CSS动画"><a href="#CSS动画" class="headerlink" title="CSS动画"></a>CSS动画</h1><h2 id="transition-过渡"><a href="#transition-过渡" class="headerlink" title="transition(过渡)"></a>transition(过渡)</h2><p><code>transition</code>的作用在于指定状态变化所需要的时间.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">  transition: <span class="number">1</span>s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="指定属性"><a href="#指定属性" class="headerlink" title="指定属性"></a>指定属性</h3><p>可以指定<code>transition</code>使用的属性,比如只适用于height<br><code>transition: 1s height;</code></p>
<h3 id="delay-延迟"><a href="#delay-延迟" class="headerlink" title="delay(延迟)"></a>delay(延迟)</h3><p><code>transition: 1s height,1s 1s width;</code><br>width在一秒之后在开始变化,也就是延迟一秒.delay可以指定动画发生的顺序,使得不同transition可以连在一起,形成不同效果.</p>
<h3 id="transition-timing-function-缓动函数"><a href="#transition-timing-function-缓动函数" class="headerlink" title="transition-timing-function(缓动函数)"></a>transition-timing-function(缓动函数)</h3><p>transition的状态变化速度,默认不是匀速的,而是逐渐放慢的,这叫做ease.<br><code>transition: 1s ease;</code><br>除了ease,其他模式还有:</p>
<ol>
<li>linear: 匀速</li>
<li>ease-in: 加速</li>
<li>ease-out: 减速</li>
<li>cubic-bezier: 自定义速度模式(可以在cubic-bezier.com里设置)<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3>简写:<br><code>transition: 1s 1s height ease;</code><br>完整写法:<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transition-property</span>: height;</span><br><span class="line"><span class="attribute">transition-duration</span>: <span class="number">1s</span>;</span><br><span class="line"><span class="attribute">transition-delay</span>: <span class="number">1s</span>;</span><br><span class="line"><span class="attribute">transition-timing-function</span>: ease;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ol>
<li>transition需要明确知道，开始状态和结束状态的具体数值，才能计算出中间状态，什么none到block之类的是不行的</li>
<li>transition是一次性的，不能重复发生，除非一再触发<h2 id="animation-动画"><a href="#animation-动画" class="headerlink" title="animation(动画)"></a>animation(动画)</h2>使用animation首先需要定义动画过程,即关键帧<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> rainbow &#123;</span><br><span class="line">  0% &#123; <span class="attribute">background</span>: <span class="number">#c00</span>; &#125;</span><br><span class="line">  50% &#123; <span class="attribute">background</span>: orange; &#125;</span><br><span class="line">  100% &#123; <span class="attribute">background</span>: yellowgreen; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>写动画帧里的css记得加<code>;</code>号.<br>定义关键帧后可以给DOM元素绑定动画,和事件比较像.加<code>infinite</code>代表无限次,改成数字就是循环多少次.</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">1s</span> rainbow infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="animation-fill-mode"><a href="#animation-fill-mode" class="headerlink" title="animation-fill-mode"></a>animation-fill-mode</h3><p>动画结束后,会立即跳到结束状态,如果想让动画保持在结束状态,需要使用animation-fill-mode属性.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">1s</span> rainbow forwards;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>animation-fill-mode的属性:</p>
<ol>
<li>none: 默认值,回到动画未开始的状态.</li>
<li>forwards: 让动画停留在结束状态</li>
<li>backwards: 让动画回到第一帧的状态</li>
<li>both: animation-direction轮流应用forwards和backwards规则<h3 id="animation-direction"><a href="#animation-direction" class="headerlink" title="animation-direction"></a>animation-direction</h3>动画循环播放时，每次都是从结束状态跳回到起始状态，再开始播放。animation-direction属性，可以改变顺序<br>默认情况是，animation-direction等于normal.此外，还可以等于取alternate(先从前往后再从后往前)、reverse(从后往前)、alternate-reverse等值.<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">1s</span> rainbow <span class="number">3</span> normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="animation-play-state"><a href="#animation-play-state" class="headerlink" title="animation-play-state"></a>animation-play-state</h3><p>有时，动画播放过程中，会突然停止。这时，默认行为是跳回到动画的开始状态，如果想让动画保持突然终止时的状态，就要使用animation-play-state属性。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">1s</span> linear infinite;</span><br><span class="line">    <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><p>简写:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">1s</span> <span class="number">1s</span> rainbow linear <span class="number">3</span> forwards normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完整:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation-name</span>: rainbow;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">1s</span>;</span><br><span class="line">  <span class="attribute">animation-timing-function</span>: linear;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">1s</span>;</span><br><span class="line">  <span class="attribute">animation-fill-mode</span>:forwards;</span><br><span class="line">  <span class="attribute">animation-direction</span>: normal;</span><br><span class="line">  <span class="attribute">animation-iteration-count</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>0%可以用from代表，100%可以用to代表，因此上面的代码等同于下面的形式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> rainbow &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123; <span class="attribute">background</span>: <span class="number">#c00</span> &#125;</span><br><span class="line">  50% &#123; <span class="attribute">background</span>: orange &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123; <span class="attribute">background</span>: yellowgreen &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="steps-分步过渡"><a href="#steps-分步过渡" class="headerlink" title="steps(分步过渡)"></a>steps(分步过渡)</h3><p>浏览器从一个状态向另一个状态过渡，是平滑过渡。steps函数可以实现分步过渡。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">1s</span> rainbow infinite <span class="built_in">steps</span>(10);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="歌词效果"><a href="#歌词效果" class="headerlink" title="歌词效果"></a>歌词效果</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@keyframes moving &#123;</span><br><span class="line">  <span class="keyword">from</span> &#123;</span><br><span class="line">    width: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.line &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">p &#123;</span><br><span class="line">  width: <span class="number">600</span>px;</span><br><span class="line">  font-size: <span class="number">40</span>px;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: <span class="number">0</span>;</span><br><span class="line">  z-index: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p:nth-child(<span class="number">1</span>) &#123;</span><br><span class="line">  color: red;</span><br><span class="line">  animation: moving <span class="number">20</span>s</span><br><span class="line">&#125;</span><br><span class="line">p:nth-child(<span class="number">2</span>) &#123;</span><br><span class="line">  z-index: <span class="number">-1</span>;</span><br><span class="line">  color: #666;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="line"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;p&gt;To my days change my ways为生活我试着不断改变&lt;/</span>p&gt;</span><br><span class="line">  &lt;p&gt;This sudden end to my days这生命的终点突如其来&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="打字机效果"><a href="#打字机效果" class="headerlink" title="打字机效果"></a>打字机效果</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@keyframes typing &#123;<span class="keyword">from</span> &#123; <span class="attr">width</span>: <span class="number">0</span> &#125; &#125;</span><br><span class="line">@keyframes blink-caret &#123; <span class="number">50</span>% &#123; border-clolr: transparent &#125; &#125;</span><br><span class="line">h1 &#123;</span><br><span class="line">  border-right: <span class="number">0.1</span>em solid;</span><br><span class="line">  color: #fff;</span><br><span class="line">  width: <span class="number">352</span>px;</span><br><span class="line">  height: <span class="number">30</span>px;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  animation: typing <span class="number">5</span>s steps(<span class="number">11</span>, end),<span class="comment">//变11次变成最终状态</span></span><br><span class="line">  blink-caret <span class="number">.5</span>s infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line">body &#123;</span><br><span class="line">  background: #000;</span><br><span class="line">  height: <span class="number">100</span>vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;h1&gt;躺在你的学校操场看星空&lt;/</span>h1&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="transform-变形"><a href="#transform-变形" class="headerlink" title="transform(变形)"></a>transform(变形)</h1><p>transform属性主要包括rotate(旋转),skew(扭曲),scale(缩放),translate(移动),matrix(矩阵变形)<br>transform ： none | <transform-function> [ <transform-function> ]*<br>transform中使用多个属性时却需要有空格隔开，可用于内联(inline)元素和块级(block)元素</transform-function></transform-function></p>
<h2 id="rotate-旋转"><a href="#rotate-旋转" class="headerlink" title="rotate(旋转)"></a>rotate(旋转)</h2><p>可以通过rotate使元素旋转一定的度数<br><code>transform: rotate(30deg)//顺时针旋转30度</code></p>
<ol>
<li>旋转之后元素仍占据原来位置，实际上所有的transform都是这样，缩放、位移等都不会改变元素占据的位置</li>
<li>元素旋转的的基点默认是中心，可以通过transform-origin属性改变<br><code>transform:rotate(30deg); transform-origin: 0% 0%;</code><br>transform-origin的取值可以是:</li>
<li>top, bottom, left, right, center</li>
<li>百分数<h2 id="translate-位移"><a href="#translate-位移" class="headerlink" title="translate(位移)"></a>translate(位移)</h2><code>transform: translateY(100px)//Y轴位移100px;</code><h2 id="scale-缩放"><a href="#scale-缩放" class="headerlink" title="scale(缩放)"></a>scale(缩放)</h2>scale(x,y): 使元素水平方向和垂直方向同时缩放<br><code>transform: translate(3)//相同的比例缩放两个方向</code><h2 id="skew-扭曲"><a href="#skew-扭曲" class="headerlink" title="skew(扭曲)"></a>skew(扭曲)</h2>通过skew使元素扭曲一定的度数<br><code>transform:skew(10deg, 20deg);//x轴扭曲10度,y轴扭曲20度</code><h2 id="3D"><a href="#3D" class="headerlink" title="3D"></a>3D</h2>元素需要设置需要设置perspective来激活3D效果</li>
<li><code>transform: perspective( 600px );</code></li>
<li><code>perspective: 600px;</code><br>perspective属性的值决定了3D效果的强烈程度，可以认为是观察者到页面的距离。<br>越大距离越远，视觉上的3D效果就会相应的减弱。<h3 id="3D变形方法"><a href="#3D变形方法" class="headerlink" title="3D变形方法"></a>3D变形方法</h3>rotateX( angle )<br>rotateY( angle )<br>rotateZ( angle )<br>translateZ( tz )<br>scaleZ( sz )<br>translateX()方法使元素延X轴移动，translateZ()使元素延Z轴（在3D空间中方向从前到后）移动。正值使元素离观察者更近，负值使元素变远。</li>
</ol>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/jQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/22/jQuery/" class="post-title-link" itemprop="url">jQuery</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-22 13:14:59" itemprop="dateCreated datePublished" datetime="2019-08-22T13:14:59+08:00">2019-08-22</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-08-24 13:18:30" itemprop="dateModified" datetime="2019-08-24T13:18:30+08:00">2019-08-24</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/jQuery/" itemprop="url" rel="index"><span itemprop="name">jQuery</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><table>
<thead>
<tr>
<th align="left">jQuery基本选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘*‘)</td>
<td align="left">匹配所有元素</td>
</tr>
<tr>
<td align="left">$(‘#id’)</td>
<td align="left">id选择器</td>
</tr>
<tr>
<td align="left">$(‘.class’)</td>
<td align="left">类选择器</td>
</tr>
<tr>
<td align="left">$(‘element’)</td>
<td align="left">标签选择器</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">组合选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E,F’)</td>
<td align="left">多元素选择器，同时匹配E和F</td>
</tr>
<tr>
<td align="left">$(‘E F’)</td>
<td align="left">后代选择器,用空格分隔,匹配E元素所有后代</td>
</tr>
<tr>
<td align="left">$(‘E&gt;F’)</td>
<td align="left">子元素选择器,匹配E元素所有直接子元素</td>
</tr>
<tr>
<td align="left">$(‘E+F’)</td>
<td align="left">直接相邻元素,匹配E元素之后的相邻的同级元素F</td>
</tr>
<tr>
<td align="left">$(‘E~F’)</td>
<td align="left">普通相邻元素(弟弟选择器),匹配E元素之后的同级元素F(无论是否直接相邻)</td>
</tr>
<tr>
<td align="left">$(‘class1.class2’)</td>
<td align="left">匹配类名中既含有class1又含有class2的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">基本过滤选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:first’)</td>
<td align="left">所有E中的第一个</td>
</tr>
<tr>
<td align="left">$(‘E:last’)</td>
<td align="left">所有E中的最后一个</td>
</tr>
<tr>
<td align="left">$(‘E:not(selector)’)</td>
<td align="left">按照selector过滤E</td>
</tr>
<tr>
<td align="left">$(‘E:even’)</td>
<td align="left">所有E中index是偶数</td>
</tr>
<tr>
<td align="left">$(‘E:odd’)</td>
<td align="left">所有E中index是奇数</td>
</tr>
<tr>
<td align="left">$(‘E:eq(n)’)</td>
<td align="left">所有E中index为n的元素</td>
</tr>
<tr>
<td align="left">$(‘E:gt(n)’)</td>
<td align="left">所有E中index大于n的元素</td>
</tr>
<tr>
<td align="left">$(‘E:lt(n)’)</td>
<td align="left">所有E中index小于n的元素</td>
</tr>
<tr>
<td align="left">$(‘header’)</td>
<td align="left">选择h1~h6元素</td>
</tr>
<tr>
<td align="left">$(‘div:animated’)</td>
<td align="left">选择正在执行动画效果的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">内容过滤器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:contains(value)’)</td>
<td align="left">内容包含value的元素</td>
</tr>
<tr>
<td align="left">$(‘E:empty’)</td>
<td align="left">内容为空的元素</td>
</tr>
<tr>
<td align="left">$(‘E:has(F)’)</td>
<td align="left">子元素中有F的元素,$(‘div:has(a)’):包含a标签的div</td>
</tr>
<tr>
<td align="left">$(‘E:parent’)</td>
<td align="left">父元素是E的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">可视化选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:hidden’)</td>
<td align="left">所有被隐藏的E</td>
</tr>
<tr>
<td align="left">$(‘E:visible’)</td>
<td align="left">所有可见的E</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">属性过滤选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E[attr]’)</td>
<td align="left">含有属性attr的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr=value]’)</td>
<td align="left">属性attr=value的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr !=value]’)</td>
<td align="left">属性attr！=value的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr ^=value]’)</td>
<td align="left">属性attr以value开头的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr $=value]’)</td>
<td align="left">属性attr以value结尾的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr *=value]’)</td>
<td align="left">属性attr包含value的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr][attr*value]’)</td>
<td align="left">可以连用</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">子元素过滤器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:nth-child(n)’)</td>
<td align="left">E的第n个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(3n+1)’)</td>
<td align="left">E的第3n+1个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(even)’)</td>
<td align="left">E的index为偶数的子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(odd)’)</td>
<td align="left">E的index为奇数的子节点</td>
</tr>
<tr>
<td align="left">$(‘E:first-child’)</td>
<td align="left">所有E的第一个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:last-child’)</td>
<td align="left">所有E的最后一个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:only-child’)</td>
<td align="left">只有唯一子节点的E的子节点</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">表单元素选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:type’)</td>
<td align="left">特定类型的input</td>
</tr>
<tr>
<td align="left">$(‘:checked’)</td>
<td align="left">被选中的checkbox或者radio</td>
</tr>
<tr>
<td align="left">$(‘option:selected’)</td>
<td align="left">被选中的option</td>
</tr>
</tbody></table>
<h3 id="其他查找相关元素的方法"><a href="#其他查找相关元素的方法" class="headerlink" title="其他查找相关元素的方法"></a>其他查找相关元素的方法</h3><h4 id="eq-index-get-index"><a href="#eq-index-get-index" class="headerlink" title=".eq(index), .get([index])"></a>.eq(index), .get([index])</h4><p><code>$(&#39;div&#39;).eq(3) //获取所有div中第4个jQuery对象</code><br><code>$(&#39;div&#39;)[2] 或者 $(&#39;div&#39;).get(2) //获取第三个的DOM对象</code><br><code>get()</code>不写参数把所有对象转为DOM对象返回</p>
<h4 id="兄弟元素获取"><a href="#兄弟元素获取" class="headerlink" title="兄弟元素获取"></a>兄弟元素获取</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.next([selector])</td>
<td align="left">没有写selcetor,返回所有后面的兄弟元素.写了就返回满足条件的</td>
</tr>
<tr>
<td align="left">.prev([selector])</td>
<td align="left">和上面相反,获取前面的兄弟元素</td>
</tr>
<tr>
<td align="left">.nextAll([selector])</td>
<td align="left">获取所有后面的兄弟元素</td>
</tr>
<tr>
<td align="left">.prevAll([selector])</td>
<td align="left">获取所有前面的兄弟元素</td>
</tr>
<tr>
<td align="left">.siblings([selector])</td>
<td align="left">获取所有前后邻居的元素</td>
</tr>
</tbody></table>
<h4 id="父子元素获取"><a href="#父子元素获取" class="headerlink" title="父子元素获取"></a>父子元素获取</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.parent([selector])</td>
<td align="left">获取父元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.parents([selector])</td>
<td align="left">获取祖先元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.children([selector])</td>
<td align="left">获取子元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.find([selector])</td>
<td align="left">查找符合选择器的后代</td>
</tr>
</tbody></table>
<h4 id="筛选当前结果集"><a href="#筛选当前结果集" class="headerlink" title="筛选当前结果集"></a>筛选当前结果集</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.first()</td>
<td align="left">获取当前结果集第一个对象</td>
</tr>
<tr>
<td align="left">.last()</td>
<td align="left">获取当前结果集最后一个对象</td>
</tr>
<tr>
<td align="left">.filter(slector), .filter(function(index))</td>
<td align="left">筛选当前结果集符合条件的对象</td>
</tr>
<tr>
<td align="left">.not(selector), .not(function(index))</td>
<td align="left">从当前结果集中移除指定元素</td>
</tr>
<tr>
<td align="left">.is(selector), is(function(index)), is(dom/jqObj)</td>
<td align="left">判断结果集中的元素，是否为一个选择器，DOM元素，或者jQuery对象，如果这些元素至少一个匹配给定的参数，那么返回true</td>
</tr>
<tr>
<td align="left">.has(seletor), has(dom)</td>
<td align="left">筛选匹配结果集中符合条件的后代元素</td>
</tr>
</tbody></table>
<h2 id="jQueryDOM操作"><a href="#jQueryDOM操作" class="headerlink" title="jQueryDOM操作"></a>jQueryDOM操作</h2><h3 id="创建元素"><a href="#创建元素" class="headerlink" title="创建元素"></a>创建元素</h3><p>将DOM传入$方法即可返回一个jQuery对象<br><code>var obj = $(&#39;&lt;div class=&quot;test&quot;&gt;&lt;p&gt;&lt;span&gt;Done&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&#39;)</code></p>
<h3 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.append(content[,content]) / .append(function(index,html))</td>
<td align="left">可以添加多个内容,DOM对象,字符串,jQuery对象</td>
<td align="left">$(‘p’).append($newdiv); $(‘p’).append($(‘strong’)); $(‘p’).append(document.createTextNode(‘hello’))</td>
</tr>
<tr>
<td align="left">.appendTo(target)</td>
<td align="left">把对象插入到目标target尾部,可以是selector,DOM对象,字符串,元素集合,jQuery对象(最后一个孩子)</td>
<td align="left">$(‘h2’).appendTo($(‘.container’)); $(‘&lt;p&gt;Test&lt;/p&gt;’).appendTo(‘.inner’)</td>
</tr>
<tr>
<td align="left">.prepend(content[,content]) / .prepend(function(index, html))</td>
<td align="left">向头部追加内容,内容添加到最前面(第一个孩子)</td>
<td align="left">$(‘.inner’).prepend(‘&lt;p&gt;Test&lt;/p&gt;’)</td>
</tr>
<tr>
<td align="left">.prependTo(Target)</td>
<td align="left">把对象插入到目标头部</td>
<td align="left">$(‘&lt;p&gt;Test&lt;/p&gt;’).prependTo(‘.inner’)</td>
</tr>
<tr>
<td align="left">.before([content][,content]) / .before(function)</td>
<td align="left">在对象前面(不是头部,而是外面,和对象并列同级)插入内容(放到前面做邻居)</td>
<td align="left">$(‘.inner’).before(‘&lt;p&gt;Test&lt;/p&gt;’); $(‘.container’).before($(‘h2’)); $( “p” ).before( document.createTextNode( “Hello” ) )</td>
</tr>
<tr>
<td align="left">.insertBefore(target)</td>
<td align="left">把对象插入到target之前(不是头部,是同级)(做邻居)</td>
<td align="left">$(‘h2’).insertBefore($(‘.container))</td>
</tr>
<tr>
<td align="left">.after([content][,content]) / .after(function（index）)</td>
<td align="left">和before相反，在对象后面(不是尾部，而是外面，和对象并列同级)插入内容，参数和append类似</td>
<td align="left">$( “.inner” ).after( “&lt;p&gt;Test&lt;/p&gt;” ); $( “p” ).after( document.createTextNode( “Hello” ) );</td>
</tr>
<tr>
<td align="left">.insertAfter(target)</td>
<td align="left">和insertBefore相反，把对象插入到target之后（同样不是尾部，是同级）</td>
<td align="left">$( “&lt;p&gt;Test&lt;/p&gt;” ).insertAfter( “.inner” ); $( “p” ).insertAfter( “#foo” );</td>
</tr>
</tbody></table>
<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.remove([selector])</td>
<td align="left">删除被选元素及其子元素</td>
<td align="left">$(‘.div’).remove()</td>
</tr>
<tr>
<td align="left">.empty()</td>
<td align="left">清空被选元素内所有子元素</td>
<td align="left">$(‘body’).empty()</td>
</tr>
<tr>
<td align="left">.detach()</td>
<td align="left">.detach() 方法和.remove()一样, 除了 .detach()保存所有jQuery数据和被移走的元素相关联。当需要移走一个元素，不久又将该元素插入DOM时，这种方法很有用。</td>
<td align="left">$(‘.div’).detach()</td>
</tr>
</tbody></table>
<h3 id="包裹元素"><a href="#包裹元素" class="headerlink" title="包裹元素"></a>包裹元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.wrap(wrapElement) / .wrap(function(index))</td>
<td align="left">为每个对象包裹一层HTML结构，可以是selector, element, HTML string, jQuery object</td>
<td align="left">$( “.inner” ).wrap( “&lt;div class=’new’&gt;&lt;/div&gt;” )</td>
</tr>
<tr>
<td align="left">.wrapAll(wrappingElement)</td>
<td align="left">把所有匹配对象包裹在同一个html结构里</td>
<td align="left">$(‘.inner’).wrapAll(‘&lt;div class=”new”&gt;&lt;/div&gt;)</td>
</tr>
<tr>
<td align="left">.wrapInner(wrapingElement)</td>
<td align="left">为每个匹配的对象包裹一层HTML结构</td>
<td align="left">$(‘.inner’).wrapInner(‘&lt;div class=”new”&gt;&lt;/div&gt;)</td>
</tr>
<tr>
<td align="left">.unwrap</td>
<td align="left">把DOM元素外的壳去掉</td>
<td align="left">$(‘p’).unwrap()</td>
</tr>
</tbody></table>
<h3 id="html-string"><a href="#html-string" class="headerlink" title="html([string])"></a>html([string])</h3><p><code>$(&#39;div&#39;).html()</code><br><code>$(&#39;div&#39;).html(&#39;123&#39;)</code><br>这是一个读写两用的方法,用于获取修改元素的innerHTML</p>
<ol>
<li>没有传递参数的时候,返回元素的innerHTML</li>
<li>当传递一个string参数时,修改元素的innerHTML为参数值</li>
</ol>
<h3 id="text"><a href="#text" class="headerlink" title="text()"></a>text()</h3><p>和html方法类似，操作的是DOM的innerText值</p>
<h2 id="jQuery属性操作"><a href="#jQuery属性操作" class="headerlink" title="jQuery属性操作"></a>jQuery属性操作</h2><h3 id="属性相关"><a href="#属性相关" class="headerlink" title="属性相关"></a>属性相关</h3><h4 id="val-value"><a href="#val-value" class="headerlink" title=".val([value])"></a>.val([value])</h4><p>这是一个读写双用的方法,用来处理input的value值,当方法没有参数时返回input的value值.当传递一个参数时,方法修改input的value值为参数值.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.input'</span>).val()</span><br><span class="line">$(<span class="string">'.input'</span>).val(<span class="string">'newValue'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="attr"><a href="#attr" class="headerlink" title=".attr()"></a>.attr()</h4><h5 id="attr-attributeName"><a href="#attr-attributeName" class="headerlink" title=".attr(attributeName)"></a>.attr(attributeName)</h5><p>获取元素特定属性的值<br><code>var title = $(&#39;em&#39;).attr(&#39;title&#39;)</code></p>
<h5 id="attr-attributeName-value-attr-attributesJson-attr-attributeName-funtion-index-attr"><a href="#attr-attributeName-value-attr-attributesJson-attr-attributeName-funtion-index-attr" class="headerlink" title=".attr(attributeName,value)/.attr(attributesJson)/.attr(attributeName,funtion(index,attr))"></a>.attr(attributeName,value)/.attr(attributesJson)/.attr(attributeName,funtion(index,attr))</h5><p>为元素属性赋值<br><code>$( &quot;#greatphoto&quot; ).attr( &quot;alt&quot;, &quot;Beijing&quot; )</code></p>
<h5 id="removeAttr"><a href="#removeAttr" class="headerlink" title=".removeAttr()"></a>.removeAttr()</h5><p>为匹配的元素集合中的每个元素移除一个属性<br><code>$(&#39;div&#39;).removeAttr(&#39;id&#39;)</code></p>
<h5 id="prop-removeProp"><a href="#prop-removeProp" class="headerlink" title=".prop()/.removeProp()"></a>.prop()/.removeProp()</h5><p>这两个方法是用来操作元素的property的</p>
<h3 id="CSS相关"><a href="#CSS相关" class="headerlink" title="CSS相关"></a>CSS相关</h3><h4 id="css"><a href="#css" class="headerlink" title=".css()"></a>.css()</h4><h5 id="css-propertyName-css-propertyNames"><a href="#css-propertyName-css-propertyNames" class="headerlink" title=".css(propertyName) / .css(propertyNames)"></a>.css(propertyName) / .css(propertyNames)</h5><p>获取元素style特定property的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color = $( <span class="keyword">this</span> ).css( <span class="string">"background-color"</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> styleProps = $( <span class="keyword">this</span> ).css([</span><br><span class="line">  <span class="string">"width"</span>,</span><br><span class="line">  <span class="string">"height"</span>,</span><br><span class="line">  <span class="string">"color"</span>,</span><br><span class="line">  <span class="string">"background-color"</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h5 id="css-propertyName-value-css-propertyName-function-index-value-css-propertiesJson"><a href="#css-propertyName-value-css-propertyName-function-index-value-css-propertiesJson" class="headerlink" title=".css(propertyName,value)/.css(propertyName,function(index,value))/ .css(propertiesJson)"></a>.css(propertyName,value)/.css(propertyName,function(index,value))/ .css(propertiesJson)</h5><p>设置元素style特定property的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"div.example"</span> ).css( <span class="string">"width"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> index </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> index * <span class="number">50</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$( <span class="keyword">this</span> ).css( <span class="string">"width"</span>, <span class="string">"+=200"</span> )</span><br><span class="line"></span><br><span class="line">$( <span class="keyword">this</span> ).css( <span class="string">"background-color"</span>, <span class="string">"yellow"</span> )</span><br><span class="line"></span><br><span class="line">$( <span class="keyword">this</span> ).css(&#123;</span><br><span class="line">  <span class="string">"background-color"</span>: <span class="string">"yellow"</span>,</span><br><span class="line">  <span class="string">"font-weight"</span>: <span class="string">"bolder"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="addClass-className-addClass-function-index-currentClass"><a href="#addClass-className-addClass-function-index-currentClass" class="headerlink" title=".addClass(className) / .addClass(function(index,currentClass))"></a>.addClass(className) / .addClass(function(index,currentClass))</h5><p>为元素添加class，不是覆盖原class，是追加，也不会检查重复</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"p"</span> ).addClass( <span class="string">"myClass yourClass"</span> )</span><br><span class="line"></span><br><span class="line">$( <span class="string">"ul li"</span> ).addClass(<span class="function"><span class="keyword">function</span>(<span class="params"> index </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"item-"</span> + index;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="removeClass-className-removeClass-function-index-class"><a href="#removeClass-className-removeClass-function-index-class" class="headerlink" title=".removeClass([className])/.removeClass(function(index,class))"></a>.removeClass([className])/.removeClass(function(index,class))</h5><p>移除元素单个/多个/所有class</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"p"</span> ).removeClass( <span class="string">"myClass yourClass"</span> );</span><br><span class="line"></span><br><span class="line">$( <span class="string">"li:last"</span> ).removeClass(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> $( <span class="keyword">this</span> ).prev().attr( <span class="string">"class"</span> );</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="hasClass-className"><a href="#hasClass-className" class="headerlink" title=".hasClass(className)"></a>.hasClass(className)</h5><p>检查元素是否包含某个class，返回true/false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"#mydiv"</span> ).hasClass( <span class="string">"foo"</span> )</span><br></pre></td></tr></table></figure>

<h5 id="toggleClass-className"><a href="#toggleClass-className" class="headerlink" title=".toggleClass(className)"></a>.toggleClass(className)</h5><p>toggle是切换的意思，方法用于切换，switch是个bool类型值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"tumble"</span>&gt;Some text.&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/第一次执行 </span></span><br><span class="line"><span class="regexp">$( "div.tumble" ).toggleClass( "bounce" )</span></span><br><span class="line"><span class="regexp">&lt;div class="tumble bounce"&gt;Some text.&lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二次执行</span></span><br><span class="line">$( <span class="string">"div.tumble"</span> ).toggleClass( <span class="string">"bounce"</span> )</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"tumble"</span>&gt;Some text.&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="jQuery常用方法"><a href="#jQuery常用方法" class="headerlink" title="jQuery常用方法"></a>jQuery常用方法</h2><h4 id="each-fnction-index-Element"><a href="#each-fnction-index-Element" class="headerlink" title=".each(fnction(index, Element))"></a>.each(fnction(index, Element))</h4><p>遍历一个jQuery对象,为每个匹配元素执行一个函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'li'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(index + <span class="string">':'</span> + $(<span class="keyword">this</span>).text())</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//回调函数返回的是DOM对象,所以this需要加$变成jQuery对象才能使用.text()方法</span></span><br><span class="line"><span class="comment">//否则使用this.innerText方法</span></span><br></pre></td></tr></table></figure>

<h4 id="jQuery-each-collection-callback-indexInArray-valueOfElement"><a href="#jQuery-each-collection-callback-indexInArray-valueOfElement" class="headerlink" title="jQuery.each(collection, callback(indexInArray, valueOfElement))"></a>jQuery.each(collection, callback(indexInArray, valueOfElement))</h4><p>一个通用迭代函数,可以迭代对象和数组.数组和类数组对象通过长度属性来迭代数字索引,从0到length-1.其他对象通过其属性名进行迭代.<br>上面jQuery可以用$替代,即<code>$.each()</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="string">"fla"</span> : <span class="string">"infla"</span>,</span><br><span class="line">    <span class="string">"duh"</span> : <span class="string">" no duh"</span></span><br><span class="line">&#125;</span><br><span class="line">$.each(obj, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">":"</span> + value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="map-callback-index-domElement"><a href="#map-callback-index-domElement" class="headerlink" title=".map(callback(index, domElement))"></a>.map(callback(index, domElement))</h4><p>通过一个函数匹配当前集合中的每个元素,返回一个包含新的jQuery对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.div'</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params">i, ele</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.id</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="jQuery-extend-deep-target-ovject1-objectN"><a href="#jQuery-extend-deep-target-ovject1-objectN" class="headerlink" title="jQuery.extend([deep,]target[,ovject1][,objectN])"></a>jQuery.extend([deep,]target[,ovject1][,objectN])</h4><ol>
<li>当提供两个或多个对象给$.extend(),对象的所有属性都添加到目标对象(target参数).</li>
<li>如果只有一个参数提供给$.extend(),这意味着目标参数被省略,在这种情况下,jQuery对象本身默认为目标对象.这样我们可以在jQuery的命名空间下添加新功能.<br><code>var obj = $.extend({}, object1, object2)</code><br><code>object1,object2</code>会被添加到{}中</li>
</ol>
<p>如果第一个对象的属性本身是一个数组或对象,那它将完全用第二个对象相同的key重写一个属性.这些值不会被合并.如果true作为第一个参数,那么会在对象上进行递归的合并.</p>
<h4 id="clone-withDataAndEvents"><a href="#clone-withDataAndEvents" class="headerlink" title=".clone([withDataAndEvents])"></a>.clone([withDataAndEvents])</h4><p>.clone()方法深度复制所有匹配的元素集合,包括所有匹配元素,匹配元素的下级,文字节点.<br><code>$(&#39;.hello&#39;).clone().appendTo(&#39;.Goodbye&#39;)</code></p>
<h4 id="index-index-selector-index-element"><a href="#index-index-selector-index-element" class="headerlink" title=".index()/.index(selector)/.index(element)"></a>.index()/.index(selector)/.index(element)</h4><p>从给定集合中查找特定元素index</p>
<ol>
<li>没参数返回第一个元素index</li>
<li>如果参数是DOM对象或jQuery对象,则返回参数在集合中的index</li>
<li>如果参数是选择器,返回第一个匹配元素的index,没有找到返回-1<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> listItem = $(<span class="string">'.bar'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Index:'</span> + $(<span class="string">'li'</span>).index( listItem ))</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="ready-handler"><a href="#ready-handler" class="headerlink" title=".ready(handler)"></a>.ready(handler)</h4><p>当DOM加载完毕,执行.<br>下面两种等价</p>
<ul>
<li><code>$(document).ready(handler)</code></li>
<li><code>$(handler)</code></li>
</ul>
<h2 id="jQuery事件"><a href="#jQuery事件" class="headerlink" title="jQuery事件"></a>jQuery事件</h2><h4 id="on-events-selector-data-handler-eventObject"><a href="#on-events-selector-data-handler-eventObject" class="headerlink" title=".on(events[,selector][,data],handler(eventObject))"></a>.on(events[,selector][,data],handler(eventObject))</h4><ol>
<li>events: 一个或多个空格分隔的事件类型和可选空间</li>
<li>selector: 一个选择器字符串,用于过滤被选中的元素中能触发事件的后代元素.如果选择器是null或者忽略,那么被选中的元素总能触发事件</li>
<li>data: 当一个事件被触发,要传递给事件处理函数的event.data</li>
<li>handler(eventObject): 事件被触发时,执行的函数.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"box"</span>&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li&gt;<span class="number">1</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;li&gt;2&lt;/</span>li&gt;</span><br><span class="line">&lt;li&gt;<span class="number">3</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;li&gt;4&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;input id=<span class="string">"ipt"</span> type=<span class="string">"text"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;div id=<span class="string">"wrap"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">$(<span class="string">'.box li'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> str = $(<span class="keyword">this</span>).text()</span><br><span class="line">  $(<span class="string">'#wrap'</span>).text(str)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line">$(<span class="string">'.box&gt;ul&gt;li'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">var</span> str = $(<span class="keyword">this</span>).text()</span><br><span class="line">  $(<span class="string">'#wrap'</span>).text(str)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//下面新增的元素是没有绑定事件的</span></span><br><span class="line">$(<span class="string">'btn'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = $(<span class="string">'#ipt'</span>).val()</span><br><span class="line">  $(<span class="string">'.box&gt;li'</span>).append(<span class="string">'&lt;li&gt;'</span> + value + <span class="string">'&lt;/li&gt;'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//可以用事件代理</span></span><br><span class="line">$(<span class="string">'.box ul'</span>).on(<span class="string">'click'</span>,<span class="string">'li'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = $(<span class="keyword">this</span>).text()</span><br><span class="line">  $(<span class="string">'#wrap'</span>).text(Str)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//上面代码换成原生js代码</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.box ul'</span>).addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(e.target.tagName.toLowerCase() === <span class="string">'li'</span>)&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="one-events-selector-data-handler-eventObject"><a href="#one-events-selector-data-handler-eventObject" class="headerlink" title=".one(events[,selector][,data],handler(eventObject))"></a>.one(events[,selector][,data],handler(eventObject))</h4><p>同on，绑定事件，但只执行一次</p>
<h4 id="off-events-selector-handler"><a href="#off-events-selector-handler" class="headerlink" title=".off(events[,selector][,handler])"></a>.off(events[,selector][,handler])</h4><p>移除一个事件处理函数<br><code>$(&#39;.box li&#39;).off(&#39;click&#39;)</code></p>
<h4 id="trigger-eventType-extraParameters"><a href="#trigger-eventType-extraParameters" class="headerlink" title=".trigger(eventType[,extraParameters])"></a>.trigger(eventType[,extraParameters])</h4><p>根据绑定到匹配元素的给定的事件类型执行所有的处理程序和行为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#foo'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log($(<span class="keyword">this</span>).text())</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">'#foo'</span>).trigger(<span class="string">'click'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><p>blur([[data],fn])<br>change([[data],fn])<br>click([[data],fn])<br>dblclick([[data],fn])<br>error([[data],fn])1.8-<br>focus([[data],fn])<br>focusin([data],fn)<br>focusout([data],fn)<br>keydown([[data],fn])<br>keypress([[data],fn])<br>keyup([[data],fn])<br>mousedown([[data],fn])<br>mouseenter([[data],fn])<br>mouseleave([[data],fn])<br>mousemove([[data],fn])<br>mouseout([[data],fn])<br>mouseover([[data],fn])<br>mouseup([[data],fn])<br>resize([[data],fn])<br>scroll([[data],fn])<br>select([[data],fn])<br>submit([[data],fn])</p>
<h4 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h4><p>eve.currentTarget<br>eve.data<br>eve.delegateTarget1.7+<br>eve.isDefaultPrevented()<br>eve.isImmediatePropag…()<br>eve.isPropagationStopped()<br>eve.namespace<br>eve.pageX<br>eve.pageY<br>eve.preventDefault()<br>eve.relatedTarget<br>eve.result<br>eve.stopImmediatePro…()<br>eve.stopPropagation()<br>eve.target<br>eve.timeStamp<br>eve.type<br>eve.which</p>
<h2 id="jQuery动画"><a href="#jQuery动画" class="headerlink" title="jQuery动画"></a>jQuery动画</h2><h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><h4 id="hide-duration-easting-fn"><a href="#hide-duration-easting-fn" class="headerlink" title=".hide([duration][,easting][,fn])"></a>.hide([duration][,easting][,fn])</h4><ul>
<li>duration: 三种预定速度之一的字符串(“slow”,”normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)</li>
<li>easing: 用来指定切换效果，默认是”swing”，可用参数”linear”</li>
<li>fn: 在动画完成时执行的函数，每个元素执行一次。<br>用于隐藏元素,没有参数等同于直接设置display属性<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">$(</span><span class="string">'.target'</span>).hide()</span><br><span class="line">//等同于<span class="string">$(</span><span class="string">'.target'</span>).css(<span class="string">'display'</span>,<span class="string">'none'</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#book'</span>).hide(<span class="number">300</span>, <span class="string">'linear'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Animation complete.'</span>)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="show-duration-easing-fn"><a href="#show-duration-easing-fn" class="headerlink" title=".show([duration][,easing][,fn])"></a>.show([duration][,easing][,fn])</h4><p>显示元素,用法类似hide</p>
<h4 id="toggle-duration-easing-fn"><a href="#toggle-duration-easing-fn" class="headerlink" title=".toggle([duration][,easing][,fn])"></a>.toggle([duration][,easing][,fn])</h4><p>事件处理套件也有一个名为.toggle()方法。哪一个被调用取决于传递的参数的设置<br>用来切换元素的隐藏、显示，类似于toggleClass，用法和show、hide类似</p>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><h4 id="fadeIn-duration-easing-complete"><a href="#fadeIn-duration-easing-complete" class="headerlink" title=".fadeIn( [duration ] [, easing ] [, complete ] )"></a>.fadeIn( [duration ] [, easing ] [, complete ] )</h4><p>渐入效果</p>
<h4 id="fadeOut-duration-easing-complete"><a href="#fadeOut-duration-easing-complete" class="headerlink" title=".fadeOut( [duration ] [, easing ] [, complete ] )"></a>.fadeOut( [duration ] [, easing ] [, complete ] )</h4><p>渐出效果</p>
<h4 id="fadeTo-duration-opacity-easing-complete"><a href="#fadeTo-duration-opacity-easing-complete" class="headerlink" title=".fadeTo( duration, opacity [, easing ] [, complete ] )"></a>.fadeTo( duration, opacity [, easing ] [, complete ] )</h4><p>调整匹配元素的透明度，方法通过匹配元素的不透明度做动画效果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#book'</span>).fadeTo(<span class="string">'slow'</span>, <span class="number">0.5</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Animation complete.</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="fadeToggle-speed-easing-fn"><a href="#fadeToggle-speed-easing-fn" class="headerlink" title="fadeToggle([speed,[easing],[fn]])"></a>fadeToggle([speed,[easing],[fn]])</h4><p>通过不透明度的变化来开关所有匹配元素的淡入和淡出效果，并在动画完成后可选地触发一个回调函数。<br>这个动画只调整元素的不透明度，也就是说所有匹配的元素的高度和宽度不会发生变化。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"p"</span>).fadeToggle(<span class="string">"fast"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   alert(<span class="string">"Animation Done."</span>)</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="comment">//用200毫秒快速将段落淡入，之后弹出一个对话框</span></span><br></pre></td></tr></table></figure>

<h4 id="slideDown-speed-easing-fn"><a href="#slideDown-speed-easing-fn" class="headerlink" title="slideDown([speed],[easing],[fn])"></a>slideDown([speed],[easing],[fn])</h4><p> 下拉动画.这个动画效果只调整元素的高度，可以使匹配的元素以“滑动”的方式显示出来。</p>
<h4 id="slideUp-speed-easing-fn"><a href="#slideUp-speed-easing-fn" class="headerlink" title="slideUp([speed,[easing],[fn]])"></a>slideUp([speed,[easing],[fn]])</h4><p> 上浮动画,向上隐藏,在隐藏完成后可选地触发一个回调函数。</p>
<h4 id="slideToggle-speed-easing-fn"><a href="#slideToggle-speed-easing-fn" class="headerlink" title="slideToggle([speed],[easing],[fn])"></a>slideToggle([speed],[easing],[fn])</h4><p> 上下切换</p>
<h3 id="动画队列"><a href="#动画队列" class="headerlink" title="动画队列"></a>动画队列</h3><p> 因为动画是异步,所以将动画执行函数放入回调函数中,等动画执行完毕再执行其他的.<br> 但是这样写会形成回调地狱.又因为存在动画队列,可以按代码二方法执行会有同样效果.<br> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> $box.hide(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">   $box.show(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">     $box.fadeOut(<span class="string">'slow'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">       $box.fadeIn(<span class="string">'slow'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">         $box.slideUp(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">           $box.slideDown(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">             console.log(<span class="string">'动画执行完毕'</span>)</span><br><span class="line">           &#125;)</span><br><span class="line">         &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">$box.hide(<span class="number">1000</span>)</span><br><span class="line">    .show(<span class="number">1000</span>)</span><br><span class="line">    .fadeOut()</span><br><span class="line">    .fadeIn()</span><br><span class="line">    .slideUp()</span><br><span class="line">    .slideDown(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">      console.log(<span class="string">'真的完毕了'</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="自定义动画"><a href="#自定义动画" class="headerlink" title="自定义动画"></a>自定义动画</h3><p><code>animate(params,[speed],[easing],[fn])</code><br>这个函数的关键在于指定动画形式及结果样式属性对象。这个对象中每个属性都表示一个可以变化的样式属性（如“height”、“top”或“opacity”）。注意：所有指定的属性必须用驼峰形式，比如用marginLeft代替margin-left.</p>
<ul>
<li>params:一组包含作为动画属性和终值的样式属性和及其值的集合</li>
<li>speed:三种预定速度之一的字符串(“slow”,”normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)</li>
<li>easing:要使用的擦除效果的名称(需要插件支持).默认jQuery提供”linear” 和 “swing”.</li>
<li>fn:在动画完成时执行的函数，每个元素执行一次。<h4 id="finish"><a href="#finish" class="headerlink" title=".finish"></a>.finish</h4>停止当前动画，并清除动画队列中所有未完成的动画,最终展示动画队列最后一帧的最终状态<h4 id="stop-clearQueue-jumpToEnd"><a href="#stop-clearQueue-jumpToEnd" class="headerlink" title=".stop( [clearQueue] [,jumpToEnd])"></a>.stop( [clearQueue] [,jumpToEnd])</h4>停止当前正在运行的动画</li>
</ul>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><h3 id="jQuery-ajax-url-settings"><a href="#jQuery-ajax-url-settings" class="headerlink" title="jQuery.ajax(url,[settings])"></a>jQuery.ajax(url,[settings])</h3><p>jQuery底层AJAX实现.$.ajax()返回其创建的XMLHttpRequest对象。大多数情况下你无需直接操作该函数，除非你需要操作不常用的选项，以获得更多的灵活性。<br>最简单的情况下，$.ajax()可以不带任何参数直接使用。<br>注意，所有的选项都可以通过$.ajaxSetup()函数来全局设置。<br><strong>回调函数</strong><br>如果要处理$.ajax()得到的数据，则需要使用回调函数。beforeSend、error、dataFilter、success、complete。</p>
<ul>
<li><p>beforeSend 在发送请求之前调用，并且传入一个XMLHttpRequest作为参数。</p>
</li>
<li><p>error 在请求出错时调用。传入XMLHttpRequest对象，描述错误类型的字符串以及一个异常对象（如果有的话）</p>
</li>
<li><p>dataFilter 在请求成功之后调用。传入返回的数据以及”dataType”参数的值。并且必须返回新的数据（可能是处理过的）传递给success回调函数。</p>
</li>
<li><p>success 当请求之后调用。传入返回后的数据，以及包含成功代码的字符串。</p>
</li>
<li><p>complete 当请求完成之后调用这个函数，无论成功或失败。传入XMLHttpRequest对象，以及一个包含成功或错误代码的字符串。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  url: <span class="string">'test.com'</span>,</span><br><span class="line">  <span class="built_in">type</span>: <span class="string">'GET'</span>,</span><br><span class="line">  datatype: json,</span><br><span class="line">  data: &#123;</span><br><span class="line">    name: <span class="string">'tom'</span>,</span><br><span class="line">    age: <span class="string">'12'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &lt;!-- success: <span class="function"><span class="keyword">function</span><span class="params">(result)</span>&#123;</span></span><br><span class="line">    console.<span class="built_in">log</span>(result)</span><br><span class="line">  &#125; --&gt;</span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span><span class="params">(result)</span>&#123;</span></span><br><span class="line">  console.<span class="built_in">log</span>(result)</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span><span class="params">(jqXHR, textStatus)</span>&#123;</span></span><br><span class="line">  consloe.<span class="built_in">log</span>(textStatus)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>url: 一个用来包含发送请求的URL字符串。<br>settings: AJAX请求设置。所有选项都是可选的。</p>
<h5 id="seting中的设置"><a href="#seting中的设置" class="headerlink" title="seting中的设置"></a>seting中的设置</h5><ol>
<li>async：默认设置下，所有请求均为异步请求（也就是说这是默认设置为 true ）。如果需要发送同步请求，请将此选项设置为 false</li>
<li>beforeSend：请求发送前的回调函数，用来修改请求发送前jqXHR对象，此功能用来设置自定义 HTTP 头信息，等等。该jqXHR和设置对象作为参数传递</li>
<li>cache：如果设置为 false ，浏览器将不缓存此页面。注意: 设置cache为 false将在 HEAD和GET请求中正常工作。它的工作原理是在GET请求参数中附加”_={timestamp}”</li>
<li>context：这个对象用于设置Ajax相关回调函数的上下文。 默认情况下，这个上下文是一个ajax请求使用的参数设置对象</li>
<li>data：发送到服务器的数据。将自动转换为请求字符串格式。GET 请求中将附加在 URL 后面，POST请求作为表单数据</li>
<li>headers：一个额外的{键:值}对映射到请求一起发送。此设置会在beforeSend 函数调用之前被设置 ;因此，请求头中的设置值，会被beforeSend 函数内的设置覆盖</li>
<li>type: 请求方式 (“POST” 或 “GET”)，默认为 “GET”。注意:其它HTTP请求方法，如PUT和DELETE也可以使用，但仅部分浏览器支持。</li>
</ol>
<h3 id="jQuery-get-settings-jQuery-post-settings"><a href="#jQuery-get-settings-jQuery-post-settings" class="headerlink" title="jQuery.get( [settings] ) / jQuery.post( [settings ] )"></a>jQuery.get( [settings] ) / jQuery.post( [settings ] )</h3><p>这两个方法专门用来处理get和post请求</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="keyword">get</span>(<span class="string">'test.html'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  $(<span class="string">'.result'</span>).html(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="jQuery-getJSON-url-data-success-data-textStatus-jqXHR"><a href="#jQuery-getJSON-url-data-success-data-textStatus-jqXHR" class="headerlink" title="jQuery.getJSON(url[,data][,success(data,textStatus,jqXHR)])"></a>jQuery.getJSON(url[,data][,success(data,textStatus,jqXHR)])</h3><p>使用一个HTTP GET请求从服务器加载JSON编码的数据<br>范例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.getJSON(<span class="string">'ajax/test.json'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> items = [];</span><br><span class="line"> </span><br><span class="line">  $.each(data, <span class="function"><span class="keyword">function</span>(<span class="params">key, val</span>) </span>&#123;</span><br><span class="line">    items.push(<span class="string">'&lt;li id="'</span> + key + <span class="string">'"&gt;'</span> + val + <span class="string">'&lt;/li&gt;'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"> </span><br><span class="line">  $(<span class="string">'&lt;ul/&gt;'</span>, &#123;</span><br><span class="line">    <span class="string">'class'</span>: <span class="string">'my-new-list'</span>,</span><br><span class="line">    html: items.join(<span class="string">''</span>)</span><br><span class="line">  &#125;).appendTo(<span class="string">'body'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="load-url-data-complete-responseText-textStatus-XMLHttpRequest"><a href="#load-url-data-complete-responseText-textStatus-XMLHttpRequest" class="headerlink" title=".load(url[,data][,complete(responseText,textStatus,XMLHttpRequest)])"></a>.load(url[,data][,complete(responseText,textStatus,XMLHttpRequest)])</h3><p>从服务器载入数据并且将返回的HTML代码并插入至匹配的元素中<br><code>$(&#39;#result&#39;).load(&#39;ajax/test.html&#39;)</code></p>
<h3 id="serialize-serializeArray"><a href="#serialize-serializeArray" class="headerlink" title=".serialize() / serializeArray()"></a>.serialize() / serializeArray()</h3><p>将用作提交的表单元素的值编译成字符串，方法没有参数，使用标准的 URL-encoded 符号上建立一个文本字符串. 它可以对一个代表一组表单元素的 jQuery 对象进行操作，比如<code>&lt;input&gt;, &lt;textarea&gt;, 和 &lt;select&gt;</code>:</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"holder"</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"a"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">  </span><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"b"</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">id</span>=<span class="string">"b"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"c"</span> <span class="attr">value</span>=<span class="string">"3"</span> <span class="attr">id</span>=<span class="string">"c"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  </span><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"f"</span> <span class="attr">value</span>=<span class="string">"8"</span> <span class="attr">checked</span>=<span class="string">"true"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"f"</span> <span class="attr">value</span>=<span class="string">"9"</span> <span class="attr">checked</span>=<span class="string">"true"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">$(<span class="string">"#holder"</span>).serialize(); //a=<span class="number">1</span>&amp;b=<span class="number">2</span>&amp;c=<span class="number">3</span>&amp;f=<span class="number">8</span>&amp;f=<span class="number">9</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">"#holder"</span>).serializeArray();</span><br><span class="line">/*</span><br><span class="line">    [</span><br><span class="line">      <span class="built_in">&#123;name</span>: <span class="string">'a'</span>, value: <span class="string">'1'</span>&#125;,</span><br><span class="line">      <span class="built_in">&#123;name</span>: <span class="string">'b'</span>, value: <span class="string">'2'</span>&#125;,</span><br><span class="line">      <span class="built_in">&#123;name</span>: <span class="string">'c'</span>, value: <span class="string">'3'</span>&#125;,</span><br><span class="line">      <span class="built_in">&#123;name</span>: <span class="string">'f'</span>, value: <span class="string">'8'</span>&#125;,</span><br><span class="line">      <span class="built_in">&#123;name</span>: <span class="string">'f'</span>, value: <span class="string">'9'</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>serialize和serializeArray都是针对JQuery对象(选中的form元素)进行操作，只是返回值格式不同而已。这里特别要注意：这2个API只能操作form，如果将holder改成div，会发现不起作用</p>
</blockquote>
<h2 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBooks</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">'get'</span>,</span><br><span class="line">        url:<span class="string">'http://test.com/bookservice.php'</span>,</span><br><span class="line">        dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">        jsonp:<span class="string">'callback'</span>,</span><br><span class="line">        jsonpCallback:<span class="string">'displayBooks'</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然使用jsonp会在一定程度上造成安全性问题，如果请求的站点不是信任站点，那么可能会在返回的方法调用中包含一些恶意代码。所以尽量向信任的站点发送请求。另外xss也经常会利用jsonp向站点注入恶意代码。</p>
</blockquote>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/21/HTTP基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/21/HTTP基础/" class="post-title-link" itemprop="url">HTTP基础</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-21 14:53:32" itemprop="dateCreated datePublished" datetime="2019-08-21T14:53:32+08:00">2019-08-21</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-08 19:22:44" itemprop="dateModified" datetime="2019-09-08T19:22:44+08:00">2019-09-08</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML/" itemprop="url" rel="index"><span itemprop="name">HTML</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML/HTTP基础/" itemprop="url" rel="index"><span itemprop="name">HTTP基础</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h1><p>存储信息到浏览器，可以用js设置，也可以在服务器端通过set-cookie让浏览器种下cookie，存在于响应头里。<br>每次请求都会带上cookie，最大容量4k<br>用途：记录用户名</p>
<p>设置cookie时的参数：</p>
<ol>
<li>path: cookie影响到的路径，匹配该路径才发送cookie</li>
<li>expires和maxAge:告诉浏览器cookie多久过期<br>不设置就会产生session cookie，当关闭浏览器，cookie就被清除</li>
<li>secure: 为true时，在http无效，在https生效</li>
<li>httpOnly: 浏览器不允许通过js修改cookie</li>
</ol>
<h1 id="session"><a href="#session" class="headerlink" title="session"></a>session</h1><p>用来保存状态。当用户输入用户名密码提交给服务器后，服务器验证通过后创建session用于记录用户信息，session可保存在服务器，也可以保存在数据库</p>
<ol>
<li>创建session后，会把关联的session_id通过是set-cookie添加到响应头</li>
<li>浏览器加载页面发现有set-cookie，就把这个cookie种到指定域名下</li>
<li>下次刷新页面，发送的请求带上cookie，服务器接受后根据session_id来识别用户</li>
</ol>
<h1 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h1><ol>
<li>本地存储，永不过期，除非手动js删除。5M大小。</li>
<li>不参与网络传输</li>
<li>一般用于性能优化</li>
</ol>
<h1 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h1><p>ajax是一种技术方案，核心依赖浏览器提供的XMLHttpRequest对象，是这个对象使得浏览器可以发出http请求与接受响应。</p>
<h2 id="如何与后端交互"><a href="#如何与后端交互" class="headerlink" title="如何与后端交互"></a>如何与后端交互</h2><ol>
<li>form表单提交.缺点会跳转，无后台反馈</li>
<li>ajax</li>
<li>websocket</li>
</ol>
<h3 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h3><ol>
<li>XMLHttpRequest对象</li>
<li>fetch</li>
</ol>
<h3 id="范例"><a href="#范例" class="headerlink" title="范例"></a>范例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequst() </span><br><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"/xxx.com"</span>) </span><br><span class="line">xhr.onreadystate = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span>) || xhr.status === <span class="number">304</span>) &#123;</span><br><span class="line">            <span class="comment">//成功</span></span><br><span class="line">            <span class="built_in">console</span>.log(xhr.responseText)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"服务器异常"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send()</span><br></pre></td></tr></table></figure>

<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">let</span> request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="number">2.</span> request.open(<span class="string">'GET'</span>,<span class="string">'/xxx'</span>)  <span class="comment">//初始化request</span></span><br><span class="line"><span class="number">3.</span> request.send()  <span class="comment">//发送请求</span></span><br><span class="line"><span class="number">4.</span> request.onreadystatechange  <span class="comment">//监听请求状态的变化</span></span><br><span class="line"><span class="number">5.</span> request.readyState === <span class="number">1</span>  <span class="comment">//request.open()已经完成</span></span><br><span class="line"><span class="number">6.</span> request.readyState === <span class="number">2</span>  <span class="comment">//request.send()已经完成</span></span><br><span class="line"><span class="number">7.</span> request.readyState === <span class="number">3</span>  <span class="comment">//request.responseText正在下载</span></span><br><span class="line"><span class="number">5.</span> request.readyState === <span class="number">4</span>  <span class="comment">//响应完成</span></span><br><span class="line"><span class="number">6.</span> request.status  <span class="comment">//HTTP状态码</span></span><br><span class="line"><span class="number">7.</span> <span class="keyword">var</span> string = request.responseText  <span class="comment">//响应的内容</span></span><br><span class="line"><span class="number">8.</span> <span class="keyword">var</span> value = <span class="built_in">JSON</span>.parse(request.responseText)  <span class="comment">//把符合JSON语法的字符串转换成JS，解析响应返回的内容</span></span><br><span class="line"><span class="number">9.</span> value.node   <span class="comment">//若value是对象，这就是对象里内容</span></span><br><span class="line"><span class="number">10.</span> value.node.name  <span class="comment">//对象里的name的值</span></span><br></pre></td></tr></table></figure>

<p><strong>post</strong>形式需要将数据放入到send中</p>
<h1 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h1><h3 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h3><p>同协议，域名，端口</p>
<h1 id="实现跨域的方法"><a href="#实现跨域的方法" class="headerlink" title="实现跨域的方法"></a>实现跨域的方法</h1><h2 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h2><p>JSON with padding</p>
<blockquote>
<p>通过script标签加载数据的方式获取数据当做js代码来执行。jsonp需要对应接口的后端配合才可以实现。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addScriptTag</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">  script.setAttribute(<span class="string">"type"</span>,<span class="string">"text/javascript"</span>);</span><br><span class="line">  script.src = src;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  addScriptTag(<span class="string">'http://example.com/ip?callback=foo'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Your public IP address is: '</span> + data.ip);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面代码通过动态添加<code>&lt;script&gt;</code>元素，向服务器example.com发出请求。注意，该请求的查询字符串有一个callback参数，用来指定回调函数的名字，这对于JSONP是必需的。<br>服务器收到这个请求以后，会将数据放在回调函数的参数位置返回。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo(&#123;</span><br><span class="line">  <span class="string">"ip"</span>: <span class="string">"8.8.8.8"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>由于<code>&lt;script&gt;</code>元素请求的脚本，直接作为代码运行。这时，只要浏览器定义了foo函数，该函数就会立即调用。作为参数的JSON数据被视为JavaScript对象，而不是字符串，因此避免了使用<code>JSON.parse</code>的步骤。</p>
</blockquote>
<h3 id="必考面试题：JSONP为什么不支持POST请求"><a href="#必考面试题：JSONP为什么不支持POST请求" class="headerlink" title="必考面试题：JSONP为什么不支持POST请求"></a>必考面试题：JSONP为什么不支持POST请求</h3><p>答：因为JSONP是通过动态创建script的方法进行的，而script只能发送get请求不能发送post请求。</p>
<h3 id="jquery的写法"><a href="#jquery的写法" class="headerlink" title="jquery的写法"></a>jquery的写法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">        url:<span class="string">"http://jack.com:8002/pay"</span>,</span><br><span class="line">        dataType: <span class="string">"jsonp"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(response === <span class="string">'success'</span>)&#123;</span><br><span class="line">                amount.innerText = amount.innerText<span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><p>跨域资源共享，是一种ajax跨域请求资源的方式。<br>当使用XMLHttpRequest发送请求时，浏览器发现该请求不符合同源策略，会给请求加一个请求头:Origin。后台进行处理，如果确定接受请求，则在返回结果中加响应头：Access-Control-Allow-Origin。浏览器判断该响应头中是否包含Origin的值，如果有，浏览器会处理响应，就可以拿到响应数据。</p>
<h2 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h2><ol>
<li><strong>A页面</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, <span class="keyword">this</span>.receiveMessage, <span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> iframeImg = <span class="keyword">this</span>.iframe.contentWindow</span><br><span class="line">    iframeImg.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        iframeImg.postMessage(<span class="string">'message'</span>, <span class="string">'http://www.blogoog.com:8088'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">receiveMessage = <span class="function">(<span class="params">event</span>) =&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> origin = event.origin || event.originalEvent.origin</span><br><span class="line">        <span class="keyword">const</span> thisData = <span class="built_in">JSON</span>.parse(event.data)</span><br><span class="line">        <span class="keyword">const</span> imgUrl = <span class="built_in">Object</span>.values(thisData)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123; imgUrl &#125;)</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.closeIframe();</span><br><span class="line">            message.success(<span class="string">'上传成功'</span>)</span><br><span class="line">        &#125;,<span class="number">1000</span>)</span><br><span class="line">        <span class="keyword">if</span> (origin !== <span class="string">'http://www.blogoog.com:80881) &#123;</span></span><br><span class="line">          window.location.hash = '#/exception/404'</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt; iframe className = &#123; styles.iframeWrap &#125;</span><br><span class="line">src=<span class="string">"http://www.blogoog.com:8088"</span> name=<span class="string">"imgIframe"</span> frameBorder=<span class="string">"0"</span> scrolling=<span class="string">"auto"</span> ref=&#123;dom =&gt; &#123;<span class="keyword">this</span>.iframe = dom &#125;&#125;&gt;您的浏览器不支持iframe</span><br><span class="line">&lt;<span class="regexp">/iframe&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>A页面使用的语法</li>
</ol>
<p><strong>window.postMessage()</strong><br><code>otherWindow.postMessage(message, targetOrigin, [transfer])</code></p>
<ul>
<li>otherWindow：其他窗口的一个引用（在这里我使用了iframe的contentWindow属性）</li>
<li>message：将要发送到其他window的数据（可以不受限制的将数据对象安全的传送给目标窗口而无需自己序列化，原因是因为采用了结构化克隆算法）</li>
<li>targetOrigin：接收信息的URL（在这里我当然填的B页面的URL）</li>
<li>transfer：可选参数</li>
</ul>
<p><strong>window.addEventListener(‘message’, receiveMessage, false)</strong><br><code>target.addEventListener(type, listener, options)</code></p>
<ul>
<li>type：表示监听事件类型的字符串</li>
<li>listener：当所监听的事件类型触发时，会通知的一个对象或者一个函数</li>
<li>potions：可选参数（在此我用false，表示在listener被调用之后不会自动移除）</li>
</ul>
<p><strong>receiveMessage = (event) =&gt; {}</strong></p>
<ul>
<li>event.data：从另一个window传递过来的对象（包含传递过来的所有信息）</li>
<li>event.origin||event.originalEvent.origin：window.postMessage()发送消息的目标URL</li>
<li>event.source：对发送消息的窗口对象的引用<h3 id="注意点！！！"><a href="#注意点！！！" class="headerlink" title="注意点！！！"></a>注意点！！！</h3></li>
<li>在页面内嵌入iframe页面的情况下，需要等到页面内的iframe页面，也就是B页面加载完成之后，才能进行postMessage跨域通信</li>
<li>event.origin中的origin不能保证是该窗口的当前origin或者未来origin，因为postMessage被调用后，可能会被导航到不同的位置，所以需要做个异常情况判断处理<code>origin !== &#39;http://www.blogoog.com:8088&#39;</code></li>
</ul>
<ol start="2">
<li><p><strong>B页面</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener&#123;<span class="string">"message"</span>, <span class="keyword">this</span>.receiveMessage, <span class="literal">false</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">receiveMessage(e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e origin === <span class="string">'http://www.blogoog.com:8080'</span> || e.origin === <span class="string">'http://www.blogoog.com:8088'</span>) &#123; </span><br><span class="line">        <span class="keyword">this</span>.sendBtnShow = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">this</span>.originSource = e.origin </span><br><span class="line">        <span class="keyword">this</span>.magicBuildData = <span class="built_in">JSON</span>.parse(e.data)</span><br><span class="line">    &#125;,</span><br><span class="line">    sendMsg() &#123;</span><br><span class="line">        top.postMessage(<span class="built_in">JSON</span>.stringify(data), <span class="string">'http://www.blogoog.com:8000'</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>B页面使用到的语法<br><code>top.postMessage(&#39;data&#39;, &#39;http://www.blogoog.com:8000&#39;)</code><br>参考上面A页面的语法<br>为什么用top而不用window下面再讲<br><code>window.addEventListener(&#39;message&#39;, receiveMessage, false)</code><br>参考上面A页面的语法<br><code>receiveMessage = (event) =&gt; {}</code><br>参考上面A页面的语法</p>
</li>
</ol>
<h4 id="window-postMessage-中的window到底是啥？"><a href="#window-postMessage-中的window到底是啥？" class="headerlink" title="window.postMessage()中的window到底是啥？"></a>window.postMessage()中的window到底是啥？</h4><p>始终是你需要通信的目标窗口</p>
<ul>
<li>A页面中：A页面向B页面发送跨域信息，window就是在A页面中嵌入的iframe指向的B页面的window，即：iframe.contentWindow</li>
<li>B页面中：B页面想A页面发送跨域信息，window就是A页面的window，在这里因为B页面时嵌入到A页面中的，对于B页面来讲，window就是top或者parent<h3 id="需要特别注意的坑"><a href="#需要特别注意的坑" class="headerlink" title="需要特别注意的坑"></a>需要特别注意的坑</h3></li>
</ul>
<ol>
<li>一定要等A页面嵌入的B页面加载完成之后，再进行postMessage跨域通信</li>
<li>一定要对origin做判断，去掉不是来自我们目标窗口的origin，防止来自其他origin的攻击</li>
<li>着重注意window.postMessage()中window的用法，明确目标窗口的window</li>
</ol>
<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><h2 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h2><p>HTML内联框架元素<code>&lt;iframe&gt;</code> 表示嵌套的browsing context。它能够将另一个HTML页面嵌入到当前页面中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=<span class="string">"https://mdn-samples.mozilla.org/snippets/html/iframe-simple-contents.html"</span> title=<span class="string">"iframe example 1"</span> width=<span class="string">"400"</span> height=<span class="string">"300"</span>&gt;</span><br><span class="line">  &lt;p&gt;Your browser does not support iframes.&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;/i</span>frame&gt;</span><br></pre></td></tr></table></figure>

<h2 id="canvas"><a href="#canvas" class="headerlink" title="canvas"></a>canvas</h2><p>标签定义图形，比如图表和其他图像。该标签基于 JavaScript 的绘图 API</p>
<h2 id="source"><a href="#source" class="headerlink" title="source"></a>source</h2><p>定义多媒体资源 <code>&lt;video&gt;</code> 和<code>&lt;audio&gt;</code></p>
<h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><p>定义命令按钮，比如单选按钮、复选框或按钮</p>
<h2 id="figure"><a href="#figure" class="headerlink" title="figure"></a>figure</h2><p>规定独立的流内容（图像、图表、照片、代码等等）</p>
<h2 id="nav"><a href="#nav" class="headerlink" title="nav"></a>nav</h2><p>导航</p>
<h2 id="section"><a href="#section" class="headerlink" title="section"></a>section</h2><p>定义文档中的节（section、区段）</p>
<h1 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a>HTTP报文</h1><p>HTTP报文是在HTTP应用程序之间发送的数据块。这些数据块以一些文本形式的元信息开头，描述报文的内容及含义，后面跟着可选的数据部分</p>
<h2 id="URI和URL"><a href="#URI和URL" class="headerlink" title="URI和URL"></a>URI和URL</h2><p>URI：统一资源标识符<br>URL：统一资源定位符</p>
<h2 id="报文组成"><a href="#报文组成" class="headerlink" title="报文组成"></a>报文组成</h2><ol>
<li><p>对报文进行描述的起始行 —— start line</p>
</li>
<li><p>包含属性的首部块 —— header</p>
</li>
<li><p>可选的包含数据的主体部分 —— body</p>
<h2 id="报文语法"><a href="#报文语法" class="headerlink" title="报文语法"></a>报文语法</h2></li>
<li><p>请求报文：<br>向web服务器请求一个动作</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="function"><span class="keyword">method</span>&gt;&lt;<span class="title">request</span>-<span class="title">URL</span>&gt;&lt;<span class="title">version</span>&gt;</span></span><br><span class="line"><span class="function">&lt;<span class="title">headers</span>&gt;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&lt;<span class="title">entity</span>-<span class="title">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>响应报文<br>把请求结果返回给客户端</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;version&gt;</span><span class="section">&lt;status&gt;</span><span class="section">&lt;reason-phrase&gt;</span></span><br><span class="line"><span class="section">&lt;headers&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;entity-body&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><p>服务器和浏览器之间的约定</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类:"></a>分类:</h3><p>100-199 用于指定客户端应相应的某些动作。<br>200-299 用于表示请求成功。<br>300-399 用于已经移动的文件并且常被包含在定位头信息中指定新的地址信息。<br>400-499 用于指出客户端的错误。<br>500-599 用于支持服务器错误。</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">状态信息</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">100</td>
<td align="left">Continue</td>
<td align="left">初始请求已接受,继续发送</td>
</tr>
<tr>
<td align="left">101</td>
<td align="left">switching Protocols</td>
<td align="left">服务器遵从客户请求转换到另一种协议</td>
</tr>
<tr>
<td align="left"><strong>200</strong></td>
<td align="left"><strong>OK</strong></td>
<td align="left"><strong>请求成功</strong></td>
</tr>
<tr>
<td align="left">201</td>
<td align="left">Created</td>
<td align="left">服务器已经创建了文档,Location头给出了他的URL</td>
</tr>
<tr>
<td align="left">202</td>
<td align="left">Accepted</td>
<td align="left">已接受请求,但处理尚未完成</td>
</tr>
<tr>
<td align="left">203</td>
<td align="left">Non-Authoritative Information</td>
<td align="left">文档已正常返回但一些应答头可能不正确,因为使用的是文档的拷贝</td>
</tr>
<tr>
<td align="left"><strong>204</strong></td>
<td align="left"><strong>No Content</strong></td>
<td align="left"><strong>服务器接到请求已经处理完毕,但浏览器页面不会刷新</strong></td>
</tr>
<tr>
<td align="left">205</td>
<td align="left">Reset Content</td>
<td align="left">没有新内容,但浏览器应该重置它所显示的内容,用来强制浏览器清除表单输入内容.</td>
</tr>
<tr>
<td align="left">206</td>
<td align="left">Partial Content</td>
<td align="left">客户发送了一个带有Range头的GET请求,服务器完成了它</td>
</tr>
<tr>
<td align="left">300</td>
<td align="left">Multiple Choices</td>
<td align="left">客户请求的文档可以在多个位置找到,这些位置已经在返回的文档中列出.如果服务器要提出优先选择,则应该在Location应答头指明</td>
</tr>
<tr>
<td align="left"><strong>301</strong></td>
<td align="left"><strong>Moved Permanently</strong></td>
<td align="left"><strong>永久重定向,请求的网页已经永久移动到新位置</strong></td>
</tr>
<tr>
<td align="left"><strong>302</strong></td>
<td align="left"><strong>Found</strong></td>
<td align="left"><strong>临时重定向,POST方法的重定向在未询问用户的情况下就会变成GET</strong></td>
</tr>
<tr>
<td align="left"><strong>303</strong></td>
<td align="left"><strong>See Other</strong></td>
<td align="left"><strong>类似301/302,不同之处在于,原来的请求是POST,现在是GET</strong></td>
</tr>
<tr>
<td align="left"><strong>304</strong></td>
<td align="left"><strong>Not Modified</strong></td>
<td align="left"><strong>自从上次请求后,网页未被修改过</strong></td>
</tr>
<tr>
<td align="left">305</td>
<td align="left">Use Proxy</td>
<td align="left">使用代理服务器</td>
</tr>
<tr>
<td align="left"><strong>307</strong></td>
<td align="left"><strong>Temporary Redirect</strong></td>
<td align="left"><strong>临时重定向，不同之处,把POST转为GET</strong></td>
</tr>
<tr>
<td align="left"><strong>400</strong></td>
<td align="left"><strong>Bad Request</strong></td>
<td align="left"><strong>请求出现语法错误</strong></td>
</tr>
<tr>
<td align="left"><strong>401</strong></td>
<td align="left"><strong>Unauthorized</strong></td>
<td align="left"><strong>用户未授权,需要用户验证</strong></td>
</tr>
<tr>
<td align="left"><strong>403</strong></td>
<td align="left"><strong>Forbidden</strong></td>
<td align="left"><strong>服务器已经理解请求,但是拒绝执行</strong></td>
</tr>
<tr>
<td align="left"><strong>404</strong></td>
<td align="left"><strong>Not Found</strong></td>
<td align="left"><strong>服务器找不到请求的网页</strong></td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">Method Not Allowed</td>
<td align="left">请求方法（GET、POST、HEAD、DELETE、PUT、TRACE等）对指定的资源不适用。</td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">Not Acceptable</td>
<td align="left">指定的资源已经找到，但它的MIME类型和客户在Accpet头中所指定的不兼容</td>
</tr>
<tr>
<td align="left">407</td>
<td align="left">Proxy Authentication Required</td>
<td align="left">类似于401，表示客户必须先经过代理服务器的授权</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">Request Timeout</td>
<td align="left">请求超时</td>
</tr>
<tr>
<td align="left"><strong>500</strong></td>
<td align="left"><strong>Internal Server Error</strong></td>
<td align="left"><strong>服务器遇到错误,无法完成请求</strong></td>
</tr>
<tr>
<td align="left"><strong>503</strong></td>
<td align="left"><strong>Service Unavailable</strong></td>
<td align="left"><strong>由于临时的服务器维护或过载,暂时无法处理请求</strong></td>
</tr>
<tr>
<td align="left">504</td>
<td align="left">Gateway Timeout</td>
<td align="left">由作为代理或网关的服务器使用，表示不能及时地从远程服务器获得应答</td>
</tr>
<tr>
<td align="left">505</td>
<td align="left">HTTP Version Not Supported</td>
<td align="left">服务器不支持请求中所指明的HTTP版本。</td>
</tr>
</tbody></table>
<h2 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h2><ol>
<li><strong>GET</strong><br>请求服务器发送某个资源</li>
<li><strong>HEAD</strong><br>与GET方法类似,但是在服务器的响应中没有资源的内容,只有资源的一些基本信息,主要用于</li>
</ol>
<ul>
<li>在不获取资源的情况下获取信息(类型,大小等)</li>
<li>通过状态码看资源是否存在</li>
<li>通过查看首部,测试资源是否被修改</li>
</ul>
<ol start="3">
<li><strong>PUT</strong><br>和GET从服务器获取资源相反,PUT用于向服务器写入资源.PUT的语义就是让服务器用请求的主体部分创建一个请求URL命名的文档.如果存在就替换</li>
<li><strong>POST</strong><br>POST用于向服务器发送数据,通常用来支持HTML的表单(input,select,textarea),表单中的数据会被发送到服务器</li>
<li><strong>TRACE</strong><br>客户端发送一个请求,这个请求可能会穿过防火墙,代理,网关,和一些其他应用程序,每个中间节点都可以修改HTTP请求,TRACE方法允许客户端在最终请求发往服务器的时候,看看他变成了什么样子<br>TRACE请求会在目的服务器端发送一个”闭环”诊断,行程最后一站服务器会弹回一条TRACE响应,并在响应主题中携带他收到的原始请求报文</li>
<li><strong>DELETE</strong><br>用于要求服务器删除请求的URL,和PUT一样,服务器可能不支持</li>
<li><strong>OPTIONS</strong><br>用于请求服务器告知其支持的各种功能</li>
</ol>
<h1 id="浏览器的缓存机制"><a href="#浏览器的缓存机制" class="headerlink" title="浏览器的缓存机制"></a>浏览器的缓存机制</h1><h2 id="通俗语言版-自我理解"><a href="#通俗语言版-自我理解" class="headerlink" title="通俗语言版(自我理解)"></a>通俗语言版(自我理解)</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cache-Contro<span class="variable">l:</span> <span class="built_in">max</span>-age=<span class="number">300</span>；</span><br><span class="line">ETa<span class="variable">g:W</span>/<span class="string">"e-cbxLFQW5zapn79tQwb/g6Q"</span></span><br></pre></td></tr></table></figure>

<p>浏览器第一次请求a.jpg这张图片,服务器发回一张图片,并且附送一个ETag(相当于一个用于验证的文件).浏览器把这张图片和ETag缓存到本地.如果在300秒内,浏览器又请求这张图片,那么直接从缓存中读取这张图.如果超过300秒,浏览器发现已经过了时间了,就重新向服务器发请求,并且附带之前给的ETag.服务器拿着当前文件计算后的ETag和浏览器发回的ETag比较,如果一样,说明图片没换,发回一个响应头(不包含图片,304,表示文件没修改,还能用).如果不一样,就把新的文件和新的ETag发回去.<br>另外还有Last-Modified/If-Modified-Since.和ETag功能类似.因为服务器可能不止一个,文件存储在不同的服务器,那就给请求文件上附带上Last-Modified声明,请求时带上If-Modified-Since,表明服务器上一次修改这个文件的时间,拿来和服务器上记录的最后修改时间对比.如果修改时间比较新,说明被动过,发回一个新文件.如果时间比较旧,说明不用换,发回304,使用缓存即可.</p>
<h2 id="严谨说法"><a href="#严谨说法" class="headerlink" title="严谨说法"></a>严谨说法</h2><p>浏览器缓存控制分为强缓存和协商缓存，协商缓存必须配合强缓存使用。</p>
<p>首先浏览器第一次跟服务器请求一个资源，服务器在返回这个资源和response header的同时，会根据开发者要求或者浏览器默认，在response的header加上相关字段的http response header。</p>
<p>一、当浏览器对某个资源的请求命中了强缓存时，利用[Expires]或者[Cache-Control]这两个http response header实现<br>。</p>
<ol>
<li><p>[Expires]：描述的是一个绝对时间，根据的是客户端时间。用GMT格式的字符串表示，如：Expires:Thu, 31 Dec 2037 23:55:55 GMT 下次浏览器再次请求同一资源时。先从客户端缓存中寻找，找到这个资源后，拿出它的[Expires]跟当前的请求时间比较。如果请求时间在[Expires]指定的失效时间之前，就能命中缓存，这样就不用再次到服务器上去缓存一遍，节省了资源。但是正因为是绝对时间，如果客户端时间被随意更改下，这个机制就失效了。所以我们需要[Cache-Control]。</p>
</li>
<li><p>[Cache-Control]：描述的是一个相对时间，在进行缓存命中时，都是利用浏览器时间判断。</p>
</li>
</ol>
<p>这两个header可以只启用一个，也可以同时启用，当response header中，[Expires]和[Cache-Control]同时存在时，[Cache-Control]优先级高于[Expires]。</p>
<p>二、当浏览器对某个资源的请求没有命中强缓存，就会发一个请求到服务器，验证协商缓存是否命中。<br>如果命中，则还是从客户端缓存中加载。协商缓存利用的是[Last-Modified，If-Modified-Since]和[ETag、If-None-Match]这两对Header来管理的。</p>
<ol>
<li><p>[Last-Modified]：原理和上面的[expires]相同，区别是它是根据服务器时间返回的header来判断缓存是否存在。但是有时候也会服务器上资源其实有变化，但是最后修改时间却没有变化的情况（这种问题也不容易被定位），这时候我们需要[ETag、If-None-Match]。</p>
</li>
<li><p>[ETag、If-None-Match]：原理与上相同，区别是浏览器跟服务器请求一个资源，服务器在返回这个资源的同时，在respone的header加上ETag的header，这个header是服务器根据当前请求的资源生成的一个唯一标识，这个唯一标识是一个字符串，只要资源有变化这个串就不同。</p>
</li>
<li><p>[ETag、If-None-Match]这么厉害我们为什么还需要[Last-Modified、If-Modified-Since]呢？有一个例子就是分布式系统尽量关闭掉ETag(每台机器生成的ETag都会不一样）</p>
</li>
</ol>
<p>[Last-Modified，If-Modified-Since]和[ETag、If-None-Match]一般都是同时启用。</p>
<h1 id="HTTPS原理"><a href="#HTTPS原理" class="headerlink" title="HTTPS原理"></a>HTTPS原理</h1><p>HTTP+SSL/TLS， 即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL，用于安全的HTTP数据传输。</p>
<h2 id="加密算法："><a href="#加密算法：" class="headerlink" title="加密算法："></a>加密算法：</h2><ol>
<li><p>对称加密<br>有流式、分组两种，加密和解密都是使用的同一个密钥。</p>
</li>
<li><p>非对称加密<br>加密使用的密钥和解密使用的密钥是不相同的，分别称为：公钥、私钥，公钥和算法都是公开的，私钥是保密的。非对称加密算法性能较低，但是安全性超强，由于其加密特性，非对称加密算法能加密的数据长度也是有限的</p>
</li>
<li><p>哈希算法<br>将任意长度的信息转换为较短的固定长度的值，通常其长度要比信息小得多，且算法不可逆。</p>
</li>
<li><p>数字签名<br>签名就是在信息的后面再加上一段内容（信息经过hash后的值），可以证明信息没有被修改过。hash值一般都会加密后（也就是签名）再和信息一起发送，以保证这个hash值不被修改。</p>
<h1 id="简单通信流程"><a href="#简单通信流程" class="headerlink" title="简单通信流程"></a>简单通信流程</h1><p>概括来说，整个简化的加密通信的流程就是：</p>
</li>
<li><p>小明访问网站，网站将自己的证书给到小明（其实是给到浏览器，小明不会有感知）</p>
</li>
<li><p>浏览器从证书中拿到网站的公钥A</p>
</li>
<li><p>浏览器生成一个只有自己知道的对称密钥B，用公钥A加密，并传给网站（其实是有协商的过程，这里为了便于理解先简化）</p>
</li>
<li><p>网站通过私钥解密，拿到对称密钥B</p>
</li>
<li><p>浏览器、网站 之后的数据通信，都用密钥B进行加密</p>
<h1 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h1><h2 id="证书可能存在的问题"><a href="#证书可能存在的问题" class="headerlink" title="证书可能存在的问题"></a>证书可能存在的问题</h2><p>证书是伪造的：压根不是CA颁发的<br>证书被篡改过：比如将XX网站的公钥给替换了<br>解决方法: <strong>数字签名和摘要</strong><br>“摘要”就是对传输的内容，通过hash算法计算出一段固定长度的串。然后，在通过CA的私钥对这段摘要进行加密，加密后得到的结果就是“数字签名.这段数字签名只有CA的公钥才能够解密。</p>
</li>
</ol>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zax Tseng</p>
  <div class="site-description motion-element" itemprop="description">Zax's BLOG</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zax Tseng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.3.0</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>


<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  

  


  
</body>
</html>
