<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":true,"version":"8.13.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="ZAX">
<meta property="og:url" content="http://example.com/page/5/index.html">
<meta property="og:site_name" content="ZAX">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Zax Tseng">
<meta property="article:tag" content="javascript, React, Vue, HTML5">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ZAX</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">ZAX</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zax Tseng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">109</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/Axios/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/Axios/" class="post-title-link" itemprop="url">Axios</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:45" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:45+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:01" itemprop="dateModified" datetime="2022-11-15T09:05:01+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: Axios</p>
<p>date: 2019-09-24 11:33:48</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>HTML # 一级分类</li>
<li>HTTP进阶 # 二级分类</li>
</ul>
<hr>
<h1 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h1><p>axios 是一个基于 Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征：</p>
<ul>
<li>从浏览器中创建 XMLHttpRequest</li>
<li>从 node.js 发出 http 请求</li>
<li>支持  Promise API 拦截请求和响应</li>
<li>转换请求和响应数据</li>
<li>取消请求</li>
<li>自动转换 JSON 数据</li>
<li>客户端支持防止  CSRF&#x2F;XSRF</li>
</ul>
<p>步骤:</p>
<ol>
<li>安装</li>
</ol>
<p><code>$ npm install axios</code></p>
<p>或者 CDN 引入 2. 引入 3. 一般是把 axios 挂载到原型上,便于全局使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = axios;</span><br></pre></td></tr></table></figure>

<h2 id="Axios-之-get-请求"><a href="#Axios-之-get-请求" class="headerlink" title="Axios 之 get 请求"></a>Axios 之 get 请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;https://cnode.js.org/api/v1/topic&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">params</span>: &#123;</span><br><span class="line">            <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">limit</span>: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">items</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上面get请求的其他写法</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;/user&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">ID</span>: <span class="number">12345</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//如果只有一个选项</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;/user&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">ID</span>: <span class="number">12345</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//将数据写到url里</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;/user?page=1&amp;limit=10&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Axios-之-post-请求"><a href="#Axios-之-post-请求" class="headerlink" title="Axios 之 post 请求"></a>Axios 之 post 请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">axios</span><br><span class="line">  .<span class="title function_">post</span>(<span class="string">&quot;/user&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&quot;green&quot;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>POST 传递参数有两种格式:</p>
<ul>
<li>form­-data  格式: <code>?page=1&amp;limit=48</code>.<strong>但是不能写在 url 里</strong></li>
<li>x-­www-­form-­urlencoded 格式: <code>&#123; page: 1,limit: 10 &#125;</code></li>
</ul>
<blockquote>
<p>在 axios 中，post 请求接收的参数必须是 form-­data</p>
</blockquote>
<p>可以使用 qs 插件—­qs.stringify</p>
<h2 id="执行多个并发请求"><a href="#执行多个并发请求" class="headerlink" title="执行多个并发请求"></a>执行多个并发请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUserAccount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&quot;/user/12345&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUserPermissions</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&quot;/user/12345/permissions&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">all</span>([<span class="title function_">getUserAccount</span>(), <span class="title function_">getUserPermissions</span>()]).<span class="title function_">then</span>(</span><br><span class="line">  axios.<span class="title function_">spread</span>(<span class="keyword">function</span> (<span class="params">acct, perms</span>) &#123;</span><br><span class="line">    <span class="comment">// 两个请求现在都执行完成</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">postData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//先要安装qs插件,然后引入</span></span><br><span class="line">    <span class="comment">//使用qs插件将对象格式转化为form-data格式</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">post</span>(url,qs.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">limit</span>: <span class="number">10</span></span><br><span class="line">    &#125;))</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="拦截器-interceptors"><a href="#拦截器-interceptors" class="headerlink" title="拦截器 interceptors"></a>拦截器 interceptors</h1><p>在请求或响应被 then 或 catch 处理前拦截它们。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>如果你想在稍后移除拦截器，可以这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myInterceptor = axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">/*...*/</span></span><br><span class="line">&#125;);</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">eject</span>(myInterceptor);</span><br></pre></td></tr></table></figure>

<p>可以为自定义 axios 实例添加拦截器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instance = axios.<span class="title function_">create</span>();</span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">/*...*/</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E5%85%B6%E4%BB%96%E4%BA%BA%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E5%85%B6%E4%BB%96%E4%BA%BA%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">其他人面试题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:40" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:40+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:01" itemprop="dateModified" datetime="2022-11-15T09:05:01+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-其他人面试题-date-2019-11-16-18-40-25"><a href="#title-其他人面试题-date-2019-11-16-18-40-25" class="headerlink" title="title: 其他人面试题 date: 2019-11-16 18:40:25"></a>title: 其他人面试题 date: 2019-11-16 18:40:25</h2><p>tags: 面试题</p>
<h1 id="第一份"><a href="#第一份" class="headerlink" title="第一份"></a>第一份</h1><ol>
<li></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&quot;nick&quot;</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">age</span> = <span class="number">20</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">job</span> = <span class="string">&quot;Engineer&quot;</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">person1.<span class="property">name</span> = <span class="string">&quot;Greg&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person2.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;name&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Greg</span>;</span><br><span class="line">nick; <span class="comment">//实例并没有改变对象的属性</span></span><br><span class="line"><span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>请列举 js 的数据类型</li>
<li>请写出 dom 事件流的三个阶段</li>
<li>js 如何添加,移除,创建,复制,查找 dom 节点</li>
<li>jQuery 的 bind,live,delegate 的区别</li>
<li>请写出至少 4 种 vue 的指令和用法</li>
<li>什么是闭包,什么时候使用闭包</li>
<li>如何编写响应式网页</li>
<li>简单描述一下微信小程序的文件类型</li>
<li>如何优化代码</li>
<li>请列举 ES6 的语法</li>
</ol>
<h1 id="第二份"><a href="#第二份" class="headerlink" title="第二份"></a>第二份</h1><ol>
<li>this 原型链 new 结合的题,问输出什么</li>
<li>css 有什么选择器,优先级,什么属性,哪些可以继承,哪些不能继承,css3 新增的伪类有哪些</li>
<li>vue 组件通信</li>
<li>ajax 返回三个状态码,成功失败未知,假如是未知就轮询,1 到 5 秒延迟 3 秒发请求,6 到 10 秒延迟 1 秒,10 到 20 延迟 0.5 秒,轮询 20 次失败,手写可运行的代码</li>
<li>数组{城市,省份,代号}输出成{省份,城市[城市名,代号]}</li>
<li>js 有什么 bug 让你写代码出错,答类型判断.追问,怎么通过原型链判断一个对象是 json,</li>
<li>平时写代码有什么逻辑上的错误</li>
<li>当前端有什么技巧?(不是优化).答:console 二分法定位错误</li>
</ol>
<h1 id="第三份"><a href="#第三份" class="headerlink" title="第三份"></a>第三份</h1><ol>
<li><p>将下列数据封装成 json</p>
<table>
<thead>
<tr>
<th>数据名</th>
<th>值</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>kate</td>
<td>string</td>
</tr>
<tr>
<td>age</td>
<td>10</td>
<td>int</td>
</tr>
<tr>
<td>phone</td>
<td>15455234376</td>
<td>string</td>
</tr>
<tr>
<td>phone</td>
<td>15455234376</td>
<td>string</td>
</tr>
<tr>
<td>date_time</td>
<td>2019-01-01 15:00:00</td>
<td>string</td>
</tr>
</tbody></table>
</li>
<li><p>将如下 json 字符串转化成 js 对象并获取到 name 的值</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json_str = &#123; <span class="attr">name</span>: <span class="string">&quot;tiger&quot;</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json_str = &#123; <span class="attr">name</span>: <span class="string">&quot;tiger&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> str = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&quot;json_str&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>获取如下变量中的月和日</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date_time = <span class="string">&quot;2019-01-01 15:00:00&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>(date_time).<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>(date_time).<span class="title function_">getDate</span>();</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>写出尽可能多的 dom 事件和 js 事件</li>
<li>写出尽可能多的伪类和伪元素</li>
<li>css3 2D 转换,如右图效果(效果是第二个 div 方块向上位移一半,能够覆盖一点第一个 div,然后顺时针旋转 30 度),代码如下,请填写 div2 的代码</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-tag">div</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">height</span>: <span class="number">75px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">background-color</span>: lightgray;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-tag">div</span><span class="selector-id">#div2</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="comment">/*请写代码 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>1号div元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div2&quot;</span>&gt;</span>2号div元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div#div2&#123;</span><br><span class="line"><span class="attr">transform</span>: <span class="title function_">translateY</span>(-<span class="number">20</span>%);</span><br><span class="line"><span class="attr">transform</span>: <span class="title function_">rotate</span>(30deg);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>css 动画使用哪个属性,过渡使用哪个属性</li>
<li>写一种灰色的 rgb 值</li>
<li>尽可能多的 vue 的生命周期,并标注运行时间</li>
<li>控制元素是否显示的 vue 属性</li>
<li>下面代码的打印结果. 简述什么是变量的作用域,全局变量和局部变量的区别</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  a = <span class="number">100</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>);</span><br><span class="line">  <span class="keyword">var</span> a;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">100</span>; <span class="comment">//声明前置,函数内部a=100</span></span><br><span class="line"><span class="number">10</span>; <span class="comment">//this指向window,a=10</span></span><br><span class="line"><span class="number">100</span>; <span class="comment">//继续输出函数内部的a</span></span><br><span class="line"><span class="number">10</span>; <span class="comment">//函数内部的a只在函数内有效,在外部看全局的a,a=10</span></span><br></pre></td></tr></table></figure>

<ol start="12">
<li>简述 cookie 和 session 的区别</li>
<li>简述 axios 的作用和优势.</li>
</ol>
<h1 id="第四份"><a href="#第四份" class="headerlink" title="第四份"></a>第四份</h1><ol>
<li>v-show 和 v-if 的区别</li>
<li>let 和 const 的区别</li>
<li>fetch 和 axios 支持跨域请求吗?fetch 第一次得到什么数据,怎么进行转换?</li>
<li>什么是 MVC 和 MVVM,vue 属于那一种?小程序是什么思想实现双向数据绑定的?</li>
<li>async 和 await 实现同步的好处</li>
<li>React&#x2F;Vue 中 key 会影响 diff 算法吗</li>
<li>Vue-router 的路由原理</li>
<li>什么是虚拟 dom</li>
</ol>
<h1 id="第五份"><a href="#第五份" class="headerlink" title="第五份"></a>第五份</h1><ol>
<li>使用 css 让该节点不可见,方法越多越好</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;hidden&quot;</span>&gt;<span class="title class_">Hi</span>&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<ol start="2">
<li>在哪些场景下用过 position 的哪些值,他们分别有什么特性.</li>
<li>什么是单进程?什么是单进程异步?</li>
<li>输出结果</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  fn[i] = <span class="keyword">function</span> (<span class="params">param</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i + param);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn[<span class="number">5</span>](<span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> data = &#123; <span class="attr">a</span>: <span class="number">10</span>, <span class="attr">b</span>: <span class="number">20</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;第&quot;</span> + i + <span class="string">&quot;条数据:&quot;</span> + data);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">15</span>; <span class="comment">//闭包,打印最后是10个闭包,且i=10,传入[5],打出来i也是10</span></span><br><span class="line">(<span class="string">&quot;第10条数据:[object Object]&quot;</span>); <span class="comment">//字符串+对象就会把对象打印成[object Object].这是+运算符的特点</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>输出结果</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;).<span class="title function_">then</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考察微任务和宏任务</span></span><br><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="number">3</span>;</span><br><span class="line"><span class="number">4</span>; <span class="comment">//此时并未执行异步,仍属于宏任务中script下同步代码</span></span><br><span class="line"><span class="number">7</span>; <span class="comment">//此时同步代码执行完毕,执行栈为空,</span></span><br><span class="line"><span class="number">5</span>; <span class="comment">//开始执行微任务,promise属于微任务</span></span><br><span class="line"><span class="comment">//不输出6是因为那是失败时的回调</span></span><br><span class="line"><span class="number">2</span>; <span class="comment">//开始下一轮event loop,执行宏任务中的异步代码.setTimeout开始执行.</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>输出结果</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">    a[i] = a[i] + a[j];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//双重遍历</span></span><br><span class="line"><span class="comment">//可以假设外层的不变</span></span><br><span class="line"><span class="comment">//当i=0时,内层开始遍历,得到</span></span><br><span class="line">a[<span class="number">0</span>] = a[<span class="number">0</span>] + a[<span class="number">0</span>]; <span class="comment">//2</span></span><br><span class="line">a[<span class="number">0</span>] = a[<span class="number">0</span>] + a[<span class="number">1</span>]; <span class="comment">//3</span></span><br><span class="line">a[<span class="number">0</span>] = a[<span class="number">0</span>] + a[<span class="number">2</span>]; <span class="comment">//4</span></span><br><span class="line">a[<span class="number">0</span>] = a[<span class="number">0</span>] + a[<span class="number">3</span>]; <span class="comment">//5</span></span><br><span class="line">a[<span class="number">0</span>] = a[<span class="number">0</span>] + a[<span class="number">4</span>]; <span class="comment">//6,</span></span><br><span class="line"><span class="comment">//此时a[0] = 6</span></span><br><span class="line"><span class="comment">//当i=1时,内层再次遍历,得到</span></span><br><span class="line">a[<span class="number">1</span>] = a[<span class="number">1</span>] + a[<span class="number">0</span>]; <span class="comment">//7</span></span><br><span class="line">a[<span class="number">1</span>] = a[<span class="number">1</span>] + a[<span class="number">1</span>]; <span class="comment">//14</span></span><br><span class="line">a[<span class="number">1</span>] = a[<span class="number">1</span>] + a[<span class="number">2</span>]; <span class="comment">//15</span></span><br><span class="line">a[<span class="number">1</span>] = a[<span class="number">1</span>] + a[<span class="number">3</span>]; <span class="comment">//16</span></span><br><span class="line">a[<span class="number">1</span>] = a[<span class="number">1</span>] + a[<span class="number">4</span>]; <span class="comment">//17,</span></span><br><span class="line"><span class="comment">//此时a[1] = 17</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以此类推,得到</span></span><br><span class="line">a = [<span class="number">6</span>, <span class="number">17</span>, <span class="number">50</span>, <span class="number">149</span>, <span class="number">446</span>];</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>写出 1 所在的 while 循环的作用.补全 2 的代码</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//isSymmetry用来判断正整数n是否是一个对称数.例如:12321是对称数,123不是.</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isSymmetry</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> i = n;</span><br><span class="line">  <span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">//位置1</span></span><br><span class="line">  <span class="keyword">while</span> (i) &#123;</span><br><span class="line">    j = j * <span class="number">10</span> + (i % <span class="number">10</span>);</span><br><span class="line">    i = <span class="built_in">parseInt</span>(i / <span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>; <span class="comment">//位置2补充代码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isSymmetry</span>(<span class="number">12321</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isSymmetry</span>(<span class="number">12312</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">假设: n = <span class="number">11</span>,</span><br><span class="line">i = <span class="number">11</span>,j = <span class="number">0</span>;</span><br><span class="line">i = <span class="number">1</span>,j = <span class="number">1</span>;</span><br><span class="line">i = <span class="number">0</span> ,j = <span class="number">11</span></span><br><span class="line"></span><br><span class="line">n = <span class="number">111</span>,</span><br><span class="line">i = <span class="number">111</span>,j = <span class="number">0</span>;</span><br><span class="line">i = <span class="number">11</span>,j = <span class="number">1</span>;</span><br><span class="line">i = <span class="number">1</span>,j = <span class="number">11</span>;</span><br><span class="line">i = <span class="number">0</span>,j = <span class="number">111.</span></span><br><span class="line"></span><br><span class="line">n = <span class="number">12</span>,</span><br><span class="line">i = <span class="number">12</span>,j = <span class="number">0</span>;</span><br><span class="line">i = <span class="number">1</span>,j = <span class="number">2</span>;</span><br><span class="line">i = <span class="number">0</span>,j = <span class="number">21.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//结论</span></span><br><span class="line"><span class="keyword">return</span> n == j</span><br><span class="line"><span class="keyword">while</span>的作用: 循环判断是否将输入值的高低位置颠倒.</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>把数组倒序输出(不是排序,不能用内置方法)</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;first&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="string">&quot;2&quot;</span>, <span class="number">9</span>];</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> arr) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[key]);</span><br><span class="line">  &#125;, <span class="number">100</span> - key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>(过一面必做题)数组中的重复项最多出现 N 次.(时间复杂度越低得分越高)</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原题</span></span><br><span class="line"><span class="title function_">outputNth</span>([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], <span class="number">2</span>); <span class="comment">//return [1,1]</span></span><br><span class="line"><span class="title function_">outputNth</span>([<span class="number">20</span>, <span class="number">37</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>], <span class="number">2</span>); <span class="comment">//return [20,20,37,21]</span></span><br><span class="line"><span class="comment">//预估时间复杂度</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//附加题</span></span><br><span class="line"><span class="comment">//如果要求</span></span><br><span class="line"><span class="title function_">outputNth</span>([<span class="number">20</span>, <span class="number">37</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>], <span class="number">2</span>); <span class="comment">//return [20,37,20,21] 按原数组的先后返回</span></span><br><span class="line"><span class="comment">//预估时间复杂度</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<h1 id="第六份"><a href="#第六份" class="headerlink" title="第六份"></a>第六份</h1><ol>
<li>假设有两个数组 a 和 b,数组的内容都是从小到大排好序的数字.现在我们合并这两个数字.并且合并之后的数字也是从小到大排好序的.</li>
</ol>
<p>请写下你的实现.不要直接使用 js 的 sort 方法,并且确保只使用一次 for 循环.</p>
<p>例如,a&#x3D;[2,5,10],b&#x3D;[4,7,9,11],那么合并的结果是 c&#x3D;[2,4,5,7,9,10,11]</p>
<p>提示,你可以在一个 for 循环中同时控制两个数组下标 i 和 j.比较 a[i]和 a[j].将小的数字加到 c 中,同时更新相应的下标.但是注意各种边界条件.</p>
<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考察排序算法</span></span><br><span class="line"><span class="keyword">var</span> arr = a.<span class="title function_">concat</span>(b); <span class="comment">//arr=[2,5,10,4,7,9,11]</span></span><br><span class="line"><span class="keyword">var</span> c = [];</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>输入一个数字组成的字符串,请把它转化成整数并输出.</li>
</ol>
<p>例如,输入字符串’123’,输出整数 123.不要使用库函数,函数原型为: <code>function strToInt(str)</code></p>
<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+str);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(str));</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>合并数组中相邻且重复的元素</li>
</ol>
<p>说明: 请实现一个函数 merge,传入一个数组,合并数组中相邻且重复的元素,示例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">merge</span>([<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">1</span>]); <span class="comment">//[3,2,4,5,6,2,1]</span></span><br><span class="line"><span class="title function_">merge</span>([<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">//[3,2,3]</span></span><br><span class="line"><span class="title function_">merge</span>([<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">//[2,3]</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<ol start="4">
<li>请按顺序取出下方 log</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1 start <span class="comment">//async 表达式定义的函数是立即执行的</span></span><br><span class="line">async2</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">async1 end <span class="comment">//</span></span><br><span class="line">promise2</span><br><span class="line"><span class="built_in">setTimeout</span></span><br></pre></td></tr></table></figure>

<h1 id="第七份"><a href="#第七份" class="headerlink" title="第七份"></a>第七份</h1><ol>
<li>对 MVC,MVVM 的理解.</li>
<li>vue 对于 jquery 在开发上有什么优点</li>
<li>前后端分离的思想了解吗</li>
<li>你上一个项目都用了哪些方法优化 js 的性能</li>
<li>说一下你对 vue 和 veux 的使用方法,vue 的组件复用机制</li>
<li>js 怎样实现一个类,怎么实例化这个类</li>
</ol>
<h1 id="第八份"><a href="#第八份" class="headerlink" title="第八份"></a>第八份</h1><ol>
<li>下面的函数执行后会输出什么</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">a</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> b = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">    b.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data + i);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">a</span>(); <span class="comment">//输出什么</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hello world0</span><br><span class="line">hello world1</span><br><span class="line">hello world2</span><br><span class="line">hello world3</span><br><span class="line">hello world4</span><br><span class="line">hello world5</span><br><span class="line">hello world6</span><br><span class="line">hello world7</span><br><span class="line">hello world8</span><br><span class="line">hello world9</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>下面的函数执行后会输出什么</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">      <span class="title function_">reject</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data + i);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">b</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">a</span>(); <span class="comment">//输出什么</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hello0;</span><br><span class="line">hello1;</span><br><span class="line">hello2;</span><br><span class="line">hello3;</span><br><span class="line">hello4;</span><br><span class="line">hello5;</span><br><span class="line">hello6;</span><br><span class="line">hello7;</span><br><span class="line">hello8;</span><br><span class="line">hello9;</span><br></pre></td></tr></table></figure>

<h1 id="第九份-半截"><a href="#第九份-半截" class="headerlink" title="第九份(半截)"></a>第九份(半截)</h1><ol start="7">
<li><p>什么是延迟加载?</p>
</li>
<li><p>请谈谈 vue 中的 mvvm 模式</p>
</li>
<li><p>vue 中引入组件的步骤</p>
</li>
<li><p>什么是 vuex?为什么要用 vuex?</p>
</li>
</ol>
<h1 id="第十份"><a href="#第十份" class="headerlink" title="第十份"></a>第十份</h1><ol>
<li>请说明值类型和引用类型的区别?那些是值类型,哪些是引用类型?</li>
<li>请简述 private,protected,public,internal 修饰符的访问权限.</li>
<li>简述 session 和 cookie 的作用和区别</li>
<li>请简述 ajax 工作原理和常用的 ajax 框架</li>
<li>css 规范中, <code>.</code>后面跟一个名称代表什么?<code>#</code>代表什么?</li>
<li>字符串反转,给定字符串<code>&quot;we;tonight;you;&quot;</code>,编码实现输出<code>&quot;ew;thginot;uoy;&quot;</code></li>
</ol>
<h1 id="第十一份"><a href="#第十一份" class="headerlink" title="第十一份"></a>第十一份</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;The Window&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;My Obj&quot;</span>,</span><br><span class="line">  <span class="attr">getNameFunc</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">getNameFunc</span>()()); <span class="comment">//输出什么</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj.<span class="title function_">getNameFunc</span>()的<span class="variable language_">this</span>是obj</span><br><span class="line">obj.<span class="title function_">getNameFunc</span>()()的<span class="variable language_">this</span>是<span class="variable language_">window</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;The Window&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;My Obj&quot;</span>,</span><br><span class="line">  <span class="attr">getNameFunc</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> that.<span class="property">name</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">getNameFunc</span>()()); <span class="comment">//输出什么</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">My</span> <span class="title class_">Obj</span></span><br></pre></td></tr></table></figure>

<h1 id="第十二份"><a href="#第十二份" class="headerlink" title="第十二份"></a>第十二份</h1><ol>
<li>vue-router 原理</li>
<li>相关钩子函数</li>
<li>nexttick</li>
<li>css3 常用属性</li>
<li>keep-alive</li>
<li>屏幕滚动</li>
<li>箭头函数什么时候就已经绑定 this</li>
<li>数组方法,map 和 forEach 的区别</li>
<li>route 和 router 的区别</li>
<li>中间件原理</li>
</ol>
<h1 id="第十三份"><a href="#第十三份" class="headerlink" title="第十三份"></a>第十三份</h1><ol>
<li>虚拟 dom</li>
<li>生命周期,常用的那些,在这些阶段一般都做了什么</li>
<li>Vuex 是干什么的?有哪些属性?怎么操作 state 中的属性</li>
<li>vue-router 有哪些方法?怎么传递参数,获取参数,路由导航钩子有哪几种,全局钩子的移动端适配(媒体查询,flex,viewport,rem)</li>
<li>常用的 ES6 内容.const a &#x3D;{b:1},改变 b 的值会不会报错.模板字符串,解构赋值,拓展运算符及使用场景.</li>
<li>element-UI 常用的插件,之前项目是怎么搭建的</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E4%B8%8A%E6%B5%B7%E5%85%AC%E5%8F%B8%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E4%B8%8A%E6%B5%B7%E5%85%AC%E5%8F%B8%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">上海公司面试题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:35" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:35+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:01" itemprop="dateModified" datetime="2022-11-15T09:05:01+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-上海公司面试题-date-2019-11-16-16-28-19"><a href="#title-上海公司面试题-date-2019-11-16-16-28-19" class="headerlink" title="title: 上海公司面试题 date: 2019-11-16 16:28:19"></a>title: 上海公司面试题 date: 2019-11-16 16:28:19</h2><p>tags: 面试题</p>
<h1 id="云印-以-vue-为主"><a href="#云印-以-vue-为主" class="headerlink" title="云印(以 vue 为主)"></a>云印(以 vue 为主)</h1><p>1.页面初始化一般放在哪个生命周期里,为什么?</p>
<p>2.vue 组件之间如何传递参数</p>
<p>3.同步组件和异步组件之间的区别,优缺点</p>
<p>4.vue-router 实现原理</p>
<p>5.微信小程序的跳转方式有哪几种</p>
<ol start="6">
<li>ajax 的同步和异步有什么区别</li>
</ol>
<p>7.css 那些属性是默认继承的?</p>
<ol start="8">
<li><p>canvas 和 style 怎么进行绑定?</p>
</li>
<li><p>v-for 中 in 和 of 的区别</p>
</li>
<li><p>watch 如何使用</p>
</li>
<li><p>如何存储 localstorage</p>
</li>
<li><p>router 如何传值,如何取值</p>
</li>
<li><p>vuex 如何存储值</p>
</li>
<li><p>分页组件的实现</p>
</li>
<li><p>如何监听物理返回键</p>
</li>
</ol>
<h1 id="报关-以-http-为主"><a href="#报关-以-http-为主" class="headerlink" title="报关(以 http 为主)"></a>报关(以 http 为主)</h1><ol>
<li>http 请求原理</li>
<li>http 请求的几种方式,有什么区别</li>
<li>如何进行登录验证,token 失效如何处理</li>
<li>如何调换数组中两个元素的位置.例如:[1,2,3,4,5]中调换 3 和 4 的位置,变成[1,2,4,3,5].</li>
<li>向后端发送文件的格式?</li>
</ol>
<h1 id="外包公司-1"><a href="#外包公司-1" class="headerlink" title="外包公司 1"></a>外包公司 1</h1><ol>
<li>js 中如何检测一个变量是 String 类型.请写出函数具体实现</li>
<li>写出下面函数输出什么(tips:闭包)</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> count = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    count += <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="title function_">add</span>();</span><br><span class="line"><span class="title function_">s</span>();</span><br><span class="line"><span class="title function_">s</span>();</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考察闭包</span></span><br><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如何阻止事件冒泡和默认事件</li>
<li>下面的问题打印什么</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;我是MT&quot;</span>;</span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">&quot;哈哈哈&quot;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考察变量声明和作用域</span></span><br><span class="line"><span class="literal">undefined</span>; <span class="comment">//因为打印str时,首先从str所在的作用域找变量str,</span></span><br><span class="line"><span class="comment">//因为有声明前置,var str,但是未赋值,是undefined.所以不再从外部找str</span></span><br><span class="line">哈哈哈;</span><br><span class="line">我是<span class="variable constant_">MT</span>;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>什么是盒子模型</li>
<li>sessionStorage,localStorage 和 cookie 的区别</li>
<li>px 和 em 的区别</li>
<li>列举不同的清除浮动的技巧</li>
<li><code>display: none</code>和<code>visibility: hidden</code>的区别</li>
<li>组件中<code>&lt;style scoped&gt;</code>的<code>scoped</code>的作用.</li>
<li>v-show 和 v-if 的共同点和区别</li>
<li>vue 注册组件使用什么关键字</li>
<li>vue 如何实现父子组件通信</li>
<li>vue 的双向数据绑定原理是什么?</li>
</ol>
<h1 id="外包公司-2"><a href="#外包公司-2" class="headerlink" title="外包公司 2"></a>外包公司 2</h1><ol>
<li>使用 js 将数组: <code>[&#123; name: &quot;king&quot;, age: 18&#125;, &#123;name: &quot;bob&quot;, age: 22&#125;]</code>变成[18,22],并且筛选出大于 20 的值.</li>
<li>使用 js 获取页面一个 id 为 myP 的<code>&lt;p&gt;</code>标签,并为其增加点击事件,并说明一下 addEventLister 方法的第三个可选参数的冒泡和捕获.</li>
<li>控制台运行一下代码:</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br></pre></td></tr></table></figure>

<p>输出什么</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> <span class="comment">//先执行for循环,i=1,有异步代码,封存数据,console.log(i).</span></span><br><span class="line"><span class="comment">//i=2,console.log(i)</span></span><br><span class="line"><span class="comment">//i=3,console.log(i)</span></span><br><span class="line"><span class="comment">//此时i的最终形态是3,执行最后一行的console.log(i),是3</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>个<span class="number">3</span> <span class="comment">//同步代码执行完,看任务队列中排着3个console.log(i),i=3,连续输出3个3</span></span><br></pre></td></tr></table></figure>

<h1 id="大钱"><a href="#大钱" class="headerlink" title="大钱"></a>大钱</h1><ol>
<li>写一个原生 ajax 请求</li>
<li>写几个常用的数组,字符串,对象的方法</li>
<li><code>npm install --save</code>和<code>npm install --save --dev</code>的区别</li>
<li>IE 与火狐的事件机制有什么区别?如何阻止冒泡?</li>
<li>什么是闭包? 闭包的用途</li>
<li>css3 动画最后一帧如何恢复到原样?</li>
<li>sessionStorage,localStorage 和 cookie 的区别?分别在什么时候用?</li>
<li>HTML5 新特性?移除那些?如何处理 HTML5 新标签的浏览器兼容问题?做过的项目中,那些 CSS 样式需要单独写兼容样式?</li>
<li>ES6 运算符…是用来做什么的?用 ES6 语法遍历一个数组.</li>
<li>px,em,rem 的区别</li>
<li>prototype 是什么?什么时候用</li>
<li>js 添加,移除,替换,删除,创建,查找节点的方法是什么</li>
<li>如何优化网站性能(js)</li>
<li>编写一个方法,去掉以下数组的重复元素</li>
<li>vue 如何监听一个对象的变化,写个例子</li>
<li>setTimeout,promise,async&#x2F;await 的区别</li>
<li>intercepter 用在什么地方</li>
<li>路由拦截在什么地方</li>
<li>切换用户如何处理</li>
<li>用户不是提交验证进来而是输入 url 进来如何处理</li>
<li>组件里 name 的作用</li>
</ol>
<h1 id="外包公司-3"><a href="#外包公司-3" class="headerlink" title="外包公司 3"></a>外包公司 3</h1><ol>
<li>js 有哪些基本数据类型</li>
<li>var let const 的区别</li>
<li>数字计算: 在 js 中,0.1+0.2 的结果是?</li>
<li>下面代码有什么问题?(tips:闭包)</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>test1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>test2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>test3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;ul li&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;lis.<span class="property">length</span>; i++)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     lis[i].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;,<span class="literal">false</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>无论点击哪个都会输出 3</p>
<p>解决方法:</p>
<p>1.将 var 换成 let</p>
<ol start="2">
<li>for 循环改造</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  (<span class="keyword">function</span> (<span class="params">i</span>) &#123;</span><br><span class="line">    lis[i].<span class="title function_">addEventListener</span>(</span><br><span class="line">      <span class="string">&quot;click&quot;</span>,</span><br><span class="line">      <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>请写出下面输出结果,</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;,arr = [];</span><br><span class="line">(&#123; <span class="attr">foo</span>: obj.<span class="property">prop</span>, <span class="attr">bar</span>: arr[<span class="number">0</span>] &#125; = &#123; <span class="attr">foo</span>: <span class="number">123</span>, <span class="attr">bar</span>: <span class="literal">true</span> &#125;));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj, arr);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">prop</span>: <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line">[<span class="literal">true</span>];</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>promise 有几种状态,什么时候会进入 catch?</li>
<li>在 8*8 的国际象棋摆放八个皇后,使其不同相互攻击,即任意两个皇后不能处在同一行,同一列,同一对角线.总共有多少种摆法.</li>
<li>git 命令有哪些?</li>
</ol>
<h1 id="外包公司-4-才匠"><a href="#外包公司-4-才匠" class="headerlink" title="外包公司 4 才匠"></a>外包公司 4 才匠</h1><ol>
<li>下面代码的输出是什么?</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shape = &#123;</span><br><span class="line">  <span class="attr">radius</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="title function_">diameter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">radius</span> * <span class="number">2</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">perimeter</span>: <span class="function">() =&gt;</span> <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="variable language_">this</span>.<span class="property">radius</span>,</span><br><span class="line">&#125;;</span><br><span class="line">shape.<span class="title function_">diameter</span>();</span><br><span class="line">shape.<span class="title function_">perimeter</span>();</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">20</span>;</span><br><span class="line"><span class="title class_">NaN</span>; <span class="comment">//考察箭头函数的this</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c = &#123; <span class="attr">greeting</span>: <span class="string">&quot;hey&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> d;</span><br><span class="line">d = c;</span><br><span class="line">c.<span class="property">greeting</span> = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d.<span class="property">greeting</span>);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello; <span class="comment">//考察引用类型的指针,或者说堆内存</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Chameleon</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">colorChange</span>(<span class="params">newColor</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">newColor</span> = newColor;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">&#123; newColor = <span class="string">&quot;green&quot;</span> &#125; = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">newColor</span> = newColor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> freddie = <span class="keyword">new</span> <span class="title class_">Chameleon</span>(&#123; <span class="attr">newColor</span>: <span class="string">&quot;purple&quot;</span> &#125;);</span><br><span class="line">freddie.<span class="title function_">colorChange</span>(<span class="string">&quot;orange&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考察class中static的方法</span></span><br><span class="line"><span class="string">&quot;freddie.colorChange is not a function&quot;</span>;</span><br><span class="line"><span class="comment">//static不能在类的实例上调用</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">firstName, lastName</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">firstName</span> = firstName;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">lastName</span> = lastName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> member = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lydia&quot;</span>, <span class="string">&quot;Hallie&quot;</span>);</span><br><span class="line"><span class="title class_">Person</span>.<span class="property">getFullName</span> = <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(member.<span class="title function_">getFullName</span>());</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考察ES6中的class</span></span><br><span class="line"><span class="string">&quot;member.getFullName is not a function&quot;</span></span><br><span class="line"><span class="comment">//getFullName并没有写到Person的原型上,member并不能调用该函数</span></span><br><span class="line">解决办法:</span><br><span class="line"><span class="title class_">ES6</span>:</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">firstName, lastName</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">firstName</span> = firstName</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lastName</span> = lastName</span><br><span class="line">  &#125;</span><br><span class="line">  getFullName = <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> member = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lydia&quot;</span>,<span class="string">&quot;Hallie&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(member.<span class="title function_">getFullName</span>())</span><br><span class="line"><span class="title class_">ES5</span>原型法:</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">firstName, lastName</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">firstName</span> = firstName;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">lastName</span> = lastName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getFullName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span><br><span class="line">  &#125; <span class="comment">//这里不能用箭头函数,否则this指向window</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> member = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lydia&quot;</span>, <span class="string">&quot;Hallie&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(member.<span class="title function_">getFullName</span>());</span><br></pre></td></tr></table></figure>

<ol start="5">
<li></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">checkAge</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (data === &#123; <span class="attr">age</span>: <span class="number">18</span> &#125;) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;you are an adult!&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hh&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">checkAge</span>(&#123; <span class="attr">age</span>: <span class="number">18</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考察引用类型</span></span><br><span class="line">hh; <span class="comment">//考点在&#123;age: 18&#125; === &#123;age: 18&#125;是否相等,</span></span><br><span class="line"><span class="comment">//两个不同的地址,所以不相等</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/JS%E6%B7%B1%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/JS%E6%B7%B1%E5%85%A5/" class="post-title-link" itemprop="url">JS深入</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:30" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:30+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:01" itemprop="dateModified" datetime="2022-11-15T09:05:01+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: JS深入</p>
<p>date: 2019-09-20 19:52:59</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>JS # 一级分类</li>
<li>JS深入 # 二级分类</li>
</ul>
<hr>
<h1 id="JavaScript-自动垃圾收集机制"><a href="#JavaScript-自动垃圾收集机制" class="headerlink" title="JavaScript 自动垃圾收集机制"></a>JavaScript 自动垃圾收集机制</h1><p>垃圾回收又称为 GC(Garbage Collecation)。编写 JavaScript 程序时，开发者不需要手工跟踪内存的使用情况，只要按照标准写 JavaScript 代码，JavaScript 程序运行所需内存的分配以及无用内存的回收完全是自动管理。JavaScript 中自动垃圾回收机制的原理为：</p>
<blockquote>
<p>找出那些不再使用的变量，然后释放其占用的内存。垃圾收集器会按照固定的时间间隔(或预定的收集时间)周期性地执行此操作。</p>
</blockquote>
<h2 id="局部变量的正常生命周期"><a href="#局部变量的正常生命周期" class="headerlink" title="局部变量的正常生命周期"></a>局部变量的正常生命周期</h2><p>局部变量只在函数执行的过程中存在。</p>
<p>在函数执行过程中，会为局部变量在栈内存(或 堆内存)上分配相应的空间来存储它们的值。在函数中使用这些变量，直至函数执行结束，此时可以释放局部变量的内存供将来需要时使用。</p>
<p>以上情况下，较容易判断变量是否有存在的必要，更复杂的情况需要更精细的变量追踪策略。</p>
<p>JavaScript 中的垃圾收集器必须跟踪每个变量是否有用，需要为不再有用的变量打上标记，用于将来回收其占用的内存。标识无用变量的策略通常有两个：<strong>标记清除</strong> 和 <strong>引用计数</strong> 。</p>
<h2 id="JavaScript-中的栈内存与堆内存"><a href="#JavaScript-中的栈内存与堆内存" class="headerlink" title="JavaScript 中的栈内存与堆内存"></a>JavaScript 中的栈内存与堆内存</h2><p>上述过程中，JavaScript 中变量分为 基本类型值 和 引用类型值：</p>
<ul>
<li>基本类型值 在内存中占固定大小的空间，因此被保存在 <strong>栈内存</strong> 中；</li>
<li>引用类型值 是对象，保存在 <strong>堆内存</strong> 中。包含引用类型值的变量实际包含并非对象本身，而是指向该对象的指针。一个变量从另一个变量复制引用类型的值时，复制的也是指向该对象的指针。</li>
</ul>
<h2 id="标记清除"><a href="#标记清除" class="headerlink" title="标记清除"></a>标记清除</h2><p>标记清除(mark-and-sweep) 是 JavaScript 中最常用的垃圾回收方式。其执行机制如下：</p>
<ul>
<li>当变量进入环境时，就将其标记为“进入环境”</li>
<li>当变量离开环境时将其标记为“离开环境”</li>
</ul>
<p>逻辑上，永远不能释放进入环境的变量所占用的内存，因为执行流进入相应的环境时，可能会用到它们。</p>
<p>标记变量的方式有很多种，可以使用标记位的形式记录变量进入环境，也可单独为“进入环境”和“离开环境”添加变量列表来记录变化。</p>
<p>标记清除采用的收集策略为：</p>
<ol>
<li>JavaScript 中的垃圾收集器运行时会给<strong>存储在内存中的所有变量</strong>都加上标记；</li>
<li>然后去掉环境中的变量以及被环境中的变量引用的变量的标记；</li>
<li>此后，再被加上标记的变量被视为准备删除的变量；</li>
<li>最后，垃圾收集器完成内存清除，销毁那些带标记的值并回收其占用的内存空间。</li>
</ol>
<p>2008 年之前，IE、Firefox、Opera、Chrome 和 Safari 的 JavaScript 实现使用的均为 标记清除式的垃圾回收策略，区别可能在垃圾收集的时间间隔。</p>
<h2 id="引用计数"><a href="#引用计数" class="headerlink" title="引用计数"></a>引用计数</h2><p>引用计数(reference counting) 是另一种垃圾收集策略。引用计数的本质是 <strong>跟踪记录每个值被引用的次数</strong>。其执行机制如下：</p>
<ol>
<li>当声明一个变量并将一个引用类型值赋值给该变量时，这个值的引用次数为 1；</li>
<li>若同一个值(变量)又被赋值给另一个变量，则该值的引用次数加 1；</li>
<li>但是如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数减 1；</li>
<li>当这个值的引用次数为 0 时，则无法再访问这个值，就可回收其占用的内存空间。</li>
</ol>
<p>垃圾收集器下次运行时，会释放那些引用次数为零的值所占用的内存。</p>
<p>引用计数存在一个致命的问题： <strong>循环引用</strong>。循环引用是指，对象 A 中包含一个指向对象 B 的指针，而对象 B 中也包含一个指向对象 A 的引用。下面的代码就是标准的循环引用的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cycleRefernce</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> objectA = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">  <span class="keyword">var</span> objectB = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">  objectA.<span class="property">someOtherObject</span> = objectB;</span><br><span class="line">  objectB.<span class="property">anotherObject</span> = objectA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述例子中 objectA 和 objectB 通过各自属性相互引用。按照引用计数的策略，两个对象的引用次数均为 2。若采用标记清除策略，函数执行完毕，对象离开作用域就不存在相互引用。但采用引用计数后，函数执行完，两个对象的引用次数永不为 0，会一直存尊内存中，若多次调用，导致大量内存得不到回收。</p>
<p>IE8 浏览器 之前中有一部分对象并不是原生的 JavaScript 对象，可能是使用 C++ 以 COM 对象的形式实现的(BOM, DOM)。而 COM 对象的垃圾收集机制采用的是 引用计数策略。即使 IE 的 JavaScript 引擎是使用标记清除策略实现的，但 JavaScript 访问 COM 对象仍然是基于 引用计数策略的。在这种情况下，只要在 IE 中涉及 COM 对象，就可能存在循环引用的问题。</p>
<p>为避免出现循环引用，最好在不使用这些对象时，手动断开 原生 JavaScript 对象 与 DOM 元素之间的连接。IE 中的循环引用与手动断开的操作如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;some_element&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> myObject = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">myObject.<span class="property">element</span> = element;</span><br><span class="line">element.<span class="property">someObject</span> = myObject;</span><br><span class="line"><span class="comment">// 以上 存在循环引用</span></span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="comment">// 以下 手工断开连接</span></span><br><span class="line">myObject.<span class="property">element</span> = <span class="literal">null</span>;</span><br><span class="line">element.<span class="property">someObject</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<p>将变量设置成 null 即可切断变量与它之前引用的值之间的连接。下次垃圾收集器运行时，会删除这些值并回收它们占用的内存。</p>
<p>为解决上述问题，IE9 及以上版本把 BOM 和 DOM 对象都转换成了真正的 JavaScript 对象，避免了两种垃圾回收算法并存引起的问题。</p>
<h2 id="垃圾回收的性能问题"><a href="#垃圾回收的性能问题" class="headerlink" title="垃圾回收的性能问题"></a>垃圾回收的性能问题</h2><p>垃圾收集器是周期运行的，确定<strong>垃圾收集的时间间隔</strong>是个重要的问题。</p>
<p>IE7 之前的垃圾收集器是根据内存分配量运行的，即 256 个变量、4096 个对象(数组)字面量或 64 KB 的字符串。达到这些临界值的任何一个，垃圾收集器就会运行。所以就导致如果一个脚本含有很多变量，在整个生命周期中一直保有前面临界值大小的变量，就会频繁触发垃圾回收，会存在严重的性能问题。</p>
<p>IE7 重写了垃圾收集例程。新的工作方式为：触发垃圾收集的变量分配、字面量和数组元素的临界值被调整为 <strong>动态修正</strong>。初始值与之前版本相同，但如果垃圾收集例程回收的内存低于 15%，则临界值加倍。若回收内存分配量超过 85%，则临界值重置回默认值。</p>
<p>JavaScript V8 引擎的垃圾回收机制</p>
<p>在 JavaScript 脚本中，绝大多数对象的生存期很短，只有部分对象的生存期较长。所以，V8 中的垃圾回收主要使用的是 分代回收 (Generational collection)机制。</p>
<h2 id="分代回收机制"><a href="#分代回收机制" class="headerlink" title="分代回收机制"></a>分代回收机制</h2><p>V8 引擎将保存对象的 <strong>堆</strong> (heap) 进行了分代:</p>
<ol>
<li>对象最初会被分在 <strong>新生区</strong>(New Space) (1~8M)，新生区的内存分配只需要保有一个指向内存区的指针，不断根据内存大小进行递增，当指针达到新生区的末尾，会有一次垃圾回收清理(小周期)，清理掉新生区中不再活跃的死对象。</li>
<li>对于超过 2 个小周期的对象，则需要将其移动至 <strong>老生区</strong>(Old Space)。老生区在 标记-清除 或 标记-紧缩 的过程(大周期) 中进行回收。</li>
</ol>
<p>大周期进行的并不频繁。一次大周期通常是在移动足够多的对象至老生区后才会发生。</p>
<h3 id="Scavenge-算法"><a href="#Scavenge-算法" class="headerlink" title="Scavenge 算法"></a>Scavenge 算法</h3><p>由于垃圾清理发生的比较频繁，清理的过程必须很快。V8 中的清理过程使用的是 Scavenge 算法，按照 经典的 Cheney 算法 实现的。Scavenge 算法的主要过程是：</p>
<ul>
<li>新生区被分为两个等大小的子区(semi-spaces)：to-space 和 from-space；</li>
<li>大多数的内存分配都是在 to-space 发生 (某些特定对象是在老生区)；</li>
<li>当 to-space 耗尽时，交换 to-space 和 from-space, 此时所有的对象都在 from-space；</li>
<li>然后将 from-space 中活跃的对象复制到 to-space 或者老生区中;</li>
<li>这些对象被直接压到 to-space，提升了 Cache 的内存局部性，可使内存分配简洁快速。</li>
</ul>
<p>算法的伪代码描述如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">def <span class="title function_">scavenge</span>():</span><br><span class="line">  <span class="title function_">swap</span>(fromSpace, toSpace)</span><br><span class="line">  allocationPtr = toSpace.<span class="property">bottom</span></span><br><span class="line">  scanPtr = toSpace.<span class="property">bottom</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i = <span class="number">0.</span>.<span class="title function_">len</span>(roots):</span><br><span class="line">    root = roots[i]</span><br><span class="line">    <span class="keyword">if</span> <span class="title function_">inFromSpace</span>(root):</span><br><span class="line">      rootCopy = <span class="title function_">copyObject</span>(&amp;allocationPtr, root)</span><br><span class="line">      <span class="title function_">setForwardingAddress</span>(root, rootCopy)</span><br><span class="line">      roots[i] = rootCopy</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> scanPtr &lt; <span class="attr">allocationPtr</span>:</span><br><span class="line">    obj = object at scanPtr</span><br><span class="line">    scanPtr += <span class="title function_">size</span>(obj)</span><br><span class="line">    n = <span class="title function_">sizeInWords</span>(obj)</span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">0.</span>.<span class="property">n</span>:</span><br><span class="line">      <span class="keyword">if</span> <span class="title function_">isPointer</span>(obj[i]) and not <span class="title function_">inOldSpace</span>(obj[i]):</span><br><span class="line">        fromNeighbor = obj[i]</span><br><span class="line">        <span class="keyword">if</span> <span class="title function_">hasForwardingAddress</span>(fromNeighbor):</span><br><span class="line">          toNeighbor = <span class="title function_">getForwardingAddress</span>(fromNeighbor)</span><br><span class="line">        <span class="attr">else</span>:</span><br><span class="line">          toNeighbor = <span class="title function_">copyObject</span>(&amp;allocationPtr, fromNeighbor)</span><br><span class="line">          <span class="title function_">setForwardingAddress</span>(fromNeighbor, toNeighbor)</span><br><span class="line">        obj[i] = toNeighbor</span><br><span class="line"></span><br><span class="line">def <span class="title function_">copyObject</span>(*allocationPtr, object):</span><br><span class="line">  copy = *allocationPtr</span><br><span class="line">  *allocationPtr += <span class="title function_">size</span>(object)</span><br><span class="line">  <span class="title function_">memcpy</span>(copy, object, <span class="title function_">size</span>(object))</span><br><span class="line">  <span class="keyword">return</span> copy</span><br></pre></td></tr></table></figure>

<h3 id="不能被忽视的写屏障-Write-barriers"><a href="#不能被忽视的写屏障-Write-barriers" class="headerlink" title="不能被忽视的写屏障 Write barriers"></a>不能被忽视的写屏障 Write barriers</h3><p>如果新生区有某个对象，只有一个指向它的指针，恰好该指针在老生区的对象中，在垃圾回收之前我们如何得知新生区的该对象是活跃的呢？</p>
<p>为解决此问题，V8 在写缓冲区有一个列表，其中记录了所有老生区对象指向新生区的情况。新生区对象诞生时不会有指向它的指针，当老生区的对象出现指向新生区对象的指针时，便记录跨区指向，记录行为总是发生在写操作中。</p>
<h3 id="标记-清除算法-与-标记-紧缩算法"><a href="#标记-清除算法-与-标记-紧缩算法" class="headerlink" title="标记-清除算法 与 标记-紧缩算法"></a>标记-清除算法 与 标记-紧缩算法</h3><p>因为新生区的内存一般都不大，所以使用 Scavenge 算法进行垃圾回收效果比较好。老生区一般占用内存较大，因此采用的是 标记-清除(Mark-Sweep)算法 与 标记-紧缩(Mark-Compact)算法。</p>
<p>两种算法都包括两个阶段：标记阶段，清除或紧缩阶段。</p>
<h2 id="标记阶段"><a href="#标记阶段" class="headerlink" title="标记阶段"></a>标记阶段</h2><p>在标记阶段，堆上所有的活跃对象都会被发现并且标记。</p>
<p>每一页都包含用来标记的位图</p>
<p>位图都要占据空间 (3.1% on 32-bit, 1.6% on 64-bit systems)</p>
<p>使用两位二进制标记对象的状态</p>
<p>状态为白(white), 它尚未被垃圾回收器发现</p>
<p>状态为灰(gray), 它已被垃圾回收器发现，但它的邻接对象仍未全部处理完毕</p>
<p>状态为黑(black), 它不仅被垃圾回收器发现，而且其所有邻接对象也都处理完毕</p>
<p>标记算法的核心是 <strong>深度优先搜索</strong>，具体过程为：</p>
<ol>
<li>在标记的初期，位图是空的，所有对象也都是白的。</li>
<li>从根可达的对象会被染色为灰色，并被放入标记用的一个单独分配的双端队列。</li>
<li>标记阶段的每次循环，GC 会将一个对象从双端队列中取出，染色为黑，然后将它的邻接对象染色为灰，并把邻接对象放入双端队列。</li>
<li>这一过程在双端队列为空且所有对象都变黑时结束。</li>
<li>特别大的对象，如长数组，可能会在处理时分片，以防溢出双端队列。如果双端队列溢出了，则对象仍然会被染为灰色，但不会再被放入队列（这样他们的邻接对象就没有机会再染色了）。</li>
<li>因此当双端队列为空时，GC 仍然需要扫描一次，确保所有的灰对象都成为了黑对象。对于未被染黑的灰对象，GC 会将其再次放入队列，再度处理。</li>
</ol>
<p>标记算法结束后，所有的活跃对象都被染成黑色，所有的死对象仍是白的。下一步就可以清除或者紧缩了。</p>
<h2 id="清除-或-紧缩-算法"><a href="#清除-或-紧缩-算法" class="headerlink" title="清除 或 紧缩 算法"></a>清除 或 紧缩 算法</h2><p>标记算法执行后，可以选择清除 或是紧缩，这两个算法都可以收回内存，而且两者都作用于页级(V8 中的内存页是 1MB 的连续内存块)</p>
<p>清除算法扫描连续存放的死对象，将其变为空闲空间，并将其添加到空闲内存链表中。清除算法只需要遍历页的位图，搜索连续的白对象。[每一页都包含数个空闲内存链表，其分别代表小内存区（&lt;256 字）、中内存区（&lt;2048 字）、大内存区（&lt;16384 字）和超大内存区（其它更大的内存）]</p>
<p>紧缩算法会尝试将对象从碎片页(包含大量小空闲内存的页)中迁移整合在一起，来释放内存。这些对象会被迁移到另外的页上，因此也可能会新分配一些页。而迁出后的碎片页就返还给操作系统。</p>
<p>对目标碎片页中的每个活跃对象，在空闲内存链表中分配一块其它页的区域，将该对象复制至新页，并在碎片页中的该对象上写上转发地址。</p>
<p>迁出过程中，对象中的旧地址会被记录下来，这样在迁出结束后 V8 会遍历它所记录的地址，将其更新为新的地址。由于标记过程中也记录了不同页之间的指针，此时也会更新这些指针的指向。</p>
<h2 id="增量标记-与-惰性清除"><a href="#增量标记-与-惰性清除" class="headerlink" title="增量标记 与 惰性清除"></a>增量标记 与 惰性清除</h2><p>对于一个堆很大，活跃对象有很多的脚本时，标记-清除 与 标记-紧缩 的效率可能会很慢，为减少垃圾回收引起的停顿，引入了 增量标记(Incremental marking) 和 惰性清理(lazy sweeping)。</p>
<p>增量标记允许堆的标记(前面的标记阶段)发生在几次 5-10 毫秒的小停顿中。增量标记在堆的大小达到一定的阈值时启用，启用之后每当一定量的内存分配后，脚本的执行就会停顿并进行一次增量标记。就像普通的标记一样，增量标记也是一个深度优先搜索，并同样采用白灰黑机制来分类对象。</p>
<p>增量标记与普通标记的区别是，添加了从黑对象到白对象的指针，为此需要再次启用写屏障中，在记录 老-&gt;新 的同时，记录 黑-&gt;白。在进行清除时，一旦在写屏障中发现这样的指针，黑对象会被重新染色为灰对象，重新放回到双端队列中。</p>
<p>惰性清理是指在标记完成后，并不急着释放空间，无需一次清理所有的页，垃圾回收器会视情况逐一清理，直到所有页都清理完成。</p>
<p>余下的涉及垃圾回收原理的部分留着后面继续整理。(平行标记 与 并发标记)</p>
<h1 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h1><p>众所周知 JS 是门非阻塞单线程语言，因为在最初 JS 就是为了和浏览器交互而诞生的。如果 JS 是门多线程的语言话，我们在多个线程中处理 DOM 就可能会发生问题（一个线程中新加节点，另一个线程中删除节点），当然可以引入读写锁解决这个问题。</p>
<p>JS 在执行的过程中会产生执行环境，这些执行环境会被顺序的加入到执行栈中。如果遇到异步的代码，会被挂起并加入到 Task（有多种 task） 队列中。一旦执行栈为空，Event Loop 就会从 Task 队列中拿出需要执行的代码并放入执行栈中执行，所以本质上来说 JS 中的异步还是同步行为。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码虽然 setTimeout 延时为 0，其实还是异步。这是因为 HTML5 标准规定这个函数第二个参数不得小于 4 毫秒，不足会自动增加。所以 setTimeout 还是会在 script end 之后打印。</p>
<h2 id="微任务和宏任务"><a href="#微任务和宏任务" class="headerlink" title="微任务和宏任务"></a>微任务和宏任务</h2><p>不同的任务源会被分配到不同的 Task 队列中，任务源可以分为 <strong>微任务（microtask）</strong> 和 <strong>宏任务（macrotask）</strong>。在 ES6 规范中，microtask 称为 jobs，macrotask 称为 task。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Promise&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"><span class="comment">// script start =&gt; Promise =&gt; script end =&gt; promise1 =&gt; promise2 =&gt; setTimeout</span></span><br></pre></td></tr></table></figure>

<p>以上代码虽然 setTimeout 写在 Promise 之前，但是因为 <code>Promise</code> 属于微任务而 setTimeout 属于宏任务，所以会有以上的打印。</p>
<p><strong>微任务</strong>包括 <code>process.nextTick</code> ，<code>promise</code> ，<code>Object.observe</code> ，<code>MutationObserver</code></p>
<p><strong>宏任务</strong>包括 <code>script</code> ， <code>setTimeout</code> ，<code>setInterval</code> ，<code>setImmediate</code> ，<code>I/O</code> ，<code>UI rendering</code></p>
<p>很多人有个误区，认为微任务快于宏任务，其实是错误的。因为宏任务中包括了<code>script</code>，浏览器会先执行一个宏任务，接下来有异步代码的话就先执行微任务。</p>
<h2 id="所以正确的一次-Event-loop-顺序是这样的"><a href="#所以正确的一次-Event-loop-顺序是这样的" class="headerlink" title="所以正确的一次 Event loop 顺序是这样的"></a>所以正确的一次 Event loop 顺序是这样的</h2><ol>
<li>执行同步代码，这属于宏任务</li>
<li>执行栈为空，查询是否有微任务需要执行</li>
<li>执行所有微任务</li>
<li>必要的话渲染 UI</li>
<li>然后开始下一轮 Event loop，执行宏任务中的异步代码</li>
</ol>
<p>通过上述的 Event loop 顺序可知，如果宏任务中的异步代码有大量的计算并且需要操作 DOM 的话，为了更快的 界面响应，我们可以把操作 DOM 放入微任务中。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E5%A4%B4%E6%9D%A1%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E5%A4%B4%E6%9D%A1%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">头条面试题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:25" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:25+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:01" itemprop="dateModified" datetime="2022-11-15T09:05:01+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-头条面试题-date-2019-11-16-16-26-56"><a href="#title-头条面试题-date-2019-11-16-16-26-56" class="headerlink" title="title: 头条面试题 date: 2019-11-16 16:26:56"></a>title: 头条面试题 date: 2019-11-16 16:26:56</h2><p>tags: 面试题</p>
<h1 id="第一套"><a href="#第一套" class="headerlink" title="第一套"></a>第一套</h1><ol>
<li><p>替换元素与非替换元素,差异?</p>
</li>
<li><p>offsetWidth,clientWidth,scrollwidth 区别</p>
</li>
<li><p>Dom 标准事件模型是什么?是否所有的事件都支持冒泡?如果不是,举例说明.</p>
</li>
<li><p>css 选择器的优先级</p>
</li>
<li><p>简述什么是 IFC,作用</p>
</li>
<li><p>用 CSS 实现自适应正方形</p>
</li>
<li><p><code>Http://toutiao.com</code>往<code>http://mp.toutiao.com</code>发<code>ajax</code>请求,跨域了吗?<code>mp.toutiao.com</code>的服务器可以收到请求吗,是怎样的请求?</p>
</li>
<li><p>XSS 和 CRSF 分别是什么?有什么联系?如何防御?</p>
</li>
<li><p>关于 js Bridge</p>
<ol>
<li>是什么?</li>
<li>实现原理</li>
<li>优化方案</li>
</ol>
</li>
<li><p>TCP&#x2F;UDP 是什么?有什么区别?如何进行拥塞控制?</p>
</li>
<li><p>请用算法实现.从给定的无序,不重复的数组 A 中,取出 N 个数,使其相加和为 M.并给出算法的时间空间复杂度.</p>
</li>
</ol>
<h1 id="第二套"><a href="#第二套" class="headerlink" title="第二套"></a>第二套</h1><ol>
<li>ES5 和 ES6 的继承有什么区别?</li>
<li>Web 动画的几种常见方式</li>
<li>POST 提交数据的几种常见 content-type</li>
<li>如何定义一个方法,通过调用把视频的一帧生产预览图</li>
<li>什么是重放攻击,列举几个防御手段.</li>
</ol>
<h2 id="编程题"><a href="#编程题" class="headerlink" title="编程题"></a>编程题</h2><ol>
<li>实现一个函数 sum,运算结果满足如下预期结果:</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	<span class="title function_">sum</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>).<span class="title function_">valueof</span>(); <span class="comment">//6</span></span><br><span class="line"><span class="number">2.</span>	<span class="title function_">sum</span>(<span class="number">2</span>,<span class="number">3</span>)(<span class="number">2</span>).<span class="title function_">valueof</span>(); <span class="comment">//7</span></span><br><span class="line"><span class="number">3.</span>	<span class="title function_">sum</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>).<span class="title function_">valueof</span>(); <span class="comment">//10</span></span><br><span class="line"><span class="number">4.</span>	<span class="title function_">sum</span>(<span class="number">2</span>)(<span class="number">4</span>,<span class="number">1</span>)(<span class="number">2</span>).<span class="title function_">valueof</span>(); <span class="comment">//9</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>实现一个优先队列,使得可以这样使用.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	<span class="title class_">Const</span> priorityQuene = <span class="keyword">new</span> <span class="title class_">PriorityQuene</span>()</span><br><span class="line"><span class="number">2.</span>	priorityQuene.<span class="title function_">enquene</span>(‘优先级<span class="number">2</span>-<span class="number">1</span>’,<span class="number">2</span>)’</span><br><span class="line"><span class="number">3.</span>	priorityQuene.<span class="title function_">enquene</span>(‘优先级<span class="number">1</span>-<span class="number">1</span>’,<span class="number">1</span>)’</span><br><span class="line"><span class="number">4.</span>	priorityQuene.<span class="title function_">enquene</span>(‘优先级<span class="number">1</span>-<span class="number">2</span>’,<span class="number">1</span>)’</span><br><span class="line"><span class="number">5.</span>	priorityQuene.<span class="title function_">enquene</span>(‘优先级<span class="number">3</span>-<span class="number">1</span>’,<span class="number">3</span>)’</span><br><span class="line"><span class="number">6.</span>	priorityQuene.<span class="title function_">enquene</span>(‘优先级<span class="number">2</span>-<span class="number">2</span>’,<span class="number">2</span>)’</span><br><span class="line"><span class="number">7.</span>	priorityQuene.<span class="title function_">enquene</span>(‘优先级<span class="number">1</span>-<span class="number">3</span>’,<span class="number">1</span>)’</span><br><span class="line"><span class="number">8.</span>	priorityQuene..<span class="title function_">print</span>(); <span class="comment">//按优先级顺序输出</span></span><br><span class="line"><span class="number">9.</span>	priorityQuene.<span class="title function_">dequene</span>(); <span class="comment">//出队</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>硬币找零问题:</li>
</ol>
<p>有面额为 d1…dn 的硬币,和要找零的钱数,找出所需最小硬币个数的方案,</p>
<p>例如,美国有以下面额的硬币: d1&#x3D;1,d2&#x3D;5,d3&#x3D;10,d4&#x3D;25.如果要找 36 美分.,所需最少硬币是[1,10,25],即满足如下输出:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> miniCoinChange = <span class="keyword">new</span> <span class="title class_">MinCoinChange</span>(<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(minCoinChange.<span class="title function_">makeChange</span>(<span class="number">36</span>)) <span class="comment">//[1,10,25]</span></span><br><span class="line"><span class="keyword">const</span> minCoinChange2 = <span class="keyword">new</span> <span class="title class_">MinCoinChange</span>([<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(minCoinChange2.<span class="title function_">makeChange</span>(<span class="number">6</span>); <span class="comment">//[3,3]</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/photoshop%E5%88%87%E5%9B%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/photoshop%E5%88%87%E5%9B%BE/" class="post-title-link" itemprop="url">photoshop切图</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:20" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:20+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:01" itemprop="dateModified" datetime="2022-11-15T09:05:01+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-photoshop-切图-date-2019-10-27-16-08-59"><a href="#title-photoshop-切图-date-2019-10-27-16-08-59" class="headerlink" title="title: photoshop 切图 date: 2019-10-27 16:08:59"></a>title: photoshop 切图 date: 2019-10-27 16:08:59</h2><p>tags:</p>
<h1 id="新建图层"><a href="#新建图层" class="headerlink" title="新建图层"></a>新建图层</h1><p>建议背景图层透明.</p>
<p>移动工具: 快捷键<code>V</code></p>
<p>按住<code>Ctrl</code>,自动选择图层.</p>
<p>放大缩小: <code>Alt+滚轮</code></p>
<h1 id="界面设置"><a href="#界面设置" class="headerlink" title="界面设置"></a>界面设置</h1><p>视图设置:</p>
<ol>
<li>智能参考线</li>
<li>标尺(<code>ctrl+R</code>)</li>
</ol>
<p>##窗口设置</p>
<ol>
<li>信息</li>
<li>字符</li>
<li>历史记录</li>
</ol>
<p>修改信息-面板选项</p>
<p>|-鼠标坐标单位-像素</p>
<p>|-第一颜色信息-RGB 颜色</p>
<p>|-第二颜色信息-RGB 颜色</p>
<p>|-状态信息-文档尺寸</p>
<h2 id="编辑设置"><a href="#编辑设置" class="headerlink" title="编辑设置"></a>编辑设置</h2><p>首选项-单位与标尺-标尺,文字改为像素</p>
<h2 id="格局"><a href="#格局" class="headerlink" title="格局"></a>格局</h2><ol>
<li>图层和历史记录</li>
<li>信息和字符</li>
</ol>
<h2 id="保存为-web-切图"><a href="#保存为-web-切图" class="headerlink" title="保存为 web 切图"></a>保存为 web 切图</h2><p>窗口-工作区-新建工作区-web 切图</p>
<h1 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h1><h2 id="套索工具L"><a href="#套索工具L" class="headerlink" title="套索工具L"></a>套索工具<code>L</code></h2><p>放大<code>Ctrl+ +</code></p>
<p>缩小<code>Ctrl+ -</code></p>
<p>按住空格键拖动</p>
<p>按住<code>shift</code>键: 增加选区</p>
<p>按住<code>alt</code>键: 删除选区</p>
<h3 id="磁性套索工具L"><a href="#磁性套索工具L" class="headerlink" title="磁性套索工具L"></a>磁性套索工具<code>L</code></h3><p>可以吸附到同颜色区域边界.</p>
<p>多余地方可以按住<code>shfit</code>或者<code>alt</code>进行增删</p>
<h2 id="快速选择工具W"><a href="#快速选择工具W" class="headerlink" title="快速选择工具W"></a>快速选择工具<code>W</code></h2><p>可以快速选择相同颜色区块</p>
<p>画笔大小快捷键:<code>[]</code></p>
<h2 id="魔棒工具W"><a href="#魔棒工具W" class="headerlink" title="魔棒工具W"></a>魔棒工具<code>W</code></h2><p>类似于快速选择工具</p>
<h2 id="裁剪工具C"><a href="#裁剪工具C" class="headerlink" title="裁剪工具C"></a>裁剪工具<code>C</code></h2><p>使用魔棒工具或快速选择工具选取一块区域,直接按裁剪工具,然后回车,可快速裁剪出所选区域.</p>
<p>此时,按住 Alt,点击当前图层的眼睛图标,可隐藏其他图层,只保留当前图层.即显影模式.</p>
<p>裁剪工具时,按住<code>Alt</code>,点击所选图案,可以让图案成为中心.</p>
<h2 id="吸管工具-I"><a href="#吸管工具-I" class="headerlink" title="吸管工具 I"></a>吸管工具 I</h2><p>选取当前颜色,</p>
<p>前景色填充<code>Alt+Delete</code></p>
<p>背景色填充<code>Ctrl+Delete</code></p>
<h1 id="污点修复画笔工具-J"><a href="#污点修复画笔工具-J" class="headerlink" title="污点修复画笔工具 J"></a>污点修复画笔工具 J</h1><p>选取周围的颜色覆盖选取区域的颜色.比如照片中黑点会被抹除.</p>
<h2 id="修复画笔工具"><a href="#修复画笔工具" class="headerlink" title="修复画笔工具"></a>修复画笔工具</h2><p>按住<code>Alt</code>键单击左键选取要复制的区域,在其他区域就可以复制过去.</p>
<h2 id="修补工具"><a href="#修补工具" class="headerlink" title="修补工具"></a>修补工具</h2><p>画出一个选取,将选取拖动到想要使用修补的地方进行替换修补.</p>
<h1 id="仿制图章工具"><a href="#仿制图章工具" class="headerlink" title="仿制图章工具"></a>仿制图章工具</h1><p>类似于修复画笔工具,双击选取要复制的点,在其他地方可以复制出来.与 修复画笔工具区别是,修复画笔工具复制出来的有羽化效果.</p>
<h2 id="图案图章工具"><a href="#图案图章工具" class="headerlink" title="图案图章工具"></a>图案图章工具</h2><p>有可选择的备用图案,作用类似于打马赛克.</p>
<h1 id="历史记录画笔工具-Y"><a href="#历史记录画笔工具-Y" class="headerlink" title="历史记录画笔工具 Y"></a>历史记录画笔工具 Y</h1><p>作用类似于祛斑.先用高斯模糊将照片模糊到没有斑点.再将画笔圆记录到历史记录的高斯模糊这一步,再回到原图,使用该画笔圆进行处理.</p>
<h1 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h1><p>渐变颜色方向是顺时针</p>
<h1 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h1><p>双击空白区域,即可写字.按住 Ctrl 可以拖动区域大小,Alt 也可以拖动.</p>
<h1 id="抓手工具-H"><a href="#抓手工具-H" class="headerlink" title="抓手工具 H"></a>抓手工具 H</h1><p>按住<code>Alt</code>缩小,按住<code>shift</code>放大.</p>
<h1 id="图层"><a href="#图层" class="headerlink" title="图层"></a>图层</h1><h2 id="奥运五环"><a href="#奥运五环" class="headerlink" title="奥运五环"></a>奥运五环</h2><ol>
<li>新建文件,背景色为白色.</li>
<li>右下角新建图层.</li>
<li>使用椭圆选区工具<code>M</code>,按住<code>shift</code>(有的是<code>alt</code>),拉出一个标准圆.</li>
<li>使用吸管工具<code>I</code>,点击拾色器,选择颜色,确定.使用快捷键<code>Alt+Delete</code>填充圆形选区的颜色.</li>
<li>使用选区工具<code>M</code>,右键变化选区,按住<code>Alt</code>进行同心圆的缩小.右上角对号确定.按下<code>delete</code>删除内圆,得到圆环.</li>
<li><code>Ctrl+ T</code>自由变换,进行调整.</li>
<li>使用移动工具<code>V</code>,按住<code>Alt</code>进行拖动,即复制一张图层.</li>
<li>在右下角图层菜单中,双击图层名,进行重命名.</li>
<li>选取复制图层,按住<code>Ctrl</code>单击图层菜单中缩略图.选择颜色,<code>Alt+Delete</code>填充颜色.</li>
<li>按<code>M</code>使用选区后,单击空白就结束选区了.</li>
<li>删除覆盖在黄色上的蓝色,按住<code>Ctrl</code>,单击蓝色图层的缩略图,选中蓝色选区,</li>
<li>使用选区工具<code>M</code>,点击黄色图层,按住<code>Alt</code>选取要排除的区块(因为此时要删掉黄色图层上的两小块区域,而选区是蓝色选区,排除掉保留的蓝色,剩下的就是要真正删除的蓝色小块了),按<code>Delete</code>删除,就出现交叉效果了.</li>
</ol>
<h1 id="参考线"><a href="#参考线" class="headerlink" title="参考线"></a>参考线</h1><ol>
<li>视图-新建参考线(按住<code>Alt</code>,依次按<code>V+E</code>)</li>
<li><code>Ctrl+R</code>调出标尺,切换到移动工具<code>V</code>,然后从标尺处拖出参考线.</li>
</ol>
<p>参考线切换: 拉动参考线,按住<code>Alt</code>.</p>
<h2 id="参考线初始化"><a href="#参考线初始化" class="headerlink" title="参考线初始化"></a>参考线初始化</h2><p>通用页面像素一般是 1920*1080,页面内容一般占 1200,两侧留白共 720px</p>
<p>起始左侧线可设置为 360px,右侧线设置为 1560px.</p>
<h2 id="隐藏参考线"><a href="#隐藏参考线" class="headerlink" title="隐藏参考线"></a>隐藏参考线</h2><p>快捷键: <code>Ctrl+ ;</code></p>
<h1 id="切图"><a href="#切图" class="headerlink" title="切图"></a>切图</h1><h2 id="传统切图"><a href="#传统切图" class="headerlink" title="传统切图"></a>传统切图</h2><p>裁剪工具<code>C</code>-切片工具</p>
<h2 id="参考线辅助切图"><a href="#参考线辅助切图" class="headerlink" title="参考线辅助切图"></a>参考线辅助切图</h2><p>先设置参考线,再点击切片工具<code>C</code>,上面菜单基于参考线切片.</p>
<p>通过删除多余切片将零碎切片合并为一个切片.</p>
<p>文件-存储为 web 所用格式,一般格式为 PNG-24.</p>
<blockquote>
<p>建议将大图裁剪成多份,然后使用参考线切片.</p>
</blockquote>
<h2 id="精准切图"><a href="#精准切图" class="headerlink" title="精准切图"></a>精准切图</h2><p>文件-脚本-将图层导出到文件-文件类型-PNG24-全部打 √</p>
<p>文件-导出-将图层导出导出到文件-文件类型-PNG24-全部打 √</p>
<p>(因为软件版本不同,可能命令不在上述中,上述是同一命令的两个位置)</p>
<p>选择导出目录,运行</p>
<h1 id="扩展知识"><a href="#扩展知识" class="headerlink" title="扩展知识"></a>扩展知识</h1><p>将整个图层切成一个图</p>
<p>编辑-首选项-增效工具-启动生成器打 √</p>
<p>文件-生成-图像资源</p>
<h1 id="抠图"><a href="#抠图" class="headerlink" title="抠图"></a>抠图</h1><p>先打开图片,</p>
<p>图层-新建图层-新建图层背景</p>
<p>图像-画布大小</p>
<p><code>Ctrl+T</code>选中图片,<code>Alt</code>进行比例放大</p>
<p><code>Ctrl+ X</code>可以把选取内不需要的内容删掉</p>
<p>导出-快速导出 PNG 即可.</p>
<h1 id="描白边"><a href="#描白边" class="headerlink" title="描白边"></a>描白边</h1><p>使用魔棒选取大部分边缘,使用选区工具进行修补.</p>
<p>编辑-描边-白色-5px 左右,外部</p>
<p>使用魔棒点击外部区域,选择反向,就选中了包含白边的区域.</p>
<p>此时可以使用编辑-填充-黑色,就出现纯黑背景的白边图片了.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E6%BB%9A%E5%8A%A8%E9%98%85%E8%AF%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E6%BB%9A%E5%8A%A8%E9%98%85%E8%AF%BB/" class="post-title-link" itemprop="url">滚动阅读</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:15" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:15+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:02" itemprop="dateModified" datetime="2022-11-15T09:05:02+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-滚动阅读-date-2019-10-25-20-04-22"><a href="#title-滚动阅读-date-2019-10-25-20-04-22" class="headerlink" title="title: 滚动阅读 date: 2019-10-25 20:04:22"></a>title: 滚动阅读 date: 2019-10-25 20:04:22</h2><p>tags:</p>
<h1 id="初步构思"><a href="#初步构思" class="headerlink" title="初步构思"></a>初步构思</h1><ol>
<li>定时任务启动</li>
<li>滑到面板桌面(从常规桌面上滑)</li>
<li>点击礼盒图标(右上角,测量位置)</li>
<li>点击完成相关任务(位置)</li>
<li>自动唤醒京东读书 app</li>
<li>点击图书(位置)</li>
<li>自动翻页(swipe)</li>
<li>完成后返回打卡页面</li>
<li>点击完成打卡(位置)</li>
</ol>
<p>新增:</p>
<ol>
<li>时间统计(共阅读了多久)</li>
<li>页数统计(共阅读了多少页)</li>
</ol>
<h1 id="防检测"><a href="#防检测" class="headerlink" title="防检测"></a>防检测</h1><p>自动翻页位置</p>
<ol>
<li>滑动翻页(swipe) Math.random</li>
<li>点击翻页(touch),时间和位置都随机</li>
<li>映射音量键翻页</li>
</ol>
<p>该机分辨率为 1440*720</p>
<p>下一页触摸区域在 x(480-720),y(0-1440)</p>
<p>规则:</p>
<p>30 分钟阅读 300 页,则每分钟阅读 10 页,至少 6 秒阅读完一页.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>每页最少 6 秒,最多 12 秒不到.</p>
<p>每 300 页最少 30 分钟.最多 60 分钟不到.</p>
<h1 id="随机时间"><a href="#随机时间" class="headerlink" title="随机时间"></a>随机时间</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> initTime = <span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">0.33333</span>);</span><br><span class="line"><span class="keyword">if</span> (initTime &lt; <span class="number">6000</span>) &#123;</span><br><span class="line">  initTime += <span class="number">4000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">iTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> initTime = <span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">0.33333</span>);</span><br><span class="line">  <span class="keyword">if</span> (initTime &lt; <span class="number">6000</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (initTime += <span class="number">4000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> initTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">iTime</span>();</span><br></pre></td></tr></table></figure>

<p>每页最少 2 秒,最多 8 秒不到.</p>
<p>每 300 页最少不到 16 分钟.最多 40 分钟不到.</p>
<h1 id="定时运行脚本"><a href="#定时运行脚本" class="headerlink" title="定时运行脚本"></a>定时运行脚本</h1><p>点击脚本右边的菜单按钮-&gt;更多-&gt;定时任务设置定时运行脚本.注意<strong>必须保持 Auto.js 后台运行(自启动白名单、电源管理白名单等),不可加锁屏密码</strong>.</p>
<p>脚本的开头使用 device.wakeUp()来唤醒屏幕</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//# 启动app</span></span><br><span class="line">app.<span class="title function_">launchApp</span>(<span class="string">&quot;京东读书&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//暂停运行5秒</span></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<h1 id="气泡信息toast-message"><a href="#气泡信息toast-message" class="headerlink" title="气泡信息toast(message)"></a>气泡信息<code>toast(message)</code></h1><p>注意，信息的显示是”异步”执行的，并且，不会等待信息消失程序才继续执行。如果在循环中执行该命令，可能出现脚本停止运行后仍然有不断的气泡信息出现的情况</p>
<p>官方貌似说了会实时显示进度,那么下面的统计就不需要了.</p>
<p>这里可以显示已经看了几页(估计得写个函数),看具体是怎么翻页了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如果触发一次, 就次数<span class="string">`total += 1`</span>;</span><br><span class="line"><span class="keyword">if</span> (total == <span class="number">300</span>) &#123;</span><br><span class="line">  <span class="comment">//toast(&#x27;看完300页了,准备打卡去&#x27;)</span></span><br><span class="line">  <span class="comment">//建议此时不停,不知道时间够不够,继续刷一会</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (total &gt;= <span class="number">300</span> &amp;&amp; totalTime &gt;= <span class="number">30</span> * <span class="number">6000</span>) &#123;</span><br><span class="line">  <span class="comment">//条件满足,停止刷页</span></span><br><span class="line">  <span class="title function_">stop</span>();</span><br><span class="line">  <span class="comment">//跳转打卡页面</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//继续刷页</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="立即停止exit"><a href="#立即停止exit" class="headerlink" title="立即停止exit()"></a>立即停止<code>exit()</code></h1><h1 id="console-show"><a href="#console-show" class="headerlink" title="console.show()"></a><code>console.show()</code></h1><p>显示控制台。这会显示一个控制台的悬浮窗(需要悬浮窗权限)。</p>
<h2 id="print-text"><a href="#print-text" class="headerlink" title="print(text)"></a><code>print(text)</code></h2><p><code>text &#123;string&#125; | &#123;Object&#125;</code>要打印到控制台的信息,相当于 log(text)。</p>
<h1 id="基于坐标的触摸模拟"><a href="#基于坐标的触摸模拟" class="headerlink" title="基于坐标的触摸模拟"></a>基于坐标的触摸模拟</h1><p>要获取要点击的位置的坐标，可以在开发者选项中开启”指针位置”。</p>
<h2 id="setScreenMetrics-width-height"><a href="#setScreenMetrics-width-height" class="headerlink" title="setScreenMetrics(width, height)"></a>setScreenMetrics(width, height)</h2><p>设置脚本坐标点击所适合的屏幕宽高.</p>
<p>如果脚本运行时，屏幕宽度不一致会自动放缩坐标.</p>
<h1 id="安卓-7-0-以上的触摸和手势模拟"><a href="#安卓-7-0-以上的触摸和手势模拟" class="headerlink" title="安卓 7.0 以上的触摸和手势模拟"></a>安卓 7.0 以上的触摸和手势模拟</h1><h2 id="click-x-y"><a href="#click-x-y" class="headerlink" title="click(x, y)"></a>click(x, y)</h2><p>模拟点击坐标(x, y)，并返回是否点击成功。只有在点击执行完成后脚本才继续执行。</p>
<p>使用该函数模拟连续点击时可能有点击速度过慢的问题，这时可以用<code>press()</code>函数代替。</p>
<h2 id="press-x-y-duration"><a href="#press-x-y-duration" class="headerlink" title="press(x, y, duration)"></a>press(x, y, duration)</h2><p><code>duration: &#123;number&#125;</code> 按住时长，单位毫秒</p>
<p>模拟按住坐标(x, y), 并返回是否成功。只有按住操作执行完成时脚本才会继续执行。</p>
<p>如果按住时间过短，那么会被系统认为是点击；如果时长超过 500 毫秒，则认为是长按。</p>
<h2 id="swipe-x1-y1-x2-y2-duration"><a href="#swipe-x1-y1-x2-y2-duration" class="headerlink" title="swipe(x1, y1, x2, y2, duration)"></a>swipe(x1, y1, x2, y2, duration)</h2><p><code>x1</code> {number} 滑动的起始坐标的 x 值</p>
<p><code>y1</code> {number} 滑动的起始坐标的 y 值</p>
<p><code>x2</code> {number} 滑动的结束坐标的 x 值</p>
<p><code>y2</code> {number} 滑动的结束坐标的 y 值</p>
<p><code>duration</code> {number} 滑动时长，单位毫秒</p>
<p>模拟从坐标(x1, y1)滑动到坐标(x2, y2)，并返回是否成功。只有滑动操作执行完成时脚本才会继续执行。</p>
<h1 id="随机数-random"><a href="#随机数-random" class="headerlink" title="随机数 random"></a>随机数 random</h1><h1 id="random-min-max"><a href="#random-min-max" class="headerlink" title="random(min, max)"></a>random(min, max)</h1><p><code>min</code> {number} 随机数产生的区间下界</p>
<p><code>max</code> {number} 随机数产生的区间上界</p>
<p>返回 {number}</p>
<p>返回一个在<code>[min...max]</code>之间的随机数(正整数)。例如<code>random(0, 2)</code>可能产生 0, 1, 2。</p>
<h2 id="random"><a href="#random" class="headerlink" title="random()"></a>random()</h2><p>返回 {number}</p>
<p>返回在[0, 1)的随机浮点数。</p>
<h1 id="device-wakeUp"><a href="#device-wakeUp" class="headerlink" title="device.wakeUp()"></a>device.wakeUp()</h1><p>唤醒设备。包括唤醒设备 CPU、屏幕等。可以用来点亮屏幕。</p>
<h2 id="device-wakeUpIfNeeded"><a href="#device-wakeUpIfNeeded" class="headerlink" title="device.wakeUpIfNeeded()"></a>device.wakeUpIfNeeded()</h2><p>如果屏幕没有点亮，则唤醒设备。</p>
<h1 id="按键模拟"><a href="#按键模拟" class="headerlink" title="按键模拟"></a>按键模拟</h1><p>实体按键模拟依赖 root 权限,故放弃.</p>
<h1 id="基于控件的操作"><a href="#基于控件的操作" class="headerlink" title="基于控件的操作"></a>基于控件的操作</h1><p>推荐使用<code>auto()</code>函数来确保无障碍服务已启用.</p>
<h1 id="auto-mode"><a href="#auto-mode" class="headerlink" title="auto([mode])"></a>auto([mode])</h1><p>检查无障碍服务是否已经启用，如果没有启用则抛出异常并跳转到无障碍服务启用界面；同时设置无障碍模式为 mode。</p>
<p>如果不加 mode 参数，则为正常模式。</p>
<p>建议使用<code>auto.waitFor()</code>和<code>auto.setMode()</code>代替该函数，因为<code>auto()</code>函数如果无障碍服务未启动会停止脚本；而<code>auto.waitFor()</code>则会在在无障碍服务启动后继续运行。</p>
<h2 id="auto-waitFor"><a href="#auto-waitFor" class="headerlink" title="auto.waitFor()"></a>auto.waitFor()</h2><p>检查无障碍服务是否已经启用，如果没有启用则跳转到无障碍服务启用界面，并等待无障碍服务启动；当无障碍服务启动后脚本会继续运行。</p>
<h1 id="点击文本click-text-i"><a href="#点击文本click-text-i" class="headerlink" title="点击文本click(text[, i])"></a>点击文本<code>click(text[, i])</code></h1><p><code>text</code> {string} 要点击的文本</p>
<p><code>i</code> {number} 如果相同的文本在屏幕中出现多次，则 i 表示要点击第几个文本, i 从 0 开始计算</p>
<p>该函数可以点击大部分包含文字的按钮。例如微信主界面下方的”微信”, “联系人”, “发现”, “我”的按钮。</p>
<p>通常与 while 同时使用以便点击按钮直至成功。例如:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (!<span class="title function_">click</span>(<span class="string">&quot;扫一扫&quot;</span>));</span><br></pre></td></tr></table></figure>

<h1 id="UiSelector-exists"><a href="#UiSelector-exists" class="headerlink" title="UiSelector.exists()"></a>UiSelector.exists()</h1><p>返回 {Boolean}</p>
<p>判断屏幕上是否存在控件符合选择器所确定的条件。</p>
<p>例如要判断某个文本出现就执行某个动作，可以用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;某个文本&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//要支持的动作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="暂停-sleep"><a href="#暂停-sleep" class="headerlink" title="暂停 sleep()"></a>暂停 sleep()</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暂停1秒</span></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h1 id="选取控件"><a href="#选取控件" class="headerlink" title="选取控件"></a>选取控件</h1><p>一般软件的界面是由一个个控件构成的，例如图片部分是一个图片控件(ImageView)，文字部分是一个文字控件(TextView)；同时，通过各种布局来决定各个控件的位置，例如，线性布局(LinearLayout)里面的控件都是按水平或垂直一次叠放的，列表布局(AbsListView)则是以列表的形式显示控件。</p>
<p>控件有各种属性，包括文本(text), 描述(desc), 类名(className), id 等等。我们通常用一个控件的属性来找到这个控件，例如，想要点击 QQ 聊天窗口的”发送”按钮，我们就可以通过他的文本属性为”发送”来找到这个控件并点击他，具体代码为:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sendButton = <span class="title function_">text</span>(<span class="string">&quot;发送&quot;</span>).<span class="title function_">findOne</span>();</span><br><span class="line">sendButton.<span class="title function_">click</span>();</span><br></pre></td></tr></table></figure>

<p>在这个例子中, text(“发送”)表示一个条件(文本属性为”发送”)，findOne()表示基于这个条件找到一个符合条件的控件，从而我们可以得到发送按钮 sendButton，再执行 sendButton.click()即可点击”发送”按钮。</p>
<p>果一个控件是图片控件.我们注意到这个图标的 desc(描述)属性为”搜索”，那么我们就可以通过 desc 属性来定位这个控件，得到点击搜索图标的代码为:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">desc</span>(<span class="string">&quot;搜索&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br></pre></td></tr></table></figure>

<p>另外，对于这个搜索图标而言，id 属性也是唯一的，我们也可以用 id(“action_search”).findOne().click()来点击这个控件。如果一个控件有 id 属性，那么这个属性很可能是唯一的.</p>
<p>i_reader_folder</p>
<h1 id="定时器-Timers"><a href="#定时器-Timers" class="headerlink" title="定时器 Timers"></a>定时器 Timers</h1><h2 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout()"></a>setTimeout()</h2><p>与 web 端用法一致.但是使用了一个不同的内部实现，它是基于 Android Looper-Handler 消息循环机制构建的。其实现机制与 Node.js 比较相似.</p>
<h2 id="setInterval-callback-delay-…args"><a href="#setInterval-callback-delay-…args" class="headerlink" title="setInterval(callback, delay[,…args])"></a>setInterval(callback, delay[,…args])</h2><p>callback {Function} 当定时器到点时要调用的函数。</p>
<p>delay {number} 调用 callback 之前要等待的毫秒数。</p>
<p>…args {any} 当调用 callback 时要传入的可选参数。</p>
<p>因为定时器是异步执行,另外 delay 只能是 number,那么不采用这种方案.</p>
<h1 id="刷页函数"><a href="#刷页函数" class="headerlink" title="刷页函数"></a>刷页函数</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">turnPage</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>先打开京东读书,登录账号</p>
<p>点击书城-免费-点击一本书-加入书架-(多加几本)</p>
<h1 id="方案一-点击翻页"><a href="#方案一-点击翻页" class="headerlink" title="方案一: 点击翻页"></a>方案一: 点击翻页</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检查无障碍服务开启情况</span></span><br><span class="line">auto.<span class="title function_">waitFor</span>();</span><br><span class="line"><span class="comment">//显示控制台</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">show</span>();</span><br><span class="line"><span class="comment">//设置脚本适合的宽高</span></span><br><span class="line"><span class="title function_">setScreenMetrics</span>(<span class="number">720</span>, <span class="number">1440</span>);</span><br><span class="line"><span class="comment">//打开京东读书app</span></span><br><span class="line">app.<span class="title function_">launchApp</span>(<span class="string">&quot;京东读书&quot;</span>);</span><br><span class="line"><span class="title function_">toast</span>(<span class="string">&quot;开始打卡&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//等待启动</span></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//跳过</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;跳过&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//点击控件</span></span><br><span class="line">  <span class="title function_">text</span>(<span class="string">&quot;跳过&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//检测升级</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;下次再说&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//点击控件</span></span><br><span class="line">  <span class="title function_">text</span>(<span class="string">&quot;下次再说&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//点击控件,跳转书架</span></span><br><span class="line"><span class="title function_">id</span>(<span class="string">&quot;main_tab_bookshelf&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备开始图书</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//随机时间</span></span><br><span class="line"><span class="keyword">var</span> initTime = <span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">0.33333</span>);</span><br><span class="line"><span class="keyword">if</span> (initTime &lt; <span class="number">6000</span>) &#123;</span><br><span class="line">  initTime += <span class="number">4000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="这里有问题"><a href="#这里有问题" class="headerlink" title="这里有问题"></a>这里有问题</h1><p>应该阅读到末尾结束,出现关闭阅读.点击关闭阅读.删除第一本.重新打开一本,开始阅读.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//已读完时,左上角出现关闭阅读</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//点击控件</span></span><br><span class="line">  <span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line">  <span class="comment">//长按第一本书,左下角删除,弹出确认删除,点击第二个删除.sleep(2000),右上角完成,继续阅读()</span></span><br><span class="line">  <span class="keyword">let</span> index;</span><br><span class="line">  <span class="title function_">deleteBook</span>();</span><br><span class="line">  <span class="comment">//继续阅读</span></span><br><span class="line">  <span class="comment">//删掉之后,加上已阅读200页,重新开始,又会阅读300页.</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">index</span> = index;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">readBook</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//执行自动阅读</span></span><br><span class="line">  <span class="title function_">readBook</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>开始阅读-阅读完-跳出阅读-删除-重新开始阅读</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//执行阅读主步骤</span></span><br><span class="line"><span class="title function_">mianStep</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mianStep</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">readeBook</span>()</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">exists</span>())&#123;</span><br><span class="line">    <span class="comment">//点击控件</span></span><br><span class="line">    <span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="title function_">sleep</span>(<span class="number">2000</span>)</span><br><span class="line">    <span class="comment">//长按第一本书,左下角删除,弹出确认删除,点击第二个删除.sleep(2000),右上角完成,继续阅读()</span></span><br><span class="line">    <span class="keyword">let</span> index</span><br><span class="line">    <span class="title function_">deleteBook</span>()</span><br><span class="line">    <span class="comment">//继续阅读</span></span><br><span class="line">    <span class="comment">//删掉之后,加上已阅读200页,重新开始,又会阅读300页.</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">index</span> = i</span><br><span class="line">    <span class="title function_">mianStep</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自动阅读</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readBook</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">toast</span>(<span class="string">&quot;开始阅读&quot;</span>)</span><br><span class="line">    <span class="comment">//选择第一本</span></span><br><span class="line">    <span class="title function_">id</span>(<span class="string">&quot;i_reader_folder&quot;</span>).<span class="title function_">indexInParent</span>(<span class="number">0</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="title function_">sleep</span>(<span class="number">3000</span>)</span><br><span class="line">    <span class="comment">//执行点击</span></span><br><span class="line">    <span class="title function_">clickPage</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//点击阅读</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clickPages</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//点击300页</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> &#123;i=<span class="number">0</span>&#125;=index; i&lt;<span class="number">300</span>; i++)&#123;</span><br><span class="line">    <span class="title function_">randomClick</span>()</span><br><span class="line">    <span class="comment">//间隔时间</span></span><br><span class="line">    <span class="title function_">sleep</span>(initTime)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定时器版</span></span><br><span class="line"><span class="comment">// for(var i=0; i&lt;5; i++)&#123;</span></span><br><span class="line"><span class="comment">//     setTimeout(randomClick(),initTime)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//随机点坐标</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomClick</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//随机坐标,各缩减20px,防止误触</span></span><br><span class="line">x = <span class="title function_">random</span>(<span class="number">500</span>, <span class="number">700</span>)</span><br><span class="line">y = <span class="title function_">random</span>(<span class="number">20</span>, <span class="number">1420</span>)</span><br><span class="line"><span class="comment">//点击随机坐标区域翻页</span></span><br><span class="line"><span class="title function_">click</span>(x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除已读数目</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deleteBook</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//长按图书,坐标就是第一本书的位置</span></span><br><span class="line">    <span class="comment">//press(x, y, 1500)</span></span><br><span class="line">    <span class="title function_">id</span>(<span class="string">&quot;i_reader_folder&quot;</span>).<span class="title function_">indexInParent</span>(<span class="number">0</span>).<span class="title function_">findOne</span>().<span class="title function_">longClick</span>()</span><br><span class="line">    <span class="comment">//删除图书</span></span><br><span class="line">    <span class="title function_">text</span>(<span class="string">&quot;删除&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="comment">//要确认删除了</span></span><br><span class="line">    <span class="title function_">id</span>(<span class="string">&quot;confirm&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="comment">//右上角完成</span></span><br><span class="line">    <span class="title function_">text</span>(<span class="string">&quot;完成&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//点击打卡文本</span></span><br><span class="line"><span class="title function_">click</span>(text[<span class="string">&quot;立即打卡&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印结束</span></span><br><span class="line"><span class="title function_">toast</span>(<span class="string">&quot;打卡结束&quot;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="方案二-滑动翻页"><a href="#方案二-滑动翻页" class="headerlink" title="方案二: 滑动翻页"></a>方案二: 滑动翻页</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/vue%E5%8F%AF%E5%A4%8D%E7%94%A8%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/vue%E5%8F%AF%E5%A4%8D%E7%94%A8%E6%80%A7/" class="post-title-link" itemprop="url">vue可复用性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:10" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:10+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:02" itemprop="dateModified" datetime="2022-11-15T09:05:02+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: vue可复用性&amp;组合</p>
<p>date: 2019-10-14 15:08:18</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>Vue.js # 一级分类</li>
<li>Vue.js进阶 # 二级分类</li>
</ul>
<hr>
<h1 id="混入-mixin"><a href="#混入-mixin" class="headerlink" title="混入 mixin"></a>混入 mixin</h1><p>一个混入对象可以包含任意组件选项.当组件使用混入对象时,所有混入对象的选项将被”混合”进组件本身的选项.</p>
<p>例子:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个混入对象</span></span><br><span class="line"><span class="keyword">var</span> myMixin = &#123;</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">hello</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">hello</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello from mixin&quot;)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//定义一个使用混入对象的组件</span></span><br><span class="line"><span class="string">var Component = Vue.extend(&#123;</span></span><br><span class="line"><span class="string">    mixins: [myMixin]</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var component = new Component() //=&gt; &#x27;</span>hello <span class="keyword">from</span> mixin<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="选项合并"><a href="#选项合并" class="headerlink" title="选项合并"></a>选项合并</h2><p>当组件和混入对象含有同名选项时,这些选项将以恰当的方式进行”合并”.</p>
<p>比如,数据对象在内部会进行递归合并,并在发生冲突时以组件数据优先.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">      <span class="attr">foo</span>: <span class="string">&quot;abc&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">mixins</span>: [mixin],</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;goodbye&quot;</span>,</span><br><span class="line">      <span class="attr">bar</span>: <span class="string">&quot;def&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$data</span>);</span><br><span class="line">    <span class="comment">// =&gt; &#123; message: &#x27;goodbye&#x27;, foo:&#x27;abc&#x27;, bar: &#x27;def&#x27;&#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>同名钩子函数将合并成一个数组,因此都将被调用.另外,混入对象的钩子将在组件自身钩子之前调用.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;混入对象钩子被调用&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">mixins</span>: [mixin],</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件钩子被调用&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt; &#x27;混入对象钩子被调用&#x27;</span></span><br><span class="line"><span class="comment">//=&gt; &#x27;组件钩子被调用&#x27;</span></span><br></pre></td></tr></table></figure>

<p>值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象。两个对象键名冲突时，取组件对象的键值对。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">conficting</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;from mixin&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">mixins</span>: [mixin],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">bar</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">conficting</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;from self&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">vm.<span class="title function_">foo</span>(); <span class="comment">// =&gt; &quot;foo&quot;</span></span><br><span class="line">vm.<span class="title function_">bar</span>(); <span class="comment">// =&gt; &quot;bar&quot;</span></span><br><span class="line">vm.<span class="title function_">conflicting</span>(); <span class="comment">// =&gt; &quot;from self&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：<code>Vue.extend()</code> 也使用同样的策略进行合并。</p>
</blockquote>
<h2 id="全局混入"><a href="#全局混入" class="headerlink" title="全局混入"></a>全局混入</h2><p>混入也可以进行全局注册,使用时需要小心.一但使用全局混入,他将影响每一个之后创建的 Vue 实例.</p>
<p>使用恰当时还可以用来为自定义选项注入处理逻辑.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为自定义的选项 &#x27;myOption&#x27; 注入一个处理器。</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> myOption = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">myOption</span>;</span><br><span class="line">    <span class="keyword">if</span> (myOption) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(myOption);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">myOption</span>: <span class="string">&quot;hello!&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// =&gt; &quot;hello!&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>请谨慎使用全局混入，因为它会影响每个单独创建的 Vue 实例 (包括第三方组件)。大多数情况下，只应当应用于自定义选项，就像上面示例一样。推荐将其作为插件发布，以避免重复应用混入。</p>
</blockquote>
<h2 id="自定义选项合并策略"><a href="#自定义选项合并策略" class="headerlink" title="自定义选项合并策略"></a>自定义选项合并策略</h2><p>自定义选项将使用默认策略，即简单地覆盖已有值。如果想让自定义选项以自定义逻辑合并，可以向 Vue.config.optionMergeStrategies 添加一个函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">myOption</span> = <span class="keyword">function</span> (<span class="params">toVal, fromVal</span>) &#123;</span><br><span class="line">  <span class="comment">// 返回合并后的值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>对于多数值为对象的选项，可以使用与 methods 相同的合并策略：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strategies = <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>;</span><br><span class="line">strategies.<span class="property">myOption</span> = strategies.<span class="property">methods</span>;</span><br></pre></td></tr></table></figure>

<p>可以在 Vuex 1.x 的混入策略里找到一个更高级的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">computed</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">vuex</span> = <span class="keyword">function</span> (<span class="params">toVal, fromVal</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!toVal) <span class="keyword">return</span> fromVal;</span><br><span class="line">  <span class="keyword">if</span> (!fromVal) <span class="keyword">return</span> toVal;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">getters</span>: <span class="title function_">merge</span>(toVal.<span class="property">getters</span>, fromVal.<span class="property">getters</span>),</span><br><span class="line">    <span class="attr">state</span>: <span class="title function_">merge</span>(toVal.<span class="property">state</span>, fromVal.<span class="property">state</span>),</span><br><span class="line">    <span class="attr">actions</span>: <span class="title function_">merge</span>(toVal.<span class="property">actions</span>, fromVal.<span class="property">actions</span>),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h1><p>输入框聚焦</p>
<p>当页面加载时，该元素将获得焦点 (注意：autofocus 在移动版 Safari 上不工作)。事实上，只要你在打开这个页面后还没点击过任何内容，这个输入框就应当还是处于聚焦状态。现在让我们用指令来实现这个功能：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册一个全局自定义指令v-focus</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;focus&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">//当被绑定的元素插入到DOM中时...</span></span><br><span class="line">  <span class="attr">inserted</span>: <span class="keyword">function</span> (<span class="params">el</span>) &#123;</span><br><span class="line">    <span class="comment">//聚焦元素</span></span><br><span class="line">    el.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>局部指令注册,组件中接受<code>directive</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">    <span class="attr">focus</span>: &#123;</span><br><span class="line">        <span class="comment">//指令的定义</span></span><br><span class="line">        <span class="attr">inserted</span>: <span class="keyword">function</span>(<span class="params">el</span>)&#123;</span><br><span class="line">            el.<span class="title function_">focus</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在模板中任何元素上使用<code>v-focus</code>属性,例如:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-focus&gt;</span><br></pre></td></tr></table></figure>

<h1 id="钩子函数"><a href="#钩子函数" class="headerlink" title="钩子函数"></a>钩子函数</h1><p>一个指令对象可以提供以下几个钩子函数:</p>
<ol>
<li><code>bind</code>: 只调用一次,指令第一次绑定到元素时调用.在这里进行一次性的初始化设置.</li>
<li><code>inserted</code>: 被绑定元素插入到父节点时调用.</li>
<li><code>update</code>: 所在组件的 VNode 更新时调用,但是可能发生在其子 VNode 更新之前.指令的值可能发生改变,也可能没有.</li>
<li><code>componentUpdated</code>: 指令所在组件的 VNode 及其子 VNode 全部更新后调用.</li>
<li><code>unbind</code>: 只调用一次,指令与元素解绑时调用.</li>
</ol>
<h2 id="钩子函数的参数"><a href="#钩子函数的参数" class="headerlink" title="钩子函数的参数"></a>钩子函数的参数</h2><p>指令钩子会被传入以下参数:</p>
<ul>
<li><p><code>el</code>: 指令所绑定的元素,可以直接操作 DOM.</p>
</li>
<li><p><code>binding</code>: 一个对象,包含以下属性:</p>
<ul>
<li><code>name</code>: 指令名,不包括<code>v-</code>前缀.</li>
<li><code>value</code>: 指令的绑定值.例如：<code>v-my-directive=&quot;1 + 1&quot;</code>中，绑定值为 2。</li>
<li><code>oldValue</code>: 指令绑定的上一个值.仅在 update 和 componentUpdated 钩子中可用.无论值是否改变都可用.</li>
<li><code>expression</code>: 字符串形式的指令表达式.例如 <code>v-my-directive=&quot;1 + 1&quot;</code>中，表达式为 <code>&quot;1 + 1&quot;</code>。</li>
<li><code>arg</code>: 传给指令的参数.可选.例如 <code>v-my-directive:foo</code> 中，参数为 “foo”。</li>
<li><code>modifiers</code>: 一个包含修饰符的对象.例如：<code>v-my-directive.foo.bar</code> 中，修饰符对象为 <code>&#123; foo: true, bar: true &#125;</code>。</li>
</ul>
</li>
<li><p><code>vnode</code>: Vue 编译生成的虚拟节点.</p>
</li>
<li><p><code>oldVNode</code>: 上一个虚拟节点.</p>
</li>
</ul>
<blockquote>
<p>除了 <code>el</code> 之外，其它参数都应该是只读的，切勿进行修改。如果需要在钩子之间共享数据，建议通过元素的 <code>dataset</code> 来进行。</p>
</blockquote>
<p>范例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html</span></span><br><span class="line">&lt;div id=<span class="string">&quot;hook-arguments-example&quot;</span> v-<span class="attr">demo</span>:foo.<span class="property">a</span>.<span class="property">b</span>=<span class="string">&quot;message&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//js</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;demo&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">bind</span>: <span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="title class_">JSON</span>.<span class="property">stringify</span></span><br><span class="line">    el.<span class="property">innerHTML</span> =</span><br><span class="line">      <span class="string">&#x27;name: &#x27;</span>       + <span class="title function_">s</span>(binding.<span class="property">name</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;value: &#x27;</span>      + <span class="title function_">s</span>(binding.<span class="property">value</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;expression: &#x27;</span> + <span class="title function_">s</span>(binding.<span class="property">expression</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;argument: &#x27;</span>   + <span class="title function_">s</span>(binding.<span class="property">arg</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;modifiers: &#x27;</span>  + <span class="title function_">s</span>(binding.<span class="property">modifiers</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;vnode keys: &#x27;</span> + <span class="title class_">Object</span>.<span class="title function_">keys</span>(vnode).<span class="title function_">join</span>(<span class="string">&#x27;, &#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#hook-arguments-example&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;hello!&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="动态指令参数"><a href="#动态指令参数" class="headerlink" title="动态指令参数"></a>动态指令参数</h1><p>在 <code>v-mydirective:[argument]=&quot;value&quot;</code> 中，argument 参数可以根据组件实例数据进行更新！</p>
<p>例如创建一个自定义指令,通过固定布局将元素固定在页面上.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;baseexample&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Scroll down this page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin</span>=<span class="string">&quot;200&quot;</span>&gt;</span>Stick me 200px from the top of the page<span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>自定义事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;pin&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">bind</span>: <span class="keyword">function</span>(<span class="params">el, bingding, vnode</span>)&#123;</span><br><span class="line">        el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span></span><br><span class="line">        el.<span class="property">style</span>.<span class="property">top</span> = binding.<span class="property">value</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#baseexample&quot;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>

<p>这会把元素固定在距离页面顶部 200px 的位置.</p>
<p>如果需要将元素固定在左侧呢?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;dynamicexample&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Scroll down this page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin:</span>[<span class="attr">direction</span>]=<span class="string">&quot;200&quot;</span>&gt;</span>I am pinned onto the page at 200px to the left.<span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;pin&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">bind</span>: <span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;fixed&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> s = binding.<span class="property">arg</span> == <span class="string">&quot;left&quot;</span> ? <span class="string">&quot;left&quot;</span> : <span class="string">&quot;top&quot;</span>;</span><br><span class="line">    el.<span class="property">style</span>[s] = binding.<span class="property">value</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#dynamicexample&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">direction</span>: <span class="string">&quot;left&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="函数简写"><a href="#函数简写" class="headerlink" title="函数简写"></a>函数简写</h2><p>在很多时候，你可能想在 bind 和 update 时触发相同行为，而不关心其它的钩子。比如这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;color-swatch&quot;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span><br><span class="line">  el.<span class="property">style</span>.<span class="property">backgroundColor</span> = binding.<span class="property">value</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="对象字面量"><a href="#对象字面量" class="headerlink" title="对象字面量"></a>对象字面量</h2><p>如果指令需要多个值，可以传入一个 JavaScript 对象字面量。记住，指令函数能够接受所有合法的 JavaScript 表达式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html</span></span><br><span class="line">&lt;div v-demo=<span class="string">&quot;&#123; color: &#x27;white&#x27;, text: &#x27;hello!&#x27; &#125;&quot;</span>&gt;&lt;/div&gt;;</span><br><span class="line"><span class="comment">//js</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;demo&quot;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">color</span>); <span class="comment">// =&gt; &quot;white&quot;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">text</span>); <span class="comment">// =&gt; &quot;hello!&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="渲染函数-amp-JSX"><a href="#渲染函数-amp-JSX" class="headerlink" title="渲染函数&amp;JSX"></a>渲染函数&amp;JSX</h1><p>渲染函数在 Vue.js 进阶里有讲到,JSX 先不看了.</p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p>插件用来为 Vue 添加全局功能.</p>
<p>插件常用功能:</p>
<ol>
<li>添加全局方法或属性.</li>
<li>添加全局资源: 指令,过滤器,过渡</li>
<li>通过全局混入来添加一些组件选项.</li>
<li>添加 Vue 实例方法,通过把他们添加到 Vue.prototype 上实现.</li>
<li>一个库,提供自己的 API,同时提供上面提到的一个或多个功能.如 Vue-router</li>
</ol>
<h2 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h2><p>通过全局方法<code>Vue.use()</code>使用插件.需要在<code>new Vue()</code>之前调用.</p>
<p>也可以传入一个可选的对象.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">MyPlugin</span>, &#123; <span class="attr">someOption</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>Vue.use 会自动阻止多次注册相同插件，届时即使多次调用也只会注册一次该插件。</p>
<p>Vue.js 官方提供的一些插件 (例如 vue-router) 在检测到 Vue 是可访问的全局变量时会自动调用 <code>Vue.use()</code>。然而在像 CommonJS 这样的模块环境中，你应该始终显式地调用 <code>Vue.use()</code></p>
<h2 id="开发插件"><a href="#开发插件" class="headerlink" title="开发插件"></a>开发插件</h2><p>Vue.js 的插件暴露一个 install 的方法.这个方法的第一个参数是 Vue 构造器,第二个参数是可选的选项对象:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MyPlugin</span>.<span class="property">install</span> = <span class="keyword">function</span> (<span class="params">Vue, options</span>) &#123;</span><br><span class="line">  <span class="comment">//1. 添加全局方法或属性</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="property">myGlobalMethod</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//逻辑..</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2.添加全局资源</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;my-directive&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, binding, vnode, oldVnode</span>) &#123;</span><br><span class="line">      <span class="comment">//逻辑</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//3. 注入组件选项</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//逻辑...</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4. 添加实例方法</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span> (<span class="params">methodOptions</span>) &#123;</span><br><span class="line">    <span class="comment">//逻辑...</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h1><p>过滤器可以用在：双花括号插值和 v-bind 表达式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在双花括号中 --&gt;</span><br><span class="line">&#123;&#123; message | capitalize &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 在 <span class="string">`v-bind`</span> 中 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;rawId | formatId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>在组件的选项中定义本地的过滤器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filters</span>: &#123;</span><br><span class="line">  <span class="attr">capitalize</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    value = value.<span class="title function_">toString</span>()</span><br><span class="line">    <span class="keyword">return</span> value.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + value.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者在创建 Vue 实例之前全局定义过滤器:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&quot;capitalize&quot;</span>, <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  value = value.<span class="title function_">toString</span>();</span><br><span class="line">  <span class="keyword">return</span> value.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + value.<span class="title function_">slice</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当全局过滤器和局部过滤器重名时，会采用局部过滤器。</p>
</blockquote>
<p>过滤器可以串联</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#123;</span><br><span class="line">    message | filterA | filterB;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，filterA 被定义为接收单个参数的过滤器函数，表达式 message 的值将作为参数传入到函数中。然后继续调用同样被定义为接收单个参数的过滤器函数 filterB，将 filterA 的结果传递到 filterB 中。</p>
<p>过滤器可以接收参数:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#123;</span><br><span class="line">    message | <span class="title function_">filterA</span>(<span class="string">&quot;arg1&quot;</span>, arg2);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里，filterA 被定义为接收三个参数的过滤器函数。其中 message 的值作为第一个参数，普通字符串 ‘arg1’ 作为第二个参数，表达式 arg2 的值作为第三个参数。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/vue%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/vue%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB/" class="post-title-link" itemprop="url">vue过渡和动画</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:00" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:00+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:02" itemprop="dateModified" datetime="2022-11-15T09:05:02+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: vue过渡和动画</p>
<p>date: 2019-10-14 12:08:18</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>Vue.js # 一级分类</li>
<li>Vue.js进阶 # 二级分类</li>
</ul>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/" class="post-title-link" itemprop="url">移动端适配</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:55" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:55+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-15 09:05:02" itemprop="dateModified" datetime="2022-11-15T09:05:02+08:00">2022-11-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: 移动端适配</p>
<p>date: 2019-10-09 21:30:02</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>css # 一级分类</li>
<li>移动端 # 二级分类</li>
</ul>
<hr>
<h1 id="媒体查询-media-query"><a href="#媒体查询-media-query" class="headerlink" title="媒体查询 media-query"></a>媒体查询 media-query</h1><p>当媒体查询为 true 时，相关的样式表或样式规则会按照正常的级联规被应用。 当媒体查询返回 false， 标签上带有媒体查询的样式表仍将被下载 （只不过不会被应用）。</p>
<p>包含了一个媒体类型和至少一个使用宽度、高度和颜色等媒体属性来限制样式表范围的表达式。CSS3 加入的媒体查询使得无需修改内容便可以使样式应用于某些特定的设备范围。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@media (min-<span class="attr">width</span>: 700px) and (<span class="attr">orientation</span>: landscape)&#123;</span><br><span class="line">    .<span class="property">sidebar</span> &#123;</span><br><span class="line">        <span class="attr">display</span>: none;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="视口-iewport"><a href="#视口-iewport" class="headerlink" title="视口 iewport"></a>视口 iewport</h1><p>为什么要设置 viewport</p>
<p>viewport 的设置不会对 PC 页面产生影响，但对于移动页面却很重要。下面我们举例来说明：</p>
<ol>
<li>媒体查询 @media 响应式布局中，会根据媒体查询功能来适配多端布局，必须对 viewport 进行设置，否则根据查询到的尺寸无法正确匹配视觉宽度而导致布局混乱。如不设置 viewport 参数，多说移动端媒体查询的结果将是 980px 这个节点布局的参数，而非我们通常设置的 768px 范围内的这个布局参数</li>
<li>由于目前多数手机的 dpr 都不再是 1，为了产出高保真页面，我们一般会给出 750px 的设计稿，那么就需要通过设置 viewport 的参数来进行整体换算，而不是在每次设置尺寸时进行长度的换算。</li>
</ol>
<h2 id="viewport-详解"><a href="#viewport-详解" class="headerlink" title="viewport 详解"></a>viewport 详解</h2><p>在移动端有三种类型的 viewport: layoutviewport、visualviewport、idealviewport。具体解释如下：</p>
<p><code>layoutviewport</code>:   大于实际屏幕， 元素的宽度继承于 layoutviewport，用于保证网站的外观特性与桌面浏览器一样。layoutviewport 到底多宽，每个浏览器不同。iPhone 的 safari 为 980px，通过 document.documentElement.clientWidth 获取。</p>
<p><code>visualviewport</code>: 当前显示在屏幕上的页面，即浏览器可视区域的宽度。</p>
<p><code>idealviewport</code>: 为浏览器定义的可完美适配移动端的理想 viewport，固定不变，可以认为是设备视口宽度。比如 iphone 7 为 375px, iphone 7p 为 414px。</p>
<h2 id="viewport-设置"><a href="#viewport-设置" class="headerlink" title="viewport 设置"></a>viewport 设置</h2><p><code>&lt;meta name=&#39;viewport&#39; content=&#39;width=device-width,initial-scale=1,user-scalable=no&#39;/&gt;</code></p>
<p>通过对 meta 标签三个 viewport 的设置，最终使页面完美展示。</p>
<ol>
<li>width 设置的是 layoutviewport 的宽度</li>
<li>initial-scale 设置页面的初始缩放值，并且这个初始缩放值是相对于 idealviewport 缩放的，最终得到的结果不仅会决定 visualviewport，还会影响到 layoutviewport</li>
<li>user-scalable 是否允许用户进行缩放的设置</li>
</ol>
<blockquote>
<p>只要 layoutviewport &#x3D;&#x3D;&#x3D; visualviewport，页面下面不会出现滚动条，默认只是把页面放大或缩小。</p>
</blockquote>
<h2 id="设备像素比-dpr-与-1px-物理像素"><a href="#设备像素比-dpr-与-1px-物理像素" class="headerlink" title="设备像素比 dpr 与 1px 物理像素"></a>设备像素比 dpr 与 1px 物理像素</h2><h4 id="物理像素（physical-pixel）"><a href="#物理像素（physical-pixel）" class="headerlink" title="物理像素（physical pixel）"></a>物理像素（physical pixel）</h4><p>手机屏幕上显示的最小单元，该最小单元具有颜色及亮度的属性可供设置，iphone6、7、8 为：750 _ 1334，iphone6+、7+、8+ 为 1242 _ 2208</p>
<h4 id="设备独立像素（density-indenpendent-pixel）"><a href="#设备独立像素（density-indenpendent-pixel）" class="headerlink" title="设备独立像素（density-indenpendent pixel）"></a>设备独立像素（density-indenpendent pixel）</h4><p>此为逻辑像素，计算机设备中的一个点，css 中设置的像素指的就是该像素。老早在没有 retina 屏之前，设备独立像素与物理像素是相等的。</p>
<h4 id="设备像素比（device-pixel-ratio）"><a href="#设备像素比（device-pixel-ratio）" class="headerlink" title="设备像素比（device pixel ratio）"></a>设备像素比（device pixel ratio）</h4><p>设备像素比(dpr) &#x3D; 物理像素&#x2F;设备独立像素。如 iphone 6、7、8 的 dpr 为 2，那么一个设备独立像素便为 4 个物理像素，因此在 css 上设置的 1px 在其屏幕上占据的是 2 个物理像素，0.5px 对应的才是其所能展示的最小单位。这就是 1px 在 retina 屏上变粗的原因，目前有很多办法来解决这一问题。</p>
<h4 id="1px-的物理像素的解决方案"><a href="#1px-的物理像素的解决方案" class="headerlink" title="1px 的物理像素的解决方案"></a>1px 的物理像素的解决方案</h4><p>从第一部分的讨论可知 viewport 的 initial-scale 具有缩放页面的效果。对于 dpr&#x3D;2 的屏幕，1px 压缩一半便可与 1px 的设备像素比匹配，这就可以通过将缩放比 initial-scale 设置为 0.5&#x3D;1&#x2F;2 而实现。以此类推 dpr&#x3D;3 的屏幕可以将 initial-scale 设置为 0.33&#x3D;1&#x2F;3 来实现。</p>
<h1 id="设备像素比-dpr-与-rem-的适配方案"><a href="#设备像素比-dpr-与-rem-的适配方案" class="headerlink" title="设备像素比 dpr 与 rem 的适配方案"></a>设备像素比 dpr 与 rem 的适配方案</h1><p>rem 是相对于根元素 html 的 font-size 来做计算。通常在页面初始化时加载时通过对 document.documentElement.style.fontSize 设置来实现。</p>
<h4 id="rem-适配规则"><a href="#rem-适配规则" class="headerlink" title="rem 适配规则"></a>rem 适配规则</h4><p>通过对 initial-scale &#x3D; 1&#x2F;dpr 的设置，已将对屏幕的描述从物理像素转化到了物理像素上了，这将是后续推导的基础，且设计稿为 750px。</p>
<p>物理像素为 750 &#x3D; 375 * 2，若屏幕等分为 10 份，那么 1rem &#x3D; 75px，10rem &#x3D; 750px;</p>
<p>物理像素为 1125 &#x3D; 375 * 3，若屏幕等分为 10 份，那么 1rem &#x3D; 112.5px, 10rem &#x3D; 1125px;</p>
<p>物理像素为 1242 &#x3D; 414 * 3, 若屏幕等分为 10 份，那么 1rem &#x3D; 124.2px, 10rem &#x3D; 1242px;</p>
<p>同时为了书写方便可以直接通过 px 布局，然后在打包时利用 pxtorem 库转化为基于 rem 的布局。</p>
<h1 id="视口单位-vw-vh-适配方案"><a href="#视口单位-vw-vh-适配方案" class="headerlink" title="视口单位(vw,vh)适配方案"></a>视口单位(vw,vh)适配方案</h1><p>将视口宽度 window.innerWidth 和视口高度 window.innerHeight 等分为 100 份，且将这里的视口理解成 idealviewport 更为贴切，并不会随着 viewport 的不同设置而改变。</p>
<p>vw : 1vw 为视口宽度的 1%</p>
<p>vh : 1vh 为视口高度的 1%</p>
<p>vmin :  vw 和 vh 中的较小值</p>
<p>vmax : 选取 vw 和 vh 中的较大值</p>
<p>如果设计稿为 750px，那么 1vw &#x3D; 7.5px，100vw &#x3D; 750px。其实设计稿按照设么都没多大关系，最终转化过来的都是相对单位，上面讲的 rem 也是对它的模拟。这里的比例关系也推荐不要自己换算，使用 pxtoviewport 的库就可以帮我们转换。当然每种方案都会有其弊端，这里就不展开讨论。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zax Tseng</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
