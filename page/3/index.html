<!DOCTYPE html>





<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="Zax&apos;s BLOG">
<meta name="keywords" content="javascript, Vue, HTML5">
<meta property="og:type" content="website">
<meta property="og:title" content="Zax&#39;s BLOG">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Zax&#39;s BLOG">
<meta property="og:description" content="Zax&apos;s BLOG">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zax&#39;s BLOG">
<meta name="twitter:description" content="Zax&apos;s BLOG">
  <link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Zax's BLOG</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zax's BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/Echarts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/10/06/Echarts/" class="post-title-link" itemprop="url">Echarts</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-06 14:24:07 / 修改时间：20:17:14" itemprop="dateCreated datePublished" datetime="2019-10-06T14:24:07+08:00">2019-10-06</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML5/" itemprop="url" rel="index"><span itemprop="name">HTML5</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML5/canvas/" itemprop="url" rel="index"><span itemprop="name">canvas</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="浏览器画图原理"><a href="#浏览器画图原理" class="headerlink" title="浏览器画图原理"></a>浏览器画图原理</h1><ul>
<li><p>canvas<br>基于像素<br>单个 html,类似于画笔在画布上画画<br>Echarts 基于 canvas 画图</p>
</li>
<li><p>svg<br>基于对象模型<br>多个图形元素<br>高保真</p>
</li>
</ul>
<h1 id="使用-canvas-画图"><a href="#使用-canvas-画图" class="headerlink" title="使用 canvas 画图"></a>使用 canvas 画图</h1><p>基础操作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//获取canvas对象</span></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"myCanvas"</span>)</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//开始一个新的绘制路径</span></span><br><span class="line">ctx.beginPath()</span><br><span class="line"><span class="comment">//设置弧线颜色</span></span><br><span class="line">ctx.strokeStyle = <span class="string">"blue"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> circle = &#123;</span><br><span class="line">    x: <span class="number">100</span>,   <span class="comment">//圆心的x轴</span></span><br><span class="line">    y: <span class="number">100</span>,   <span class="comment">//圆心的y轴</span></span><br><span class="line">    r: <span class="number">50</span>     <span class="comment">//圆的半径</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//沿着坐标点(100,100)为圆心,半径为50px的圆顺时针方向绘制弧线</span></span><br><span class="line">ctx.arc(circle.x, circle.y, circle.r, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//按照指定的路径绘制弧线</span></span><br><span class="line">ctr.stroke()</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="使用-svg-画图"><a href="#使用-svg-画图" class="headerlink" title="使用 svg 画图"></a>使用 svg 画图</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg</span><br><span class="line">  width=<span class="string">"100%"</span></span><br><span class="line">  height=<span class="string">"100%"</span></span><br><span class="line">  version=<span class="string">"1.1"</span></span><br><span class="line">  xmlns=<span class="string">"http://www.w3.org/2000/svg"</span></span><br><span class="line">&gt;</span><br><span class="line">  <span class="comment">// circle是圆形标签</span></span><br><span class="line">  &lt;circle cx=<span class="string">"70"</span> cy=<span class="string">"50"</span> r=<span class="string">"40"</span> stroke=<span class="string">"black"</span> stroke-width=<span class="string">"2"</span> fill=<span class="string">"red"</span> /&gt;</span><br><span class="line">  <span class="comment">//rect是长方形标签</span></span><br><span class="line">  &lt;rect</span><br><span class="line">    x=<span class="string">"120"</span></span><br><span class="line">    width=<span class="string">"100"</span></span><br><span class="line">    height=<span class="string">"100"</span></span><br><span class="line">    style=<span class="string">"fill:rgb(0,0,255);stroke-width:1; stroke:rgb(0,0,0)"</span></span><br><span class="line">  /&gt;</span><br><span class="line">&lt;<span class="regexp">/svg&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Echarts-条形图-直方图"><a href="#Echarts-条形图-直方图" class="headerlink" title="Echarts 条形图(直方图)"></a>Echarts 条形图(直方图)</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">    &lt;!-- 引入 ECharts 文件 --&gt;</span><br><span class="line">    &lt;script src=<span class="string">"echarts.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">    &lt;!-- 为 ECharts 准备一个具备大小（宽高）的 DOM --&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div id="main" style="width: 600px;height:400px;"&gt;&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/基于DOM,初始化Echarts实例</span></span><br><span class="line"><span class="regexp">var myChart = echarts.init(document.getElementById("main"))</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/指定图表的配置项和数据</span></span><br><span class="line"><span class="regexp">var option = &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/标题组件</span></span><br><span class="line"><span class="regexp">    title: &#123;</span></span><br><span class="line"><span class="regexp">        text: "直方图(条形图)", /</span><span class="regexp">/主标题</span></span><br><span class="line"><span class="regexp">        subtext: "学习Echarts", /</span><span class="regexp">/副标题</span></span><br><span class="line"><span class="regexp">        left: 150, /</span><span class="regexp">/数字是像素值,距离左侧.也可以是left,center</span></span><br><span class="line"><span class="regexp">        borderColor: "red", /</span><span class="regexp">/边框颜色</span></span><br><span class="line"><span class="regexp">        borderWidth: 5 /</span><span class="regexp">/边框粗细</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/工具箱组件</span></span><br><span class="line"><span class="regexp">    toolbox: &#123;</span></span><br><span class="line"><span class="regexp">        show: true, /</span><span class="regexp">/是否显示toolbox</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/具体显示功能</span></span><br><span class="line"><span class="regexp">        feature: &#123;</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/保存图片</span></span><br><span class="line"><span class="regexp">            saveAsImage: &#123;</span></span><br><span class="line"><span class="regexp">                show: true</span></span><br><span class="line"><span class="regexp">            &#125;,</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/数据视图</span></span><br><span class="line"><span class="regexp">            dataView: &#123;</span></span><br><span class="line"><span class="regexp">                show: true</span></span><br><span class="line"><span class="regexp">            &#125;,</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/缩放视图</span></span><br><span class="line"><span class="regexp">            dataZoom: &#123;</span></span><br><span class="line"><span class="regexp">                show: true</span></span><br><span class="line"><span class="regexp">            &#125;,</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/还原</span></span><br><span class="line"><span class="regexp">            Restore: &#123;</span></span><br><span class="line"><span class="regexp">                show: true</span></span><br><span class="line"><span class="regexp">            &#125;,</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/动态类型切换</span></span><br><span class="line"><span class="regexp">            magicType: &#123;</span></span><br><span class="line"><span class="regexp">                type: ['line', 'bar']</span></span><br><span class="line"><span class="regexp">            &#125;</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/弹窗(当鼠标滑过图表显示)</span></span><br><span class="line"><span class="regexp">    tooltip: &#123;</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/触发方式</span></span><br><span class="line"><span class="regexp">        trigger: 'axis' /</span><span class="regexp">/x轴触发</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/图例</span></span><br><span class="line"><span class="regexp">    legend: &#123;</span></span><br><span class="line"><span class="regexp">        data: ['销量']</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/x轴</span></span><br><span class="line"><span class="regexp">    xAxis: &#123;</span></span><br><span class="line"><span class="regexp">        data: ['衬衫', '羊毛衫', '雪纺衫', '裤子', '高跟鞋', '袜子']</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    yAxis: &#123;&#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/数据</span></span><br><span class="line"><span class="regexp">    series: [&#123;</span></span><br><span class="line"><span class="regexp">        name: '销量',</span></span><br><span class="line"><span class="regexp">        type: 'bar', //bar表示条形图.line表示折线图</span></span><br><span class="line"><span class="regexp">        data: [5, 20, 36, 10, 10, 20],</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/标记点(数据点)</span></span><br><span class="line"><span class="regexp">        markPoint: &#123;</span></span><br><span class="line"><span class="regexp">            data: [</span></span><br><span class="line"><span class="regexp">                &#123;type: 'max', name: '最大值'&#125;, //最大值的点会默认方块显示</span></span><br><span class="line"><span class="regexp">                &#123;type: 'min', name: '最小值', symbol: 'arrow'&#125; //最小值的点会变成箭头</span></span><br><span class="line"><span class="regexp">            ]</span></span><br><span class="line"><span class="regexp">        &#125;,</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/标记线</span></span><br><span class="line"><span class="regexp">        markLine: &#123;</span></span><br><span class="line"><span class="regexp">            data: [</span></span><br><span class="line"><span class="regexp">                &#123;type: 'average', name: '平均值'&#125; //设置平均值线</span></span><br><span class="line"><span class="regexp">            ]</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;]</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/使用配置数据显示图表</span></span><br><span class="line"><span class="regexp">    myChart.setOption(option)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h1><p>特点:</p>
<ul>
<li>展示百分比</li>
<li>type: pie</li>
</ul>
<p>center 圆心坐标<br>radius 半径<br>name 图例名字<br>selectedMode 是否支持多选</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=<span class="string">"main"</span> style=<span class="string">"width=900px;height=600px"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">myChart = echarts.init(document.getElementById("main"))</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">var option = &#123;</span></span><br><span class="line"><span class="regexp">    title: &#123;</span></span><br><span class="line"><span class="regexp">        text: "站点访问来源",</span></span><br><span class="line"><span class="regexp">        subtext: "副标题",</span></span><br><span class="line"><span class="regexp">        x: center</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    tooltip: &#123;</span></span><br><span class="line"><span class="regexp">        trigger: "item", </span></span><br><span class="line"><span class="regexp">        formatter: "&#123;a&#125; &lt;br/</span>&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)<span class="string">"</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    legend: &#123;</span></span><br><span class="line"><span class="string">        orient: "</span>vertical<span class="string">",</span></span><br><span class="line"><span class="string">        left: "</span>left<span class="string">",</span></span><br><span class="line"><span class="string">        data: ['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    series: [&#123;</span></span><br><span class="line"><span class="string">        name: '访问来源', //图例名字</span></span><br><span class="line"><span class="string">        type: 'pie',</span></span><br><span class="line"><span class="string">        radius: '55%', //半径</span></span><br><span class="line"><span class="string">        center: ['50%', '60%'], //圆心坐标</span></span><br><span class="line"><span class="string">        data: [</span></span><br><span class="line"><span class="string">            &#123;value: 335, name: '直接访问'&#125;,</span></span><br><span class="line"><span class="string">            &#123;value: 210, name: '邮件营销'&#125;,</span></span><br><span class="line"><span class="string">            &#123;value: 445, name: '联盟广告'&#125;,</span></span><br><span class="line"><span class="string">            &#123;value: 135, name: '视频广告'&#125;,</span></span><br><span class="line"><span class="string">            &#123;value: 2453, name: '搜索引擎'&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">    &#125;]</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="仪表盘"><a href="#仪表盘" class="headerlink" title="仪表盘"></a>仪表盘</h1><p><code>type: gauge</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;main&quot; style=&quot;width=900px;height=600px&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">myChart = echarts.init(document.getElementById(&quot;main&quot;))</span><br><span class="line"></span><br><span class="line">var option = &#123;</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">        formatter: &quot;&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125;%&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    toolbox: &#123;</span><br><span class="line">        feature: &#123;</span><br><span class="line">            restore: &#123;&#125;,</span><br><span class="line">            saveAsImage: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [&#123;</span><br><span class="line">        name: &apos;业务指标&apos;, //图例名字</span><br><span class="line">        type: &apos;gauge&apos;,</span><br><span class="line">        detail: &#123;formatter: &apos;&#123;value&#125;%&apos;&#125;,</span><br><span class="line">        data: [</span><br><span class="line">            &#123;value: 33, name: &apos;完成率&apos;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h1><p>需要配合地图坐标,可以下载china.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;ECharts&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;!-- 引入 echarts.js --&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script src="../</span>echarts.min.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;script src="</span>../china.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;</span></span><br><span class="line"><span class="string">&lt;div id="</span>main<span class="string">" style="</span>width: <span class="number">900</span>px;height:<span class="number">600</span>px;<span class="string">"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;script type="</span>text/javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">        // 基于准备好的dom，初始化echarts实例</span></span><br><span class="line"><span class="string">var myChart = echarts.init(document.getElementById('main'));</span></span><br><span class="line"><span class="string">var geoCoordMap = &#123;</span></span><br><span class="line"><span class="string">    '上海': [121.4648,31.2891],</span></span><br><span class="line"><span class="string">    '东莞': [113.8953,22.901],</span></span><br><span class="line"><span class="string">    '东营': [118.7073,37.5513],</span></span><br><span class="line"><span class="string">    '中山': [113.4229,22.478],</span></span><br><span class="line"><span class="string">    '临汾': [111.4783,36.1615],</span></span><br><span class="line"><span class="string">    '临沂': [118.3118,35.2936],</span></span><br><span class="line"><span class="string">    '丹东': [124.541,40.4242],</span></span><br><span class="line"><span class="string">    '丽水': [119.5642,28.1854],</span></span><br><span class="line"><span class="string">    '乌鲁木齐': [87.9236,43.5883],</span></span><br><span class="line"><span class="string">    '佛山': [112.8955,23.1097],</span></span><br><span class="line"><span class="string">    '保定': [115.0488,39.0948],</span></span><br><span class="line"><span class="string">    '兰州': [103.5901,36.3043],</span></span><br><span class="line"><span class="string">    '包头': [110.3467,41.4899],</span></span><br><span class="line"><span class="string">    '北京': [116.4551,40.2539],</span></span><br><span class="line"><span class="string">    '北海': [109.314,21.6211],</span></span><br><span class="line"><span class="string">    '南京': [118.8062,31.9208],</span></span><br><span class="line"><span class="string">    '南宁': [108.479,23.1152],</span></span><br><span class="line"><span class="string">    '南昌': [116.0046,28.6633],</span></span><br><span class="line"><span class="string">    '南通': [121.1023,32.1625],</span></span><br><span class="line"><span class="string">    '厦门': [118.1689,24.6478],</span></span><br><span class="line"><span class="string">    '台州': [121.1353,28.6688],</span></span><br><span class="line"><span class="string">    '合肥': [117.29,32.0581],</span></span><br><span class="line"><span class="string">    '呼和浩特': [111.4124,40.4901],</span></span><br><span class="line"><span class="string">    '咸阳': [108.4131,34.8706],</span></span><br><span class="line"><span class="string">    '哈尔滨': [127.9688,45.368],</span></span><br><span class="line"><span class="string">    '唐山': [118.4766,39.6826],</span></span><br><span class="line"><span class="string">    '嘉兴': [120.9155,30.6354],</span></span><br><span class="line"><span class="string">    '大同': [113.7854,39.8035],</span></span><br><span class="line"><span class="string">    '大连': [122.2229,39.4409],</span></span><br><span class="line"><span class="string">    '天津': [117.4219,39.4189],</span></span><br><span class="line"><span class="string">    '太原': [112.3352,37.9413],</span></span><br><span class="line"><span class="string">    '威海': [121.9482,37.1393],</span></span><br><span class="line"><span class="string">    '宁波': [121.5967,29.6466],</span></span><br><span class="line"><span class="string">    '宝鸡': [107.1826,34.3433],</span></span><br><span class="line"><span class="string">    '宿迁': [118.5535,33.7775],</span></span><br><span class="line"><span class="string">    '常州': [119.4543,31.5582],</span></span><br><span class="line"><span class="string">    '广州': [113.5107,23.2196],</span></span><br><span class="line"><span class="string">    '廊坊': [116.521,39.0509],</span></span><br><span class="line"><span class="string">    '延安': [109.1052,36.4252],</span></span><br><span class="line"><span class="string">    '张家口': [115.1477,40.8527],</span></span><br><span class="line"><span class="string">    '徐州': [117.5208,34.3268],</span></span><br><span class="line"><span class="string">    '德州': [116.6858,37.2107],</span></span><br><span class="line"><span class="string">    '惠州': [114.6204,23.1647],</span></span><br><span class="line"><span class="string">    '成都': [103.9526,30.7617],</span></span><br><span class="line"><span class="string">    '扬州': [119.4653,32.8162],</span></span><br><span class="line"><span class="string">    '承德': [117.5757,41.4075],</span></span><br><span class="line"><span class="string">    '拉萨': [91.1865,30.1465],</span></span><br><span class="line"><span class="string">    '无锡': [120.3442,31.5527],</span></span><br><span class="line"><span class="string">    '日照': [119.2786,35.5023],</span></span><br><span class="line"><span class="string">    '昆明': [102.9199,25.4663],</span></span><br><span class="line"><span class="string">    '杭州': [119.5313,29.8773],</span></span><br><span class="line"><span class="string">    '枣庄': [117.323,34.8926],</span></span><br><span class="line"><span class="string">    '柳州': [109.3799,24.9774],</span></span><br><span class="line"><span class="string">    '株洲': [113.5327,27.0319],</span></span><br><span class="line"><span class="string">    '武汉': [114.3896,30.6628],</span></span><br><span class="line"><span class="string">    '汕头': [117.1692,23.3405],</span></span><br><span class="line"><span class="string">    '江门': [112.6318,22.1484],</span></span><br><span class="line"><span class="string">    '沈阳': [123.1238,42.1216],</span></span><br><span class="line"><span class="string">    '沧州': [116.8286,38.2104],</span></span><br><span class="line"><span class="string">    '河源': [114.917,23.9722],</span></span><br><span class="line"><span class="string">    '泉州': [118.3228,25.1147],</span></span><br><span class="line"><span class="string">    '泰安': [117.0264,36.0516],</span></span><br><span class="line"><span class="string">    '泰州': [120.0586,32.5525],</span></span><br><span class="line"><span class="string">    '济南': [117.1582,36.8701],</span></span><br><span class="line"><span class="string">    '济宁': [116.8286,35.3375],</span></span><br><span class="line"><span class="string">    '海口': [110.3893,19.8516],</span></span><br><span class="line"><span class="string">    '淄博': [118.0371,36.6064],</span></span><br><span class="line"><span class="string">    '淮安': [118.927,33.4039],</span></span><br><span class="line"><span class="string">    '深圳': [114.5435,22.5439],</span></span><br><span class="line"><span class="string">    '清远': [112.9175,24.3292],</span></span><br><span class="line"><span class="string">    '温州': [120.498,27.8119],</span></span><br><span class="line"><span class="string">    '渭南': [109.7864,35.0299],</span></span><br><span class="line"><span class="string">    '湖州': [119.8608,30.7782],</span></span><br><span class="line"><span class="string">    '湘潭': [112.5439,27.7075],</span></span><br><span class="line"><span class="string">    '滨州': [117.8174,37.4963],</span></span><br><span class="line"><span class="string">    '潍坊': [119.0918,36.524],</span></span><br><span class="line"><span class="string">    '烟台': [120.7397,37.5128],</span></span><br><span class="line"><span class="string">    '玉溪': [101.9312,23.8898],</span></span><br><span class="line"><span class="string">    '珠海': [113.7305,22.1155],</span></span><br><span class="line"><span class="string">    '盐城': [120.2234,33.5577],</span></span><br><span class="line"><span class="string">    '盘锦': [121.9482,41.0449],</span></span><br><span class="line"><span class="string">    '石家庄': [114.4995,38.1006],</span></span><br><span class="line"><span class="string">    '福州': [119.4543,25.9222],</span></span><br><span class="line"><span class="string">    '秦皇岛': [119.2126,40.0232],</span></span><br><span class="line"><span class="string">    '绍兴': [120.564,29.7565],</span></span><br><span class="line"><span class="string">    '聊城': [115.9167,36.4032],</span></span><br><span class="line"><span class="string">    '肇庆': [112.1265,23.5822],</span></span><br><span class="line"><span class="string">    '舟山': [122.2559,30.2234],</span></span><br><span class="line"><span class="string">    '苏州': [120.6519,31.3989],</span></span><br><span class="line"><span class="string">    '莱芜': [117.6526,36.2714],</span></span><br><span class="line"><span class="string">    '菏泽': [115.6201,35.2057],</span></span><br><span class="line"><span class="string">    '营口': [122.4316,40.4297],</span></span><br><span class="line"><span class="string">    '葫芦岛': [120.1575,40.578],</span></span><br><span class="line"><span class="string">    '衡水': [115.8838,37.7161],</span></span><br><span class="line"><span class="string">    '衢州': [118.6853,28.8666],</span></span><br><span class="line"><span class="string">    '西宁': [101.4038,36.8207],</span></span><br><span class="line"><span class="string">    '西安': [109.1162,34.2004],</span></span><br><span class="line"><span class="string">    '贵阳': [106.6992,26.7682],</span></span><br><span class="line"><span class="string">    '连云港': [119.1248,34.552],</span></span><br><span class="line"><span class="string">    '邢台': [114.8071,37.2821],</span></span><br><span class="line"><span class="string">    '邯郸': [114.4775,36.535],</span></span><br><span class="line"><span class="string">    '郑州': [113.4668,34.6234],</span></span><br><span class="line"><span class="string">    '鄂尔多斯': [108.9734,39.2487],</span></span><br><span class="line"><span class="string">    '重庆': [107.7539,30.1904],</span></span><br><span class="line"><span class="string">    '金华': [120.0037,29.1028],</span></span><br><span class="line"><span class="string">    '铜川': [109.0393,35.1947],</span></span><br><span class="line"><span class="string">    '银川': [106.3586,38.1775],</span></span><br><span class="line"><span class="string">    '镇江': [119.4763,31.9702],</span></span><br><span class="line"><span class="string">    '长春': [125.8154,44.2584],</span></span><br><span class="line"><span class="string">    '长沙': [113.0823,28.2568],</span></span><br><span class="line"><span class="string">    '长治': [112.8625,36.4746],</span></span><br><span class="line"><span class="string">    '阳泉': [113.4778,38.0951],</span></span><br><span class="line"><span class="string">    '青岛': [120.4651,36.3373],</span></span><br><span class="line"><span class="string">    '韶关': [113.7964,24.7028]</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var BJData = [</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'上海',value:95&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'广州',value:90&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'大连',value:80&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'南宁',value:70&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'南昌',value:60&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'拉萨',value:50&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'长春',value:40&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'包头',value:30&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'重庆',value:20&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'北京'&#125;, &#123;name:'常州',value:10&#125;]</span></span><br><span class="line"><span class="string">];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var SHData = [</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'包头',value:95&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'昆明',value:90&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'广州',value:80&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'郑州',value:70&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'长春',value:60&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'重庆',value:50&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'长沙',value:40&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'北京',value:30&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'丹东',value:20&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'上海'&#125;,&#123;name:'大连',value:10&#125;]</span></span><br><span class="line"><span class="string">];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var GZData = [</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'福州',value:95&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'太原',value:90&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'长春',value:80&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'重庆',value:70&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'西安',value:60&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'成都',value:50&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'常州',value:40&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'北京',value:30&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'北海',value:20&#125;],</span></span><br><span class="line"><span class="string">    [&#123;name:'广州'&#125;,&#123;name:'海口',value:10&#125;]</span></span><br><span class="line"><span class="string">];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var convertData = function (data) &#123;</span></span><br><span class="line"><span class="string">    var res = [];</span></span><br><span class="line"><span class="string">    for (var i = 0; i &lt; data.length; i++) &#123;</span></span><br><span class="line"><span class="string">        var dataItem = data[i];</span></span><br><span class="line"><span class="string">        var fromCoord = geoCoordMap[dataItem[0].name];</span></span><br><span class="line"><span class="string">        var toCoord = geoCoordMap[dataItem[1].name];</span></span><br><span class="line"><span class="string">        if (fromCoord &amp;&amp; toCoord) &#123;</span></span><br><span class="line"><span class="string">            res.push([&#123;</span></span><br><span class="line"><span class="string">                name: dataItem[0].name,</span></span><br><span class="line"><span class="string">                coord: fromCoord</span></span><br><span class="line"><span class="string">            &#125;, &#123;</span></span><br><span class="line"><span class="string">                name: dataItem[1].name,</span></span><br><span class="line"><span class="string">                coord: toCoord</span></span><br><span class="line"><span class="string">            &#125;]);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return res;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var color = ['#a6c84c', '#ffa022', '#46bee9'];</span></span><br><span class="line"><span class="string">var series = [];</span></span><br><span class="line"><span class="string">[['北京', BJData], ['上海', SHData], ['广州', GZData]].forEach(function (item, i) &#123;</span></span><br><span class="line"><span class="string">    series.push(&#123;</span></span><br><span class="line"><span class="string">        name: item[0] + ' Top10',</span></span><br><span class="line"><span class="string">        type: 'lines',</span></span><br><span class="line"><span class="string">        zlevel: 1,</span></span><br><span class="line"><span class="string">        effect: &#123;</span></span><br><span class="line"><span class="string">            show: true,</span></span><br><span class="line"><span class="string">            period: 6,</span></span><br><span class="line"><span class="string">            trailLength: 0.7,</span></span><br><span class="line"><span class="string">            color: '#fff',</span></span><br><span class="line"><span class="string">            symbolSize: 3</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        lineStyle: &#123;</span></span><br><span class="line"><span class="string">            normal: &#123;</span></span><br><span class="line"><span class="string">                color: color[i],</span></span><br><span class="line"><span class="string">                width: 0,</span></span><br><span class="line"><span class="string">                curveness: 0.2</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: convertData(item[1])</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        name: item[0] + ' Top10',</span></span><br><span class="line"><span class="string">        type: 'lines',</span></span><br><span class="line"><span class="string">        zlevel: 2,</span></span><br><span class="line"><span class="string">        effect: &#123;</span></span><br><span class="line"><span class="string">            show: true,</span></span><br><span class="line"><span class="string">            period: 6,</span></span><br><span class="line"><span class="string">            trailLength: 0,</span></span><br><span class="line"><span class="string">            symbol: planePath,</span></span><br><span class="line"><span class="string">            symbolSize: 15</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        lineStyle: &#123;</span></span><br><span class="line"><span class="string">            normal: &#123;</span></span><br><span class="line"><span class="string">                color: color[i],</span></span><br><span class="line"><span class="string">                width: 1,</span></span><br><span class="line"><span class="string">                opacity: 0.4,</span></span><br><span class="line"><span class="string">                curveness: 0.2</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: convertData(item[1])</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        name: item[0] + ' Top10',</span></span><br><span class="line"><span class="string">        type: 'effectScatter',</span></span><br><span class="line"><span class="string">        coordinateSystem: 'geo',</span></span><br><span class="line"><span class="string">        zlevel: 2,</span></span><br><span class="line"><span class="string">        rippleEffect: &#123;</span></span><br><span class="line"><span class="string">            brushType: 'stroke'</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        label: &#123;</span></span><br><span class="line"><span class="string">            normal: &#123;</span></span><br><span class="line"><span class="string">                show: true,</span></span><br><span class="line"><span class="string">                position: 'right',</span></span><br><span class="line"><span class="string">                formatter: '&#123;b&#125;'</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        symbolSize: function (val) &#123;</span></span><br><span class="line"><span class="string">            return val[2] / 8;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">            normal: &#123;</span></span><br><span class="line"><span class="string">                color: color[i]</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: item[1].map(function (dataItem) &#123;</span></span><br><span class="line"><span class="string">            return &#123;</span></span><br><span class="line"><span class="string">                name: dataItem[1].name,</span></span><br><span class="line"><span class="string">                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])</span></span><br><span class="line"><span class="string">            &#125;;</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">option = &#123;</span></span><br><span class="line"><span class="string">    backgroundColor: '#404a59',</span></span><br><span class="line"><span class="string">    title : &#123;</span></span><br><span class="line"><span class="string">        text: '城市航线',</span></span><br><span class="line"><span class="string">        subtext: '数据纯属虚构',</span></span><br><span class="line"><span class="string">        left: 'center',</span></span><br><span class="line"><span class="string">        textStyle : &#123;</span></span><br><span class="line"><span class="string">            color: '#fff'</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    tooltip : &#123;</span></span><br><span class="line"><span class="string">        trigger: 'item'</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    legend: &#123;</span></span><br><span class="line"><span class="string">        orient: 'vertical',</span></span><br><span class="line"><span class="string">        top: 'bottom',</span></span><br><span class="line"><span class="string">        left: 'right',</span></span><br><span class="line"><span class="string">        data:['北京 Top10', '上海 Top10', '广州 Top10'],</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">            color: '#fff'</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        selectedMode: 'single'</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    geo: &#123;</span></span><br><span class="line"><span class="string">        map: 'china',</span></span><br><span class="line"><span class="string">        label: &#123;</span></span><br><span class="line"><span class="string">            emphasis: &#123;</span></span><br><span class="line"><span class="string">                show: false</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        roam: true,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">            normal: &#123;</span></span><br><span class="line"><span class="string">                areaColor: '#323c48',</span></span><br><span class="line"><span class="string">                borderColor: '#404a59'</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            emphasis: &#123;</span></span><br><span class="line"><span class="string">                areaColor: '#2a333d'</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    series: series</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">// 使用刚指定的配置项和数据显示图表。</span></span><br><span class="line"><span class="string">myChart.setOption(option);</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/03/TypeScript入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/10/03/TypeScript入门/" class="post-title-link" itemprop="url">TypeScript入门</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-03 16:00:08" itemprop="dateCreated datePublished" datetime="2019-10-03T16:00:08+08:00">2019-10-03</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-06 09:39:53" itemprop="dateModified" datetime="2019-10-06T09:39:53+08:00">2019-10-06</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>TypeScript具有类型系统，且是JavaScript的超集。 它可以编译成普通的JavaScript代码。 TypeScript支持任意浏览器，任意环境，任意系统并且是开源的。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br><span class="line"><span class="comment">//查看版本号</span></span><br><span class="line">tsc -v</span><br><span class="line"><span class="comment">//查看安装目录</span></span><br><span class="line">npm bin -g</span><br><span class="line"></span><br><span class="line"><span class="comment">//代码编译</span></span><br><span class="line">tsc helloworld.ts</span><br><span class="line"><span class="comment">//会出现一个helloworld.js</span></span><br></pre></td></tr></table></figure>

<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>输出文件夹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将文件编译到dist文件夹下</span></span><br><span class="line">tsc --outDir dist helloworld.ts</span><br></pre></td></tr></table></figure>

<h2 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用代码初始化,生成tsconfig.json</span></span><br><span class="line">tsc --init</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改文件内属性</span></span><br><span class="line"><span class="comment">//设置输出文件夹dist</span></span><br><span class="line"><span class="string">"outDir"</span>: <span class="string">"./dist"</span></span><br><span class="line"><span class="comment">//设置源代码文件夹</span></span><br><span class="line"><span class="string">"rootDir"</span>: <span class="string">"./src"</span></span><br></pre></td></tr></table></figure>

<h2 id="动态监视"><a href="#动态监视" class="headerlink" title="动态监视"></a>动态监视</h2><p>发现代码变动,自动编译</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc -w</span><br></pre></td></tr></table></figure>

<h1 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h1><ol>
<li>变量使用前要定义</li>
<li>变量类型</li>
<li>any类型</li>
</ol>
<h2 id="变量使用前要定义"><a href="#变量使用前要定义" class="headerlink" title="变量使用前要定义"></a>变量使用前要定义</h2><p>let/var 变量名:变量类型 = 默认值</p>
<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><p>number,string,boolean,symbol,any,object</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name:string = <span class="string">"Tom"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"My name is"</span> + name)</span><br><span class="line">name = <span class="number">100</span> <span class="comment">//编译错误,类型不匹配</span></span><br></pre></td></tr></table></figure>

<h2 id="any类型"><a href="#any类型" class="headerlink" title="any类型"></a>any类型</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//any类型让编译器忽略检测</span></span><br><span class="line"><span class="keyword">let</span> name:any = <span class="string">"Tom"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"My name is"</span> + name)</span><br><span class="line">name = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"My name is"</span> + name)</span><br></pre></td></tr></table></figure>

<h1 id="常量保存"><a href="#常量保存" class="headerlink" title="常量保存"></a>常量保存</h1><h2 id="常量定义方法"><a href="#常量定义方法" class="headerlink" title="常量定义方法"></a>常量定义方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常量的定义语法</span></span><br><span class="line"><span class="keyword">const</span> name:type = initial_value</span><br><span class="line"></span><br><span class="line"><span class="comment">//数据库连接串</span></span><br><span class="line"><span class="keyword">const</span> dbstr:string = <span class="string">"ip=192.168.2.1;port=5433;uid=ayin;pwd=123123;"</span></span><br><span class="line"><span class="built_in">console</span>.log(dbstr)</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组常量</span></span><br><span class="line"><span class="keyword">const</span> DATA:number[] = [<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>]</span><br><span class="line"><span class="built_in">console</span>.log(DATA)</span><br><span class="line"></span><br><span class="line"><span class="comment">// DATA = [10,20,30]; //编译错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组地址并未改变,值可以改变</span></span><br><span class="line"><span class="comment">//正常赋值</span></span><br><span class="line">DATA[<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line">DATA[<span class="number">1</span>] = <span class="number">20</span></span><br><span class="line">DATA[<span class="number">2</span>] = <span class="number">30</span></span><br><span class="line"><span class="built_in">console</span>.log(DATA) <span class="comment">//[10,20,30]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组元素增加</span></span><br><span class="line">DATA[<span class="number">3</span>] = <span class="number">40</span></span><br></pre></td></tr></table></figure>

<h1 id="数组的使用"><a href="#数组的使用" class="headerlink" title="数组的使用"></a>数组的使用</h1><h2 id="定义方法"><a href="#定义方法" class="headerlink" title="定义方法"></a>定义方法</h2><p><code>let name:type[] = initial</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义数组</span></span><br><span class="line"><span class="keyword">let</span> data:string[] = [<span class="string">'金'</span>,<span class="string">'木'</span>,<span class="string">'水'</span>,<span class="string">'火'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(data) <span class="comment">//['金','木','水','火']</span></span><br><span class="line"><span class="built_in">console</span>.log(data[<span class="number">0</span>]) <span class="comment">//金</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//追加赋值</span></span><br><span class="line">data[<span class="number">4</span>] = <span class="string">'土'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//越界赋值</span></span><br><span class="line">data[<span class="number">10</span>] = <span class="string">'风'</span></span><br></pre></td></tr></table></figure>

<h2 id="多维数组的定义"><a href="#多维数组的定义" class="headerlink" title="多维数组的定义"></a>多维数组的定义</h2><p><code>let name:type[][] = [[],[],[],...]</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义三行五列的数组</span></span><br><span class="line"><span class="keyword">let</span> data:number[][] = [</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>],</span><br><span class="line">    [<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>,<span class="number">400</span>,<span class="number">500</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印第一行数组</span></span><br><span class="line"><span class="built_in">console</span>.log(data[<span class="number">0</span>]) <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//打印第一行第一个元素</span></span><br><span class="line"><span class="built_in">console</span>.log(data[<span class="number">0</span>][<span class="number">0</span>]) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h1 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h1><h2 id="定义方法-1"><a href="#定义方法-1" class="headerlink" title="定义方法"></a>定义方法</h2><p><code>enum name = {name1, name2, name3, ...}</code><br>注意定义的是常量,后期不会变化.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用枚举</span></span><br><span class="line">enum Sex &#123;</span><br><span class="line">    MALE,</span><br><span class="line">    FEMALE,</span><br><span class="line">    UNKNOWN</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> member_sex: Sex = Sex.FEMALE <span class="comment">//默认为FEMALE</span></span><br><span class="line"><span class="built_in">console</span>.log(member_sex) <span class="comment">//输出1</span></span><br><span class="line"><span class="built_in">console</span>.log(Sex[member_sex]) <span class="comment">//输出FEMALE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断中枚举需要在传入对象前加字符+</span></span><br><span class="line"><span class="keyword">switch</span> (+member_sex)&#123;</span><br><span class="line">    <span class="keyword">case</span> Sex.MALE:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"男"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> Sex.FEMALE:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"女"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> Sex.UNKNOWN:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"未知"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者将判断套入函数中</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkSex</span>(<span class="params">sex: Sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result:string = <span class="string">''</span></span><br><span class="line">    <span class="keyword">switch</span> (sex)&#123;</span><br><span class="line">    <span class="keyword">case</span> Sex.MALE:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"男"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> Sex.FEMALE:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"女"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> Sex.UNKNOWN:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"未知"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h1><p>指包含多种类型的变量类型,在实际项目中不常用.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//联合类型的定义</span></span><br><span class="line"><span class="keyword">let</span> data: type1 | type2 | type3 | ...</span><br><span class="line"></span><br><span class="line"><span class="comment">//联合类型的使用</span></span><br><span class="line"><span class="keyword">let</span> mydata: string | boolean</span><br><span class="line"></span><br><span class="line">mydata = <span class="string">"hello TS"</span></span><br><span class="line"><span class="built_in">console</span>.log(mydata) <span class="comment">//hello TS</span></span><br><span class="line"></span><br><span class="line">mydata = <span class="literal">true</span></span><br><span class="line"><span class="built_in">console</span>.log(mydata) <span class="comment">//true,没有报错</span></span><br></pre></td></tr></table></figure>

<h1 id="null空检查"><a href="#null空检查" class="headerlink" title="null空检查"></a>null空检查</h1><p>空检查用于代码编译时对程序中的变量做null空值检查,避免业务级别的错误.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data1: string = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> data2: string = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> data3: string = <span class="string">""</span></span><br><span class="line">data3 = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在tsconfig.json中开启</span></span><br><span class="line"><span class="string">"strickNullChecks"</span>: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//输入tsc进行检查</span></span><br></pre></td></tr></table></figure>

<h1 id="第三方库的使用"><a href="#第三方库的使用" class="headerlink" title="第三方库的使用"></a>第三方库的使用</h1><p>node-request库</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request = <span class="built_in">require</span>(<span class="string">'request'</span>)</span><br><span class="line"></span><br><span class="line">request(<span class="string">'http://api.komavideo.com/news/list'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">error, response, body</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="built_in">console</span>.error(error)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(body)</span><br><span class="line">        <span class="keyword">var</span> body = <span class="built_in">JSON</span>.parse(body)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; body.length; i++)&#123;</span><br><span class="line">            <span class="keyword">var</span> item = body[i]</span><br><span class="line">            <span class="built_in">console</span>.log(item.title)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//直接使用是会报错的</span></span><br></pre></td></tr></table></figure>

<p>需要添加tsd文件</p>
<h2 id="如何找tsd文件"><a href="#如何找tsd文件" class="headerlink" title="如何找tsd文件"></a>如何找tsd文件</h2><p>网站: <code>http://microsoft.github.io/TypeSearch</code><br>直接搜索</p>
<h2 id="导入tsd文件"><a href="#导入tsd文件" class="headerlink" title="导入tsd文件"></a>导入tsd文件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @types/request</span><br></pre></td></tr></table></figure>

<h1 id="函数的使用"><a href="#函数的使用" class="headerlink" title="函数的使用"></a>函数的使用</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//格式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fname</span>(<span class="params">param1:type, param2:type,...</span>) : <span class="title">return_type</span> </span>&#123;</span><br><span class="line">    <span class="comment">//函数内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x:number, y:number</span>) : <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用变量</span></span><br><span class="line"><span class="keyword">let</span> func_add = add</span><br><span class="line"><span class="built_in">console</span>.log(func_add(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p>范例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add(x:number, <span class="attr">y</span>:number) : <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>, <span class="number">5</span>))</span><br></pre></td></tr></table></figure>

<h2 id="可省略参数"><a href="#可省略参数" class="headerlink" title="可省略参数"></a>可省略参数</h2><p>定义符号: ?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sayHello(name?: string): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(name == <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello ayin"</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello "</span> + name </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sayHello(<span class="string">"Tom"</span>)) <span class="comment">//Hello Tom</span></span><br><span class="line"><span class="built_in">console</span>.log(sayHello()) <span class="comment">//Hello ayin</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认值形式</span></span><br><span class="line">sayHello(name: string = <span class="string">"ayin"</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello "</span> + name</span><br></pre></td></tr></table></figure>

<h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>定义符号: <code>...</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add(...vals: number[]): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> val <span class="keyword">of</span> vals)&#123;</span><br><span class="line">        result += val</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment">//6</span></span><br></pre></td></tr></table></figure>

<h1 id="类的定义"><a href="#类的定义" class="headerlink" title="类的定义"></a>类的定义</h1><p>类似于ES6</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    name: sting</span><br><span class="line">    sex: number <span class="comment">//0:女,1:男</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(name: string, sex: number)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name </span><br><span class="line">        <span class="keyword">this</span>.sex = sex</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sayHello()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>,你好<span class="subst">$&#123;<span class="keyword">this</span>.sex&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> qq = <span class="keyword">new</span> Person(<span class="string">'花藤'</span>,<span class="number">1</span>)</span><br><span class="line">qq.sayHello()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(qq.name)</span><br><span class="line"><span class="built_in">console</span>.log(qq.sex)</span><br></pre></td></tr></table></figure>

<h2 id="类的访问限制"><a href="#类的访问限制" class="headerlink" title="类的访问限制"></a>类的访问限制</h2><p>类的访问修饰符</p>
<ul>
<li>public: 共有访问</li>
<li>protected: 本类和子类访问</li>
<li>private: 本类访问</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Datebase</span></span>&#123;</span><br><span class="line">    dbname: string</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(bdname: string)&#123;</span><br><span class="line">        <span class="keyword">this</span>.dbname = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//外部调用</span></span><br><span class="line">public showDB()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`数据库:<span class="subst">$&#123;<span class="keyword">this</span>.dbname&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//本类和子类调用</span></span><br><span class="line">protected connect()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>,<span class="string">"连接中..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//本类调用</span></span><br><span class="line">private disconnect()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>,<span class="string">"关闭"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> oracle = <span class="keyword">new</span> Database(<span class="string">"甲骨文"</span>)</span><br><span class="line">oracle.showDB()</span><br><span class="line"><span class="comment">//oracle.connect()</span></span><br><span class="line"><span class="comment">//oracle.disconnect()</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PostgreSql</span> <span class="keyword">extends</span> <span class="title">Database</span></span>&#123;</span><br><span class="line">    public doIt()&#123;</span><br><span class="line">        <span class="keyword">super</span>.connect()</span><br><span class="line">        <span class="comment">//super.disconnect()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> postgres = <span class="keyword">new</span> PostregSql(<span class="string">"小象"</span>)</span><br><span class="line">postgres.showDB()</span><br><span class="line">postgres.doIt()</span><br></pre></td></tr></table></figure>

<h2 id="getter和setter"><a href="#getter和setter" class="headerlink" title="getter和setter"></a>getter和setter</h2><p>书接上回,由于<code>private</code>属于私有,无法直接访问.可以使用get进行访问.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Datebase</span></span>&#123;</span><br><span class="line">    private dbname: string</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(bdname: string)&#123;</span><br><span class="line">        <span class="keyword">this</span>.dbname = name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> name(): string &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.dbname</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> name(val: string)&#123;</span><br><span class="line">        <span class="keyword">this</span>.dbname = val</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过name属性访问到</span></span><br><span class="line"><span class="keyword">let</span> db = <span class="keyword">new</span> Database(<span class="string">'oracle is good'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(db.name) </span><br><span class="line"></span><br><span class="line"><span class="comment">//修改name属性</span></span><br><span class="line">db.name = <span class="string">"mysql is better'</span></span><br><span class="line"><span class="string">console.log(db.name)</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/03/Chart-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/10/03/Chart-js/" class="post-title-link" itemprop="url">Chart.js</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-03 11:30:37" itemprop="dateCreated datePublished" datetime="2019-10-03T11:30:37+08:00">2019-10-03</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-06 14:25:38" itemprop="dateModified" datetime="2019-10-06T14:25:38+08:00">2019-10-06</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML5/" itemprop="url" rel="index"><span itemprop="name">HTML5</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML5/canvas/" itemprop="url" rel="index"><span itemprop="name">canvas</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>而另一个版本 Chart.bundle.js 和 Chart.bundle.min.js 早就包含了 Moment.js 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install chart.js --save</span><br></pre></td></tr></table></figure>

<h2 id="CDN-引入"><a href="#CDN-引入" class="headerlink" title="CDN 引入"></a>CDN 引入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.bundle.min.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="模块化引入"><a href="#模块化引入" class="headerlink" title="模块化引入"></a>模块化引入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Chart <span class="keyword">from</span> <span class="string">'chart.js'</span>;</span><br><span class="line"><span class="keyword">var</span> myChart = <span class="keyword">new</span> Chart(ctx, &#123;...&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="简单上手"><a href="#简单上手" class="headerlink" title="简单上手"></a>简单上手</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;canvas id=<span class="string">"myChart"</span> width=<span class="string">"400"</span> height=<span class="string">"400"</span>&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 获取我们要选择的canvas元素的上下文</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">var ctx = document.getElementById("myChart").getContext("2d");</span></span><br><span class="line"><span class="regexp">var myNewChart = new Chart(ctx, &#123;...&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 使用jQuery获取上下文-使用jQuery的.get（）方法。</span></span><br><span class="line"><span class="regexp">var ctx = $("#myChart").get(0).getContext("2d");</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 这将获取jQuery集合中第一个返回的节点。</span></span><br><span class="line"><span class="regexp">var myNewChart = new Chart(ctx);</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>

<p>如果您希望所有创建的图表都具有响应性，并在浏览器窗口打开时调整大小，则可以更改以下设置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Chart.defaults.global.responsive = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<h1 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h1><p>折线图是在一条线上绘制数据点的方法.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myLineChart = <span class="keyword">new</span> Chart(ctx, &#123;</span><br><span class="line">  type: <span class="string">"line"</span>,</span><br><span class="line">  data: data,</span><br><span class="line">  options: options</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>数据结构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  <span class="comment">//横坐标显示的值</span></span><br><span class="line">  labels: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>, <span class="number">2019</span>],</span><br><span class="line">  datasets: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//第一条线表示优酷</span></span><br><span class="line">      label: <span class="string">"优酷"</span>,</span><br><span class="line">      <span class="comment">//设定data数值,表示每年用户总量</span></span><br><span class="line">      data: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//第二条线表示YouTube</span></span><br><span class="line">      label: <span class="string">"YouTube"</span>,</span><br><span class="line">      data: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="设置坐标轴"><a href="#设置坐标轴" class="headerlink" title="设置坐标轴"></a>设置坐标轴</h2><h3 id="Y-轴"><a href="#Y-轴" class="headerlink" title="Y 轴"></a>Y 轴</h3><p>options.yAxes</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="comment">//设置缩放</span></span><br><span class="line">  scales: &#123;</span><br><span class="line">    <span class="comment">//设置Y轴</span></span><br><span class="line">    yAxes: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//刻度</span></span><br><span class="line">        ticks: &#123;</span><br><span class="line">          <span class="comment">//固定最大最小</span></span><br><span class="line">          min: <span class="number">0</span>,</span><br><span class="line">          max: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//建议最大最小</span></span><br><span class="line">          suggestedMin: <span class="number">0</span>,</span><br><span class="line">          suggestedMax: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//跨度</span></span><br><span class="line">          stepSize: <span class="number">400</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//用回调函数设置单位</span></span><br><span class="line">          callback: <span class="function"><span class="keyword">function</span>(<span class="params">value, index, values</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> value + <span class="string">"人"</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="标题和图例"><a href="#标题和图例" class="headerlink" title="标题和图例"></a>标题和图例</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">    <span class="comment">//设置标题</span></span><br><span class="line">    title: &#123;</span><br><span class="line">        display: <span class="literal">true</span>,</span><br><span class="line">        text: <span class="string">'阿银'</span>,</span><br><span class="line">        fontColor: <span class="string">'black'</span>,</span><br><span class="line">        fontSize: <span class="string">'24'</span>,</span><br><span class="line">        position: <span class="string">'top'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        <span class="comment">//设置图例</span></span><br><span class="line">        position: <span class="string">'left'</span>,</span><br><span class="line">        display: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    animation: &#123;</span><br><span class="line">        <span class="comment">//动态效果,为0时禁用动画</span></span><br><span class="line">        duration: <span class="number">1000</span>,</span><br><span class="line">        easing: <span class="string">'easeOutQuart'</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="线型变换"><a href="#线型变换" class="headerlink" title="线型变换"></a>线型变换</h1><p><code>data.datasets</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">    labels: [<span class="number">2014</span>,<span class="number">2015</span>,<span class="number">2016</span>,<span class="number">2017</span>,<span class="number">2018</span>,<span class="number">2019</span>],</span><br><span class="line">    datasets: [</span><br><span class="line">        &#123;</span><br><span class="line">            label:  <span class="string">'优酷'</span>,</span><br><span class="line">            data: [<span class="number">100</span>,<span class="number">200</span>,<span class="number">400</span>,<span class="number">800</span>,<span class="number">1600</span>],</span><br><span class="line">            <span class="comment">//线段颜色</span></span><br><span class="line">            borderColor: <span class="string">'red'</span>,</span><br><span class="line">            <span class="comment">//线宽</span></span><br><span class="line">            borderWidth: <span class="number">3</span>,</span><br><span class="line">            <span class="comment">//背景色是否填充</span></span><br><span class="line">            fill: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//背景色</span></span><br><span class="line">            backgroundColor: <span class="string">'rgba(128,0,0,0.5),</span></span><br><span class="line"><span class="string">            //线段曲率,为0显示折线</span></span><br><span class="line"><span class="string">            lineTension: 0,</span></span><br><span class="line"><span class="string">            //折点的造型,默认是圆点.可选三角,方块,星星</span></span><br><span class="line"><span class="string">            pointStyle: '</span>rect<span class="string">'</span></span><br><span class="line"><span class="string">        &#125;,&#123;</span></span><br><span class="line"><span class="string">            label: '</span>YouTube<span class="string">',</span></span><br><span class="line"><span class="string">            data: [50,100,200,400,600]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="条形图-柱状图"><a href="#条形图-柱状图" class="headerlink" title="条形图(柱状图)"></a>条形图(柱状图)</h1><p>垂直条形图: <code>type: bar</code><br>水平条形图: <code>type: horizontalBar</code></p>
<p>大部分属性类似于折线图</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  labels: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>],</span><br><span class="line">  datasets: [</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">"优酷"</span>,</span><br><span class="line">      data: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>],</span><br><span class="line">      <span class="comment">//为每个条形单独设置颜色</span></span><br><span class="line">      backgroundColor: [<span class="string">"red"</span>, <span class="string">"orange"</span>, <span class="string">"yellow"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">"YouTube"</span>,</span><br><span class="line">      data: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>还可以设置条形重叠(覆盖)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">options: &#123;</span><br><span class="line">        scales: &#123;</span><br><span class="line">            xAxes: [&#123;</span><br><span class="line">                <span class="comment">//设置覆盖</span></span><br><span class="line">                stacked: <span class="literal">true</span></span><br><span class="line">            &#125;],</span><br><span class="line">            yAxes: [&#123;</span><br><span class="line">                <span class="comment">//设置覆盖</span></span><br><span class="line">                stacked: <span class="literal">true</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="混合图"><a href="#混合图" class="headerlink" title="混合图"></a>混合图</h1><p>线形图和条形图的混合</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixedChart = <span class="keyword">new</span> Chart(ctx, &#123;</span><br><span class="line">  type: <span class="string">"bar"</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    datasets: [</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"优酷"</span>,</span><br><span class="line">        data: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"YouTube"</span>,</span><br><span class="line">        data: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>],</span><br><span class="line">        <span class="comment">//再改成线图</span></span><br><span class="line">        type: <span class="string">"line"</span>,</span><br><span class="line">        <span class="comment">//防止填充遮盖到条形图</span></span><br><span class="line">        fill: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    labels: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  options: options</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="雷达图-六边形图"><a href="#雷达图-六边形图" class="headerlink" title="雷达图(六边形图)"></a>雷达图(六边形图)</h1><p><code>type = &#39;radar&#39;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">type = <span class="string">"radar"</span>;</span><br><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  labels: [<span class="string">"力量"</span>, <span class="string">"速度"</span>, <span class="string">"经验"</span>, <span class="string">"防守"</span>, <span class="string">"技术"</span>, <span class="string">"发球"</span>],</span><br><span class="line">  datasets: [</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">"帝国の破坏龙-马龙"</span>,</span><br><span class="line">      data: [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">      backgroundColor: <span class="string">"rgba(247,247,9,0.2)"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">"帝国の绝凶虎-张继科"</span>,</span><br><span class="line">      data: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">      backgroundColor: <span class="string">"rgba(238,61,17,0.2)"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  scale: &#123;</span><br><span class="line">    ticks: &#123;</span><br><span class="line">      suggestedMin: <span class="number">0</span>,</span><br><span class="line">      suggestedMax: <span class="number">5</span>,</span><br><span class="line">      stepSize: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  title: &#123;</span><br><span class="line">    display: <span class="literal">true</span>,</span><br><span class="line">    text: <span class="string">"桌球帝国战力值"</span>,</span><br><span class="line">    fontSize: <span class="string">"24"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="饼图和甜甜圈"><a href="#饼图和甜甜圈" class="headerlink" title="饼图和甜甜圈"></a>饼图和甜甜圈</h1><p>饼图: <code>type: &#39;pie&#39;</code><br>甜甜圈: <code>type: &#39;doughnut&#39;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">  datasets: [</span><br><span class="line">    &#123;</span><br><span class="line">      data: [<span class="number">30</span>, <span class="number">20</span>, <span class="number">30</span>],</span><br><span class="line">      backgroundColor: [<span class="string">'green'</span>,<span class="string">'red'</span>,<span class="string">'yellow'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  labels: [<span class="string">"马龙"</span>, <span class="string">"张继科"</span>, <span class="string">"王浩"</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="comment">//50-用于甜甜圈，0-用于饼图</span></span><br><span class="line">  cutoutPercentage: <span class="number">80</span>,</span><br><span class="line">  title: &#123;</span><br><span class="line">    display: <span class="literal">true</span>,</span><br><span class="line">    text: <span class="string">"桌球帝国战力值"</span>,</span><br><span class="line">    fontSize: <span class="string">"24"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="极区图"><a href="#极区图" class="headerlink" title="极区图"></a>极区图</h1><p><code>type: &#39;polarArea&#39;</code><br>极区图类似于饼图，但是每个线段具有相同的角度-线段的半径根据值而不同。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/01/Git版本管理工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/10/01/Git版本管理工具/" class="post-title-link" itemprop="url">Git版本管理工具</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-01 13:44:59 / 修改时间：19:41:48" itemprop="dateCreated datePublished" datetime="2019-10-01T13:44:59+08:00">2019-10-01</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><p>去官网下载吧</p>
<h1 id="建立Git库"><a href="#建立Git库" class="headerlink" title="建立Git库"></a>建立Git库</h1><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先新建一个空文件夹</span></span><br><span class="line">mkdir <span class="keyword">new</span><span class="type">Bash</span></span><br><span class="line"><span class="type"></span>//在git bash中</span><br><span class="line">cd <span class="keyword">new</span><span class="type">Bash</span> <span class="comment">//切换到newBash文件夹下</span></span><br><span class="line">git  init <span class="comment">//初始化仓库</span></span><br></pre></td></tr></table></figure>

<h1 id="设置基础信息"><a href="#设置基础信息" class="headerlink" title="设置基础信息"></a>设置基础信息</h1><p>配置相关信息</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在git bash中</span></span><br><span class="line">git init</span><br><span class="line">git <span class="keyword">config</span> -l  <span class="comment">//查看当前配置</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> user<span class="variable">.name</span> <span class="string">"你的用户名"</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> user<span class="variable">.email</span> <span class="string">"邮箱地址"</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> color<span class="variable">.ui</span> true  <span class="comment">//代码颜色高亮显示</span></span><br><span class="line">git <span class="keyword">config</span> -l  <span class="comment">//再查看一下对不对</span></span><br></pre></td></tr></table></figure>

<h1 id="提交commit"><a href="#提交commit" class="headerlink" title="提交commit"></a>提交commit</h1><p>基本步骤:</p>
<ol>
<li>建立文件(本地工作文件夹)</li>
<li>追加文件(索引区stage)</li>
<li>提交文件(本地库local,远程库remote)</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//新建一个文件</span></span><br><span class="line">touch <span class="selector-tag">a</span>.md</span><br><span class="line"></span><br><span class="line"><span class="comment">//在文件中写字符</span></span><br><span class="line">echo <span class="string">"helloworld"</span> &gt; <span class="selector-tag">a</span>.md</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看此时状态</span></span><br><span class="line">git status (未提交文件名颜色为红色)</span><br><span class="line"></span><br><span class="line"><span class="comment">//提交到索引区(也叫暂存区)</span></span><br><span class="line">git add <span class="selector-tag">a</span><span class="selector-class">.md</span>  (或者直接git add . 表示提交修改文件)</span><br><span class="line"></span><br><span class="line"><span class="comment">//再看看状态</span></span><br><span class="line">git status  (提交了颜色变绿了)</span><br><span class="line"></span><br><span class="line"><span class="comment">//将暂存区的文件提交到本地库(需要附带说明)</span></span><br><span class="line">git commit -m <span class="string">"add file"</span>  <span class="comment">//add file 就是说明,会显示在github的文件名后面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//再看看状态</span></span><br><span class="line">git status  (提交到本地库后,暂存区里就空了)</span><br><span class="line"></span><br><span class="line"><span class="comment">//看看提交历史</span></span><br><span class="line">git log </span><br><span class="line"><span class="comment">//(会显示提交者的名字,时间,提交记录)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//提交到远程仓库</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><p>一般远程仓库有一个master主分支,多个其他分支.<br>现在展示如何从远端dev分支下载并修改,再推送.</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//切换到一个文件夹下</span></span><br><span class="line">cd newclone</span><br><span class="line"><span class="comment">//从远端仓库clone</span></span><br><span class="line">git clone git@xxx.com</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看当前分支</span></span><br><span class="line">git branch  (发现远端仓库只有master被clone下来,其他没有)</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看所有分支(包括远端分支)</span></span><br><span class="line">git branch -a  (此时出现远端<span class="built_in">dev</span>分支)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建dev分支,映射远端dev分支</span></span><br><span class="line">git branch <span class="built_in">dev</span> remotes/origin/<span class="built_in">dev</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//上面几步不执行也可以,直接执行切换分支就可以clone数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//切换到dev分支</span></span><br><span class="line">git checkout <span class="built_in">dev</span> (此时<span class="built_in">dev</span>下所有文件都会clone下来)</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改其中的文件</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//推送素质三连</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"修改情况"</span></span><br><span class="line">git push origin <span class="built_in">dev</span></span><br></pre></td></tr></table></figure>

<h1 id="分支branch"><a href="#分支branch" class="headerlink" title="分支branch"></a>分支branch</h1><h2 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h2><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查看当前分支状态</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment">//新建一个分支dev</span></span><br><span class="line">git branch dev</span><br><span class="line"></span><br><span class="line"><span class="comment">//切换到dev分支</span></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改文件</span></span><br><span class="line">nano style.css</span><br><span class="line"><span class="params">...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//提交dev分支中内容到索引区</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment">//提交dev分支到本地库</span></span><br><span class="line">git commit <span class="params">-m</span> <span class="string">"added style.css"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查看记录</span></span><br><span class="line">git <span class="keyword">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//切换到主分支master</span></span><br><span class="line">git checkout master</span><br></pre></td></tr></table></figure>

<h2 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h2><p>书接上回</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查看分支状态</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment">//在主分支master下,合并dev分支</span></span><br><span class="line">git merge <span class="built_in">dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查看记录</span></span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看后没有问题,删除开发分支</span></span><br><span class="line">git branch -d <span class="built_in">dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//最后查看分支状态</span></span><br><span class="line">git branch</span><br></pre></td></tr></table></figure>

<h2 id="分支冲突"><a href="#分支冲突" class="headerlink" title="分支冲突"></a>分支冲突</h2><p>案例分析:<br>在dev分支创建index文件并修改.在主分支创建index文件并修改.合并分支,必有冲突<br>代码重现:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建dev分支并切换到dev</span></span><br><span class="line">git checkout -<span class="selector-tag">b</span> dev</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建文件.修改文件</span></span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//提交操作</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"modified by dev"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//切换到主分支</span></span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line"><span class="comment">//重复上述操作</span></span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"modified by master"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查看分支状态</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment">//合并分支(必有冲突)</span></span><br><span class="line">git merge dev</span><br><span class="line"></span><br><span class="line"><span class="comment">//报错,在冲突文件中出现提示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//由leader决定以哪个分支的信息为准</span></span><br><span class="line"><span class="comment">//编辑文件,去掉冲突提示,选择以哪个分支的修改为准</span></span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//重新提交,并将</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"meraged by leader."</span></span><br></pre></td></tr></table></figure>

<h1 id="查看提交历史"><a href="#查看提交历史" class="headerlink" title="查看提交历史"></a>查看提交历史</h1><p>书接上回</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//提交之后,查看提交历史</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查看最近几次历史,接一个数字</span></span><br><span class="line">git <span class="built_in">log</span> -<span class="number">3</span> (查看最近<span class="number">3</span>次的)</span><br><span class="line"></span><br><span class="line"><span class="comment">//把历史记录缩成一行.简略显示</span></span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br><span class="line"></span><br><span class="line"><span class="comment">//详细显示</span></span><br><span class="line">git <span class="built_in">log</span> -p (非常详细)</span><br></pre></td></tr></table></figure>

<h1 id="提交回退"><a href="#提交回退" class="headerlink" title="提交回退"></a>提交回退</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把刚修改的文件退到未修改状态</span></span><br><span class="line">git checkout -- <span class="selector-tag">a</span><span class="selector-class">.md</span> (取消修改,恢复到初始状态)</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看状态</span></span><br><span class="line">git status (文件已恢复)</span><br></pre></td></tr></table></figure>

<p>提交到索引区,想回退</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把文件从索引区头部退出</span></span><br><span class="line">git reset HEAD <span class="selector-tag">a</span><span class="selector-class">.md</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//把刚修改的文件退到未修改状态</span></span><br><span class="line">git checkout -- <span class="selector-tag">a</span>.md</span><br></pre></td></tr></table></figure>

<h1 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h1><p>回退到远程库最后提交的版本,覆盖本地工作区</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//回退到最后一次</span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD</span></span><br><span class="line"></span><br><span class="line">//回退到倒数第二次</span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD~</span></span><br><span class="line"></span><br><span class="line">//回退到倒数第三次</span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD~2</span></span><br><span class="line"></span><br><span class="line">//回退到指定版本</span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard 5d79467</span></span><br><span class="line">(后面的数字是提交时的<span class="keyword">ID</span>)</span><br><span class="line"></span><br><span class="line">//如果没记住<span class="keyword">ID</span>,通过reflog找到现在位置的<span class="keyword">id</span>,再从过去返回来.</span><br><span class="line">git reflog  (会出现所有最近的记录,可以加<span class="number">-3</span>,显示最近<span class="number">3</span>条记录)</span><br></pre></td></tr></table></figure>

<h1 id="比较修改内容"><a href="#比较修改内容" class="headerlink" title="比较修改内容"></a>比较修改内容</h1><p>修改文件后</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//和修改前进行比较</span></span><br><span class="line">git diff</span><br><span class="line"></span><br><span class="line"><span class="comment">//把修改后的文件加到索引区</span></span><br><span class="line">git <span class="keyword">add</span> .</span><br><span class="line"></span><br><span class="line"><span class="comment">//和索引区的进行比较</span></span><br><span class="line">git diff --cached</span><br></pre></td></tr></table></figure>

<h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将文件添加到索引区</span></span><br><span class="line">git add [file1 file2 ...]</span><br><span class="line"></span><br><span class="line"><span class="comment">//将工作文件夹下所有文件添加到索引区</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">git rm</span><br><span class="line"><span class="comment">//删除索引区文件</span></span><br><span class="line">git rm --cached <span class="selector-tag">a</span>.md</span><br><span class="line"><span class="comment">//更名</span></span><br><span class="line">git mv <span class="selector-tag">a</span><span class="selector-class">.md</span> <span class="selector-tag">b</span>.md</span><br></pre></td></tr></table></figure>

<h1 id="Git忽略管理"><a href="#Git忽略管理" class="headerlink" title="Git忽略管理"></a>Git忽略管理</h1><p>设置Git忽略文件,这些文件不参与Git库提交.</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span>新建<span class="string">.gitignore</span>文件</span><br><span class="line">在该文件中写入要忽略的文件名</span><br></pre></td></tr></table></figure>

<h1 id="更新最后的提交"><a href="#更新最后的提交" class="headerlink" title="更新最后的提交"></a>更新最后的提交</h1><p>最后一条提交代码里有bug,想更改,又不想新增一条提交.把更改追加到最后一条提交里.</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">"最后一次提交"</span></span><br><span class="line"></span><br><span class="line">//发现bug,修改bug后</span><br><span class="line">//此时文件已修改</span><br><span class="line">git <span class="built_in">add</span> .</span><br><span class="line"></span><br><span class="line">//提交到最后一次修改里</span><br><span class="line">git commit <span class="comment">--amend</span></span><br></pre></td></tr></table></figure>

<h1 id="使用Tag标签"><a href="#使用Tag标签" class="headerlink" title="使用Tag标签"></a>使用Tag标签</h1><p>系统版本号管理<br>例如: 1.1.3</p>
<p>格式: NNN.abc.xxx</p>
<ul>
<li>NNN: 大版本号</li>
<li>abc: 每次做出小的更新时发布的版本号</li>
<li>xxx: 每次bug修正时发布的版本号</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查看当前版本号</span></span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置当前版本号</span></span><br><span class="line">git tag v1<span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查询该版本号时文件状态</span></span><br><span class="line">git show v1<span class="number">.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/24/Axios/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/24/Axios/" class="post-title-link" itemprop="url">Axios</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-24 11:33:48" itemprop="dateCreated datePublished" datetime="2019-09-24T11:33:48+08:00">2019-09-24</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-25 20:30:39" itemprop="dateModified" datetime="2019-11-25T20:30:39+08:00">2019-11-25</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h1><p>axios是一个基于Promise用于浏览器和nodejs的HTTP客户端，它本身具有以下特征：</p>
<ul>
<li>从浏览器中创建XMLHttpRequest </li>
<li>从node.js发出http请求 </li>
<li>支持 Promise API 拦截请求和响应 </li>
<li>转换请求和响应数据 </li>
<li>取消请求 </li>
<li>自动转换JSON数据 </li>
<li>客户端支持防止 CSRF/XSRF</li>
</ul>
<p>步骤:</p>
<ol>
<li>安装<br><code>$ npm install axios</code><br>或者CDN引入</li>
<li>引入</li>
<li>一般是把axios挂载到原型上,便于全局使用</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.$http = axios</span><br></pre></td></tr></table></figure>

<h2 id="Axios之get请求"><a href="#Axios之get请求" class="headerlink" title="Axios之get请求"></a>Axios之get请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    getData()&#123;</span><br><span class="line">    <span class="keyword">this</span>.$http.get(<span class="string">'https://cnode.js.org/api/v1/topic'</span>,&#123;</span><br><span class="line">        params: &#123;</span><br><span class="line">            page: <span class="number">1</span>,</span><br><span class="line">            limit: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.items = res.data.data</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上面get请求的其他写法</span></span><br><span class="line">axios.get(<span class="string">'/user'</span>,&#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">        ID: <span class="number">12345</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//如果只有一个选项</span></span><br><span class="line">axios.get(<span class="string">'/user'</span>,&#123;</span><br><span class="line">    ID: <span class="number">12345</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//将数据写到url里</span></span><br><span class="line">axios.get(<span class="string">'/user?page=1&amp;limit=10'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Axios之post请求"><a href="#Axios之post请求" class="headerlink" title="Axios之post请求"></a>Axios之post请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'/user'</span>,&#123;</span><br><span class="line">    firstName: <span class="string">'tom'</span>,</span><br><span class="line">    lastName: <span class="string">'green'</span></span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>POST传递参数有两种格式:</p>
<ul>
<li>form­-data 格式: <code>?page=1&amp;limit=48</code>.<strong>但是不能写在url里</strong></li>
<li>x-­www-­form-­urlencoded格式: <code>{ page: 1,limit: 10 }</code></li>
</ul>
<blockquote>
<p>在axios中，post请求接收的参数必须是form-­data<br>可以使用qs插件—­qs.stringify</p>
</blockquote>
<h2 id="执行多个并发请求"><a href="#执行多个并发请求" class="headerlink" title="执行多个并发请求"></a>执行多个并发请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserAccount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserPermissions</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345/permissions'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(<span class="function"><span class="keyword">function</span> (<span class="params">acct, perms</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 两个请求现在都执行完成</span></span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">postData()&#123;</span><br><span class="line">    <span class="comment">//先要安装qs插件,然后引入</span></span><br><span class="line">    <span class="comment">//使用qs插件将对象格式转化为form-data格式</span></span><br><span class="line">    <span class="keyword">this</span>.$http.post(url,qs.stringify(&#123;</span><br><span class="line">        page: <span class="number">1</span>,</span><br><span class="line">        limit: <span class="number">10</span></span><br><span class="line">    &#125;))</span><br><span class="line">    .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="拦截器interceptors"><a href="#拦截器interceptors" class="headerlink" title="拦截器interceptors"></a>拦截器interceptors</h1><p>在请求或响应被 then 或 catch 处理前拦截它们。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>如果你想在稍后移除拦截器，可以这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myInterceptor = axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">/*...*/</span>&#125;);</span><br><span class="line">axios.interceptors.request.eject(myInterceptor);</span><br></pre></td></tr></table></figure>

<p>可以为自定义 axios 实例添加拦截器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instance = axios.create();</span><br><span class="line">instance.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">/*...*/</span>&#125;);</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/20/JS深入/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/20/JS深入/" class="post-title-link" itemprop="url">JS深入</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-20 19:52:59" itemprop="dateCreated datePublished" datetime="2019-09-20T19:52:59+08:00">2019-09-20</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-17 13:48:59" itemprop="dateModified" datetime="2019-11-17T13:48:59+08:00">2019-11-17</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="JavaScript-自动垃圾收集机制"><a href="#JavaScript-自动垃圾收集机制" class="headerlink" title="JavaScript 自动垃圾收集机制"></a>JavaScript 自动垃圾收集机制</h1><p>垃圾回收又称为 GC(Garbage Collecation)。编写 JavaScript 程序时，开发者不需要手工跟踪内存的使用情况，只要按照标准写 JavaScript 代码，JavaScript 程序运行所需内存的分配以及无用内存的回收完全是自动管理。JavaScript 中自动垃圾回收机制的原理为：</p>
<blockquote>
<p>找出那些不再使用的变量，然后释放其占用的内存。垃圾收集器会按照固定的时间间隔(或预定的收集时间)周期性地执行此操作。</p>
</blockquote>
<h2 id="局部变量的正常生命周期"><a href="#局部变量的正常生命周期" class="headerlink" title="局部变量的正常生命周期"></a>局部变量的正常生命周期</h2><p>局部变量只在函数执行的过程中存在。<br>在函数执行过程中，会为局部变量在栈内存(或 堆内存)上分配相应的空间来存储它们的值。在函数中使用这些变量，直至函数执行结束，此时可以释放局部变量的内存供将来需要时使用。<br>以上情况下，较容易判断变量是否有存在的必要，更复杂的情况需要更精细的变量追踪策略。<br>JavaScript 中的垃圾收集器必须跟踪每个变量是否有用，需要为不再有用的变量打上标记，用于将来回收其占用的内存。标识无用变量的策略通常有两个：<strong>标记清除</strong> 和 <strong>引用计数</strong> 。</p>
<h2 id="JavaScript-中的栈内存与堆内存"><a href="#JavaScript-中的栈内存与堆内存" class="headerlink" title="JavaScript 中的栈内存与堆内存"></a>JavaScript 中的栈内存与堆内存</h2><p>上述过程中，JavaScript 中变量分为 基本类型值 和 引用类型值：</p>
<ul>
<li>基本类型值 在内存中占固定大小的空间，因此被保存在 <strong>栈内存</strong> 中；</li>
<li>引用类型值 是对象，保存在 <strong>堆内存</strong> 中。包含引用类型值的变量实际包含并非对象本身，而是指向该对象的指针。一个变量从另一个变量复制引用类型的值时，复制的也是指向该对象的指针。</li>
</ul>
<h2 id="标记清除"><a href="#标记清除" class="headerlink" title="标记清除"></a>标记清除</h2><p>标记清除(mark-and-sweep) 是 JavaScript 中最常用的垃圾回收方式。其执行机制如下：</p>
<ul>
<li>当变量进入环境时，就将其标记为“进入环境”</li>
<li>当变量离开环境时将其标记为“离开环境”</li>
</ul>
<p>逻辑上，永远不能释放进入环境的变量所占用的内存，因为执行流进入相应的环境时，可能会用到它们。<br>标记变量的方式有很多种，可以使用标记位的形式记录变量进入环境，也可单独为“进入环境”和“离开环境”添加变量列表来记录变化。</p>
<p>标记清除采用的收集策略为：</p>
<ol>
<li>JavaScript中的垃圾收集器运行时会给<strong>存储在内存中的所有变量</strong>都加上标记；</li>
<li>然后去掉环境中的变量以及被环境中的变量引用的变量的标记；</li>
<li>此后，再被加上标记的变量被视为准备删除的变量；</li>
<li>最后，垃圾收集器完成内存清除，销毁那些带标记的值并回收其占用的内存空间。</li>
</ol>
<p>2008年之前，IE、Firefox、Opera、Chrome 和 Safari 的 JavaScript实现使用的均为 标记清除式的垃圾回收策略，区别可能在垃圾收集的时间间隔。</p>
<h2 id="引用计数"><a href="#引用计数" class="headerlink" title="引用计数"></a>引用计数</h2><p>引用计数(reference counting) 是另一种垃圾收集策略。引用计数的本质是 <strong>跟踪记录每个值被引用的次数</strong>。其执行机制如下：</p>
<ol>
<li>当声明一个变量并将一个引用类型值赋值给该变量时，这个值的引用次数为1；</li>
<li>若同一个值(变量)又被赋值给另一个变量，则该值的引用次数加1；</li>
<li>但是如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数减1；</li>
<li>当这个值的引用次数为0时，则无法再访问这个值，就可回收其占用的内存空间。</li>
</ol>
<p>垃圾收集器下次运行时，会释放那些引用次数为零的值所占用的内存。<br>引用计数存在一个致命的问题： <strong>循环引用</strong>。循环引用是指，对象 A 中包含一个指向对象 B 的指针，而对象 B 中也包含一个指向对象 A 的引用。下面的代码就是标准的循环引用的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cycleRefernce</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> objectA = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    <span class="keyword">var</span> objectB = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    </span><br><span class="line">    objectA.someOtherObject = objectB;</span><br><span class="line">    objectB.anotherObject = objectA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述例子中 objectA 和 objectB 通过各自属性相互引用。按照引用计数的策略，两个对象的引用次数均为 2。若采用标记清除策略，函数执行完毕，对象离开作用域就不存在相互引用。但采用引用计数后，函数执行完，两个对象的引用次数永不为0，会一直存尊内存中，若多次调用，导致大量内存得不到回收。</p>
<p>IE8浏览器 之前中有一部分对象并不是原生的 JavaScript 对象，可能是使用 C++ 以 COM 对象的形式实现的(BOM, DOM)。而 COM 对象的垃圾收集机制采用的是 引用计数策略。即使 IE 的 JavaScript 引擎是使用标记清除策略实现的，但 JavaScript 访问 COM 对象仍然是基于 引用计数策略的。在这种情况下，只要在 IE 中涉及 COM 对象，就可能存在循环引用的问题。</p>
<p>为避免出现循环引用，最好在不使用这些对象时，手动断开 原生 JavaScript 对象 与 DOM 元素之间的连接。IE中的循环引用与手动断开的操作如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(<span class="string">"some_element"</span>);</span><br><span class="line"><span class="keyword">var</span> myObject = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">myObject.element = element;</span><br><span class="line">element.someObject = myObject;</span><br><span class="line"><span class="comment">// 以上 存在循环引用</span></span><br><span class="line"><span class="comment">// ...... </span></span><br><span class="line"><span class="comment">// 以下 手工断开连接</span></span><br><span class="line">myObject.element = <span class="literal">null</span>;</span><br><span class="line">element.someObject =<span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<p>将变量设置成 null 即可切断变量与它之前引用的值之间的连接。下次垃圾收集器运行时，会删除这些值并回收它们占用的内存。<br>为解决上述问题，IE9及以上版本把 BOM 和 DOM 对象都转换成了真正的 JavaScript 对象，避免了两种垃圾回收算法并存引起的问题。</p>
<h2 id="垃圾回收的性能问题"><a href="#垃圾回收的性能问题" class="headerlink" title="垃圾回收的性能问题"></a>垃圾回收的性能问题</h2><p>垃圾收集器是周期运行的，确定<strong>垃圾收集的时间间隔</strong>是个重要的问题。</p>
<p>IE7之前的垃圾收集器是根据内存分配量运行的，即 256 个变量、4096 个对象(数组)字面量或 64 KB 的字符串。达到这些临界值的任何一个，垃圾收集器就会运行。所以就导致如果一个脚本含有很多变量，在整个生命周期中一直保有前面临界值大小的变量，就会频繁触发垃圾回收，会存在严重的性能问题。</p>
<p>IE7 重写了垃圾收集例程。新的工作方式为：触发垃圾收集的变量分配、字面量和数组元素的临界值被调整为 <strong>动态修正</strong>。初始值与之前版本相同，但如果垃圾收集例程回收的内存低于 15%，则临界值加倍。若回收内存分配量超过 85%，则临界值重置回默认值。</p>
<p>JavaScript V8 引擎的垃圾回收机制<br>在JavaScript脚本中，绝大多数对象的生存期很短，只有部分对象的生存期较长。所以，V8 中的垃圾回收主要使用的是 分代回收 (Generational collection)机制。</p>
<h2 id="分代回收机制"><a href="#分代回收机制" class="headerlink" title="分代回收机制"></a>分代回收机制</h2><p>V8 引擎将保存对象的 <strong>堆</strong> (heap) 进行了分代:</p>
<ol>
<li>对象最初会被分在 <strong>新生区</strong>(New Space) (1~8M)，新生区的内存分配只需要保有一个指向内存区的指针，不断根据内存大小进行递增，当指针达到新生区的末尾，会有一次垃圾回收清理(小周期)，清理掉新生区中不再活跃的死对象。</li>
<li>对于超过 2 个小周期的对象，则需要将其移动至 <strong>老生区</strong>(Old Space)。老生区在 标记-清除 或 标记-紧缩 的过程(大周期) 中进行回收。<br>大周期进行的并不频繁。一次大周期通常是在移动足够多的对象至老生区后才会发生。</li>
</ol>
<h3 id="Scavenge-算法"><a href="#Scavenge-算法" class="headerlink" title="Scavenge 算法"></a>Scavenge 算法</h3><p>由于垃圾清理发生的比较频繁，清理的过程必须很快。V8 中的清理过程使用的是 Scavenge 算法，按照 经典的 Cheney 算法 实现的。Scavenge 算法的主要过程是：</p>
<ul>
<li>新生区被分为两个等大小的子区(semi-spaces)：to-space 和 from-space；</li>
<li>大多数的内存分配都是在 to-space 发生 (某些特定对象是在老生区)；</li>
<li>当 to-space 耗尽时，交换 to-space 和 from-space, 此时所有的对象都在 from-space；</li>
<li>然后将 from-space 中活跃的对象复制到 to-space 或者老生区中;</li>
<li>这些对象被直接压到 to-space，提升了 Cache 的内存局部性，可使内存分配简洁快速。</li>
</ul>
<p>算法的伪代码描述如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">def scavenge():</span><br><span class="line">  swap(fromSpace, toSpace)</span><br><span class="line">  allocationPtr = toSpace.bottom</span><br><span class="line">  scanPtr = toSpace.bottom</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i = <span class="number">0.</span>.len(roots):</span><br><span class="line">    root = roots[i]</span><br><span class="line">    <span class="keyword">if</span> inFromSpace(root):</span><br><span class="line">      rootCopy = copyObject(&amp;allocationPtr, root)</span><br><span class="line">      setForwardingAddress(root, rootCopy)</span><br><span class="line">      roots[i] = rootCopy</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> scanPtr &lt; allocationPtr:</span><br><span class="line">    obj = object at scanPtr</span><br><span class="line">    scanPtr += size(obj)</span><br><span class="line">    n = sizeInWords(obj)</span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">0.</span>.n:</span><br><span class="line">      <span class="keyword">if</span> isPointer(obj[i]) and not inOldSpace(obj[i]):</span><br><span class="line">        fromNeighbor = obj[i]</span><br><span class="line">        <span class="keyword">if</span> hasForwardingAddress(fromNeighbor):</span><br><span class="line">          toNeighbor = getForwardingAddress(fromNeighbor)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">          toNeighbor = copyObject(&amp;allocationPtr, fromNeighbor)</span><br><span class="line">          setForwardingAddress(fromNeighbor, toNeighbor)</span><br><span class="line">        obj[i] = toNeighbor</span><br><span class="line"></span><br><span class="line">def copyObject(*allocationPtr, object):</span><br><span class="line">  copy = *allocationPtr</span><br><span class="line">  *allocationPtr += size(object)</span><br><span class="line">  memcpy(copy, object, size(object))</span><br><span class="line">  <span class="keyword">return</span> copy</span><br></pre></td></tr></table></figure>

<h3 id="不能被忽视的写屏障-Write-barriers"><a href="#不能被忽视的写屏障-Write-barriers" class="headerlink" title="不能被忽视的写屏障 Write barriers"></a>不能被忽视的写屏障 Write barriers</h3><p>如果新生区有某个对象，只有一个指向它的指针，恰好该指针在老生区的对象中，在垃圾回收之前我们如何得知新生区的该对象是活跃的呢？<br>为解决此问题，V8 在写缓冲区有一个列表，其中记录了所有老生区对象指向新生区的情况。新生区对象诞生时不会有指向它的指针，当老生区的对象出现指向新生区对象的指针时，便记录跨区指向，记录行为总是发生在写操作中。</p>
<h3 id="标记-清除算法-与-标记-紧缩算法"><a href="#标记-清除算法-与-标记-紧缩算法" class="headerlink" title="标记-清除算法 与 标记-紧缩算法"></a>标记-清除算法 与 标记-紧缩算法</h3><p>因为新生区的内存一般都不大，所以使用 Scavenge 算法进行垃圾回收效果比较好。老生区一般占用内存较大，因此采用的是 标记-清除(Mark-Sweep)算法 与 标记-紧缩(Mark-Compact)算法。</p>
<p>两种算法都包括两个阶段：标记阶段，清除或紧缩阶段。</p>
<h2 id="标记阶段"><a href="#标记阶段" class="headerlink" title="标记阶段"></a>标记阶段</h2><p>在标记阶段，堆上所有的活跃对象都会被发现并且标记。</p>
<p>每一页都包含用来标记的位图<br>位图都要占据空间 (3.1% on 32-bit, 1.6% on 64-bit systems)<br>使用两位二进制标记对象的状态<br>状态为白(white), 它尚未被垃圾回收器发现<br>状态为灰(gray), 它已被垃圾回收器发现，但它的邻接对象仍未全部处理完毕<br>状态为黑(black), 它不仅被垃圾回收器发现，而且其所有邻接对象也都处理完毕</p>
<p>标记算法的核心是 <strong>深度优先搜索</strong>，具体过程为：</p>
<ol>
<li>在标记的初期，位图是空的，所有对象也都是白的。</li>
<li>从根可达的对象会被染色为灰色，并被放入标记用的一个单独分配的双端队列。</li>
<li>标记阶段的每次循环，GC会将一个对象从双端队列中取出，染色为黑，然后将它的邻接对象染色为灰，并把邻接对象放入双端队列。</li>
<li>这一过程在双端队列为空且所有对象都变黑时结束。</li>
<li>特别大的对象，如长数组，可能会在处理时分片，以防溢出双端队列。如果双端队列溢出了，则对象仍然会被染为灰色，但不会再被放入队列（这样他们的邻接对象就没有机会再染色了）。</li>
<li>因此当双端队列为空时，GC仍然需要扫描一次，确保所有的灰对象都成为了黑对象。对于未被染黑的灰对象，GC会将其再次放入队列，再度处理。</li>
</ol>
<p>标记算法结束后，所有的活跃对象都被染成黑色，所有的死对象仍是白的。下一步就可以清除或者紧缩了。</p>
<h2 id="清除-或-紧缩-算法"><a href="#清除-或-紧缩-算法" class="headerlink" title="清除 或 紧缩 算法"></a>清除 或 紧缩 算法</h2><p>标记算法执行后，可以选择清除 或是紧缩，这两个算法都可以收回内存，而且两者都作用于页级(V8 中的内存页是 1MB 的连续内存块)</p>
<p>清除算法扫描连续存放的死对象，将其变为空闲空间，并将其添加到空闲内存链表中。清除算法只需要遍历页的位图，搜索连续的白对象。[每一页都包含数个空闲内存链表，其分别代表小内存区（&lt;256字）、中内存区（&lt;2048字）、大内存区（&lt;16384字）和超大内存区（其它更大的内存）]</p>
<p>紧缩算法会尝试将对象从碎片页(包含大量小空闲内存的页)中迁移整合在一起，来释放内存。这些对象会被迁移到另外的页上，因此也可能会新分配一些页。而迁出后的碎片页就返还给操作系统。</p>
<p>对目标碎片页中的每个活跃对象，在空闲内存链表中分配一块其它页的区域，将该对象复制至新页，并在碎片页中的该对象上写上转发地址。<br>迁出过程中，对象中的旧地址会被记录下来，这样在迁出结束后V8会遍历它所记录的地址，将其更新为新的地址。由于标记过程中也记录了不同页之间的指针，此时也会更新这些指针的指向。</p>
<h2 id="增量标记-与-惰性清除"><a href="#增量标记-与-惰性清除" class="headerlink" title="增量标记 与 惰性清除"></a>增量标记 与 惰性清除</h2><p>对于一个堆很大，活跃对象有很多的脚本时，标记-清除 与 标记-紧缩 的效率可能会很慢，为减少垃圾回收引起的停顿，引入了 增量标记(Incremental marking) 和 惰性清理(lazy sweeping)。</p>
<p>增量标记允许堆的标记(前面的标记阶段)发生在几次5-10毫秒的小停顿中。增量标记在堆的大小达到一定的阈值时启用，启用之后每当一定量的内存分配后，脚本的执行就会停顿并进行一次增量标记。就像普通的标记一样，增量标记也是一个深度优先搜索，并同样采用白灰黑机制来分类对象。<br>增量标记与普通标记的区别是，添加了从黑对象到白对象的指针，为此需要再次启用写屏障中，在记录 老-&gt;新 的同时，记录 黑-&gt;白。在进行清除时，一旦在写屏障中发现这样的指针，黑对象会被重新染色为灰对象，重新放回到双端队列中。</p>
<p>惰性清理是指在标记完成后，并不急着释放空间，无需一次清理所有的页，垃圾回收器会视情况逐一清理，直到所有页都清理完成。</p>
<p>余下的涉及垃圾回收原理的部分留着后面继续整理。(平行标记 与 并发标记)</p>
<h1 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h1><p>众所周知 JS 是门非阻塞单线程语言，因为在最初 JS 就是为了和浏览器交互而诞生的。如果 JS 是门多线程的语言话，我们在多个线程中处理 DOM 就可能会发生问题（一个线程中新加节点，另一个线程中删除节点），当然可以引入读写锁解决这个问题。</p>
<p>JS 在执行的过程中会产生执行环境，这些执行环境会被顺序的加入到执行栈中。如果遇到异步的代码，会被挂起并加入到 Task（有多种 task） 队列中。一旦执行栈为空，Event Loop 就会从 Task 队列中拿出需要执行的代码并放入执行栈中执行，所以本质上来说 JS 中的异步还是同步行为。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>)</span><br></pre></td></tr></table></figure>

<p>以上代码虽然 setTimeout 延时为 0，其实还是异步。这是因为 HTML5 标准规定这个函数第二个参数不得小于 4 毫秒，不足会自动增加。所以 setTimeout 还是会在 script end 之后打印。</p>
<h2 id="微任务和宏任务"><a href="#微任务和宏任务" class="headerlink" title="微任务和宏任务"></a>微任务和宏任务</h2><p>不同的任务源会被分配到不同的 Task 队列中，任务源可以分为 <strong>微任务（microtask）</strong> 和 <strong>宏任务（macrotask）</strong>。在 ES6 规范中，microtask 称为 jobs，macrotask 称为 task。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise'</span>)</span><br><span class="line">  resolve()</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise1'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise2'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>)</span><br><span class="line"><span class="comment">// script start =&gt; Promise =&gt; script end =&gt; promise1 =&gt; promise2 =&gt; setTimeout</span></span><br></pre></td></tr></table></figure>

<p>以上代码虽然 setTimeout 写在 Promise 之前，但是因为 <code>Promise</code> 属于微任务而 setTimeout 属于宏任务，所以会有以上的打印。</p>
<p><strong>微任务</strong>包括 <code>process.nextTick</code> ，<code>promise</code> ，<code>Object.observe</code> ，<code>MutationObserver</code></p>
<p><strong>宏任务</strong>包括 <code>script</code> ， <code>setTimeout</code> ，<code>setInterval</code> ，<code>setImmediate</code> ，<code>I/O</code> ，<code>UI rendering</code></p>
<p>很多人有个误区，认为微任务快于宏任务，其实是错误的。因为宏任务中包括了<code>script</code>，浏览器会先执行一个宏任务，接下来有异步代码的话就先执行微任务。</p>
<h2 id="所以正确的一次-Event-loop-顺序是这样的"><a href="#所以正确的一次-Event-loop-顺序是这样的" class="headerlink" title="所以正确的一次 Event loop 顺序是这样的"></a>所以正确的一次 Event loop 顺序是这样的</h2><ol>
<li>执行同步代码，这属于宏任务</li>
<li>执行栈为空，查询是否有微任务需要执行</li>
<li>执行所有微任务</li>
<li>必要的话渲染 UI</li>
<li>然后开始下一轮 Event loop，执行宏任务中的异步代码</li>
</ol>
<p>通过上述的 Event loop 顺序可知，如果宏任务中的异步代码有大量的计算并且需要操作 DOM 的话，为了更快的 界面响应，我们可以把操作 DOM 放入微任务中。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/20/前端安全防范/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/20/前端安全防范/" class="post-title-link" itemprop="url">前端安全防范</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-20 15:56:10" itemprop="dateCreated datePublished" datetime="2019-09-20T15:56:10+08:00">2019-09-20</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-29 11:06:56" itemprop="dateModified" datetime="2019-09-29T11:06:56+08:00">2019-09-29</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="XSS攻击"><a href="#XSS攻击" class="headerlink" title="XSS攻击"></a>XSS攻击</h1><blockquote>
<p>什么是 XSS 攻击？如何防范 XSS 攻击？什么是 CSP？</p>
</blockquote>
<p>XSS 简单点来说，就是攻击者想尽一切办法将可以执行的代码注入到网页中。<br>XSS 可以分为多种类型，但是总体上我认为分为两类：持久型和非持久型。<br>持久型也就是攻击的代码被服务端写入进数据库中，这种攻击危害性很大，因为如果网站访问量很大的话，就会导 致大量正常访问页面的用户都受到攻击。<br>举个例子，对于评论功能来说，就得防范持久型 XSS 攻击，因为我可以在评论中输入以下内容<code>&lt;script&gt;alert(2)&lt;/script&gt;</code>.<br>这种情况如果前后端没有做好防御的话，这段评论就会被存储到数据库中，这样每个打开该页面的用户都会被攻击到。<br>非持久型相比于前者危害就小的多了，一般通过修改 URL 参数的方式加入攻击代码，诱导用户访问链接从而进行攻击。<br>举个例子，如果页面需要从 URL 中获取某些参数作为内容的话，不经过过滤就会导致攻击代码被执行.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- http:<span class="comment">//www.domain.com?name=&lt;script&gt;alert(1)&lt;/script&gt; --&gt; </span></span><br><span class="line">&lt;div&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>但是对于这种攻击方式来说，如果用户使用 Chrome 这类浏览器的话，浏览器就能自动帮助用户防御攻击。但是我 们不能因此就不防御此类攻击了，因为我不能确保用户都使用了该类浏览器.</p>
<h2 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h2><p>对于 XSS 攻击来说，通常有两种方式可以用来防御。</p>
<h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><p>首先，对于用户的输入应该是永远不信任的。最普遍的做法就是转义输入输出的内容，对于引号、尖括号、斜杠进 行转义</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escape</span>(<span class="params">str</span>) </span>&#123;      </span><br><span class="line">    str = str.replace(<span class="regexp">/&amp;/g</span>, <span class="string">'&amp;amp;'</span>)  </span><br><span class="line">    str = str.replace(<span class="regexp">/&lt;/g</span>, <span class="string">'&amp;lt;'</span>)  </span><br><span class="line">    str = str.replace(<span class="regexp">/&gt;/g</span>, <span class="string">'&amp;gt;'</span>)  </span><br><span class="line">    str = str.replace(<span class="regexp">/"/g</span>, <span class="string">'&amp;quto;'</span>)  </span><br><span class="line">    str = str.replace(<span class="regexp">/'/g</span>, <span class="string">'&amp;#39;'</span>)  </span><br><span class="line">    str = str.replace(<span class="regexp">/`/g</span>, <span class="string">'&amp;#96;'</span>)  </span><br><span class="line">    str = str.replace(<span class="regexp">/\//g</span>, <span class="string">'&amp;#x2F;'</span>)  </span><br><span class="line">    <span class="keyword">return</span> str </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过转义可以将攻击代码  &lt;script&gt;alert(1)&lt;/script&gt;  变成</span></span><br><span class="line"><span class="comment">// -&gt; &amp;lt;script&amp;gt;alert(1)&amp;lt;&amp;#x2F;script&amp;gt; </span></span><br><span class="line"><span class="built_in">escape</span>(<span class="string">'&lt;script&gt;alert(1)&lt;/script&gt;'</span>)</span><br></pre></td></tr></table></figure>

<p>但是对于显示富文本来说，显然不能通过上面的办法来转义所有字符，因为这样会把需要的格式也过滤掉。对于这种情况，通常采用白名单过滤的办法，当然也可以通过黑名单过滤，但是考虑到需要过滤的标签和标签属性实在太多，更加推荐使用白名单的方式。</p>
<h3 id="CSP-白名单"><a href="#CSP-白名单" class="headerlink" title="CSP(白名单)"></a>CSP(白名单)</h3><p>CSP本质上就是建立白名单，开发者明确告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何 拦截是由浏览器自己实现的。我们可以通过这种方式来尽量减少 XSS 攻击。<br>通常可以通过两种方式来开启 CSP：</p>
<ol>
<li>设置 HTTP Header 中的  Content-Security-Policy </li>
<li>设置meta标签的方式 <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code></li>
</ol>
<p>这里以设置 HTTP Header 来举例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只允许加载本站资源</span></span><br><span class="line">Content-Security-Policy: <span class="keyword">default</span>-src ‘self’</span><br><span class="line"><span class="comment">//只允许加载 HTTPS 协议图片</span></span><br><span class="line">Content-Security-Policy: img-src https:<span class="comment">//*</span></span><br><span class="line"><span class="comment">//允许加载任何来源框架</span></span><br><span class="line">Content-Security-Policy: child-src <span class="string">'none'</span></span><br></pre></td></tr></table></figure>

<h1 id="CSRF攻击"><a href="#CSRF攻击" class="headerlink" title="CSRF攻击"></a>CSRF攻击</h1><blockquote>
<p>什么是CSRF攻击？如何防范CSRF攻击？</p>
</blockquote>
<p>CSRF中文名为跨站请求伪造。<br>原理就是攻击者构造出一个后端请求地址，诱导用户点击或者通过某些途径自动发起请求。如果用户是在登录状态下的话，后端就以为是用户在操作，从而进行相应的逻辑。<br>举个例子，假设网站中有一个通过GET请求提交用户评论的接口，那么攻击者就可以在钓鱼网站中加入一个图片，图片的地址就是评论接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">"http://www.domain.com/xxx?comment='attack'"</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>那么你是否会想到使用POST方式提交请求是不是就没有这个问题了呢？其实并不是，使用这种方式也不是百分百安全的，攻击者同样可以诱导用户进入某个页面，在页面中通过表单提交POST请求</p>
<h2 id="如何防御"><a href="#如何防御" class="headerlink" title="如何防御"></a>如何防御</h2><p>防范CSRF攻击可以遵循以下几种规则：</p>
<ol>
<li>GET请求不对数据进行修改</li>
<li>不让第三方网站访问到用户 Cookie </li>
<li>阻止第三方网站请求接口 </li>
<li>请求时附带验证信息，比如验证码或者 Token</li>
</ol>
<p><strong>SameSite</strong><br>可以对Cookie设置SameSite属性。该属性表示Cookie不随着跨域请求发送，可以很大程度减少CSRF的攻击，但是该属性目前并不是所有浏览器都兼容。<br><strong>验证Referer</strong><br>对于需要防范CSRF的请求，我们可以通过验证Referer来判断该请求是否为第三方网站发起的。<br><strong>Token</strong><br>服务器下发一个随机Token，每次发起请求时将Token携带上，服务器验证Token是否有效。</p>
<h1 id="点击劫持"><a href="#点击劫持" class="headerlink" title="点击劫持"></a>点击劫持</h1><blockquote>
<p>什么是点击劫持？如何防范点击劫持？</p>
</blockquote>
<p>点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过iframe嵌套的方式嵌入自己的网页中，并将iframe设置为透明，在页面中透出一个按钮诱导用户点击。</p>
<h2 id="如何防御-1"><a href="#如何防御-1" class="headerlink" title="如何防御"></a>如何防御</h2><p><strong>X-FRAME-OPTIONS</strong><br>X-FRAME-OPTIONS是一个HTTP响应头，在现代浏览器有一个很好的支持。这个HTTP响应头就是为了防御用iframe嵌套的点击劫持攻击。<br>该响应头有三个值可选，分别是<br>DENY，表示页面不允许通过iframe的方式展示SAMEORIGIN，表示页面可以在相同域名下通过iframe的方式展示ALLOW-FROM，表示页面可以在指定来源的iframe中展示<br><strong>JS防御</strong><br>对于某些远古浏览器来说，并不能支持上面的这种方式，那我们只有通过JS的方式来防御点击劫持了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;style id=<span class="string">"click-jack"</span>&gt;</span><br><span class="line">        html &#123;      </span><br><span class="line">            display: none !important;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    <span class="keyword">if</span> (self == top) &#123;</span><br><span class="line">        <span class="keyword">var</span> style = <span class="built_in">document</span>.getElementById(<span class="string">'click-jack'</span>) </span><br><span class="line">        <span class="built_in">document</span>.body.removeChild(style)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        top.location = self.location</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>

<p>以上代码的作用就是当通过<code>iframe</code>的方式加载页面时，攻击者的网页直接不显示所有内容了。</p>
<h1 id="中间人攻击"><a href="#中间人攻击" class="headerlink" title="中间人攻击"></a>中间人攻击</h1><blockquote>
<p>什么是中间人攻击？如何防范中间人攻击？</p>
</blockquote>
<p>中间人攻击是攻击方同时与服务端和客户端建立起了连接，并让对方认为连接是安全的，但是实际上整个通信过程都被攻击者控制了。攻击者不仅能获得双方的通信信息，还能修改通信信息。<br>通常来说不建议使用公共的Wi-Fi，因为很可能就会发生中间人攻击的情况。如果你在通信的过程中涉及到了某些敏感信息，就完全暴露给攻击方了。<br>当然防御中间人攻击其实并不难，只需要增加一个安全通道来传输信息。HTTPS就可以用来防御中间人攻击，但是并不是说使用了HTTPS就可以高枕无忧了，因为如果你没有完全关闭HTTP访问的话，攻击方可以通过某些方式将HTTPS降级为HTTP从而实现中间人攻击。</p>
<h1 id="网页验证码是干嘛的，是为了解决什么安全问题。"><a href="#网页验证码是干嘛的，是为了解决什么安全问题。" class="headerlink" title="网页验证码是干嘛的，是为了解决什么安全问题。"></a>网页验证码是干嘛的，是为了解决什么安全问题。</h1><p>区分用户是计算机还是人的公共全自动程序。可以防止恶意破解密码、刷票、论坛灌水；<br>有效防止黑客对某一个特定注册用户用特定程序暴力破解方式进行不断的登陆尝试。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/15/Vue服务端渲染/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/15/Vue服务端渲染/" class="post-title-link" itemprop="url">Vue服务端渲染</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-15 16:22:12" itemprop="dateCreated datePublished" datetime="2019-09-15T16:22:12+08:00">2019-09-15</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-16 11:18:23" itemprop="dateModified" datetime="2019-10-16T11:18:23+08:00">2019-10-16</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><blockquote>
<p>Vue.js是构建客户端应用程序的框架。默认情况下，可以在浏览器中输出Vue组件，进行生成DOM和操作DOM。然而，也可以将同一个组件渲染为服务器端的HTML字符串，将它们直接发送到浏览器，最后将这些静态标记”激活”为客户端上完全可交互的应用程序。</p>
</blockquote>
<p>服务器渲染的Vue.js应用程序也可以被认为是”同构”或”通用”，因为应用程序的大部分代码都可以在服务器和客户端上运行。</p>
<h1 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h1><p>优点: </p>
<ol>
<li>更好的 SEO，由于搜索引擎爬虫抓取工具可以直接查看完全渲染的页面。</li>
<li>更快的内容到达时间 (time-to-content)，特别是对于缓慢的网络情况或运行缓慢的设备。</li>
</ol>
<p>缺点:</p>
<ol>
<li>开发条件所限。</li>
<li>涉及构建设置和部署的更多要求。</li>
<li>更多的服务器端负载。</li>
</ol>
<h1 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><code>npm install vue vue-server-renderer --save</code></p>
<h2 id="渲染实例"><a href="#渲染实例" class="headerlink" title="渲染实例"></a>渲染实例</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第 1 步：创建一个 Vue 实例</span></span><br><span class="line"><span class="keyword">const</span> Vue = <span class="built_in">require</span>(<span class="string">'vue'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;Hello World&lt;/div&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第 2 步：创建一个 renderer</span></span><br><span class="line"><span class="keyword">const</span> renderer = <span class="built_in">require</span>(<span class="string">'vue-server-renderer'</span>).createRenderer()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第 3 步：将 Vue 实例渲染为 HTML</span></span><br><span class="line">renderer.renderToString(app, (err, html) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">  <span class="built_in">console</span>.log(html)</span><br><span class="line">  <span class="comment">// =&gt; &lt;div data-server-rendered="true"&gt;Hello World&lt;/div&gt;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 2.5.0+，如果没有传入回调函数，则会返回 Promise：</span></span><br><span class="line">renderer.renderToString(app).then(<span class="function"><span class="params">html</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(html)</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="与服务端集成"><a href="#与服务端集成" class="headerlink" title="与服务端集成"></a>与服务端集成</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装</span></span><br><span class="line">npm install express --save</span><br><span class="line"><span class="comment">//操作express</span></span><br><span class="line"><span class="keyword">const</span> Vue = <span class="built_in">require</span>(<span class="string">'vue'</span>)</span><br><span class="line"><span class="keyword">const</span> server = <span class="built_in">require</span>(<span class="string">'express'</span>)()</span><br><span class="line"><span class="keyword">const</span> renderer = <span class="built_in">require</span>(<span class="string">'vue-server-renderer'</span>).createRenderer()</span><br><span class="line"></span><br><span class="line">server.get(<span class="string">'*'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">      url: req.url</span><br><span class="line">    &#125;,</span><br><span class="line">    template: <span class="string">`&lt;div&gt;访问的 URL 是： &#123;&#123; url &#125;&#125;&lt;/div&gt;`</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  renderer.renderToString(app, (err, html) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      res.status(<span class="number">500</span>).end(<span class="string">'Internal Server Error'</span>)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    res.end(<span class="string">`</span></span><br><span class="line"><span class="string">      &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">      &lt;html lang="en"&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body&gt;<span class="subst">$&#123;html&#125;</span>&lt;/body&gt;</span></span><br><span class="line"><span class="string">      &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8080</span>)</span><br></pre></td></tr></table></figure>

<h2 id="使用页面模板"><a href="#使用页面模板" class="headerlink" title="使用页面模板"></a>使用页面模板</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.template.html</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">  &lt;head&gt;<span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;!--vue-ssr-outlet--&gt;</span><br><span class="line">    &lt;!--这里将是应用程序 HTML 标记注入的地方--&gt;</span><br><span class="line">  &lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<p>读取和传输文件到 Vue renderer 中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> renderer = createRenderer(&#123;</span><br><span class="line">  template: <span class="built_in">require</span>(<span class="string">'fs'</span>).readFileSync(<span class="string">'./index.template.html'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">renderer.renderToString(app, (err, html) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(html) <span class="comment">// html 将是注入应用程序内容的完整页面</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="vue-srr范例详解"><a href="#vue-srr范例详解" class="headerlink" title="vue-srr范例详解"></a>vue-srr范例详解</h1>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/14/VueX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/14/VueX/" class="post-title-link" itemprop="url">Vuex</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-14 21:38:29" itemprop="dateCreated datePublished" datetime="2019-09-14T21:38:29+08:00">2019-09-14</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 19:20:29" itemprop="dateModified" datetime="2019-10-09T19:20:29+08:00">2019-10-09</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Vuex-介绍"><a href="#Vuex-介绍" class="headerlink" title="Vuex 介绍"></a>Vuex 介绍</h1><p>每一个 Vuex 应用的核心就是 store（仓库）。“store”基本上就是一个容器，它包含着你的应用中大部分的<strong>状态(state)</strong>。Vuex 和单纯的全局对象有以下两点不同：</p>
<ol>
<li>Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到高效更新。</li>
<li>不能直接改变 store 中的状态。改变 store 中的状态的唯一途径就是显式地提交<strong>(commit)mutation</strong>。这样使得我们可以方便地跟踪每一个状态的变化，从而让我们能够实现一些工具帮助我们更好地了解我们的应用。<br>我的理解: Vuex 相当于一个扩展板的<code>bus</code>中介.起步虽相似,但功能更丰富.</li>
</ol>
<h2 id="Vuex-之-store"><a href="#Vuex-之-store" class="headerlink" title="Vuex 之 store"></a>Vuex 之 store</h2><p>起步: 安装,引入,<code>use</code>,创建状态仓库.在Vue实例中注入(把store写进去).一条龙服务.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建仓库格式</span></span><br><span class="line"><span class="keyword">var</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        <span class="comment">//定义你的状态</span></span><br><span class="line">        XXX: xxx</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        <span class="comment">//在此处定义状态改变的方法</span></span><br><span class="line">        increase(state)&#123;</span><br><span class="line">            state.num ++</span><br><span class="line">        &#125;</span><br><span class="line">        decrease(state)&#123;</span><br><span class="line">            state.num --</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        <span class="comment">//actions中传递的不再是state,而是context</span></span><br><span class="line">        increaseAction(context)&#123;</span><br><span class="line">            <span class="comment">//actions中只能对mutations中的方法进行操作</span></span><br><span class="line">            context.commit(<span class="string">'increase'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>mutations 改变状态:<br>直接通过<code>this.$store.state.XXX</code>拿到状态<br>在 methods 中.定义一个函数通过<code>this.$store.commit(&#39;xxx&#39;)</code>方法触发状态变更</p>
</blockquote>
<blockquote>
<p>actions 改变状态:<br>通过<code>this.$store.dispatch(xxx)</code>调用</p>
</blockquote>
<p>二者区别:</p>
<ol>
<li>传入参数不同,mutations 传入<code>state</code>.actions 传入<code>context</code></li>
<li>调用方式不同,前者<code>this.$store.commit(&#39;xxx&#39;)</code>.后者<code>this.$store.dispatch(xxx)</code></li>
<li>函数要求不同.mutations 中只能有同步操作,actions 中可以有异步操作.</li>
</ol>
<h2 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h2><p>有时需要对 mutations 处理后的 state 进行处理.<br>可以当做 vuex 的计算属性(computed).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">    getNum(state)&#123;</span><br><span class="line">        <span class="comment">//因为要处理state,自然传入state</span></span><br><span class="line">        <span class="keyword">return</span> state.num &gt; <span class="number">0</span> ? state.num : <span class="number">0</span></span><br><span class="line">        <span class="comment">//这里是防止一直减出现负数进行的处理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>获取状态也就改为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在组件中</span></span><br><span class="line">computed: &#123;</span><br><span class="line">    getCount()&#123;</span><br><span class="line">        <span class="comment">//return this.$store.state.num</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.getNum</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Vuex-状态管理流程"><a href="#Vuex-状态管理流程" class="headerlink" title="Vuex 状态管理流程"></a>Vuex 状态管理流程</h1><p>view–&gt;actions–&gt;mutations–&gt;state–&gt;view</p>
<h1 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h1><p>VueX 中<br><code>state</code>相当于<code>data</code><br><code>getter</code>相当于<code>computed</code><br><code>mutation</code>相当于<code>methods</code><br><code>action</code>是异步的<code>mutation</code><br><code>module</code>模块将上述进行封装分块</p>
<h2 id="mapState-和-mapGetters"><a href="#mapState-和-mapGetters" class="headerlink" title="mapState 和 mapGetters"></a>mapState 和 mapGetters</h2><p><code>mapState</code>辅助函数仅仅是将 store 中的<code>getter</code>映射到局部计算属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...Vuex.mapState([<span class="string">'firstName'</span>, <span class="string">'lastName'</span>])</span><br><span class="line"><span class="comment">//相当于</span></span><br><span class="line">firstName()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.firstName</span><br><span class="line">&#125;,</span><br><span class="line">lastName()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.lastName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">..Vuex.mapGetters([<span class="string">'fullName'</span>])</span><br><span class="line"><span class="comment">//相当于</span></span><br><span class="line">fullName()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.fullName</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>store.commit(&#39;xxFirstName&#39;, &#39;jirengu&#39;)</code><br>提交 mutation 中 xxFirstName 的方法。<br>第一个参数是 state 中有的，后添加的 jirengu 是载荷<code>payload</code>。</p>
<h2 id="提交载荷（payload）"><a href="#提交载荷（payload）" class="headerlink" title="提交载荷（payload）"></a>提交载荷（payload）</h2><p>向<code>store.commit</code>传入额外参数，即<code>mutation</code>的载荷</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mutations:&#123;</span><br><span class="line">increment (state, payload)&#123;</span><br><span class="line">state.count += payload.amount</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">store.commit(<span class="string">'increment'</span>, &#123;</span><br><span class="line">amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>actions 中传入第一个参数是<code>context</code>，第二个是<code>payload</code><br>触发 action</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.dispatch(<span class="string">"increment"</span>);</span><br></pre></td></tr></table></figure>

<h1 id="moudle-模块化"><a href="#moudle-模块化" class="headerlink" title="moudle(模块化)"></a>moudle(模块化)</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// -&gt; moduleA 的状态</span></span><br><span class="line">store.state.b <span class="comment">// -&gt; moduleB 的状态</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/14/VueRouter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/14/VueRouter/" class="post-title-link" itemprop="url">VueRouter</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-14 21:38:12" itemprop="dateCreated datePublished" datetime="2019-09-14T21:38:12+08:00">2019-09-14</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-26 17:06:20" itemprop="dateModified" datetime="2019-11-26T17:06:20+08:00">2019-11-26</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="前端路由原理"><a href="#前端路由原理" class="headerlink" title="前端路由原理"></a>前端路由原理</h1><p>监听url的变化，然后匹配路由规则，显示相应页面，无需刷新。<br>目前前端路由只有两种实现方式</p>
<ol>
<li>hash模式</li>
</ol>
<p>监听hash值变化(url后的,从#号开始)<br><code>window.addEventListener(&#39;hashchange&#39;,()=&gt;{})</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//监听hash变化</span></span><br><span class="line"><span class="built_in">window</span>.onhashchange = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.oldURL, event.newURL);</span><br><span class="line">    <span class="keyword">let</span> hash = loaction.hash  <span class="comment">//通过location对象来获取hash地址</span></span><br><span class="line">    <span class="built_in">console</span>.log(hash)    <span class="comment">// "#/notebooks/260827/list"  从#号开始</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为hash发生变化的url都会被浏览器记录下来，从而你会发现浏览器的前进后退都可以用.<br>特点: hash 虽然出现在URL中，但不会被包括在 HTTP 请求中，对后端完全没有影响，因此改变 hash 不会重新加载页面。</p>
<ol start="2">
<li>history模式</li>
</ol>
<p>通过此模式改变url同样不会引起页面刷新，只会更新浏览器的历史记录’<br>修改为history模式:在router中添加<code>mode: &#39;history&#39;</code>.</p>
<p><code>history.pushState</code><br>替换当前历史记录<br><code>history.replaceState</code><br>点击后退触发popState事件<br><code>window.addEventListener(&#39;popState&#39;,e=&gt;{})</code></p>
<h3 id="切换历史状态"><a href="#切换历史状态" class="headerlink" title="切换历史状态"></a>切换历史状态</h3><p>包括back,forward,go三个方法，对应浏览器的前进，后退，跳转操作.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">history.go(<span class="number">-2</span>);<span class="comment">//后退两次</span></span><br><span class="line">history.go(<span class="number">2</span>);<span class="comment">//前进两次</span></span><br><span class="line">history.back(); <span class="comment">//后退</span></span><br><span class="line">hsitory.forward(); <span class="comment">//前进</span></span><br></pre></td></tr></table></figure>

<h3 id="修改历史状态"><a href="#修改历史状态" class="headerlink" title="修改历史状态"></a>修改历史状态</h3><p>包括了pushState,replaceState两个方法,这两个方法接收三个参数:<code>stateObj,title,url</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">history.pushState(&#123;<span class="attr">color</span>:<span class="string">'red'</span>&#125;, <span class="string">'red'</span>, <span class="string">'red'</span>&#125;)</span><br><span class="line">history.back();</span><br><span class="line">history.forward();</span><br></pre></td></tr></table></figure>

<p>通过pushstate把页面的状态保存在state对象中，当页面的url再变回这个url时，可以通过event.state取到这个state对象.</p>
<h3 id="history模式缺点"><a href="#history模式缺点" class="headerlink" title="history模式缺点"></a>history模式缺点</h3><p>通过history api，我们丢掉了丑陋的#，但是它也有个毛病：<br>不怕前进，不怕后退，就怕刷新，f5（如果后端没有准备的话）,因为刷新是实实在在地去请求服务器的,不玩虚的。</p>
<p>在hash模式下，前端路由修改的是#中的信息，而浏览器请求时是不带它玩的，所以没有问题.但是在history下，你可以自由的修改path，当刷新时，如果服务器中没有相应的响应或者资源，会请求失败.</p>
<p>所以，如果你想在github.io上搭一个单页博客，就应该选择hash模式</p>
<h1 id="vue-router路由"><a href="#vue-router路由" class="headerlink" title="vue-router路由"></a>vue-router路由</h1><ol>
<li>安装vue-router<br><code>npm install --save vue-router</code></li>
<li>引用</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line">Vue.use(router)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置路由文件,并在Vue实例中注入</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">'./components/HelloWorld'</span></span><br><span class="line"></span><br><span class="line">Vue.use(router) <span class="comment">//引入并且使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rt = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    <span class="comment">//下面这个routes是数组,用[]</span></span><br><span class="line">    routes: [&#123;</span><br><span class="line">        path: <span class="string">'/hello'</span>, <span class="comment">//指定要跳转的路径</span></span><br><span class="line">        component: HelloWorld <span class="comment">//指定要跳转的组件</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    router: rt, <span class="comment">//把路由实例rt写到Vue实例中就注入了</span></span><br><span class="line">    components: &#123; App &#125;, <span class="comment">//组件直接注入.分开写便于模块化</span></span><br><span class="line">    template: <span class="string">'&lt;App/&gt;'</span> <span class="comment">//同上</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>确定视图加载的位置</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;<span class="xml"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="comment">//把这个写到想注入的位置就可以了</span></span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">## 路由跳转</span></span><br><span class="line"><span class="string">在路由文件中,一般是`</span>router/index.js<span class="string">`.就是把路由单独写一个文件</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">'./components/HelloWorld'</span></span><br><span class="line"><span class="keyword">import</span> HelloEarth <span class="keyword">from</span> <span class="string">'./components/Helloearth'</span></span><br><span class="line"></span><br><span class="line">Vue.use(router) <span class="comment">//引入并且使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> router(&#123;</span><br><span class="line">    routes: [&#123;</span><br><span class="line">        path: <span class="string">'/helloworld'</span>, <span class="comment">//指定要跳转的路径</span></span><br><span class="line">        component: HelloWorld <span class="comment">//指定要跳转的组件</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: <span class="string">'/helloearth'</span>, <span class="comment">//指定要跳转的路径</span></span><br><span class="line">        component: HelloEarth <span class="comment">//指定要跳转的组件</span></span><br><span class="line">    &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>然后在页面组件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;router-link to=<span class="string">"/helloworld"</span>&gt;HelloWorld&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>li&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;router-link to=<span class="string">"/helloearth"</span>&gt;HelloEarth&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="vue-router路由参数传递-传参"><a href="#vue-router路由参数传递-传参" class="headerlink" title="vue-router路由参数传递(传参)"></a>vue-router路由参数传递(传参)</h2><ol>
<li>必须在路由内加入路由的<code>name</code></li>
<li>必须在<code>path</code>后加<code>/:</code>加传递的参数</li>
<li>传递参数(传值)和接收参数(具体看下面两种方法)</li>
</ol>
<p>传递参数方法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//params: </span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">  name: <span class="string">'xxx'</span>,</span><br><span class="line">  params: &#123;</span><br><span class="line">    id: id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//params读取参数: this.$route.params.id</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//query</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">  path: <span class="string">'/xxx'</span>,</span><br><span class="line">  query: &#123;</span><br><span class="line">    id: id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//query读取参数: this.$route.query.id</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意: params传参,push里只能是name:’xxx’,不能是path:’/xxx’,因为params只能用name来引入路由,如果这个写成path,接收参数页面会是undefined.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//两种方式:</span></span><br><span class="line">  &lt;router-link :to=<span class="string">"&#123;name: helloworld,params:&#123;worldmsg: '你好世界' &#125;&#125;"</span>&gt;</span><br><span class="line">      helloworld&lt;/router-link&gt;</span><br><span class="line">  <span class="comment">//接收参数:$route.params.xxx   </span></span><br><span class="line">  <span class="comment">//这种方式等同于./helloworld/你好世界</span></span><br><span class="line"></span><br><span class="line"><span class="function">export <span class="keyword">default</span> new <span class="title">router</span><span class="params">(&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">    routes: [&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        name: <span class="string">'helloworld'</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        path: <span class="string">'/helloworld/:id'</span>, //动态绑定,各个不同id就都使用HelloWorld组件了</span></span></span><br><span class="line"><span class="function"><span class="params">        component: HelloWorld //指定要跳转的组件</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;,</span></span></span><br><span class="line"><span class="function"><span class="params">    &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        name: <span class="string">'helloearth'</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        path: <span class="string">'/helloearth/:earthmsg'</span>, //指定要跳转的路径</span></span></span><br><span class="line"><span class="function"><span class="params">        component: HelloEarth //指定要跳转的组件</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;,</span></span></span><br><span class="line"><span class="function"><span class="params">    ]</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;)</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  &lt;router-link :to=<span class="string">"&#123;path: '/helloearth',query:&#123;msg: 只有一个地球&#125;&#125;"</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/方式等同于./</span>helloworld?name=xxx&amp;count=xxx</span><br><span class="line">  <span class="comment">//接收参数this.$route.query.xxx</span></span><br><span class="line">  </span><br><span class="line">coust couter = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes:[&#123;</span><br><span class="line">    path: <span class="string">'/search'</span>, </span><br><span class="line">    component: SearchUser, </span><br><span class="line">    props: <span class="function">(<span class="params">route</span>) =&gt;</span>(&#123;</span><br><span class="line">      query: route.query.q </span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h1 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h1><p>导航守卫就是路由跳转过程中的一些钩子函数.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//钩子函数执行后输出的顺序</span></span><br><span class="line">全局前置守卫: beforeEach</span><br><span class="line">路由独享守卫: beforeEnter</span><br><span class="line">组件路由守卫: beforeRouteEnter,此时<span class="keyword">this</span>并不指向该组件实例</span><br><span class="line">全局解析守卫: beforeResolve</span><br><span class="line">全局后置守卫: aferEach</span><br><span class="line">组件生命周期: beforeCreate</span><br><span class="line">组件生命周期: created</span><br><span class="line">组件生命周期: borforeMount</span><br><span class="line">组件生命周期: mounted</span><br><span class="line">组件路由守卫: beforeRouteEnter的next回调</span><br></pre></td></tr></table></figure>

<p>导航守卫分为：<strong>全局的、单个路由独享的、组件内</strong>的三种.</p>
<h2 id="全局的"><a href="#全局的" class="headerlink" title="全局的"></a>全局的</h2><p>分别是<code>beforeEach</code>,<code>beforeResolve</code>,<code>afterEach</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>beforeEach</code>: 全局前置守卫.在路由跳转前触发,参数:to,from,next.这个钩子函数主要用于登录验证.<br><code>beforeResolve</code>: 全局解析守卫.和<code>beforeEach</code>类似.区别是在<code>beforeEach</code>和组件内<code>beforeRouteEnter</code>之后，<code>afterEach</code>之前调用.<br><code>afterEach</code>: 全局后置钩子.和<code>beforeEach</code>相反,在路由跳转完成后触发,参数: to,from.他发生在<code>beforeEach</code>和<code>beforeResolve</code>之后.</p>
<h3 id="三个参数-to-from-next"><a href="#三个参数-to-from-next" class="headerlink" title="三个参数(to,from,next)"></a>三个参数(to,from,next)</h3><ol>
<li><code>to</code>: <code>Route</code>: 即将要进入的目标路由对象</li>
<li><code>from</code>: <code>Route</code>: 当前导航正要离开的路由</li>
<li><code>next</code>: <code>Function</code>: 必须调用该方法来resolve这个钩子.否则不能进入路由.执行效果依赖next方法的调用函数.</li>
<li><code>next(false)</code>: 中断当前导航.如果浏览器的URL改变,那么URL会重置到from路由对应的地址.</li>
<li><code>next(&#39;/&#39;)</code>: 跳转到一个不同的地址.</li>
<li><code>next(error)</code>: 如果传入的next的参数是一个Error实例.则导航会被终止且该错误会被传递给<code>router.onerror()</code>注册过的回调.</li>
</ol>
<blockquote>
<p>确保要调用<code>next</code>方法,否则钩子就不会被<code>resolved</code>.</p>
</blockquote>
<h2 id="路由独享的守卫beforeEnter"><a href="#路由独享的守卫beforeEnter" class="headerlink" title="路由独享的守卫beforeEnter"></a>路由独享的守卫beforeEnter</h2><p>可以在路由配置上直接定义beforeEnter守卫:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/foo'</span>,</span><br><span class="line">      component: Foo,</span><br><span class="line">      brforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//参数用法什么的都一样,调用顺序在全局前置守卫后面，所以不会被全局守卫覆盖</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="组件内的守卫"><a href="#组件内的守卫" class="headerlink" title="组件内的守卫"></a>组件内的守卫</h2><p><code>beforeRouteEnter</code> 进入路由前<br><code>beforeRouteUpdate</code> 路由复用同一个组件时<br><code>beforeRouteLeave</code> 离开当前路由时</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo = &#123;</span><br><span class="line">  template: <span class="string">`...`</span>,</span><br><span class="line">  beforeRouteEnter(to, <span class="keyword">from</span>, next)&#123;</span><br><span class="line">    <span class="comment">//在渲染该组件的对应路由被confirm前调用</span></span><br><span class="line">    <span class="comment">//不能!!获取组件实例this</span></span><br><span class="line">    <span class="comment">//因为当守卫执行前,组件实例还未创建</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate(to, <span class="keyword">from</span>, next)&#123;</span><br><span class="line">    <span class="comment">//在当前路由改变,但是该组件被复用时调用</span></span><br><span class="line">    <span class="comment">//举例来说,对于一个带有动态参数的路径 /foo/:id,在/foo/1和/foo/2之间跳转的时候,</span></span><br><span class="line">    <span class="comment">//由于会渲染同样的Foo组件,因此组件实例会被复用.而这个钩子就会在这个情况下被调用.</span></span><br><span class="line">    <span class="comment">//可以访问组件实例this</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave(to, <span class="keyword">from</span>, next)&#123;</span><br><span class="line">    <span class="comment">//导航离开该组件的对应路由时调用</span></span><br><span class="line">    <span class="comment">//可以访问组件实例this</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="beforeRouteEnter守卫不能访问this"><a href="#beforeRouteEnter守卫不能访问this" class="headerlink" title="beforeRouteEnter守卫不能访问this"></a>beforeRouteEnter守卫不能访问this</h3><p>因为钩子在组件实例还没被创建的时候调用,可以通过传一个回调给<code>next</code>来访问组件实例 。<br>不过,可以通过传一个回调给next来访问组件实例.在导航被确认的时候执行回调,并且把组件实例作为回调方法的参数.<br>但是回调的执行时机在mounted后面,所以在我看来这里对this的访问意义不太大，可以放在<code>created</code>或者<code>mounted</code>里面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteEnter(to, <span class="keyword">from</span>, next)&#123;</span><br><span class="line">  next(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//通过`vm`访问组件实例</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="beforeRouteLeave"><a href="#beforeRouteLeave" class="headerlink" title="beforeRouteLeave"></a>beforeRouteLeave</h3><p>导航离开该组件的对应路由时调用，我们用它来禁止用户离开，比如还未保存草稿，或者在用户离开前，将s<code>etInterval</code>销毁，防止离开之后，定时器还在调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteLeave (to, <span class="keyword">from</span> , next) &#123;</span><br><span class="line">  <span class="keyword">if</span> (文章保存) &#123;</span><br><span class="line">    next(); <span class="comment">// 允许离开或者可以跳到别的路由 上面讲过了</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next(<span class="literal">false</span>); <span class="comment">// 取消离开</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="路由钩子函数的错误捕获"><a href="#路由钩子函数的错误捕获" class="headerlink" title="路由钩子函数的错误捕获"></a>路由钩子函数的错误捕获</h4><p>如果在导航守卫的钩子函数中有错误,可以这样捕获:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.onError(<span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(callback, <span class="string">'callback'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>假设是从a组件离开，第一次进入b组件</p>
<h1 id="完整的路由导航解析流程"><a href="#完整的路由导航解析流程" class="headerlink" title="完整的路由导航解析流程:"></a>完整的路由导航解析流程:</h1><ol>
<li>触发进入其他路由。</li>
<li>调用要离开路由的组件守卫<code>beforeRouteLeave</code></li>
<li>调用全局前置守卫: <code>beforeEach</code></li>
<li>在重用的组件里调用<code>beforeRouteUpdate</code></li>
<li>调用路由独享守卫<code>beforeEnter</code></li>
<li>解析异步路由组件</li>
<li>在将要进入的路由组件中调用<code>beforeRouteEnter</code></li>
<li>调用全局解析守卫<code>beforeResolve</code></li>
<li>导航被确认</li>
<li>调用全局后置钩子<code>afterEach</code></li>
<li>触发DOM更新(mounted)</li>
<li>执行<code>beforeRouteEnter</code>守卫中传给next的回调函数</li>
</ol>
<h1 id="疑难杂症"><a href="#疑难杂症" class="headerlink" title="疑难杂症"></a>疑难杂症</h1><h2 id="监听物理返回键或页面返回"><a href="#监听物理返回键或页面返回" class="headerlink" title="监听物理返回键或页面返回"></a>监听物理返回键或页面返回</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//unit.js</span></span><br><span class="line"><span class="comment">//存储当前历史记录点,实现控制手机物理返回键的按钮事件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> pushHistory = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> state = &#123;</span><br><span class="line">    title: <span class="string">''</span>,</span><br><span class="line">    url: <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">window</span>.history.pushState(state, state.title, state.url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.vue</span></span><br><span class="line"><span class="keyword">import</span> &#123; pushHistory &#125; <span class="keyword">from</span> <span class="string">'@/misc/utils'</span> <span class="comment">//引入工具</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mounted()&#123;</span><br><span class="line">    pushHistory()</span><br><span class="line">    <span class="comment">//监听历史记录点,添加返回事件监听</span></span><br><span class="line">    <span class="built_in">window</span>.onpopstate = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.$router.push(...) </span><br><span class="line">      <span class="comment">//输入要返回的上一级路由地址</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  destroyed()&#123;</span><br><span class="line">  <span class="built_in">window</span>.removeEventListener(<span class="string">'popstate'</span>, <span class="keyword">this</span>.fun, <span class="literal">false</span>);<span class="comment">//false阻止默认事件</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//页面销毁时，取消监听。否则其他vue路由页面也会被监听</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zax Tseng</p>
  <div class="site-description motion-element" itemprop="description">Zax's BLOG</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zax Tseng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.3.0</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>


<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  

  


  
</body>
</html>
