<!DOCTYPE html>





<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="Zax&apos;s BLOG">
<meta name="keywords" content="javascript, Vue, HTML5">
<meta property="og:type" content="website">
<meta property="og:title" content="Zax&#39;s BLOG">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Zax&#39;s BLOG">
<meta property="og:description" content="Zax&apos;s BLOG">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zax&#39;s BLOG">
<meta name="twitter:description" content="Zax&apos;s BLOG">
  <link rel="canonical" href="http://yoursite.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Zax's BLOG</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zax's BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/Express/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/06/Express/" class="post-title-link" itemprop="url">Express</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-06 14:30:24" itemprop="dateCreated datePublished" datetime="2019-09-06T14:30:24+08:00">2019-09-06</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-12-03 10:29:58" itemprop="dateModified" datetime="2019-12-03T10:29:58+08:00">2019-12-03</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/" itemprop="url" rel="index"><span itemprop="name">后端</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>Express是基于Node.js平台的web开发框架.</p>
<h1 id="快速创建"><a href="#快速创建" class="headerlink" title="快速创建"></a>快速创建</h1><p>使用以下命令安装express</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//express脚手架</span></span><br><span class="line">npm install express-generator -g</span><br></pre></td></tr></table></figure>

<p>使用<code>-h</code>选项显示命令选项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">express -h</span><br><span class="line">  Usage: express [options][dir]</span><br><span class="line">  <span class="comment">//用法</span></span><br><span class="line"></span><br><span class="line">  Options:</span><br><span class="line"></span><br><span class="line">    -h, --help          output usage information</span><br><span class="line">        --version       output the version number</span><br><span class="line">    -e, --ejs           add ejs engine support</span><br><span class="line">        --hbs           add handlebars engine support</span><br><span class="line">        --pug           add pug engine support</span><br><span class="line">    -H, --hogan         add hogan.js engine support</span><br><span class="line">        --no-view       generate without view engine</span><br><span class="line">    -v, --view &lt;engine&gt; add view &lt;engine&gt; support (ejs|hbs|hjs|jade|pug|twig|vash) (defaults to jade)</span><br><span class="line">    -c, --css &lt;engine&gt;  add stylesheet &lt;engine&gt; support (less|stylus|compass|sass) (defaults to plain css)</span><br><span class="line">        --git           add .gitignore</span><br><span class="line">    -f, --force         force on non-empty directory</span><br></pre></td></tr></table></figure>

<p>例如，以下语句在当前工作目录中创建名为 myapp 的 Express 应用程序：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ express --view=pug myapp</span><br><span class="line"></span><br><span class="line">   create : myapp</span><br><span class="line">   create : myapp/package.json</span><br><span class="line">   create : myapp/app.js</span><br><span class="line">   create : myapp/public</span><br><span class="line">   create : myapp/public/javascripts</span><br><span class="line">   create : myapp/public/images</span><br><span class="line">   create : myapp/routes</span><br><span class="line">   create : myapp/routes/index.js</span><br><span class="line">   create : myapp/routes/users.js</span><br><span class="line">   create : myapp/public/stylesheets</span><br><span class="line">   create : myapp/public/stylesheets/style.css</span><br><span class="line">   create : myapp/views</span><br><span class="line">   create : myapp/views/index.pug</span><br><span class="line">   create : myapp/views/layout.pug</span><br><span class="line">   create : myapp/views/error.pug</span><br><span class="line">   create : myapp/bin</span><br><span class="line">   create : myapp/bin/www</span><br></pre></td></tr></table></figure>

<p>然后安装依赖项:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd myapp</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>在Mac或Linux下采用以下命令运行此程序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEBUG=myapp:* npm start</span><br></pre></td></tr></table></figure>

<p>在windows上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> DEBUG=myapp:* &amp; npm start</span><br></pre></td></tr></table></figure>

<p>然后在浏览器输入`<a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> 访问</p>
<h1 id="基本路由"><a href="#基本路由" class="headerlink" title="基本路由"></a>基本路由</h1><p>中间件: 处理请求的函数.<br>模板引擎: <code>&lt;%= 写入的变量名 %&gt;</code>,其中变量名可以在其他地方赋值,这样就可以批量改变变量了.</p>
<h1 id="后台"><a href="#后台" class="headerlink" title="后台"></a>后台</h1><p>基本页面: 创建,列表,展示</p>
<h2 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h2><p>提供图像,css和js之类的静态文件,请使用express.static内置中间件函数.<br>使用以下代码在名为public的目录中提供图像,css和js之类的静态文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">'public'</span>))</span><br></pre></td></tr></table></figure>

<p>现在，可以访问位于 public 目录中的文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//localhost:3000/images/kitten.jpg</span></span><br><span class="line">http:<span class="comment">//localhost:3000/css/style.css</span></span><br><span class="line">http:<span class="comment">//localhost:3000/js/app.js</span></span><br><span class="line">http:<span class="comment">//localhost:3000/images/bg.png</span></span><br><span class="line">http:<span class="comment">//localhost:3000/hello.html</span></span><br></pre></td></tr></table></figure>

<p>要使用多个静态资源目录，请多次调用 express.static 中间件函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">'public'</span>));</span><br><span class="line">app.use(express.static(<span class="string">'files'</span>));</span><br></pre></td></tr></table></figure>

<p>Express 以您使用 express.static 中间件函数设置静态目录的顺序来查找文件。</p>
<p>要为 express.static 函数提供的文件创建虚拟路径前缀（路径并不实际存在于文件系统中），请为静态目录指定安装路径，如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/static'</span>, express.static(<span class="string">'public'</span>));</span><br></pre></td></tr></table></figure>

<p>向 express.static 函数提供的路径相对于您在其中启动 node 进程的目录。如果从另一个目录运行 Express 应用程序，那么对于提供资源的目录使用绝对路径会更安全：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/static'</span>, express.static(__dirname + <span class="string">'/public'</span>));</span><br></pre></td></tr></table></figure>

<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>基本路由示例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> app = express() <span class="comment">//在`myapp/bin/www`里创建了app的服务器</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    red.send(<span class="string">'hello world'</span>)<span class="comment">//给浏览器发一个hello world</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="路由方法"><a href="#路由方法" class="headerlink" title="路由方法"></a>路由方法</h3><p>GET和POST的示例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET</span></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'GET request to the homepage'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//POST</span></span><br><span class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'POST request to the homepage'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>有一种特殊路由方法：<code>app.all()</code>，它并非派生自 HTTP 方法。该方法用于在所有请求方法的路径中装入中间件函数。</p>
<p>在以下示例中，无论您使用 GET、POST、PUT、DELETE 还是在 http 模块中支持的其他任何 HTTP 请求方法，都将为针对“/secret”的请求执行处理程序。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">'/secret'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Accessing the secret section ...'</span>);</span><br><span class="line">  next(); <span class="comment">// pass control to the next handler</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="路由路径"><a href="#路由路径" class="headerlink" title="路由路径"></a>路由路径</h3><p>‘/‘表示根路径</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'root'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>和’/about’路径匹配</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/about'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'random.txt'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="基于字符串模式的匹配"><a href="#基于字符串模式的匹配" class="headerlink" title="基于字符串模式的匹配"></a>基于字符串模式的匹配</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此路由路径将匹配 abcd、abbcd、abbbcd 等。</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab+cd'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'ab+cd'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//此路由路径将匹配 abcd、abbcd、abbbcd 等。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab+cd'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'ab+cd'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//此路由路径将匹配 abcd、abxcd、abRABDOMcd、ab123cd 等。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab*cd'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'ab*cd'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//此路由路径将匹配 /abe 和 /abcde。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/ab(cd)?e'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"> res.send(<span class="string">'ab(cd)?e'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>字符 ?、+、* 和 () 是其正则表达式同应项的子集。基于字符串的路径按字面理解连字符 (-) 和点 (.)。</p>
<h4 id="路由处理程序"><a href="#路由处理程序" class="headerlink" title="路由处理程序"></a>路由处理程序</h4><p>可以提供多个回调函数，以类似于中间件的行为方式来处理请求。<br>唯一例外是这些回调函数可能调用 next(‘route’) 来绕过剩余的路由回调。<br>可以使用此机制对路由施加先决条件，在没有理由继续执行当前路由的情况下，可将控制权传递给后续路由。</p>
<p>路由处理程序的形式可以是一个函数、一组函数或者两者的结合，如以下示例中所示。</p>
<p>单个回调函数可以处理一个路由。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/example/a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from A!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>多个回调函数可以处理一个路由（确保您指定 next 对象）。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/example/b'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'the response will be sent by the next function ...'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from B!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>一组回调函数可以处理一个路由。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cb0 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB0'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cb1 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB1'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cb2 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from C!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/example/c'</span>, [cb0, cb1, cb2]);</span><br></pre></td></tr></table></figure>

<p>独立函数与一组函数的组合可以处理一个路由。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cb0 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB0'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cb1 = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'CB1'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/example/d'</span>, [cb0, cb1], <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'the response will be sent by the next function ...'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Hello from D!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="响应方法"><a href="#响应方法" class="headerlink" title="响应方法"></a>响应方法</h1><p>响应对象 (res) 的方法可以向客户端发送响应，并终止请求/响应循环。如果没有从路由处理程序调用其中任何方法，客户端请求将保持挂起状态。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">res.download()</td>
<td align="left">提示将要下载文件。</td>
</tr>
<tr>
<td align="left">res.end()</td>
<td align="left">结束响应进程。</td>
</tr>
<tr>
<td align="left">res.json()</td>
<td align="left">发送 JSON 响应。</td>
</tr>
<tr>
<td align="left">res.jsonp()</td>
<td align="left">在 JSONP 的支持下发送 JSON 响应。</td>
</tr>
<tr>
<td align="left">res.redirect()</td>
<td align="left">重定向请求。</td>
</tr>
<tr>
<td align="left">res.render()</td>
<td align="left">呈现视图模板。</td>
</tr>
<tr>
<td align="left">res.send()</td>
<td align="left">发送各种类型的响应。</td>
</tr>
<tr>
<td align="left">res.sendFile</td>
<td align="left">以八位元流形式发送文件。</td>
</tr>
<tr>
<td align="left">res.sendStatus()</td>
<td align="left">设置响应状态码并以响应主体形式发送其字符串表示。</td>
</tr>
</tbody></table>
<h1 id="app-route"><a href="#app-route" class="headerlink" title="app.route()"></a>app.route()</h1><p>可以使用<code>app.route()</code>为路由路径创建可连接的路由处理程序<br>因为在单一位置指定路径,可以减少冗杂和输入错误.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app.route(<span class="string">'/book'</span>)</span><br><span class="line">    .get(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">        res.send(<span class="string">'get a book'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    .post(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">        res.send(<span class="string">'add a book'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    .put(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">        res.send(<span class="string">'update a book'</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h1 id="express-Router"><a href="#express-Router" class="headerlink" title="express.Router"></a>express.Router</h1><p>使用 express.Router 类来创建可安装的模块化路由处理程序。Router 实例是完整的中间件和路由系统；因此，常常将其称为“微型应用程序”。</p>
<p>以下示例将路由器创建为模块，在其中装入中间件，定义一些路由，然后安装在主应用程序的路径中。</p>
<p>在应用程序目录中创建名为 birds.js 的路由器文件，其中包含以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// middleware that is specific to this router</span></span><br><span class="line"><span class="comment">//use是不管get还是post都可以匹配</span></span><br><span class="line">router.use(<span class="function"><span class="keyword">function</span> <span class="title">timeLog</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Time: '</span>, <span class="built_in">Date</span>.now());</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// define the home page route</span></span><br><span class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'Birds home page'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// define the about route</span></span><br><span class="line">router.get(<span class="string">'/about'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">'About birds'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>

<p>接着，在应用程序中装入路由器模块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> birds = <span class="built_in">require</span>(<span class="string">'./birds'</span>);</span><br><span class="line">...</span><br><span class="line">app.use(<span class="string">'/birds'</span>, birds);</span><br></pre></td></tr></table></figure>

<p>此应用程序现在可处理针对 /birds 和 /birds/about 的请求，调用特定于此路由的 timeLog 中间件函数。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/05/ES6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/05/ES6/" class="post-title-link" itemprop="url">ES6</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-05 13:59:32" itemprop="dateCreated datePublished" datetime="2019-09-05T13:59:32+08:00">2019-09-05</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-26 13:00:49" itemprop="dateModified" datetime="2019-11-26T13:00:49+08:00">2019-11-26</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/ES6/" itemprop="url" rel="index"><span itemprop="name">ES6</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>ES6常见语法</p>
<h1 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h1><p><code>let</code>定义局部变量<br><code>var</code>定义全局变量.用<code>var</code>定义的全部变量，有时候会污染整个js的作用域。<br><code>const</code>定义常量<br>在全局作用域下使用<code>let</code>和<code>const</code>声明变量，变量并不会挂载到<code>window</code></p>
<ol>
<li><p>var可声明前置(变量提升)<br>变量会提升，函数也会提升，并且函数优先于变量提升，函数提升会把整个函数提到作用域顶部，变量提升只会把声明提上去.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> a</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>let不可声明前置</p>
</li>
</ol>
<p>暂时性死区：不能在变量声明之前使用变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span> <span class="comment">//报错</span></span><br><span class="line"><span class="keyword">let</span> a</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>let不可重复声明</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">4</span> <span class="comment">//报错</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span> <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>存在块级作用域</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i) <span class="comment">//块级作用域只在大括号内,出了大括号,i并没有声明,会报错</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i) <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

<p>暂时性死区: 在let声明变量之前都是该变量的死区,在死区内该变量不可使用.不能被声明也不能被获取.</p>
<ol start="5">
<li>const声明的常量不可改变</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line">a = <span class="number">2</span><span class="comment">//报错</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line">obj.a = <span class="number">2</span>  <span class="comment">//正常</span></span><br><span class="line">obj = &#123;<span class="attr">a</span>: <span class="number">2</span>&#125; <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

<p>const 对象等于引用类型,obj存的是<code>{a: 1}</code>的地址,里面的东西改变并不影响地址.而<code>obj = {a: 2}</code>是赋给一个新的地址,发生了改变,会报错.</p>
<ol start="6">
<li>适用于<code>let</code>同样适用于<code>const</code></li>
</ol>
<p><code>let</code>和<code>const</code>作用基本一致，<code>const</code>声明的变量不能再次赋值<br>ES6可以大量使用<code>let</code>,如果认定模块不改变,可以使用<code>const</code></p>
<h1 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h1><h2 id="关于数组的解构赋值"><a href="#关于数组的解构赋值" class="headerlink" title="关于数组的解构赋值"></a>关于数组的解构赋值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c) </span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, [b], c] = [<span class="number">2</span>, [<span class="number">3</span>], <span class="number">4</span>]</span><br><span class="line">a <span class="comment">//2</span></span><br><span class="line">b <span class="comment">//3</span></span><br><span class="line">c <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a] = <span class="number">1</span> <span class="comment">//报错,因为[a]是一个数组,把值赋值给数组就报错了</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>默认值</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b = <span class="number">2</span>] = [<span class="number">3</span>]</span><br><span class="line">a <span class="comment">// 3</span></span><br><span class="line">b <span class="comment">// 2,因为b没有对应值,所以是undefined,使用默认值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b = <span class="number">2</span>] = [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">a <span class="comment">//3</span></span><br><span class="line">b <span class="comment">//4</span></span><br><span class="line">数组对应对值有没有？如果没有（数组对没有指<span class="literal">undefined</span>）就使用默认值，如果有就使用对应值</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a=<span class="number">2</span>, b=<span class="number">3</span>] = [<span class="literal">undefined</span>, <span class="literal">null</span>]</span><br><span class="line">a <span class="comment">//2</span></span><br><span class="line">b <span class="comment">//null</span></span><br><span class="line"><span class="keyword">let</span> [a=<span class="number">1</span>, b=a] = [<span class="number">2</span>]</span><br><span class="line">a <span class="comment">//2</span></span><br><span class="line">b <span class="comment">//2,因为b没有对应值,所以是undefined,使用默认值,此时a的默认值为2</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>对象的解构赋值</li>
</ol>
<p>前置知识</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [name, age] = [<span class="string">'hunger'</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> p1 = &#123;name, age&#125;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">let</span> p2 = &#123;<span class="attr">name</span>: name, <span class="attr">age</span>: age&#125;</span><br><span class="line">解构范例</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = &#123;<span class="attr">name</span>: <span class="string">'jirengu'</span>, <span class="attr">age</span>: <span class="number">4</span>&#125;</span><br><span class="line">name <span class="comment">//‘jirengu’</span></span><br><span class="line">age <span class="comment">//4</span></span><br><span class="line">以上代码等同于</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name</span><br><span class="line"><span class="keyword">let</span> age</span><br><span class="line">(&#123;<span class="attr">name</span>: name, <span class="attr">age</span>: age&#125; = &#123;<span class="attr">name</span>: <span class="string">'jirengu'</span>, <span class="attr">age</span>: <span class="number">4</span>&#125;)</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>默认值</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x, y=<span class="number">5</span>&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;</span><br><span class="line">x <span class="comment">//1</span></span><br><span class="line">y <span class="comment">//5</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>函数解构</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[x=<span class="number">1</span>, y=<span class="number">2</span>]</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x+y</span><br><span class="line">&#125;</span><br><span class="line">add() <span class="comment">//Error</span></span><br><span class="line">add([<span class="number">2</span>]) <span class="comment">//4</span></span><br><span class="line">add([<span class="number">3</span>,<span class="number">4</span>]) <span class="comment">//7</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">&#123;x, y&#125;=&#123;x:<span class="number">0</span>, y:<span class="number">0</span>&#125;, &#123;a=<span class="number">1</span>, b=<span class="number">1</span>&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [x+a, y+b]</span><br><span class="line">&#125;</span><br><span class="line">sum(&#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>&#125;, &#123;<span class="attr">a</span>:<span class="number">2</span>&#125;) <span class="comment">//[3, 3]</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>作用</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">[x, y] = [y, x]</span><br><span class="line">x <span class="comment">//2</span></span><br><span class="line">y <span class="comment">// 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">&#123;url, type=‘GET’&#125;</span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">ajax(&#123;<span class="attr">url</span>: ‘http:<span class="comment">//localhost:3000/getData’&#125;)</span></span><br></pre></td></tr></table></figure>

<h1 id="字符串-数组-对象"><a href="#字符串-数组-对象" class="headerlink" title="字符串,数组,对象"></a>字符串,数组,对象</h1><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ol>
<li>多行字符串</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str =<span class="string">`</span></span><br><span class="line"><span class="string">Hi,</span></span><br><span class="line"><span class="string">This is jirengu.com.</span></span><br><span class="line"><span class="string">You can study frontend here.</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<ol>
<li>字符串模板</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> website = <span class="string">'jirengucom'</span></span><br><span class="line"><span class="keyword">let</span> who = <span class="string">'You'</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`Hi</span></span><br><span class="line"><span class="string">This is <span class="subst">$&#123;website&#125;</span>.</span></span><br><span class="line"><span class="string"><span class="subst">$&#123;who&#125;</span> can study frontend here</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="comment">//$&#123;&#125;,可以替换变量</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data= [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> liArr = data.map(<span class="function"><span class="params">v</span>=&gt;</span><span class="string">`&lt;li&gt;<span class="subst">$&#123;v&#125;</span>&lt;/li&gt;`</span>).join(<span class="string">''</span>)</span><br><span class="line"><span class="keyword">var</span> html = <span class="string">`&lt;ul&gt;<span class="subst">$&#123;liArr&#125;</span>&lt;/ul&gt;`</span></span><br><span class="line"><span class="built_in">console</span>.log(html)</span><br><span class="line"><span class="comment">//"&lt;ul&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;li&gt;3&lt;/li&gt;&lt;li&gt;4&lt;/li&gt;&lt;/ul&gt;"</span></span><br></pre></td></tr></table></figure>

<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><ol>
<li>扩展运算符<code>...</code></li>
</ol>
<p><strong>主要作用</strong>是将数组或对象进行展开.</p>
<blockquote>
<p>对象中的扩展运算符(…)用于取出参数对象中的所有可遍历属性，拷贝到当前对象之中</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="built_in">console</span>.log(...a)  <span class="comment">// 1, 2,这三个点相当于脱壳,把数组的壳拿掉</span></span><br><span class="line"><span class="keyword">var</span> b = [...a, <span class="number">3</span>]</span><br><span class="line">b <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = b.concat([<span class="number">4</span>, <span class="number">5</span>]) <span class="comment">//b拼接[4,5]变成[1,2,3,4,5]</span></span><br><span class="line"><span class="keyword">var</span> d = [...b, <span class="number">4</span>, <span class="number">5</span>] <span class="comment">//直接把脱壳后的1,2,3放入数组中</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>函数参数的扩展</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params">...arr</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr.sort())</span><br><span class="line">&#125;</span><br><span class="line">sort(<span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>)  <span class="comment">//[1, 3, 5]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(...arr)</span><br><span class="line">&#125;</span><br><span class="line">max([<span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>])  <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>类数组对象转数组</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ps = <span class="built_in">document</span>.querySelectorAll(<span class="string">'p'</span>);</span><br><span class="line"><span class="built_in">Array</span>.from(ps).forEach(<span class="function"><span class="params">p</span>=&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p.innerText);</span><br><span class="line">&#125;);</span><br><span class="line">[...ps].forEach(<span class="function"><span class="params">p</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(p.innerText)&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><ol>
<li>默认值</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name=<span class="string">'jirengu'</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi, <span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">sayHi()</span><br><span class="line">sayHi(<span class="string">'ruoyu'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params">url, &#123; body=<span class="string">''</span>, method = <span class="string">'GET'</span>, headers = &#123;&#125; &#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(method);</span><br><span class="line">&#125;</span><br><span class="line">fetch(<span class="string">'http://example.com'</span>)<span class="comment">//如果没有定义那么就是undefined,使用默认值,如果传入了参数,那就使用传入值</span></span><br></pre></td></tr></table></figure>

<p><em>以下两种写法的区别?</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ex1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m1</span>(<span class="params">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ex2 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m2</span>(<span class="params">&#123;x, y&#125; = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数没有参数的情况</span></span><br><span class="line">m1() <span class="comment">// [0, 0]</span></span><br><span class="line">m2() <span class="comment">// [0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 和 y 都有值的情况</span></span><br><span class="line">m1(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;) <span class="comment">// [3, 8]</span></span><br><span class="line">m2(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;) <span class="comment">// [3, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 有值，y 无值的情况</span></span><br><span class="line">m1(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;) <span class="comment">// [3, 0]</span></span><br><span class="line">m2(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;) <span class="comment">// [3, undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 和 y 都无值的情况</span></span><br><span class="line">m1(&#123;&#125;) <span class="comment">// [0, 0];把&#123;&#125;赋给(x = 0,y = 0)</span></span><br><span class="line">m2(&#123;&#125;) <span class="comment">// [undefined, undefined];把&#123;&#125;赋给&#123;x,y&#125;,也就是把undefined, undefined赋给&#123;x,y&#125;</span></span><br><span class="line"></span><br><span class="line">m1(&#123;<span class="attr">z</span>: <span class="number">3</span>&#125;) <span class="comment">// [0, 0]</span></span><br><span class="line">m2(&#123;<span class="attr">z</span>: <span class="number">3</span>&#125;) <span class="comment">// [undefined, undefined]</span></span><br></pre></td></tr></table></figure>

<p>ex1：调用函数需要你传递一个对象，如果你没传对象就用默认值对象{}，默认值对象里面都是 undefined， 所以属性使用初始值</p>
<p>ex2：参数需要是一个对象，如果没传对象，就用默认值对象{ x: 0, y: 0 }如果传了对象，就使用你传递的对象</p>
<ol start="2">
<li>箭头函数</li>
</ol>
<p>箭头后面的内容，就相当于<code>return</code>的内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">v</span> =&gt;</span> v+<span class="number">1</span></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;<span class="keyword">return</span> v+<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">()</span> =&gt;</span> <span class="number">5</span>;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function">(<span class="params">num1, num2</span>) =&gt;</span> num1 + num2;<span class="comment">//适用于立刻返回,即把代码写成一行的情况</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组的平方</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.map(<span class="function"><span class="params">v</span>=&gt;</span>v*v)</span><br><span class="line">arr2 <span class="comment">//[1, 4, 9]</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>箭头函数里面的 this</li>
</ol>
<p>1.箭头函数会捕获其所在上下文的this值作为自己的this值,自己本身并没有this值.<br>2.箭头函数的this永远指向其上下文的this,任何方法都改变不了其指向,如call,bind,apply.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'id:'</span>, <span class="keyword">this</span>.id);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  等同于如下ES5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'id:'</span>, _this.id);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'jirengu'</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> people = &#123;name, age&#125; <span class="comment">//&#123;name:'jirengu', age:3&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = &#123;</span><br><span class="line">selector: <span class="string">'#app'</span>,</span><br><span class="line"><span class="comment">//函数简写</span></span><br><span class="line">init() &#123;</span><br><span class="line">&#125;,</span><br><span class="line">bind() &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">app.init()</span><br></pre></td></tr></table></figure>

<h1 id="类和继承"><a href="#类和继承" class="headerlink" title="类和继承"></a>类和继承</h1><ol>
<li>构造函数</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayHello() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">等价于</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(  <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">'hunger'</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h2 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h2><p>静态方法调用直接在类上进行，不能在类的实例上调用。</p>
<p>下面的例子说明了这几点:<br>静态方法如何在类上实现。<br>具有静态成员的类，可以被子类化 。<br>什么情况下静态方法可以调用，什么情况下不能调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tripple</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> tripple(n = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n * <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BiggerTripple</span> <span class="keyword">extends</span> <span class="title">Tripple</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> tripple(n) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.tripple(n) * <span class="keyword">super</span>.tripple(n);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Tripple.tripple());<span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(Tripple.tripple(<span class="number">6</span>));<span class="comment">// 18</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tp = <span class="keyword">new</span> Tripple();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(BiggerTripple.tripple(<span class="number">3</span>));<span class="comment">// 81（不会受父类实例化的影响）</span></span><br><span class="line"><span class="comment">//super继承父类的方法super.tripple(n) = 3n,BiggerTripple.tripple(n) = (3n)^2.当n=3,输出81</span></span><br><span class="line"><span class="built_in">console</span>.log(tp.tripple());<span class="comment">// 'tp.tripple 不是一个函数'.说明只能在类上实现.</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>继承</li>
</ol>
<p>js中并不存在类，<code>class</code>只是语法糖，本质是函数<br>class继承的核心在于使用<code>extends</code>表明继承自哪个父类，并在子类构造函数中必须调用<code>super</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayHello() &#123;</span><br><span class="line">      <span class="comment">//写的函数会直接放到原型上</span></span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age, score) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name, age); </span><br><span class="line">    <span class="keyword">this</span>.score = score;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayScore() &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(  <span class="string">`hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, i am <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old, i get <span class="subst">$&#123;<span class="keyword">this</span>.score&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><p>为什么使用模块化?</p>
<ol>
<li>解决命名冲突</li>
<li>提供复用性</li>
<li>提高代码可维护性</li>
</ol>
<p>写法1</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// profile.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> firstName = <span class="string">'Michael'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> lastName = <span class="string">'Jackson'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> year = <span class="number">1958</span>;</span><br><span class="line"><span class="comment">//useage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;firstName, lastName, year&#125; <span class="keyword">from</span> <span class="string">'./profile'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(firstName)</span><br></pre></td></tr></table></figure>

<p>写法2</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstName = <span class="string">'Michael'</span>;</span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">'Jackson'</span>;</span><br><span class="line"><span class="keyword">var</span> year = <span class="number">1958</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;firstName, lastName, year&#125;;</span><br><span class="line"><span class="comment">//useage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;firstName, lastName, year&#125; <span class="keyword">from</span> <span class="string">'./profile'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(firstName)</span><br></pre></td></tr></table></figure>

<p>写法3</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//helper.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getYear</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;getName, getYear&#125; <span class="keyword">from</span> <span class="string">'./helper'</span>;</span><br><span class="line">getName()</span><br></pre></td></tr></table></figure>

<p>写法4</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//helper.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getYear</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;getName, getYear&#125;</span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;getName, getYear&#125; <span class="keyword">from</span> <span class="string">'./helper'</span>;</span><br><span class="line">getName()</span><br></pre></td></tr></table></figure>

<p>写法5</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export-default.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// import-default.js</span></span><br><span class="line"><span class="keyword">import</span> getName <span class="keyword">from</span> <span class="string">'./export-default'</span></span><br><span class="line">getName()</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/01/Node-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/01/Node-js/" class="post-title-link" itemprop="url">Node.js</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-01 14:27:58" itemprop="dateCreated datePublished" datetime="2019-09-01T14:27:58+08:00">2019-09-01</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-12-03 10:29:50" itemprop="dateModified" datetime="2019-12-03T10:29:50+08:00">2019-12-03</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/" itemprop="url" rel="index"><span itemprop="name">后端</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a>node.js</h1><h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="简易版node-server"><a href="#简易版node-server" class="headerlink" title="简易版node-server"></a>简易版node-server</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js文件中引入http模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>) <span class="comment">//引入http模块</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">request,response</span>)</span>&#123;</span><br><span class="line">  response.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/plain; chartset=gbk"</span>) <span class="comment">//内容渲染形式:字符串.解码方式gbk</span></span><br><span class="line">  <span class="comment">//设置响应头</span></span><br><span class="line">  response.writeHead(<span class="number">200</span>,<span class="string">"ok"</span>) <span class="comment">//设置状态码</span></span><br><span class="line">  response.write(<span class="string">"hello"</span>)</span><br><span class="line">  response.end() <span class="comment">//结束</span></span><br><span class="line">&#125;)<span class="comment">//创建服务器</span></span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">9000</span>) <span class="comment">//启动服务器，监听9000端口</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"open http://localhost:9000"</span>)</span><br></pre></td></tr></table></figure>

<p>在终端中输入<code>node index.js</code>就启动服务器.</p>
<h2 id="简单版服务器"><a href="#简单版服务器" class="headerlink" title="简单版服务器"></a>简单版服务器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="comment">//http模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="comment">//fs模块读写文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建服务器</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(__dirname + <span class="string">'/static'</span> + req.url)</span><br><span class="line">  <span class="comment">//fs同步读取,路径由文件绝对路径+static+请求url拼接.使用二进制格式</span></span><br><span class="line">  <span class="keyword">var</span> fileContent = fs.readFileSync(__dirname + <span class="string">'/static'</span> + req.url, <span class="string">'binary'</span>)</span><br><span class="line">  res.write(fileContent, <span class="string">'binary'</span>)</span><br><span class="line">  res.end()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听8080端口</span></span><br><span class="line">server.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'visit localhost:8080'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><p>静态服务器.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>) <span class="comment">//引入http模块</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>) <span class="comment">//自动处理路径问题</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>) <span class="comment">//读写文件</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">"url"</span>) <span class="comment">//解析url</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">staticRoot</span>(<span class="params">staticPath, req, res</span>)</span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> pathObj = url.parse(req.url, <span class="literal">true</span>)    </span><br><span class="line">  <span class="comment">//url.parse是node.js方法，将一个URL字符串转换成对象并返回</span></span><br><span class="line">  <span class="built_in">console</span>.log(pathObj)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span>(pathObj.pathname === <span class="string">"/"</span>)&#123;</span><br><span class="line">    pathObj.pathname += <span class="string">"index.html"</span></span><br><span class="line"> &#125; <span class="comment">//不加后缀可以默认加后缀</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//请求文件的具体路径</span></span><br><span class="line"><span class="keyword">var</span> filePath = path.join(staticPath, pathObj.pathname)</span><br><span class="line"><span class="comment">//拼接文件地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//同步读取文件</span></span><br><span class="line"><span class="comment">// var fileContent = fs.readFlieSync(filePath,'binary')</span></span><br><span class="line"><span class="comment">// res.write(fileContent, 'binary')</span></span><br><span class="line"><span class="comment">// res.end()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//异步读取文件</span></span><br><span class="line">fs.readFile(filePath, <span class="string">"binary"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, fileContent</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//'binary'表示二进制格式</span></span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">     res.writeHead(<span class="number">404</span>, <span class="string">"not found"</span>)</span><br><span class="line">     res.end(<span class="string">"&lt;h1&gt;404 Not Found&lt;/h1&gt;"</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, <span class="string">"ok"</span>)</span><br><span class="line">    res.write(fileContent, <span class="string">"binary"</span>)</span><br><span class="line">    res.end()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"path.join(_dirname, "</span><span class="keyword">static</span><span class="string">")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var server = http.createServer(function(res,req)&#123;</span></span><br><span class="line"><span class="string">   staticRoot(path.join(__dirname, "</span><span class="keyword">static</span><span class="string">"), req, res) </span></span><br><span class="line"><span class="string">   //__dirname代表当前文件路径,join拼接上static路径</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">server.listen(8080)</span></span><br><span class="line"><span class="string">console.log("</span>visit http:<span class="comment">//localhost:8080")</span></span><br></pre></td></tr></table></figure>

<h2 id="mock数据"><a href="#mock数据" class="headerlink" title="mock数据"></a>mock数据</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//服务器配置</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//解析请求url</span></span><br><span class="line">  <span class="keyword">var</span> pathObj = url.parse(req.url, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span>(pathObj.pathname)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'/getWeather'</span>:</span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;))</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'user/123'</span>:</span><br><span class="line">    res.end(fs.readFileSync(__dirname + <span class="string">'/static/user.tpl'</span> ))</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    res.end(fs.readFileSync(__dirname + <span class="string">'static'</span> + req.url))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).listen(<span class="number">8080</span>)</span><br></pre></td></tr></table></figure>

<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><ol>
<li><code>__dirname</code>是什么</li>
</ol>
<p><code>__dirname</code>总是指向被执行文件的绝对路径.<br>如<code>/d1/d2/my.js</code>中的<code>__dirname</code>,他的值就是<code>/d1/d2</code>.</p>
<h1 id="常用API"><a href="#常用API" class="headerlink" title="常用API"></a>常用API</h1><h2 id="fs-readFile-path-options-callback-fs-writeFile-file-data-options-callback"><a href="#fs-readFile-path-options-callback-fs-writeFile-file-data-options-callback" class="headerlink" title="fs.readFile(path[,options],callback)/fs.writeFile(file,data[,options],callback)"></a>fs.readFile(path[,options],callback)/fs.writeFile(file,data[,options],callback)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)  <span class="comment">//引入fs模块</span></span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'flie.txt'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'error'</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(str)</span><br><span class="line">        <span class="comment">//要去掉字符串里的数字空格</span></span><br><span class="line">        <span class="keyword">const</span> strAfter = str.replace(<span class="regexp">/\d/gm</span>, <span class="string">''</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(strAfter)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//去掉数字后把strAfter写出来</span></span><br><span class="line">        fs.writeFile(<span class="string">'fileAfter.txt'</span>, strAfter, (err)=&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(err) <span class="keyword">throw</span> err; <span class="comment">//如果报错直接使用throw抛出</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'the file has been save!'</span>);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>将上面的去数字的方法封装成函数,单独写一个文件,并调用<br>创建<code>stringApi.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceDigit</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/\d/gm</span>, <span class="string">''</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.replaceDigit = replaceDigit </span><br><span class="line"><span class="comment">//把这个封装好的函数暴露出来可以使用了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//封装好后在上面的代码里就可以使用了</span></span><br><span class="line"><span class="comment">//先引入</span></span><br><span class="line"><span class="keyword">let</span> strApi = <span class="built_in">require</span>(<span class="string">'./stringApi'</span>) <span class="comment">//如果在同级目录下,直接使用相对路径引入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//然后将上面的代码const strAfter = str.replace(/\d/gm, '')替换成</span></span><br><span class="line"><span class="keyword">const</span> strAfter = strApi.replaceDigit(str)</span><br></pre></td></tr></table></figure>

<h1 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h1><p>如果需要一些功能,node.js自带的没有,可以去npm官网上找一些其他人发布的npm包.<br>找到之后,首先进行安装</p>
<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>记录保存模块依赖,当没有依赖时,比如下载其他人的项目里没有依赖,可以使用<code>npm.init</code>初始化,将package.json中记录的模块依赖全都下载下来,方便.</p>
<h2 id="npm切换源工具"><a href="#npm切换源工具" class="headerlink" title="npm切换源工具"></a>npm切换源工具</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm <span class="comment">//安装nrm工具</span></span><br><span class="line">nrm ls <span class="comment">//查看nrm支持的源的列表</span></span><br><span class="line">nrm use taobao <span class="comment">//使用淘宝的源</span></span><br><span class="line">nrm use npm <span class="comment">//切换回npm源</span></span><br></pre></td></tr></table></figure>

<h2 id="NPM-Script"><a href="#NPM-Script" class="headerlink" title="NPM Script"></a>NPM Script</h2><p>在package.json文件里有一个scripts对象,写入里面的命令可以比较方便快捷的执行.直接<code>npm xxx</code>就可以执行.而且会自动搜索路径,不用写相对路径.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"css:autoprefixer"</span>: <span class="string">"postcss -u autoprefixer -r dist/css/*"</span>,</span><br><span class="line">    <span class="string">"css:compress"</span>: <span class="string">"csso in.css --output out.css"</span>,</span><br><span class="line">    <span class="string">"js:lint"</span>: <span class="string">"eslint src/js"</span>,</span><br><span class="line">    <span class="string">"js:uglify"</span>: <span class="string">"mkdir -p dist/js &amp;&amp; uglifyjs src/js/*.js -m -o dist/js/app.js"</span>,</span><br><span class="line">    <span class="string">"image:imagemin"</span>: <span class="string">"app=imagemin-cli npm run check; imagemin src/images dist/images -p"</span>,</span><br><span class="line">    <span class="string">"server"</span>: <span class="string">"browser-sync start --server --files 'dist/css/*.css, dist/js/*.js'"</span>,</span><br><span class="line">    <span class="string">"watch"</span>: <span class="string">"onchange 'src/js/*.js' -- npm run css:compress"</span>,</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"npm run server"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run css:autoprefixer</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/01/前端工程化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/01/前端工程化/" class="post-title-link" itemprop="url">前端工程化</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-01 14:26:50" itemprop="dateCreated datePublished" datetime="2019-09-01T14:26:50+08:00">2019-09-01</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-30 11:30:07" itemprop="dateModified" datetime="2019-10-30T11:30:07+08:00">2019-10-30</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/前端工程化/" itemprop="url" rel="index"><span itemprop="name">前端工程化</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="模块化初探"><a href="#模块化初探" class="headerlink" title="模块化初探"></a>模块化初探</h1><h2 id="模块化系统的风格"><a href="#模块化系统的风格" class="headerlink" title="模块化系统的风格"></a>模块化系统的风格</h2><p>模块化的价值<br> 最主要的目的：</p>
<ul>
<li>解决命名冲突</li>
<li>依赖管理<br>其他价值:</li>
<li>提高代码可读性</li>
<li>代码解耦,提高复用性</li>
</ul>
<h3 id="lt-script-gt-标签风格"><a href="#lt-script-gt-标签风格" class="headerlink" title="&lt;script&gt;标签风格"></a><code>&lt;script&gt;</code>标签风格</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"module1.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script src=<span class="string">"module2.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script src=<span class="string">"module3.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>各个模块把接口暴露给全局对象,比如window.各个模块通过全局对象进行相互访问<br>出现的问题:</p>
<ol>
<li>全局对象的冲突</li>
<li>加载的顺序很重要</li>
<li>开发者需要解决模块的依赖问题</li>
<li>在大项目中模块非常多难以维护<h3 id="CommonJs-同步的require"><a href="#CommonJs-同步的require" class="headerlink" title="CommonJs: 同步的require"></a>CommonJs: 同步的require</h3>CommonJs 是 Node 独有的规范，浏览器中使用就需要用到 Browserify 解析了。</li>
</ol>
<p>使用同步的<code>require</code>方法来加载依赖和返回暴露的接口.一个模块可以通过<code>exports</code>对象添加属性,或者设置<code>module.exports</code>的值来描述暴露对象.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'moudle'</span>)</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'../file.js'</span>)</span><br><span class="line">exports.doStuff = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">moudle.exports = someValue</span><br></pre></td></tr></table></figure>

<p>优点: </p>
<ol>
<li>服务端代码可以被复用.</li>
<li>npm有大量的代码</li>
<li>使用方便</li>
</ol>
<p>缺点: </p>
<ol>
<li>阻塞调用无法在网络环境应用,网络请求是异步的</li>
<li>不能并行<code>require</code>多个模块</li>
</ol>
<h4 id="CommonJS规范"><a href="#CommonJS规范" class="headerlink" title="CommonJS规范"></a>CommonJS规范</h4><ol>
<li>在一个模块中,存在一个自由的变量”require”,它是一个函数。<br>这个”require”函数接收一个模块标识符。<br>“require”返回外部模块所输出的API。</li>
<li>在一个模块中,会存在一个名为”exports”的自由变量,它是一个对象,模块可以在执行的时候把自身的API加入到其中。</li>
<li>模块必须使用”exports”对象来做为输出的唯一表示。</li>
</ol>
<h3 id="AMD规范-异步的require"><a href="#AMD规范-异步的require" class="headerlink" title="AMD规范: 异步的require"></a>AMD规范: 异步的require</h3><p>AMD主要解决两个问题:</p>
<ol>
<li>多个js文件可能有依赖关系,被依赖的文件需要早于依赖它的文件加载到浏览器</li>
<li>js加载的时候浏览器会停止页面渲染,加载文件越多,页面失去响应时间越长</li>
</ol>
<h4 id="requireJS语法"><a href="#requireJS语法" class="headerlink" title="requireJS语法"></a>requireJS语法</h4><p>RequireJS 遵循 AMD 规范,用于解决命名冲突和文件依赖的问题.<br>requireJS定义了一个函数 define,它是全局变量,用来定义模块<br><code>define(id?, dependencies?, factory);</code></p>
<ol>
<li>id：可选参数,用来定义模块的标识,如果没有提供该参数,脚本文件名(去掉拓展名)</li>
<li>dependencies：是一个当前模块依赖的模块名称数组</li>
<li>factory：工厂方法,模块初始化要执行的函数或对象。如果为函数,它应该只被执行一次。如果是对象,此对象应该为模块的输出值</li>
</ol>
<p>在页面上使用require函数加载模块<br><code>require([dependencies], function(){});</code><br>require()函数接受两个参数:</p>
<ol>
<li>第一个参数是一个数组,表示所依赖的模块</li>
<li>第二个参数是一个回调函数,当前面指定的模块都加载成功后,它将被调用。加载的模块会以参数形式传入该函数,从而在回调函数内部就可以使用这些模块.</li>
</ol>
<p>require()函数在加载依赖的函数的时候是异步加载的,这样浏览器不会失去响应,它指定的回调函数,只有前面的模块都加载成功后,才会运行,解决了依赖性的问题。  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">'moudle'</span>, <span class="string">'../file'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">moudle, file</span>)</span>&#123; <span class="comment">/* ... */</span>&#125;)</span><br><span class="line">define(<span class="string">'moudle'</span>,[<span class="string">'dep1'</span>, <span class="string">'dep2'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">d1, d2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> someExportedValue</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><p>webpack是收把项目当作一个整体,通过一个给定的的主文件,webpack将从这个文件开始找到你的项目的所有依赖文件,使用loaders处理它们,最后打包成一个或多个浏览器可识别的js文件.</p>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><ol>
<li>新建一个文件夹,cd到它的目录下.执行<code>npm init -y</code>命令</li>
<li>执行<code>npm install --save--dev webpack</code>命令安装(也可以全局安装)</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/配置</span><br><span class="line">touch webpack.config.js</span><br><span class="line">vi  webpack.config.js</span><br><span class="line"><span class="comment">//在里面写以下内容</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">const path = require('path');</span></span><br><span class="line"><span class="comment">module.exports = &#123;</span></span><br><span class="line"><span class="comment">  entry: './src/index.js', //入口</span></span><br><span class="line"><span class="comment">  output: &#123;</span></span><br><span class="line"><span class="comment">    filename: 'bundle.js',</span></span><br><span class="line"><span class="comment">    path: path.resolve(__dirname, 'dist')</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125;;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建文件</span></span><br><span class="line">touch src/index.js</span><br><span class="line"></span><br><span class="line"><span class="comment">//运行webpack</span></span><br><span class="line">npx webpack  <span class="comment">//这时会多出dist目录,里面有bundle.js文件</span></span><br></pre></td></tr></table></figure>

<h1 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h1><h3 id="1-在index-js里写"><a href="#1-在index-js里写" class="headerlink" title="1.在index.js里写"></a>1.在index.js里写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//再运行webpack:</span></span><br><span class="line">npx webpack</span><br><span class="line"></span><br><span class="line"><span class="comment">//再看bundle.js,这时会多出来一行console.log(1)</span></span><br></pre></td></tr></table></figure>

<h3 id="2-安装babel-loader自动转换es6"><a href="#2-安装babel-loader自动转换es6" class="headerlink" title="2.安装babel-loader自动转换es6"></a>2.安装babel-loader自动转换es6</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装v6,命令行</span></span><br><span class="line">npm install babel-loader babel-core babel-preset-env webpack</span><br><span class="line"></span><br><span class="line"><span class="comment">//将这个复制到webpack的配置文件webpack.config.js里,加在output的下面</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">'env'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//加在output的下面,复制完后成这样</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">'env'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>运行npx webpack<br>若出现can’t find ‘…’或can’t resolve ‘…’的报错,则安装省略号里的东西npm i ‘省略号’<br>注意：若是Couldn’t find preset “env”,不要安装env,而是npm i babel-preset-env</p>
</blockquote>
<h3 id="3-使用babel"><a href="#3-使用babel" class="headerlink" title="3.使用babel"></a>3.使用babel</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当你在写index.js里写</span></span><br><span class="line"><span class="keyword">let</span> a=<span class="number">1</span></span><br><span class="line"><span class="comment">//它就会帮你自动转换成es5了</span></span><br></pre></td></tr></table></figure>

<h3 id="NPM-脚本-NPM-Scripts"><a href="#NPM-脚本-NPM-Scripts" class="headerlink" title="NPM 脚本(NPM Scripts)"></a>NPM 脚本(NPM Scripts)</h3><p>在package.json文件中写入npm脚本,就可以使用<code>npm run build</code>替代<code>npx</code>命令.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  &#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"webpack-demo"</span>,</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">    <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">    <span class="string">"scripts"</span>: &#123;</span><br><span class="line">      <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">+     <span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"keywords"</span>: [],</span><br><span class="line">    <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">    <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">      <span class="string">"webpack"</span>: <span class="string">"^4.0.1"</span>,</span><br><span class="line">      <span class="string">"webpack-cli"</span>: <span class="string">"^2.0.9"</span>,</span><br><span class="line">      <span class="string">"lodash"</span>: <span class="string">"^4.17.5"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="管理资源-css-图片之类"><a href="#管理资源-css-图片之类" class="headerlink" title="管理资源(css,图片之类)"></a>管理资源(css,图片之类)</h3><h4 id="加载CSS"><a href="#加载CSS" class="headerlink" title="加载CSS"></a>加载CSS</h4><ol>
<li>需要先安装style-laoder和css-loader</li>
</ol>
<p><code>npm install --save-dev style-loader css-loader</code></p>
<ol start="2">
<li>然后在<code>webpack.config.js</code>文件里添加规则</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">+   <span class="built_in">module</span>: &#123;</span><br><span class="line">+     rules: [</span><br><span class="line">+       &#123;</span><br><span class="line">+         test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">+         use: [</span><br><span class="line">+           <span class="string">'style-loader'</span>,</span><br><span class="line">+           <span class="string">'css-loader'</span></span><br><span class="line">+         ]</span><br><span class="line">+       &#125;</span><br><span class="line">+     ]</span><br><span class="line">+   &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>webpack 根据正则表达式,来确定应该查找哪些文件,并将其提供给指定的 loader。在这种情况下,以 .css 结尾的全部文件,都将被提供给 style-loader 和 css-loader。<br>  这使你可以在依赖于此样式的文件中<code>import &#39;./style.css&#39;</code>。现在,当该模块运行时,含有 CSS 字符串的<code>&lt;style&gt;</code>标签,将被插入到 html 文件的 <code>&lt;head&gt;</code>中。</p>
</blockquote>
<h4 id="加载图片"><a href="#加载图片" class="headerlink" title="加载图片"></a>加载图片</h4><ol>
<li>安装<code>npm install --save-dev file-loader</code>插件</li>
<li>配置<code>webpack.config.js</code>文件</li>
</ol>
<p>现在,当你 <code>import MyImage from &#39;./my-image.png&#39;</code>,该图像将被处理并添加到 output 目录,<br><em>并且</em> <code>MyImage</code> 变量将包含该图像在处理后的最终 url。当使用 css-loader 时,如上所示,<br>你的 CSS 中的<code>url(&#39;./my-image.png&#39;)</code> 会使用类似的过程去处理。loader 会识别这是一个本地文件,<br>并将 <code>&#39;./my-image.png&#39;</code>路径,替换为输出目录中图像的最终路径。<br>html-loader 以相同的方式处理 <code>&lt;img src=&quot;./my-image.png&quot; /&gt;</code>。</p>
<ol start="3">
<li>在src文件夹下创建icon.png.</li>
<li>修改<code>src/index.js</code>文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span>;</span><br><span class="line">  <span class="keyword">import</span> <span class="string">'./style.css'</span>;</span><br><span class="line">+ <span class="keyword">import</span> Icon <span class="keyword">from</span> <span class="string">'./icon.png'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">component</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lodash,现在由此脚本导入</span></span><br><span class="line">    element.innerHTML = _.join([<span class="string">'Hello'</span>, <span class="string">'webpack'</span>], <span class="string">' '</span>);</span><br><span class="line">    element.classList.add(<span class="string">'hello'</span>);</span><br><span class="line"></span><br><span class="line">+   <span class="comment">// 将图像添加到我们现有的 div。</span></span><br><span class="line">+   <span class="keyword">var</span> myIcon = <span class="keyword">new</span> Image();</span><br><span class="line">+   myIcon.src = Icon;</span><br><span class="line">+</span><br><span class="line">+   element.appendChild(myIcon);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(component());</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><code>src/style.css</code>中引入图片</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  .hello &#123;</span><br><span class="line">    color: red;</span><br><span class="line">+   background: url(<span class="string">'./icon.png'</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>重新构建<code>npm run build</code></li>
</ol>
<h1 id="Glup"><a href="#Glup" class="headerlink" title="Glup"></a>Glup</h1><p><strong>简介</strong><br>它是一款nodejs应用。<br>它是打造前端工作流的利器,打包、压缩、合并、git、远程操作…,<br>简单易用<br>无快不破<br>高质量的插件</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p> 安装gulp<br><code>npm install -g gulp</code><br>如果报<code>Error: EACCES, open &#39;/Users/xxx/xxx.lock</code>错误。<br>先执行：<code>sudo chown -R $(whoami) $HOME/.npm</code></p>
<p>如果使用npm安装插件太慢(被墙),<br>可执行 <code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code><br>先安装cnpm, 之后再安装插件时用cnpm安装<code>cnpm install gulp</code></p>
<ol start="2">
<li>安装各种插件<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">npm install --save gulp            <span class="comment">//本地使用gulp</span></span><br><span class="line">npm install --save gulp-imagemin   <span class="comment">//压缩图片</span></span><br><span class="line">npm install --save gulp-minify-css <span class="comment">//压缩css</span></span><br><span class="line">npm install --save gulp-ruby-sass  <span class="comment">//sass</span></span><br><span class="line">npm install --save gulp-jshint     <span class="comment">//js代码检测</span></span><br><span class="line">npm install --save gulp-uglify     <span class="comment">//js压缩</span></span><br><span class="line">npm install --save gulp-concat     <span class="comment">//文件合并</span></span><br><span class="line">npm install --save gulp-rename     <span class="comment">//文件重命名</span></span><br><span class="line">npm install --save png-sprite      <span class="comment">//png合并</span></span><br><span class="line">npm install --save gulp-htmlmin    <span class="comment">//压缩html</span></span><br><span class="line">npm install --save gulp-clean      <span class="comment">//清空文件夹</span></span><br><span class="line">npm install --save browser-sync    <span class="comment">//文件修改浏览器自动刷新</span></span><br><span class="line">npm install --save gulp-shell      <span class="comment">//执行shell命令</span></span><br><span class="line">npm install --save gulp-ssh        <span class="comment">//操作远程机器</span></span><br><span class="line">npm install --save run-sequence    <span class="comment">//task顺序执行</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>或者根据package.json 自动安装。把package.json拷贝到自己的工程目录下,进入目录,执行:<code>npm install</code></p>
<h1 id="语法gulp-API"><a href="#语法gulp-API" class="headerlink" title="语法gulp API"></a>语法gulp API</h1><h2 id="gulp-src-globs-options"><a href="#gulp-src-globs-options" class="headerlink" title="gulp.src(globs[,options])"></a>gulp.src(globs[,options])</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(<span class="string">'client/templates/*.jade'</span>)</span><br><span class="line">  .pipe(jade())</span><br><span class="line">  .pipe(minify()) <span class="comment">//压缩文件</span></span><br><span class="line">  .pipe(gulp.dest(<span class="string">'build/minified_templates'</span>));</span><br></pre></td></tr></table></figure>

<p>作用: 输出符合所提供的匹配模式或数组的文件.<br><strong>globs</strong> 类型: string或Array<br>所要读取的glob或者包含globs的数组.可以是地址<br><strong>options</strong> 类型:object<br>额外的选项参数</p>
<h2 id="gulp-dest-path-options"><a href="#gulp-dest-path-options" class="headerlink" title="gulp.dest(path[,options])"></a>gulp.dest(path[,options])</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(<span class="string">'./client/templates/*.jade'</span>)</span><br><span class="line">  .pipe(jade())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./build/templates'</span>))</span><br><span class="line">  .pipe(minify())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./build/minified_templates'</span>));</span><br></pre></td></tr></table></figure>

<p>文件被pipe进来,dest生成或者写入一个文件.<br><strong>path</strong><br>文件将被写入的路径(输出目录)。</p>
<h2 id="gulp-task-name-deps-fn"><a href="#gulp-task-name-deps-fn" class="headerlink" title="gulp.task(name[,deps],fn)"></a>gulp.task(name[,deps],fn)</h2><p>定义一个实现任务</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'somename'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//任务</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>name</strong><br>任务名字<br><strong>deps</strong> 类型: array<br>一个包含任务列表的数组,这些任务会在你当前运行任务之前完成.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'mytask'</span>, [<span class="string">'array'</span>, <span class="string">'of'</span>, <span class="string">'task'</span>, <span class="string">'names'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//任务</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>fn</strong><br>该函数定义任务所要执行的一些操作。通常来说,它会是这种形式：gulp.src().pipe(someplugin())。</p>
<h2 id="gulp-watch-glob-opts-tasks"><a href="#gulp-watch-glob-opts-tasks" class="headerlink" title="gulp.watch(glob[, opts], tasks)"></a>gulp.watch(glob[, opts], tasks)</h2><p>监视文件,并且可以在文件发生改动时候做一些事情。它总会返回一个 EventEmitter 来发射(emit) change 事件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> watcher = gulp.watch(<span class="string">'js/**/*.js'</span>, [<span class="string">'uglify'</span>,<span class="string">'reload'</span>]);</span><br><span class="line">watcher.on(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'File '</span> + event.path + <span class="string">' was '</span> + event.type + <span class="string">', running tasks...'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="gulp使用实例"><a href="#gulp使用实例" class="headerlink" title="gulp使用实例"></a>gulp使用实例</h1><h2 id="范例1-压缩合并"><a href="#范例1-压缩合并" class="headerlink" title="范例1. 压缩合并"></a>范例1. 压缩合并</h2><p>demo1目录结构如下。把demo1中的 index.html压缩,把src里面的less编译、合并、压缩、重命名、存储到dist。src里面的图片压缩、合并存储到dist。src里面的js做代码检查,压缩,合并,存储到dist。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">+ demo1</span><br><span class="line">    + dist</span><br><span class="line">        + css</span><br><span class="line">            - merge<span class="selector-class">.min</span><span class="selector-class">.css</span></span><br><span class="line">        + js</span><br><span class="line">            - merge<span class="selector-class">.min</span><span class="selector-class">.js</span></span><br><span class="line">        + imgs</span><br><span class="line">            - <span class="number">1</span>.png</span><br><span class="line">            - <span class="number">2</span>.png</span><br><span class="line">        - index.html</span><br><span class="line">    + src</span><br><span class="line">        + css</span><br><span class="line">            - <span class="selector-tag">a</span>.css</span><br><span class="line">            - <span class="selector-tag">b</span>.css</span><br><span class="line">        + js</span><br><span class="line">            - <span class="selector-tag">a</span>.js</span><br><span class="line">            - <span class="selector-tag">b</span>.js</span><br><span class="line">        + imgs</span><br><span class="line">            - <span class="number">1</span>.png</span><br><span class="line">            - <span class="number">2</span>.png</span><br><span class="line">        - index.html</span><br></pre></td></tr></table></figure>

<p>创建gulpfile.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入组件</span></span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>), <span class="comment">// CSS压缩</span></span><br><span class="line">    uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>), <span class="comment">// js压缩</span></span><br><span class="line">    concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>), <span class="comment">// 合并文件</span></span><br><span class="line">    rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>), <span class="comment">// 重命名</span></span><br><span class="line">    clean = <span class="built_in">require</span>(<span class="string">'gulp-clean'</span>), <span class="comment">//清空文件夹</span></span><br><span class="line">    minhtml = <span class="built_in">require</span>(<span class="string">'gulp-htmlmin'</span>), <span class="comment">//html压缩</span></span><br><span class="line">    jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>), <span class="comment">//js代码规范性检查</span></span><br><span class="line">    imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>); <span class="comment">//图片压缩</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/*.html'</span>)</span><br><span class="line">    .pipe(minhtml(&#123;<span class="attr">collapseWhitespace</span>: <span class="literal">true</span>&#125;)) <span class="comment">//html压缩</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">argument</span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/css/*.css'</span>)</span><br><span class="line">        .pipe(concat(<span class="string">'merge.css'</span>)) <span class="comment">// CSS压缩</span></span><br><span class="line">        .pipe(rename(&#123;</span><br><span class="line">            suffix: <span class="string">'.min'</span> <span class="comment">// 重命名</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(minifycss()) <span class="comment">// CSS压缩</span></span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dist/css/'</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">argument</span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/js/*.js'</span>)</span><br><span class="line">        .pipe(jshint())  <span class="comment">//js代码规范性检查</span></span><br><span class="line">        .pipe(jshint.reporter(<span class="string">'default'</span>))</span><br><span class="line">        .pipe(concat(<span class="string">'merge.js'</span>)) <span class="comment">// 合并文件</span></span><br><span class="line">        .pipe(rename(&#123;</span><br><span class="line">            suffix: <span class="string">'.min'</span>  <span class="comment">// 重命名</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(uglify())    <span class="comment">// js压缩</span></span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dist/js/'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'img'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">argument</span>)</span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/imgs/*'</span>)  </span><br><span class="line">        .pipe(imagemin())  <span class="comment">//图片压缩</span></span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dist/imgs'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'clear'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'dist/*'</span>,&#123;<span class="attr">read</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">        .pipe(clean());  <span class="comment">//清空文件夹</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, [<span class="string">'html'</span>, <span class="string">'css'</span>, <span class="string">'js'</span>, <span class="string">'img'</span>]);</span><br></pre></td></tr></table></figure>

<p>最后命令行<code>gulp build;</code><br>可实现src目录下的html压缩,css、js合并压缩,图片压缩,最后放入 dist目录下</p>
<h2 id="范例2-监控变动自动同步"><a href="#范例2-监控变动自动同步" class="headerlink" title="范例2. 监控变动自动同步"></a>范例2. 监控变动自动同步</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入组件</span></span><br><span class="line"><span class="keyword">var</span> browserSync = <span class="built_in">require</span>(<span class="string">'browser-sync'</span>).create();   <span class="comment">//用于浏览器自动刷新</span></span><br><span class="line"><span class="keyword">var</span> scp = <span class="built_in">require</span>(<span class="string">'gulp-scp2'</span>);                       <span class="comment">//用于scp到远程机器</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);             </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'reload'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    browserSync.reload();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'server'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    browserSync.init(&#123;</span><br><span class="line">        server: &#123;</span><br><span class="line">            baseDir: <span class="string">"./src"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    gulp.watch([<span class="string">'**/*.css'</span>, <span class="string">'**/*.js'</span>, <span class="string">'**/*.html'</span>], [<span class="string">'reload'</span>, <span class="string">'scp'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'scp'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'src/**/*'</span>)</span><br><span class="line">        .pipe(scp(&#123;</span><br><span class="line">            host: <span class="string">'121.40.201.213'</span>,</span><br><span class="line">            username: <span class="string">'root'</span>,</span><br><span class="line">            privateKey: fs.readFileSync(<span class="string">'/Users/wingo/.ssh/id_rsa'</span>),</span><br><span class="line">            dest: <span class="string">'/var/www/fe.jirengu.com'</span>,</span><br><span class="line">            watch: <span class="function"><span class="keyword">function</span>(<span class="params">client</span>) </span>&#123;</span><br><span class="line">                client.on(<span class="string">'write'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'write %s'</span>, o.destination);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;))</span><br><span class="line">        .on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>命令行执行:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gulp scp;  <span class="comment">// 可把本地开发环境代码拷贝到服务器</span></span><br><span class="line">gulp server; <span class="comment">//可在本地创建服务器,本地开发浏览器立刻刷新</span></span><br></pre></td></tr></table></figure>

<h2 id="范例3-监控项目文件变动-自动压缩、合并、打包、添加版本号"><a href="#范例3-监控项目文件变动-自动压缩、合并、打包、添加版本号" class="headerlink" title="范例3.  监控项目文件变动,自动压缩、合并、打包、添加版本号"></a>范例3.  监控项目文件变动,自动压缩、合并、打包、添加版本号</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br><span class="line"><span class="regexp">&lt;head&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!-- build:css css/m</span>erge.css --&gt;</span><br><span class="line">  &lt;link href=<span class="string">"css/a.css"</span> rel=<span class="string">"stylesheet"</span>&gt;</span><br><span class="line">  &lt;link href=<span class="string">"css/b.css"</span> rel=<span class="string">"stylesheet"</span>&gt;</span><br><span class="line">&lt;!-- endbuild --&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;p&gt;demo1-工程化手动版&lt;/</span>p&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- build:js js/merge.js --&gt;</span><br><span class="line">  &lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"js/a.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  &lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"js/b.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- endbuild --&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<p>设置gulpfile.js文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);    </span><br><span class="line"><span class="keyword">var</span> rev = <span class="built_in">require</span>(<span class="string">'gulp-rev'</span>);   <span class="comment">//添加版本号</span></span><br><span class="line"><span class="keyword">var</span> revReplace = <span class="built_in">require</span>(<span class="string">'gulp-rev-replace'</span>);  <span class="comment">//版本号替换</span></span><br><span class="line"><span class="keyword">var</span> useref = <span class="built_in">require</span>(<span class="string">'gulp-useref'</span>);   <span class="comment">//解析html资源定位</span></span><br><span class="line"><span class="keyword">var</span> filter = <span class="built_in">require</span>(<span class="string">'gulp-filter'</span>);   <span class="comment">//过滤数据</span></span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);  </span><br><span class="line"><span class="keyword">var</span> csso = <span class="built_in">require</span>(<span class="string">'gulp-csso'</span>);      <span class="comment">//css优化压缩</span></span><br><span class="line"><span class="keyword">var</span> clean = <span class="built_in">require</span>(<span class="string">'gulp-clean'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">"index"</span>, [<span class="string">'clear'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> jsFilter = filter(<span class="string">"**/*.js"</span>, &#123;<span class="attr">restore</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">  <span class="keyword">var</span> cssFilter = filter(<span class="string">"**/*.css"</span>, &#123;<span class="attr">restore</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> userefAssets = useref.assets();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">"src/index.html"</span>)</span><br><span class="line">    .pipe(userefAssets)      <span class="comment">// Concatenate with gulp-useref</span></span><br><span class="line">    .pipe(jsFilter)</span><br><span class="line">    .pipe(uglify())             <span class="comment">// Minify any javascript sources</span></span><br><span class="line">    .pipe(jsFilter.restore)</span><br><span class="line">    .pipe(cssFilter)</span><br><span class="line">    .pipe(csso())               <span class="comment">// Minify any CSS sources</span></span><br><span class="line">    .pipe(cssFilter.restore)</span><br><span class="line">    .pipe(rev())                <span class="comment">// Rename the concatenated files</span></span><br><span class="line">    .pipe(userefAssets.restore())</span><br><span class="line">    .pipe(useref())</span><br><span class="line">    .pipe(revReplace())         <span class="comment">// Substitute in new filenames</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'clear'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'dist/*'</span>,&#123;<span class="attr">read</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">        .pipe(clean());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="范例4-本地shell命令-远程shell-任务顺序执行…"><a href="#范例4-本地shell命令-远程shell-任务顺序执行…" class="headerlink" title="范例4. 本地shell命令, 远程shell, 任务顺序执行…"></a>范例4. 本地shell命令, 远程shell, 任务顺序执行…</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> shell = <span class="built_in">require</span>(<span class="string">'gulp-shell'</span>);</span><br><span class="line"><span class="keyword">var</span> runSequence = <span class="built_in">require</span>(<span class="string">'run-sequence'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> GulpSSH = <span class="built_in">require</span>(<span class="string">'gulp-ssh'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//shell操作, </span></span><br><span class="line">gulp.task(<span class="string">'git'</span>, shell.task([<span class="string">'git add .'</span>, <span class="string">'git commit -am "dd"'</span>, <span class="string">'git push -u origin dev'</span>]));</span><br><span class="line">gulp.task(<span class="string">'clear'</span>, shell.task([<span class="string">'find . -name ".DS_Store" -depth -exec rm &#123;&#125; \\;'</span>]));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//操作远程主机</span></span><br><span class="line"><span class="keyword">var</span> gulpSSH = <span class="keyword">new</span> GulpSSH(&#123;</span><br><span class="line">    ignoreErrors: <span class="literal">false</span>,</span><br><span class="line">    sshConfig: &#123;</span><br><span class="line">        host: <span class="string">'121.40.201.213'</span>,</span><br><span class="line">        port: <span class="number">22</span>,</span><br><span class="line">        username: <span class="string">'root'</span>,</span><br><span class="line">        privateKey: fs.readFileSync(<span class="string">'/Users/wingo/.ssh/id_rsa'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'remote'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulpSSH</span><br><span class="line">        .shell([<span class="string">'cd /var/www/fe.jirengu.com'</span>, <span class="string">'git pull origin dev'</span>, <span class="string">'rm -rf _runtime'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    runSequence(</span><br><span class="line">        <span class="string">'git'</span>,</span><br><span class="line">        <span class="string">'clear'</span>,</span><br><span class="line">        <span class="string">'remote'</span>,</span><br><span class="line">        callback</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.watch([<span class="string">'**/*.css'</span>, <span class="string">'**/*.js'</span>, <span class="string">'**/*.html'</span>, <span class="string">'**/*.php'</span>], [<span class="string">'build'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="webpack相关问题"><a href="#webpack相关问题" class="headerlink" title="webpack相关问题"></a>webpack相关问题</h1><ol>
<li><strong>webpack与grunt、gulp的不同</strong>？</li>
</ol>
<p>三者都是前端构建工具,grunt和gulp在早期比较流行,现在webpack相对来说比较主流,不过一些轻量化的任务还是会用gulp来处理,比如单独打包CSS文件等。</p>
<p>grunt和gulp是基于任务和流(Task、Stream)的。类似jQuery,找到一个(或一类)文件,对其做一系列链式操作,更新流上的数据, 整条链式操作构成了一个任务,多个任务就构成了整个web的构建流程。</p>
<p>webpack是基于入口的。webpack会自动地递归解析入口所需要加载的所有资源文件,然后用不同的Loader来处理不同的文件,用Plugin来扩展webpack功能。</p>
<p>所以总结一下： </p>
<p>从构建思路来说<br>gulp和grunt需要开发者将整个前端构建过程拆分成多个<code>Task</code>,并合理控制所有<code>Task</code>的调用关系<br>webpack需要开发者找到入口,并需要清楚对于不同的资源应该使用什么Loader做何种解析和加工</p>
<p>对于知识背景来说<br>gulp更像后端开发者的思路,需要对于整个流程了如指掌 webpack更倾向于前端开发者的思路</p>
<ol start="2">
<li><strong>与webpack类似的工具还有哪些？谈谈你为什么最终选择(或放弃)使用webpack？</strong></li>
</ol>
<p>同样是基于入口的打包工具还有以下几个主流的：<br>webpack<br>rollup<br>parcel<br>从应用场景上来看：</p>
<p>webpack适用于大型复杂的前端站点构建<br>rollup适用于基础库的打包,如vue、react<br>parcel适用于简单的实验性项目,他可以满足低门槛的快速看到效果<br>由于parcel在打包过程中给出的调试信息十分有限,所以一旦打包出错难以调试,所以不建议复杂的项目使用parcel</p>
<ol start="3">
<li><strong>有哪些常见的Loader？他们是解决什么问题的？</strong></li>
</ol>
<p><code>file-loader</code>：把文件输出到一个文件夹中,在代码中通过相对 URL 去引用输出的文件<br><code>url-loader</code>：和 file-loader 类似,但是能在文件很小的情况下以 base64 的方式把文件内容注入到代码中去<br><code>source-map-loader</code>：加载额外的 Source Map 文件,以方便断点调试<br><code>image-loader</code>：加载并且压缩图片文件<br><code>babel-loader</code>：把 ES6 转换成 ES5<br><code>css-loader</code>：加载 CSS,支持模块化、压缩、文件导入等特性<br><code>style-loader</code>：把 CSS 代码注入到 JavaScript 中,通过 DOM 操作去加载 CSS。<br><code>eslint-loader</code>：通过 ESLint 检查 JavaScript 代码</p>
<ol start="4">
<li><strong>有哪些常见的Plugin？他们是解决什么问题的？</strong></li>
</ol>
<p><code>define-plugin</code>：定义环境变量<br><code>commons-chunk-plugin</code>：提取公共代码<br><code>uglifyjs-webpack-plugin</code>：通过UglifyES压缩ES6代码</p>
<ol start="5">
<li><strong>Loader和Plugin的不同？</strong></li>
</ol>
<p><strong>不同的作用</strong><br>Loader直译为”加载器”。Webpack将一切文件视为模块,但是webpack原生是只能解析js文件,如果想将其他文件也打包的话,就会用到loader。 所以Loader的作用是<strong>让webpack拥有了加载和解析非JavaScript文件的能力</strong>。<br>Plugin直译为”插件”。Plugin可以扩展webpack的功能,让webpack具有更多的灵活性。 在 Webpack 运行的生命周期中会广播出许多事件,Plugin 可以监听这些事件,在合适的时机通过 Webpack 提供的 API 改变输出结果。<br><strong>不同的用法</strong><br>Loader在module.rules中配置,也就是它作为模块的解析规则而存在。 类型为数组,每一项都是一个Object,里面描述了对于什么类型的文件(test),使用什么加载(loader)和使用的参数(options)<br>Plugin在plugins中单独配置。 类型为数组,每一项是一个plugin的实例,参数都通过构造函数传入。</p>
<ol start="6">
<li><strong>webpack的构建流程是什么?从读取配置到输出文件这个过程尽量说全</strong></li>
</ol>
<p>Webpack 的运行流程是一个串行的过程,从启动到结束会依次执行以下流程：</p>
<p>初始化参数：从配置文件和 Shell 语句中读取与合并参数,得出最终的参数;<br>开始编译：用上一步得到的参数初始化 Compiler 对象,加载所有配置的插件,执行对象的 run 方法开始执行编译;<br>确定入口：根据配置中的 entry 找出所有的入口文件;<br>编译模块：从入口文件出发,调用所有配置的 Loader 对模块进行翻译,再找出该模块依赖的模块,再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理;<br>完成模块编译：在经过第4步使用 Loader 翻译完所有模块后,得到了每个模块被翻译后的最终内容以及它们之间的依赖关系;<br>输出资源：根据入口和模块之间的依赖关系,组装成一个个包含多个模块的 Chunk,再把每个 Chunk 转换成一个单独的文件加入到输出列表,这步是可以修改输出内容的最后机会;<br>输出完成：在确定好输出内容后,根据配置确定输出的路径和文件名,把文件内容写入到文件系统。<br>在以上过程中,Webpack 会在特定的时间点广播出特定的事件,插件在监听到感兴趣的事件后会执行特定的逻辑,并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</p>
<ol start="7">
<li><strong>是否写过Loader和Plugin？描述一下编写loader或plugin的思路？</strong></li>
</ol>
<p>Loader像一个”翻译官”把读到的源文件内容转义成新的文件内容,并且每个Loader通过链式操作,将源文件一步步翻译成想要的样子。</p>
<p>编写Loader时要遵循单一原则,每个Loader只做一种”转义”工作。 每个Loader的拿到的是源文件内容(source),可以通过返回值的方式将处理后的内容输出,也可以调用this.callback()方法,将内容返回给webpack。 还可以通过 this.async()生成一个callback函数,再用这个callback将处理后的内容输出出去。 此外webpack还为开发者准备了开发loader的工具函数集——loader-utils。</p>
<p>相对于Loader而言,Plugin的编写就灵活了许多。 webpack在运行的生命周期中会广播出许多事件,Plugin 可以监听这些事件,在合适的时机通过 Webpack 提供的 API 改变输出结果。</p>
<ol start="8">
<li><strong>webpack的热更新是如何做到的？说明其原理？</strong></li>
</ol>
<p>webpack的热更新又称热替换(Hot Module Replacement),缩写为HMR。 这个机制可以做到不用刷新浏览器而将新变更的模块替换掉旧的模块。</p>
<p><strong>原理：</strong><br><img src="https://i.loli.net/2019/09/20/vY3hdHTJVUNgtjo.jpg" alt="9m5z9odoe6.jpeg"><br>首先要知道server端和client端都做了处理工作</p>
<p><strong>第一步</strong>,在 webpack 的 watch 模式下,文件系统中某一个文件发生修改,webpack 监听到文件变化,根据配置文件对模块重新编译打包,并将打包后的代码通过简单的 JavaScript 对象保存在内存中。<br><strong>第二步</strong>是 webpack-dev-server 和 webpack 之间的接口交互,而在这一步,主要是 dev-server 的中间件 webpack-dev-middleware 和 webpack 之间的交互,webpack-dev-middleware 调用 webpack 暴露的 API对代码变化进行监控,并且告诉 webpack,将代码打包到内存中。<br><strong>第三步</strong>是 webpack-dev-server 对文件变化的一个监控,这一步不同于第一步,并不是监控代码变化重新打包。当我们在配置文件中配置了devServer.watchContentBase 为 true 的时候,Server 会监听这些配置文件夹中静态文件的变化,变化后会通知浏览器端对应用进行 live reload。注意,这儿是浏览器刷新,和 HMR 是两个概念。<br><strong>第四步</strong>也是 webpack-dev-server 代码的工作,该步骤主要是通过 sockjs(webpack-dev-server 的依赖)在浏览器端和服务端之间建立一个 websocket 长连接,将 webpack 编译打包的各个阶段的状态信息告知浏览器端,同时也包括第三步中 Server 监听静态文件变化的信息。浏览器端根据这些 socket 消息进行不同的操作。当然服务端传递的最主要信息还是新模块的 hash 值,后面的步骤根据这一 hash 值来进行模块热替换。<br>webpack-dev-server/client 端并不能够请求更新的代码,也不会执行热更模块操作,而把这些工作又交回给了 webpack,webpack/hot/dev-server 的工作就是根据 webpack-dev-server/client 传给它的信息以及 dev-server 的配置决定是刷新浏览器呢还是进行模块热更新。当然如果仅仅是刷新浏览器,也就没有后面那些步骤了。<br>HotModuleReplacement.runtime 是客户端 HMR 的中枢,它接收到上一步传递给他的新模块的 hash 值,它通过 JsonpMainTemplate.runtime 向 server 端发送 Ajax 请求,服务端返回一个 json,该 json 包含了所有要更新的模块的 hash 值,获取到更新列表后,该模块再次通过 jsonp 请求,获取到最新的模块代码。这就是上图中 7、8、9 步骤。<br>而第 10 步是决定 HMR 成功与否的关键步骤,在该步骤中,HotModulePlugin 将会对新旧模块进行对比,决定是否更新模块,在决定更新模块后,检查模块之间的依赖关系,更新模块的同时更新模块间的依赖引用。<br>最后一步,当 HMR 失败后,回退到 live reload 操作,也就是进行浏览器刷新来获取最新打包代码。</p>
<ol start="9">
<li><strong>如何利用webpack来优化前端性能？(提高性能和体验)</strong></li>
</ol>
<p>用webpack优化前端性能是指优化webpack的输出结果,让打包的最终结果在浏览器运行快速高效。</p>
<p>压缩代码。删除多余的代码、注释、简化代码的写法等等方式。可以利用webpack的UglifyJsPlugin和ParallelUglifyPlugin来压缩JS文件, 利用cssnano(css-loader?minimize)来压缩css<br>利用CDN加速。在构建过程中,将引用的静态资源路径修改为CDN上对应的路径。可以利用webpack对于output参数和各loader的publicPath参数来修改资源路径<br>删除死代码(Tree Shaking)。将代码中永远不会走到的片段删除掉。可以通过在启动webpack时追加参数–optimize-minimize来实现<br>提取公共代码。</p>
<ol start="10">
<li><strong>如何提高webpack的构建速度？</strong></li>
</ol>
<p>多入口情况下,使用CommonsChunkPlugin来提取公共代码<br>通过externals配置来提取常用库<br>利用DllPlugin和DllReferencePlugin预编译资源模块 通过DllPlugin来对那些我们引用但是绝对不会修改的npm包来进行预编译,再通过DllReferencePlugin将预编译的模块加载进来。<br>使用Happypack 实现多线程加速编译<br>使用webpack-uglify-parallel来提升uglifyPlugin的压缩速度。 原理上webpack-uglify-parallel采用了多核并行压缩来提升压缩速度<br>使用Tree-shaking和Scope Hoisting来剔除多余代码</p>
<ol start="11">
<li><strong>怎么配置单页应用？怎么配置多页应用?</strong></li>
</ol>
<p>单页应用可以理解为webpack的标准模式,直接在entry中指定单页应用的入口即可,这里不再赘述</p>
<p>多页应用的话,可以使用webpack的 AutoWebPlugin来完成简单自动化的构建,但是前提是项目的目录结构必须遵守他预设的规范。 多页应用中要注意的是：</p>
<p>每个页面都有公共的代码,可以将这些代码抽离出来,避免重复的加载。比如,每个页面都引用了同一套css样式表<br>随着业务的不断扩展,页面可能会不断的追加,所以一定要让入口的配置足够灵活,避免每次添加新页面还需要修改构建配置</p>
<ol start="12">
<li><strong>npm打包时需要注意哪些？如何利用webpack来更好的构建？</strong></li>
</ol>
<p>Npm是目前最大的 JavaScript 模块仓库,里面有来自全世界开发者上传的可复用模块。你可能只是JS模块的使用者,但是有些情况你也会去选择上传自己开发的模块。 关于NPM模块上传的方法可以去官网上进行学习,这里只讲解如何利用webpack来构建。</p>
<p>NPM模块需要注意以下问题：</p>
<p>要支持CommonJS模块化规范,所以要求打包后的最后结果也遵守该规则。<br>Npm模块使用者的环境是不确定的,很有可能并不支持ES6,所以打包的最后结果应该是采用ES5编写的。并且如果ES5是经过转换的,请最好连同SourceMap一同上传。<br>Npm包大小应该是尽量小(有些仓库会限制包大小)<br>发布的模块不能将依赖的模块也一同打包,应该让用户选择性的去自行安装。这样可以避免模块应用者再次打包时出现底层模块被重复打包的情况。<br>UI组件类的模块应该将依赖的其它资源文件,例如.css文件也需要包含在发布的模块里。<br>基于以上需要注意的问题,我们可以对于webpack配置做以下扩展和优化：</p>
<p>CommonJS模块化规范的解决方案：<br>设置<code>output.libraryTarget=&#39;commonjs2&#39;</code>使输出的代码符合CommonJS2 模块化规范,以供给其它模块导入使用<br>输出ES5代码的解决方案：<br>使用babel-loader把 ES6 代码转换成 ES5 的代码。再通过开启<code>devtool: &#39;source-map&#39;</code>输出SourceMap以发布调试。<br>Npm包大小尽量小的解决方案：<br>Babel 在把 ES6 代码转换成 ES5 代码时会注入一些辅助函数,最终导致每个输出的文件中都包含这段辅助函数的代码,造成了代码的冗余。解决方法是修改.babelrc文件,为其加入transform-runtime插件<br>不能将依赖模块打包到NPM模块中的解决方案：<br>使用externals配置项来告诉webpack哪些模块不需要打包。<br>对于依赖的资源文件打包的解决方案：通过css-loader和extract-text-webpack-plugin来实现,配置如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="comment">//增加对CSS文件的支持</span></span><br><span class="line">          test: <span class="regexp">/\.css/</span>,</span><br><span class="line">          <span class="comment">//提取出 Chunk 中的CSS代码到单独的文件中</span></span><br><span class="line">          use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">              use: [<span class="string">'css-loader'</span>]</span><br><span class="line">          &#125;),</span><br><span class="line">        &#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">    <span class="keyword">new</span> ExtractTextPlugin( &#123;</span><br><span class="line">      <span class="comment">//输出的CSS文件名称</span></span><br><span class="line">      filename: <span class="string">'index.css'</span>,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<ol start="13">
<li><strong>如何在vue项目中实现按需加载？</strong></li>
</ol>
<p><strong>Vue UI组件库的按需加载</strong>:<br> 为了快速开发前端项目,经常会引入现成的UI组件库如ElementUI、iView等,但是他们的体积和他们所提供的功能一样,是很庞大的。 而通常情况下,我们仅仅需要少量的几个组件就足够了,但是我们却将庞大的组件库打包到我们的源码中,造成了不必要的开销。</p>
<p>不过很多组件库已经提供了现成的解决方案,如Element出品的babel-plugin-component和AntDesign出品的babel-plugin-import 安装以上插件后,在.babelrc配置中或babel-loader的参数中进行设置,即可实现组件按需加载了。</p>
<p><strong>单页应用的按需加载</strong><br>现在很多前端项目都是通过单页应用的方式开发的,但是随着业务的不断扩展,会面临一个严峻的问题——首次加载的代码量会越来越多,影响用户的体验。</p>
<p>通过<code>import(*)</code>语句来控制加载时机,webpack内置了对于<code>import(*)</code>的解析,会将<code>import(*)</code>中引入的模块作为一个新的入口在生成一个chunk。 当代码执行到<code>import(*)</code>语句时,会去加载Chunk对应生成的文件。<code>import()</code>会返回一个Promise对象,所以为了让浏览器支持,需要事先注入<code>Promise polyfill</code>.</p>
<h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><p>nginx是一个反向代理服务器.客户端向服务端发送请求,可以配置一个nginx代理服务器.<br>反向代理<br>代理服务器负责接收请求,转发给内部的服务器.从颞部服务器得到响应返回给客户端.<br>反向代理服务器为服务端工作.对服务端是透明的,对客户端不透明.</p>
<h2 id="nginx的作用"><a href="#nginx的作用" class="headerlink" title="nginx的作用"></a>nginx的作用</h2><p>解决跨域<br>请求过滤<br>负载均衡<br>配置gzip<br>静态资源服务器</p>
<h3 id="解决跨域"><a href="#解决跨域" class="headerlink" title="解决跨域"></a>解决跨域</h3><p>在server中配置一个server-name,和客户端同域名<br>在Location中拦截向客户端域名发送的请求,并且请求代理回服务器.</p>
<h3 id="请求过滤"><a href="#请求过滤" class="headerlink" title="请求过滤"></a>请求过滤</h3><p>在Location中过滤相应的状态码或者url,或者请求类型</p>
<h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><p>通过配置upstream指定后端服务器的地址列表<br>在server中拦截请求,并将请求转发到upstream的后端服务器列表里.</p>
<h4 id="策略"><a href="#策略" class="headerlink" title="策略"></a>策略</h4><p>默认采用轮训的策略,缺点是一台服务器压力过大时,会影响其他服务器.</p>
<p>最小连接数策略,优先分配给连接数最少的服务器<br>least_connt<br>最快响应时间策略,优先分配给响应时间最短的服务器<br>fair</p>
<h2 id="静态资源服务器"><a href="#静态资源服务器" class="headerlink" title="静态资源服务器"></a>静态资源服务器</h2><p>在Location中配置,匹配比如说图片为结尾的请求,转发到本地路径.设置root指定路径.</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/27/JS进阶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/27/JS进阶/" class="post-title-link" itemprop="url">JS进阶</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-27 19:52:10" itemprop="dateCreated datePublished" datetime="2019-08-27T19:52:10+08:00">2019-08-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-25 16:05:44" itemprop="dateModified" datetime="2019-11-25T16:05:44+08:00">2019-11-25</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/JS进阶/" itemprop="url" rel="index"><span itemprop="name">JS进阶</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="构造对象"><a href="#构造对象" class="headerlink" title="构造对象"></a>构造对象</h1><h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><p>new 运算符接受一个函数 F 及其参数: new F(arguments…).这个一过程分为:</p>
<ol>
<li>创建类的实例.这步是把一个空的对象的 proto 属性设置为 F.prototype.</li>
<li>初始化实例.函数 F 被传入参数并调用.关键字 this 被设定为该实例.</li>
<li>返回实例.</li>
</ol>
<p>对于实例对象来说，都是通过 new 产生的，无论是<code>function Foo()</code>还是<code>let a = { b : 1 }</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p1 = <span class="keyword">new</span> person(<span class="string">"tom"</span>, <span class="number">12</span>);</span><br></pre></td></tr></table></figure>

<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><p>instanceof 是一个操作符,可以判断<strong>对象</strong>是否为某个类型的实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p1 <span class="keyword">instanceof</span> person; <span class="comment">//true,说明p1是由person创造的</span></span><br><span class="line">p1 <span class="keyword">instanceof</span> <span class="built_in">Object</span>; <span class="comment">//true,</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">instanceof</span> <span class="built_in">Number</span>; <span class="comment">//false,instanceof判断的是对象</span></span><br></pre></td></tr></table></figure>

<h1 id="原型与原型链"><a href="#原型与原型链" class="headerlink" title="原型与原型链"></a>原型与原型链</h1><ol>
<li>当<code>new</code>一个函数的时候会创建一个对象,<code>函数.prototype</code>等于<code>被创建对象.__proto__</code></li>
<li>一切函数都是由 Function 这个函数创建的,所以<code>Function.prototye === 被创建函数.__proto__</code></li>
<li>一切函数的原型对象都是由<code>Object</code>这个函数创建的,所以<code>Object.prototype === 一切函数.prototype.__proto__</code></li>
</ol>
<blockquote>
<p><code>__proto__</code>把对象和原型连接起来，形成原型链</p>
</blockquote>
<h1 id="this"><a href="#this" class="headerlink" title="this"></a>this</h1><p>在函数被直接调用时<code>this</code>绑定到全局对象.即 <code>window</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//指向window</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//指向window</span></span><br><span class="line">&#125;</span><br><span class="line">fn1(); <span class="comment">//相当于window.fn1()</span></span><br></pre></td></tr></table></figure>

<h2 id="内部函数"><a href="#内部函数" class="headerlink" title="内部函数"></a>内部函数</h2><p>函数嵌套产生的内部函数的<code>this</code>不是他的父函数,仍然是全局,window</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn0</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  fn();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn0();</span><br></pre></td></tr></table></figure>

<h2 id="setTimeOut-和-setInterval"><a href="#setTimeOut-和-setInterval" class="headerlink" title="setTimeOut()和 setInterval()"></a>setTimeOut()和 setInterval()</h2><p>这两个函数执行的函数 this 也是全局</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(</span><br><span class="line">  <span class="string">"click"</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;, <span class="number">200</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h1 id="DOM-对象绑定事件"><a href="#DOM-对象绑定事件" class="headerlink" title="DOM 对象绑定事件"></a>DOM 对象绑定事件</h1><p>在事件处理程序中 this 代表事件源 DOM 对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(</span><br><span class="line">  <span class="string">"click"</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//指向dom对象</span></span><br><span class="line">    <span class="keyword">var</span> _document = <span class="keyword">this</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//指向window</span></span><br><span class="line">      <span class="built_in">console</span>.log(_document);</span><br><span class="line">    &#125;, <span class="number">200</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="Function-prototype-bind"><a href="#Function-prototype-bind" class="headerlink" title="Function.prototype.bind()"></a>Function.prototype.bind()</h2><p>bind 改变 this 的指向.返回一个新函数,并使函数内部的 this 为传入的第一个参数,<strong>并不执行</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn3 = obj1.fn.bind(obj1);</span><br><span class="line">fn3();</span><br></pre></td></tr></table></figure>

<h2 id="使用-call-和-apply-设置-this"><a href="#使用-call-和-apply-设置-this" class="headerlink" title="使用 call 和 apply 设置 this"></a>使用 call 和 apply 设置 this</h2><p>call,apply 调用一个函数,传入函数执行上下文及其参数,并<strong>立即执行</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fn.call(context,param1,param2...)<span class="comment">//接受参数列表</span></span><br><span class="line">fn.apply(context,paramArray)<span class="comment">//接收参数数组</span></span><br></pre></td></tr></table></figure>

<p>第一个参数都是希望设置的 this 对象<br>举例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现一个函数可以遍历传入的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//arguments.forEach无法执行,因为arguments不是数组,使用call将forEach的this指向arguments,使之可以遍历</span></span><br><span class="line">  <span class="built_in">Array</span>.prototype.forEach.call(<span class="built_in">arguments</span>, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">6</span>); <span class="comment">//函数就可以遍历了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">//arguments.forEach无法执行,因为arguments不是数组,使用call将forEach的this指向arguments,使之可以遍历</span></span><br><span class="line">  <span class="built_in">Array</span>.prototype.forEach.call(<span class="built_in">arguments</span>, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> (result += value);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">6</span>); <span class="comment">//函数就可以将传入值相加了</span></span><br></pre></td></tr></table></figure>

<h2 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h2><ol>
<li>在函数调用时，会自动在该函数内部生成一个名为 arguments 的隐藏对象</li>
<li>该对象类似于数组，可以使用<code>[]</code>运算符获取函数调用时传递的实参</li>
<li>只有函数被调用时，arguments 对象才会创建，未调用时其值为 null</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn5</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">  name = <span class="string">"XXX"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="built_in">arguments</span>[<span class="number">1</span>] = <span class="number">30</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line">fn5(<span class="string">"Byron"</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<h2 id="研究-this"><a href="#研究-this" class="headerlink" title="研究 this"></a>研究 this</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  foo: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = obj.foo;</span><br><span class="line">obj.foo(); <span class="comment">// 打印出的 this 是 obj</span></span><br><span class="line">bar(); <span class="comment">// 打印出的 this 是 window</span></span><br></pre></td></tr></table></figure>

<p>实际上的正常调用方式<br><code>func.call(context, p1, p2)</code><br>其他简化方式都可以转化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func(p1, p2) 等价于</span><br><span class="line">func.call(<span class="literal">undefined</span>, p1, p2)</span><br><span class="line"></span><br><span class="line">obj.child.method(p1, p2) 等价于</span><br><span class="line">obj.child.method.call(obj.child, p1, p2)</span><br></pre></td></tr></table></figure>

<p>this，就是上面代码中的 context。就这么简单。</p>
<p>this 是你 call 一个函数时传的 context，由于你从来不用 call 形式的函数调用，所以你一直不知道。</p>
<blockquote>
<p>浏览器规则:如果你传的 context 就 null 或者 undefined，那么 window 对象就是默认的 context（严格模式下默认 context 是 undefined）</p>
</blockquote>
<p>上面的代码就解释的通了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  foo: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = obj.foo;</span><br><span class="line">obj.foo(); <span class="comment">// 转换为 obj.foo.call(obj)，this 就是 obj</span></span><br><span class="line">bar();</span><br><span class="line"><span class="comment">// 转换为 bar.call()</span></span><br><span class="line"><span class="comment">// 由于没有传 context</span></span><br><span class="line"><span class="comment">// 所以 this 就是 undefined</span></span><br><span class="line"><span class="comment">// 最后浏览器给你一个默认的 this —— window 对象</span></span><br></pre></td></tr></table></figure>

<h3 id="Event-Handler-中的-this"><a href="#Event-Handler-中的-this" class="headerlink" title="Event Handler 中的 this"></a>Event Handler 中的 this</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// 请问这里的 this 是什么</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当使用 addEventListener() 为一个元素注册事件的时候，句柄里的 this 值是该元素的引用。其与传递给句柄的 event 参数的 currentTarget 属性的值一样。</p>
</blockquote>
<h3 id="jQuery-Event-Handler-中的-this"><a href="#jQuery-Event-Handler-中的-this" class="headerlink" title="jQuery Event Handler 中的 this"></a>jQuery Event Handler 中的 this</h3><p>那么下面代码中的 this 是什么呢：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ul.on(<span class="string">"click"</span>, <span class="string">"li"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当 jQuery 的调用处理程序时，this 关键字指向的是当前正在执行事件的元素。对于直接事件而言，this 代表绑定事件的元素。对于代理事件而言，this 则代表了与 selector 相匹配的元素。(注意，如果事件是从后代元素冒泡上来的话，那么 this 就有可能不等于 event.target。)若要使用 jQuery 的相关方法，可以根据当前元素创建一个 jQuery 对象，即使用 $(this)。</p>
</blockquote>
<h3 id="语法"><a href="#语法" class="headerlink" title="[]语法"></a>[]语法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [fn, fn2];</span><br><span class="line">arr[<span class="number">0</span>](); <span class="comment">// 这里面的 this 又是什么呢？</span></span><br></pre></td></tr></table></figure>

<p>我们可以把 arr0 想象为 arr.0( )，虽然后者的语法错了，但是形式与转换代码里的 obj.child.method(p1, p2) 对应上了，于是就可以愉快的转换了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">         arr[<span class="number">0</span>]()</span><br><span class="line">假想为    arr<span class="number">.0</span>()</span><br><span class="line">然后转换为 arr<span class="number">.0</span>.call(arr)</span><br><span class="line">那么里面的 <span class="keyword">this</span> 就是 arr 了</span><br></pre></td></tr></table></figure>

<h2 id="call、apply-、函数执行的本质"><a href="#call、apply-、函数执行的本质" class="headerlink" title="call、apply 、函数执行的本质"></a>call、apply 、函数执行的本质</h2><p>当我们执行一个函数，以下几种调用方式等价</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">fn.call(<span class="literal">undefined</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">fn.apply(<span class="literal">undefined</span>, [<span class="number">1</span>, <span class="number">2</span>]);</span><br></pre></td></tr></table></figure>

<p>在严格模式下， fn 里的 this 就是 call 的第一个参数，也就是 undefined。<br>在非严格模式下(不加”use strict”)， call 传递的第一个参数如果是 undefined 或者 null， 那 this 会自动替换为 Window 对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  fn: <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  child: &#123;</span><br><span class="line">    fn2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.fn(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">obj.fn.call(obj, <span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 所以 this 是 obj</span></span><br><span class="line">obj.fn.apply(obj, [<span class="number">1</span>, <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">obj.child.fn2();</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">obj.child.fn2.call(obj.chid); <span class="comment">// 所以 this 是 obj.child</span></span><br></pre></td></tr></table></figure>

<h2 id="箭头函数中的-this"><a href="#箭头函数中的-this" class="headerlink" title="箭头函数中的 this"></a>箭头函数中的 this</h2><ol>
<li>箭头函数会捕获其所在上下文的this值作为自己的this值,自己本身并没有this值.</li>
<li>箭头函数的this永远指向其上下文的this,任何方法都改变不了其指向,如call,bind,apply.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = &#123;</span><br><span class="line">  fn1: <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//app</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn2(a) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//app</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn3: <span class="function"><span class="params">a</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//window</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">app.fn2.call(app);</span><br><span class="line">app.fn3.call(它上下文的<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>

<p>箭头函数的复杂情况示例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = &#123;</span><br><span class="line">  fn1() &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;, <span class="number">10</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  fn2() &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  fn3() &#123;</span><br><span class="line">    setTimeout(</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">      &#125;.bind(<span class="keyword">this</span>),</span><br><span class="line">      <span class="number">30</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  fn4: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;, <span class="number">40</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">app.fn1();</span><br><span class="line">app.fn2();</span><br><span class="line">app.fn3();</span><br><span class="line">app.fn4();</span><br><span class="line"></span><br><span class="line">以上代码相当于;</span><br><span class="line"><span class="keyword">var</span> app = &#123;</span><br><span class="line">  fn1() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//过10ms后执行</span></span><br><span class="line">    <span class="comment">//fn.call(undefined),所以输出window</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn2() &#123;</span><br><span class="line">    <span class="comment">//过20ms执行箭头函数</span></span><br><span class="line">    <span class="comment">//箭头函数里没有资格有自己的this,借用setTimeout外面的this,也就是app</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn3() &#123;</span><br><span class="line">    <span class="comment">//创建了一个新函数,这个新函数绑定了外面的this,也就是app</span></span><br><span class="line">    <span class="comment">//20ms后执行新函数,输出this,也就是刚刚绑定的app</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn4: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//过40ms执行箭头函数</span></span><br><span class="line">    <span class="comment">//箭头函数里没有资格有自己的this,借用setTimeout外面的this</span></span><br><span class="line">    <span class="comment">//setTimeout所在的fn4也是箭头函数,没资格拥有自己的this,借用外面的this,也就是window</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="函数的执行环境"><a href="#函数的执行环境" class="headerlink" title="函数的执行环境"></a>函数的执行环境</h1><p>JavaScript 中的函数既可以被当作普通函数执行，也可以作为对象的方法执行，这是导致 this 含义如此丰富的主要原因</p>
<p>一个函数被执行时，会创建一个执行环境（ExecutionContext），函数的所有的行为均发生在此执行环境中，构建该执行环境时，JavaScript 首先会创建 arguments 变量，其中包含调用函数时传入的参数</p>
<p>接下来创建作用域链，然后初始化变量。首先初始化函数的形参表，值为 arguments 变量中对应的值，如果 arguments 变量中没有对应值，则该形参初始化为 undefined。</p>
<p>如果该函数中含有内部函数，则初始化这些内部函数。如果没有，继续初始化该函数内定义的局部变量，需要注意的是此时这些变量初始化为 undefined，其赋值操作在执行环境（ExecutionContext）创建成功后，函数执行时才会执行，这点对于我们理解 JavaScript 中的变量作用域非常重要，最后为 this 变量赋值，会根据函数调用方式的不同，赋给 this 全局对象，当前对象等</p>
<p>至此函数的执行环境（ExecutionContext）创建成功，函数开始逐行执行，所需变量均从之前构建好的执行环境（ExecutionContext）中读取.</p>
<blockquote>
<p>每个执行上下文中都有三个重要的属性</p>
</blockquote>
<ul>
<li>变量对象（VO），包含变量、函数声明和函数的形参，该属性只能在全局上下文中访问</li>
<li>作用域链（JS采用词法作用域，也就是说变量的作用域是在定义时就决定了）</li>
<li>this</li>
</ul>
<h2 id="三种变量"><a href="#三种变量" class="headerlink" title="三种变量"></a>三种变量</h2><p>实例变量：（this）类的实例才能访问到的变量<br>静态变量：（属性）直接类型对象能访问到的变量<br>私有变量：（局部变量）当前作用域内有效的变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ClassA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>; <span class="comment">//私有变量，只有函数内部可以访问</span></span><br><span class="line">  <span class="keyword">this</span>.b = <span class="number">2</span>; <span class="comment">//实例变量，只有实例可以访问</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ClassA.c = <span class="number">3</span>; <span class="comment">// 静态变量，也就是属性，类型访问</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// error</span></span><br><span class="line"><span class="built_in">console</span>.log(ClassA.b); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(ClassA.c); <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> classa = <span class="keyword">new</span> ClassA();</span><br><span class="line"><span class="built_in">console</span>.log(classa.a); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(classa.b); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(classa.c); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><p>继承是指一个对象直接使用另一个对象的属性和方法.<br>如果实现以下两点就实现了继承</p>
<ol>
<li>得到一个类的属性</li>
<li>得到一个类的方法</li>
</ol>
<blockquote>
<p>原型继承，核心在于在子类的构造函数中通过<code>parent.call(this)</code>继承父亲的属性，然后改变子类的原型为<code>new parent()</code>来继承父类的函数.</p>
</blockquote>
<h2 id="属性的获取"><a href="#属性的获取" class="headerlink" title="属性的获取"></a>属性的获取</h2><p>对象属性的获取是通过构造函数的执行.在一个类中执行另外一个类的构造函数,就可以把属性赋值到自己内部,但是需要把环境改到自己的作用域内,用<code>call</code>修改 this 的指向即可.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, sex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.printName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">name, sex, age</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, sex);</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> Male(<span class="string">"Tom"</span>, <span class="string">"male"</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(m.sex); <span class="comment">//'male'</span></span><br></pre></td></tr></table></figure>

<h2 id="继承的范例"><a href="#继承的范例" class="headerlink" title="继承的范例"></a>继承的范例</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">name, sex, age</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, sex);</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Male.prototype = <span class="built_in">Object</span>.create(Person.prototype);</span><br><span class="line"></span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, sex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.printName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Male</span>(<span class="params">name, sex, age</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, age);</span><br><span class="line">  <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Male.prototype = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">Male.prototype.constuctor = Male;</span><br><span class="line"></span><br><span class="line">Male.prototype.printAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> man = <span class="keyword">new</span> Male(<span class="string">"Tom"</span>, <span class="string">"Male"</span>, <span class="number">10</span>);</span><br><span class="line">man.printName(); <span class="comment">//'Tom'</span></span><br></pre></td></tr></table></figure>

<h2 id="hasOwnProperty-NaN"><a href="#hasOwnProperty-NaN" class="headerlink" title="hasOwnProperty"></a>hasOwnProperty</h2><p>判断属性是自己的还是继承的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m.hasOwnProperty(<span class="string">"name"</span>); <span class="comment">//true</span></span><br><span class="line">m.hasOwnProperty(<span class="string">"printName"</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h1 id="Promise-对象"><a href="#Promise-对象" class="headerlink" title="Promise 对象"></a>Promise 对象</h1><h2 id="回调地狱"><a href="#回调地狱" class="headerlink" title="回调地狱"></a>回调地狱</h2><p>下列代码实现按顺序执行,1 秒后执行 fn1,再过 1 秒执行 fn2,再过 1 秒执行 fn3</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"fn1"</span>);</span><br><span class="line">    callback();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"fn2"</span>);</span><br><span class="line">    callback();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"fn3"</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn1(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  fn2(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    fn3();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>由于层层嵌套,形成<strong>回调地狱</strong>.(如果套个十几二十个,真的要崩溃)</p>
<h2 id="什么是-Promise"><a href="#什么是-Promise" class="headerlink" title="什么是 Promise"></a>什么是 Promise</h2><p>Promise 对象用于表示一个异步操作的最终完成 (或失败), 及其结果值.(MDN解释)<br>Promise 是一个对象,对象里存储着状态.分别是 pending(等待态),fulfilled(完成态),rejected(拒绝态)<br>Promise 启动之后，当满足成功的条件时我们让状态从 pending 变成 fullfilled （执行 resolve）；当满足失败的条件，我们让状态从 pending 变成 rejected（执行 reject）<br><strong>面试官想听的版本</strong>:<br>所谓 Promise，简单说就是一个容器，里面保存着某个未来才会结束的事件的结果。从语法上说，Promise 是一个对象，从它可以获取异步操作的消息。Promise 提供统一的 API，各种异步操作都可以用同样的方法进行处理，让开发者不用再关注于时序和底层的结果。Promise 的状态具有不受外界影响和不可逆两个特点。</p>
<p>then 函数会返回一个 Promise 实例，并且该返回值是一个新的实例而不是之前的实例。因为 Promise 规范规定除了 pending 状态，其他状态是不可以改变的，如果返回的是一个相同实例的话，多个 then 调用就失去意义了.</p>
<p>then的参数有两个,也是一个成功函数,一个失败函数.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise2 = doSomething().then(successCallback, failureCallback);</span><br></pre></td></tr></table></figure>

<h3 id="Promise-ajax-范例"><a href="#Promise-ajax-范例" class="headerlink" title="Promise+ajax 范例"></a>Promise+ajax 范例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取IP</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIp</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>,<span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getIp'</span>,<span class="literal">true</span>)</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responText)</span><br><span class="line">      resolve(retJson.ip)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      reject(<span class="string">'获取IP失败'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//从IP获取城市</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCityFromIp</span>(<span class="params">ip</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>, <span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getCityFromIp?ip='</span>+ip, <span class="literal">true</span>)</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responText)</span><br><span class="line">      resolve(retJson.city)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      reject(<span class="string">'获取city失败'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过城市获取天气</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWeatherFromCity</span>(<span class="params">city&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">  return new Promise(function(resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>, <span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getWeatherFromCity?city='</span>+city, <span class="literal">true</span>)</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responText)</span><br><span class="line">      resolve(retJson)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      reject(<span class="string">'获取天气失败'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">getIp().then(<span class="function"><span class="keyword">function</span>(<span class="params">ip</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> getCityFromIp(ip)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">city</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> getWeatherFromCity(city)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'出现了错误'</span>,e)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//getIP()得到一个promise对象,传入ip,返回另一个promise对象,依次往下</span></span><br><span class="line"><span class="comment">//中途报错直接执行catch()</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCityFromIp</span>(<span class="params">ip</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = XMLHttpRequest()</span><br><span class="line">    xhr.open(<span class="string">'GET'</span>,<span class="string">'https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getCityFromIp?ip='</span>+ip<span class="string">',true)</span></span><br><span class="line"><span class="string">    xhr.onload = function()&#123;</span></span><br><span class="line"><span class="string">      var retJson = JSON.parse(xhr.responText)</span></span><br><span class="line"><span class="string">      resolve(retJson)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    xhr.onerror = function()&#123;</span></span><br><span class="line"><span class="string">      reject('</span>获取city失败<span class="string">')</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    xhr.send()</span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var p1 = getCityFromIp('</span><span class="number">10.10</span><span class="number">.10</span><span class="number">.1</span><span class="string">')</span></span><br><span class="line"><span class="string">var p2 = getCityFromIp('</span><span class="number">10.10</span><span class="number">.10</span><span class="number">.2</span><span class="string">')</span></span><br><span class="line"><span class="string">var p3 = getCityFromIp('</span><span class="number">10.10</span><span class="number">.10</span><span class="number">.3</span><span class="string">')</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//Promise.all, 当所有的 Promise 对象都完成后再执行</span></span><br><span class="line"><span class="string">Promise.all([p1,p2,p3]).then(data =&gt; &#123;</span></span><br><span class="line"><span class="string">  console.log(data)</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCityFromIp</span>(<span class="params">ip</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(</span><br><span class="line">      <span class="string">"GET"</span>,</span><br><span class="line">      <span class="string">"https://easy-mock.com/mock/5ac2f80c3d211137b3f2843a/promise/getCityFromIp?ip="</span> +</span><br><span class="line">        ip,</span><br><span class="line">      <span class="literal">true</span></span><br><span class="line">    );</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> retJson = <span class="built_in">JSON</span>.parse(xhr.responseText); <span class="comment">// &#123;"city": "hangzhou","ip": "23.45.12.34"&#125;</span></span><br><span class="line">      resolve(retJson);</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject(<span class="string">"获取city失败"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      xhr.send();</span><br><span class="line">    &#125;, <span class="built_in">Math</span>.random() * <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = getCityFromIp(<span class="string">"10.10.10.1"</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = getCityFromIp(<span class="string">"10.10.10.2"</span>);</span><br><span class="line"><span class="keyword">var</span> p3 = getCityFromIp(<span class="string">"10.10.10.3"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Promise.race, 谁的先输出就先执行谁</span></span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2, p3]).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="callback-amp-Promise-amp-async-await"><a href="#callback-amp-Promise-amp-async-await" class="headerlink" title="callback&amp;Promise&amp;async/await"></a>callback&amp;Promise&amp;async/await</h1><p>把一个需求不断简化<br>需求如下:</p>
<ol>
<li>读取 a.md 文件，得到内容</li>
<li>把内容转换成 HTML 字符串</li>
<li>把 HTML 字符串写入 b.html</li>
</ol>
<h2 id="callback-处理"><a href="#callback-处理" class="headerlink" title="callback()处理"></a>callback()处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">var</span> markdown = <span class="built_in">require</span>(<span class="string">"markdown"</span>).markdown;</span><br><span class="line">fs.readFile(<span class="string">"a.md"</span>, <span class="string">"UTF-8"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> html = markown.toHTML(str);</span><br><span class="line">  fs.writeFile(<span class="string">"b.html"</span>, html, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"write.success"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="ES6-语法简化处理"><a href="#ES6-语法简化处理" class="headerlink" title="ES6 语法简化处理"></a>ES6 语法简化处理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">let</span> markdown = <span class="built_in">require</span>(<span class="string">"markdown"</span>).markdown;</span><br><span class="line">fs.readFile(<span class="string">"a.md"</span>, <span class="string">"UTF-8"</span>, (err, str) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> html = markdown.toHTML(str);</span><br><span class="line">  fs.writeFile(<span class="string">"b.html"</span>, html, err =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"write.success"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Promise-处理"><a href="#Promise-处理" class="headerlink" title="Promise 处理"></a>Promise 处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> markdown = <span class="built_in">require</span>(<span class="string">"markdown"</span>).markdown;</span><br><span class="line"></span><br><span class="line">readFile(<span class="string">"a.md"</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">mdStr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> markdown.toHTML(mdStr); <span class="comment">//返回结果作为下个回调函数</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">html</span> =&gt;</span> &#123;</span><br><span class="line">    writeFile(<span class="string">"b.html"</span>, html);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//对读取文件进行包装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFlie(url, <span class="string">"UTF-8"</span>, (err, str) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"readFlie error"</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(str);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//对写入文件进行包装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeFile</span>(<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.writeFile(url, data, (err, str) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"write error"</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用模块改装上面代码"><a href="#使用模块改装上面代码" class="headerlink" title="使用模块改装上面代码"></a>使用模块改装上面代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> markdown = <span class="built_in">require</span>(<span class="string">"markdown"</span>).markdown;</span><br><span class="line"><span class="keyword">const</span> fsp = <span class="built_in">require</span>(<span class="string">"fs-promise"</span>); <span class="comment">//用于把fs变promise化</span></span><br><span class="line"><span class="keyword">let</span> onerror = <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">"something wrong"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">fsp</span><br><span class="line">  .readFile(<span class="string">"a.md"</span>, <span class="string">"UTF-8"</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">mdStr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> markdown.toHTML(mdStr);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">html</span> =&gt;</span> &#123;</span><br><span class="line">    fsp.writeFile(<span class="string">"b.html"</span>, html);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(onerror);</span><br></pre></td></tr></table></figure>

<h2 id="async-await-处理"><a href="#async-await-处理" class="headerlink" title="async/await 处理"></a>async/await 处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> markdown = <span class="built_in">require</span>(<span class="string">"markdown"</span>).markdown;</span><br><span class="line"><span class="keyword">const</span> fsp = <span class="built_in">require</span>(<span class="string">"fs-promise"</span>);</span><br><span class="line"><span class="keyword">let</span> onerror = <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">"sonething wrong"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> mdStr = <span class="keyword">await</span> fsp.readFile(<span class="string">"a.md"</span>, <span class="string">"UTF-8"</span>);</span><br><span class="line">  <span class="keyword">let</span> html = markdown.toHTML(mdStr);</span><br><span class="line">  <span class="keyword">await</span> fsp.writeFile(<span class="string">"b.html"</span>, html);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start().catch(onerror);</span><br></pre></td></tr></table></figure>

<h1 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h1><h2 id="Promise-prototype-then-onFulfilled-onRejected"><a href="#Promise-prototype-then-onFulfilled-onRejected" class="headerlink" title="Promise.prototype.then(onFulfilled, onRejected)"></a>Promise.prototype.then(onFulfilled, onRejected)</h2><p>接收成功或失败的结果回调到当前 promise, 返回一个新的 promise, 将以回调的返回值来 resolve.</p>
<h2 id="Promise-prototype-catch-onRejected"><a href="#Promise-prototype-catch-onRejected" class="headerlink" title="Promise.prototype.catch(onRejected)"></a>Promise.prototype.catch(onRejected)</h2><p>接受一个失败的结果回调到当前 promise, 返回一个新的 promise。当这个回调函数被调用，新 promise 将以它的返回值来 resolve，否则如果当前 promise 进入 fulfilled 状态，则以当前 promise 的完成结果作为新 promise 的完成结果.</p>
<h2 id="Promise-prototype-finally-onFinally"><a href="#Promise-prototype-finally-onFinally" class="headerlink" title="Promise.prototype.finally(onFinally)"></a>Promise.prototype.finally(onFinally)</h2><p>添加一个事件处理回调于当前 promise 对象，并且在原 promise 对象解析完毕后，返回一个新的 promise 对象。回调会在当前 promise 运行完毕后被调用，无论当前 promise 的状态是完成(fulfilled)还是失败(rejected)</p>
<h1 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h1><p>async 函数的创建时通过在函数声明语句之前加上 async 关键字，<br>这是异步函数的特征之一 ––它将任何函数转换为 promise。<br>示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> asyncFunction = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// Code</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="await"><a href="#await" class="headerlink" title="await"></a>await</h2><p>async 异步函数可通过<code>await</code>来暂停，该关键字只能用在 async 函数内部。<br>每当函数执行完毕，<code>await</code>返回的是任何 async 函数会返回的东西。</p>
<blockquote>
<p>阮一峰老师的解释: async 函数返回一个 Promise 对象，当函数执行的时候，一旦遇到 await 就会先返回，等到触发的异步操作完成，再接着执行函数体内后面的语句</p>
</blockquote>
<blockquote>
<p>只能放在 async 函数内部使用，不能放在普通函数里面，否则会报错。<br>后面放 Promise 对象，在<code>Pending</code>状态时，相应的协程会交出控制权，进入等待状态。等等党永不为奴!这个是本质。<br><code>await</code>是 async wait 的意思，wait 的是<code>resolve(data)</code>消息，并把数据<code>data</code>返回。<br><code>await</code>后面也可以跟同步代码，不过系统会自动转化成一个 Promise 对象。<br><code>await</code>只关心异步过程成功的消息<code>resolve(data)</code>，拿到相应的数据<code>data</code>。至于失败消息<code>reject(error)</code>，不关心，不处理。</p>
</blockquote>
<h3 id="await的特点"><a href="#await的特点" class="headerlink" title="await的特点"></a>await的特点</h3><p>1.建立在 promise 之上。所以，不能把它和回调函数搭配使用。但它会声明一个异步函数，并隐式地返回一个Promise。因此可以直接return变量，无需使用 <code>Promise.resolve</code> 进行转换。<br>2.和 promise 一样，是非阻塞的。但不用写 then 及其回调函数，这减少代码行数，也避免了代码嵌套。而且，所有异步调用，可以写在同一个代码块中，无需定义多余的中间变量。<br>3.它的最大价值在于，可以使异步代码，在形式上，更接近于同步代码。<br>4.它总是与 await 一起使用的。并且，await 只能在 async 函数体内。<br>5.await 是个运算符，用于组成表达式，它会阻塞后面的代码。如果等到的是 Promise 对象，则得到其 resolve 值。否则，会得到一个表达式的运算结果。</p>
<p>MDN 例子:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (greeting = <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="string">"Hello"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hello().then(alert);</span><br><span class="line"><span class="comment">//先等返回了hello再打印</span></span><br></pre></td></tr></table></figure>

<p>简单案例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncPrint</span>(<span class="params">value, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> timeout(ms);</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line">asyncPrint(<span class="string">"hello world"</span>, <span class="number">50</span>);</span><br><span class="line"><span class="comment">// 上面代码指定50毫秒以后，输出"hello world"。</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/27/canvas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/27/canvas/" class="post-title-link" itemprop="url">canvas画板</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-27 13:39:26" itemprop="dateCreated datePublished" datetime="2019-08-27T13:39:26+08:00">2019-08-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-06 14:25:42" itemprop="dateModified" datetime="2019-10-06T14:25:42+08:00">2019-10-06</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML5/" itemprop="url" rel="index"><span itemprop="name">HTML5</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML5/canvas/" itemprop="url" rel="index"><span itemprop="name">canvas</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>canvas本身没有绘图能力，只是定义了一个容器，都是由canvas内部的CanvasRenderingContext2D对象来做，需要我们用 JavaScript脚本完成绘制工作。</p>
<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><ol>
<li>html引入<code>&lt;canvas&gt;</code>标签</li>
</ol>
<p><code>&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;</code></p>
<ol start="2">
<li>js获取<code>&lt;canvas&gt;</code>属性,使用2d绘制上下文.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = getElementById(<span class="string">"canvas"</span>)</span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line"><span class="comment">//使用context进行绘制</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>设置宽高</li>
</ol>
<p>使用<code>canvas.width</code>设置宽度.<br><code>canvas.height</code>设置高度.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;canvas id=<span class="string">"canvas"</span> sytle=<span class="string">"border: 1px solid #aaa;display: block;margin: 50px auto;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>)</span><br><span class="line">        canvas.width: <span class="number">1024</span>;</span><br><span class="line">        canvas.height: <span class="number">768</span>;</span><br><span class="line">        <span class="keyword">if</span>(canvas.getContext(<span class="string">"2d"</span>))&#123;</span><br><span class="line">            <span class="comment">//如果浏览器支持canvas,可以使用</span></span><br><span class="line">            <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            alert(<span class="string">'当前浏览器不支持,请使用谷歌浏览器'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>

<p>设置全屏</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pageWidth = <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line"><span class="keyword">let</span> pageHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line"></span><br><span class="line">canvas.width = pageWidth;</span><br><span class="line">canvas.height = pageHeight;</span><br></pre></td></tr></table></figure>

<h2 id="绘制线段"><a href="#绘制线段" class="headerlink" title="绘制线段"></a>绘制线段</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line">conext.beginPath()<span class="comment">//开始第一段绘制,与其他绘制可以区别开</span></span><br><span class="line">context.moveTo(<span class="number">100</span>,<span class="number">100</span>)<span class="comment">//以画布左上角为原点,从坐标(100,100)开始</span></span><br><span class="line">context.lineTO(<span class="number">700</span>,<span class="number">700</span>)<span class="comment">//把线画到(700,700)位置</span></span><br><span class="line">context.lineTO(<span class="number">100</span>,<span class="number">700</span>)<span class="comment">//折到(100,700)位置</span></span><br><span class="line">context.lineTO(<span class="number">100</span>,<span class="number">100</span>)<span class="comment">//线段完成封闭,形成三角形</span></span><br><span class="line">context.closePath()<span class="comment">//结束本段状态</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">context.fillStyle=<span class="string">"rgab(168,168,168)"</span><span class="comment">//设置三角形填充颜色</span></span><br><span class="line">context.fill()<span class="comment">//执行填充颜色</span></span><br><span class="line"></span><br><span class="line">context.lineWidth = <span class="number">5</span> <span class="comment">//设置线段宽度</span></span><br><span class="line">context.strokeStyle = <span class="string">"red"</span> <span class="comment">//设置线段颜色</span></span><br><span class="line">context.stroke<span class="comment">//执行绘图</span></span><br><span class="line"></span><br><span class="line">conext.beginPath()<span class="comment">//开始第二段绘制,与其他绘制可以区别开</span></span><br><span class="line">context.moveTo(<span class="number">200</span>,<span class="number">100</span>)<span class="comment">//以画布左上角为原点,从坐标(200,100)开始</span></span><br><span class="line">context.lineTO(<span class="number">700</span>,<span class="number">600</span>)<span class="comment">//把线画到(700,600)位置</span></span><br><span class="line">context.closePath()<span class="comment">//结束本段状态</span></span><br><span class="line"></span><br><span class="line">context.strokeStyle = <span class="string">"blue"</span> <span class="comment">//设置线段颜色</span></span><br><span class="line">context.stroke<span class="comment">//执行第二段绘图</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>标签属性</li>
</ol>
<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">height</td>
<td align="left">设置 canvas 的高度</td>
</tr>
<tr>
<td align="left">width</td>
<td align="left">设置 canvas 的宽度</td>
</tr>
<tr>
<td align="left">fill()</td>
<td align="left">可以填充</td>
</tr>
<tr>
<td align="left">fillRect(x,y,width,height)</td>
<td align="left">绘制一个矩形边框</td>
</tr>
<tr>
<td align="left">fillRect(x,y,width,height)</td>
<td align="left">绘制一个填充的矩形</td>
</tr>
<tr>
<td align="left">clearRect(x,y,width,height)</td>
<td align="left">清除指定矩形区域，让清除部分完全透明</td>
</tr>
<tr>
<td align="left">ctx.strokeStyle</td>
<td align="left">可以改变画笔颜色</td>
</tr>
<tr>
<td align="left">ctx.beginPath()</td>
<td align="left">设置开始路径</td>
</tr>
<tr>
<td align="left">ctx.moveTo(x,y)</td>
<td align="left">设置起点</td>
</tr>
<tr>
<td align="left">ctx.lineTo(x,y)</td>
<td align="left">设置终点</td>
</tr>
<tr>
<td align="left">ctx.stroke()</td>
<td align="left">绘制</td>
</tr>
<tr>
<td align="left">ctx.closePath()</td>
<td align="left">结束路径</td>
</tr>
<tr>
<td align="left">ctx.arc(弧形圆心x坐标，y坐标，半径，起始角(以3点钟的位置开始)，结束角、方向(true表示逆时针，false表示顺时针))</td>
<td align="left">绘制一个弧形</td>
</tr>
<tr>
<td align="left">ctx.quadraticCurveTo(cpx,cpy,x,y)参数是控制点x坐标，控制点y坐标，结束点x坐标，结束点y坐标</td>
<td align="left">绘制二次贝塞尔曲线</td>
</tr>
<tr>
<td align="left">ctx.quadraticCurveTo(cpx1,cpy1,cpx2,cpy2,x,y)参数是控制点1的x坐标，控制点1的y坐标，控制点2的x坐标，控制点2的y坐标，结束点x坐标，结束点y坐标</td>
<td align="left">绘制三次贝塞尔曲线</td>
</tr>
</tbody></table>
<ol start="3">
<li>canvas画板代码实现</li>
</ol>
<h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">  &lt;title&gt;JS Bin&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;canvas id=<span class="string">"canvas"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line">    &lt;div id=<span class="string">"actions"</span><span class="class"><span class="keyword">class</span></span>=<span class="string">"actions x"</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;svg id=<span class="string">"pen"</span><span class="class"><span class="keyword">class</span></span>=<span class="string">"icon"</span>&gt;</span><br><span class="line">            &lt;use xlink:href=<span class="string">"#icon-pencil"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line">        &lt;<span class="regexp">/svg&gt;</span></span><br><span class="line"><span class="regexp">    </span></span><br><span class="line"><span class="regexp">        &lt;svg id="eraser"class="icon"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;use xlink:href="#icon-eraser"&gt;&lt;/u</span>se&gt;</span><br><span class="line">        &lt;<span class="regexp">/svg&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        &lt;svg id="clear"class="icon"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;use xlink:href="#icon-delete"&gt;&lt;/u</span>se&gt;</span><br><span class="line">        &lt;<span class="regexp">/svg&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        &lt;svg id="download"class="icon"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;use xlink:href="#icon-download"&gt;&lt;/u</span>se&gt;</span><br><span class="line">        &lt;<span class="regexp">/svg&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;ul class='colorCir'&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li id="black"class="black"&gt;&lt;/</span>li&gt;</span><br><span class="line">        &lt;li id=<span class="string">"red"</span><span class="class"><span class="keyword">class</span></span>=<span class="string">"red"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">        &lt;li id=<span class="string">"yellow"</span><span class="class"><span class="keyword">class</span></span>=<span class="string">"yellow"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">        &lt;li id=<span class="string">"blue"</span><span class="class"><span class="keyword">class</span></span>=<span class="string">"blue"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>      </span><br><span class="line">    &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;ul class='lineWidth'&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li id="thin" class="thin"&gt;&lt;/</span>li&gt;</span><br><span class="line">        &lt;li id=<span class="string">"thick"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"thick"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    margin:<span class="number">0</span>;</span><br><span class="line">    padding:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">body&#123;</span><br><span class="line">    background:#eee</span><br><span class="line">&#125;</span><br><span class="line">ul,ol&#123;</span><br><span class="line">    list-style: none; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.colorCir&#123;</span><br><span class="line">    top:<span class="number">60</span>px;</span><br><span class="line">    left:<span class="number">20</span>px;</span><br><span class="line">    position: fixed; </span><br><span class="line">&#125;</span><br><span class="line">.colorCir li&#123;</span><br><span class="line">    border: <span class="number">1</span>px solid grey;</span><br><span class="line">    height:<span class="number">20</span>px;</span><br><span class="line">    width: <span class="number">20</span>px;</span><br><span class="line">    border-radius: <span class="number">50</span>%;</span><br><span class="line">    margin-bottom:<span class="number">10</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.colorCir .red&#123;</span><br><span class="line">    background:red;</span><br><span class="line">&#125;     </span><br><span class="line">.colorCir .yellow&#123;</span><br><span class="line">    background:yellow;</span><br><span class="line">&#125;  </span><br><span class="line">.colorCir .blue&#123;</span><br><span class="line">    background:blue;</span><br><span class="line">&#125;  </span><br><span class="line">.colorCir .black&#123;</span><br><span class="line">    background:black;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">.colorCir .red.active&#123;</span><br><span class="line">    transform: scale(<span class="number">1.2</span>);</span><br><span class="line">    transition: all <span class="number">0.3</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.colorCir .yellow.active&#123;</span><br><span class="line">    transform: scale(<span class="number">1.2</span>);</span><br><span class="line">    transition: all <span class="number">0.3</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.colorCir .blue.active&#123;</span><br><span class="line">    transform: scale(<span class="number">1.2</span>);</span><br><span class="line">    transition: all <span class="number">0.3</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.colorCir .black.active&#123;</span><br><span class="line">    transform: scale(<span class="number">1.2</span>);</span><br><span class="line">    transition: all <span class="number">0.3</span>s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.icon &#123;</span><br><span class="line">    width: <span class="number">1</span>em; height: <span class="number">1</span>em;</span><br><span class="line">    vertical-align: <span class="number">-0.15</span>em;</span><br><span class="line">    fill: currentColor;</span><br><span class="line">    overflow: hidden;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">body&#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">#canvas&#123;</span><br><span class="line">    display: block;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top:<span class="number">0</span>px;</span><br><span class="line">    left:<span class="number">0</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.actions&#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top:<span class="number">0</span>px;</span><br><span class="line">    left:<span class="number">0</span>px;</span><br><span class="line">    padding-top:<span class="number">20</span>px;</span><br><span class="line">    padding-left:<span class="number">15</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.actions svg&#123;</span><br><span class="line">    width:<span class="number">1.5</span>em;</span><br><span class="line">    height:<span class="number">1.5</span>em;</span><br><span class="line">    transition: all <span class="number">0.3</span>s;</span><br><span class="line">    margin:<span class="number">0</span> <span class="number">5</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.actions svg.active&#123;</span><br><span class="line">    fill:red; </span><br><span class="line">    transform: scale(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.lineWidth&#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    left:<span class="number">-10</span>px;</span><br><span class="line">    top:<span class="number">140</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.lineWidth .thin&#123;</span><br><span class="line">    height:<span class="number">0</span>px;</span><br><span class="line">    width:<span class="number">40</span>px;</span><br><span class="line">    border-top:<span class="number">2</span>px solid black;</span><br><span class="line">    margin:<span class="number">15</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.lineWidth .thick&#123;</span><br><span class="line">    height:<span class="number">0</span>px;</span><br><span class="line">    width:<span class="number">40</span>px;</span><br><span class="line">    border-top:<span class="number">6</span>px solid black;</span><br><span class="line">    margin:<span class="number">15</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.lineWidth .thin.active&#123;</span><br><span class="line">    transform: scale(<span class="number">1.2</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.lineWidth .thick.active&#123;</span><br><span class="line">    transform: scale(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas=<span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="keyword">var</span> context=canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> using=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> lastPoint=&#123;</span><br><span class="line">    x:<span class="literal">undefined</span>,</span><br><span class="line">    y:<span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*画板逻辑 */</span></span><br><span class="line">autoSetSize(canvas);</span><br><span class="line"></span><br><span class="line">listenToUser(canvas);</span><br><span class="line"></span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"><span class="comment">//画笔、橡皮擦按钮替换</span></span><br><span class="line"><span class="keyword">var</span> eraserEnabled=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">pen.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    eraserEnabled=<span class="literal">false</span>;</span><br><span class="line">    pen.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    eraser.classList.remove(<span class="string">'active'</span>);</span><br><span class="line"> &#125;</span><br><span class="line">eraser.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    eraserEnabled=<span class="literal">true</span>;</span><br><span class="line">    eraser.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    pen.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//颜色替换并高亮</span></span><br><span class="line">red.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"red"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"red"</span>;</span><br><span class="line">    red.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    yellow.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    blue.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    black.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line">yellow.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"yellow"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"yellow"</span>;</span><br><span class="line">    yellow.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    red.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    blue.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    black.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line">blue.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"blue"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"blue"</span>;</span><br><span class="line">    blue.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    yellow.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    red.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    black.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line">black.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.fillStyle =<span class="string">"black"</span>;</span><br><span class="line">    context.strokeStyle=<span class="string">"black"</span>;</span><br><span class="line">    black.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    yellow.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    blue.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    red.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"></span><br><span class="line">thin.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    thin.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    thick.classList.remove(<span class="string">'active'</span>);    </span><br><span class="line">    context.lineWidth=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">thick.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    thick.classList.add(<span class="string">'active'</span>);</span><br><span class="line">    thin.classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    context.lineWidth=<span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">clear.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    context.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvas.clientWidth,canvas.clientHeight);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">download.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = canvas.toDataURL(<span class="string">'image/png'</span>);</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line">    a.href=url;</span><br><span class="line">    a.download=<span class="string">'my drawing'</span>;</span><br><span class="line">    a.click();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//drawLine</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawLine</span>(<span class="params">x1,y1,x2,y2</span>)</span>&#123;</span><br><span class="line">    context.beginPath();</span><br><span class="line">    context.moveTo(x1,y1);</span><br><span class="line">    context.lineTo(x2,y2);</span><br><span class="line">    context.stroke();</span><br><span class="line">    context.closePath();  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//drawCir</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawCir</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">context.beginPath()</span><br><span class="line">context.arc(x,y,<span class="number">0.1</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI*<span class="number">2</span>);</span><br><span class="line">context.fill();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重置canvas画板宽高</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCanvasSize</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pageWidth=<span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">    <span class="keyword">var</span> pageHeight=<span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">   </span><br><span class="line">    canvas.width = pageWidth;</span><br><span class="line">    canvas.height = pageHeight;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自动设置canvas画板宽高</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">autoSetSize</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    setCanvasSize();    </span><br><span class="line">    <span class="built_in">window</span>.onresize =<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        setCanvasSize();</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preventBehavior</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"touchmove"</span>, preventBehavior, <span class="literal">false</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listenToUser</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//特性检测</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">document</span>.body.ontouchstart!== <span class="literal">undefined</span> )&#123;                    </span><br><span class="line">        <span class="comment">//是触屏设备</span></span><br><span class="line">        canvas.ontouchstart =<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.touches[<span class="number">0</span>].clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.touches[<span class="number">0</span>].clientY;</span><br><span class="line">            using=<span class="literal">true</span>;</span><br><span class="line">            lastPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;;</span><br><span class="line">            <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                drawCir(x,y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        canvas.ontouchmove = <span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.touches[<span class="number">0</span>].clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.touches[<span class="number">0</span>].clientY;</span><br><span class="line">            <span class="keyword">var</span> newPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;</span><br><span class="line">            <span class="keyword">if</span>(using)&#123;</span><br><span class="line">                <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                    context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    drawCir(x,y);</span><br><span class="line">                    drawLine(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y)</span><br><span class="line">                    lastPoint=newPoint;      </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        canvas.ontouchend = <span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            using=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//不是触屏设备</span></span><br><span class="line">        canvas.onmousedown=<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.clientY;</span><br><span class="line">            using=<span class="literal">true</span>;</span><br><span class="line">            lastPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;;</span><br><span class="line">            <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                drawCir(x,y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//鼠标移动监听</span></span><br><span class="line">        canvas.onmousemove=<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x=aaa.clientX;</span><br><span class="line">            <span class="keyword">var</span> y=aaa.clientY;</span><br><span class="line">            <span class="keyword">var</span> newPoint=&#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;</span><br><span class="line">            <span class="keyword">if</span>(using)&#123;</span><br><span class="line">                <span class="keyword">if</span>(eraserEnabled)&#123;</span><br><span class="line">                    context.clearRect(x<span class="number">-10</span>,y<span class="number">-10</span>,<span class="number">20</span>,<span class="number">20</span>);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    drawCir(x,y);</span><br><span class="line">                    drawLine(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y)</span><br><span class="line">                    lastPoint=newPoint;      </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;       </span><br><span class="line">        <span class="comment">//鼠标松开监听</span></span><br><span class="line">        canvas.onmouseup=<span class="function"><span class="keyword">function</span>(<span class="params">aaa</span>)</span>&#123;</span><br><span class="line">            using=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/23/CSS3布局/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/23/CSS3布局/" class="post-title-link" itemprop="url">CSS布局</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-23 17:54:50" itemprop="dateCreated datePublished" datetime="2019-08-23T17:54:50+08:00">2019-08-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-25 12:17:29" itemprop="dateModified" datetime="2019-10-25T12:17:29+08:00">2019-10-25</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h2 id="单栏布局"><a href="#单栏布局" class="headerlink" title="单栏布局"></a>单栏布局</h2><p>方式: 定宽+水平居中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">.layout&#123;</span><br><span class="line">max-width: <span class="number">100</span>px;</span><br><span class="line">margin: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<p>通栏的话再加一层div,单独给div设置背景色即可</p>
<h2 id="双列布局"><a href="#双列布局" class="headerlink" title="双列布局"></a>双列布局</h2><p>固定margin+浮动元素<br>先设置浮动,再设置普通元素,最后清除浮动</p>
<h1 id="flex布局-弹性盒子"><a href="#flex布局-弹性盒子" class="headerlink" title="flex布局(弹性盒子)"></a>flex布局(弹性盒子)</h1><h3 id="display-flex"><a href="#display-flex" class="headerlink" title="display:flex"></a>display:flex</h3><p>一个容器 设置了<code>display:flex</code>属性,就定义了一个flex容器.它的直接子元素会接受这个flex环境.<br>常规布局是基于块和内联流方向，而Flex布局是基于<code>flex-flow</code>流可以很方便的用来做居中，能对不同屏幕大小自适应。<br>在布局上有了比以前更加灵活的空间。<br><img src="https://s2.ax1x.com/2019/09/25/uZC1ud.jpg" alt="一张图了解flex"><br>这个是ms图床</p>
<p><img src="https://s2.ax1x.com/2019/09/25/uZC1ud.jpg" alt="uZC1ud.jpg"><br>这个是路过图床</p>
<h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">    flex-direction: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置子元素在父容器中的位置</p>
<ol>
<li>row默认值,水平从左到右</li>
<li>row-reverse,从右到左</li>
<li>column,垂直从上到下</li>
<li>column-reverse,垂直从下到上</li>
</ol>
<h3 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h3><p>设置换行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  flex-wrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br><span class="line">依次为:不换行,换行,换行且颠倒顺序</span><br></pre></td></tr></table></figure>

<h3 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h3><p><code>flex-direction</code>和<code>flex-wrap</code>的缩写,默认值<code>row nowrap</code><br><code>flex-flow: &lt;&#39;flex-direction&#39;&gt; || &lt;&#39;flex-wrap&#39;&gt;</code></p>
<h3 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h3><p>设置子元素在水平方向上的对齐方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  justify-content: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br><span class="line">分别是水平靠左,水平靠右,水平居中,均匀分布,均匀分布且两端保留子元素间距一半(空间包裹)</span><br></pre></td></tr></table></figure>

<h3 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h3><p>设置子元素在垂直方向上的对齐方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  align-items: flex-start |  flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br><span class="line">分别是垂直靠上,垂直靠下,垂直居中,垂直基线对齐,垂直方向拉伸</span><br></pre></td></tr></table></figure>

<h3 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h3><p>设置子元素整体内容的在垂直方向上的对齐方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  align-content: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br><span class="line">分别是整体靠上,整体靠下,整体居中,整体垂直均匀排列,整体均匀分布且垂直两端保留间距一半空间,整体垂直拉伸占用剩余空间</span><br></pre></td></tr></table></figure>

<h2 id="用在子元素上的属性"><a href="#用在子元素上的属性" class="headerlink" title="用在子元素上的属性"></a>用在子元素上的属性</h2><h3 id="order"><a href="#order" class="headerlink" title="order"></a>order</h3><p>默认情况下flex order会按照书写顺序排列,可以通过order属性改变,数值小的在前面,也可以是负数.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  order: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h3><p><code>.item {flex-grow: 1}</code><br>按比例瓜分父元素剩余的空间,1即分一份.不写默认是0</p>
<h3 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h3><p>基准宽度</p>
<h3 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h3><p>按比例吸收超出的空间.不写默认是1</p>
<h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><blockquote>
<p><code>flex-grow</code>,<code>flex-shrink</code>,<code>flex-basis</code>的缩写</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item&#123;</span><br><span class="line">  flex: none | [ &lt;'flex-grow'&gt; &lt;'flex-shrink'&gt; || &lt;''flex-basis'&gt;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="aglin-self"><a href="#aglin-self" class="headerlink" title="aglin-self"></a>aglin-self</h3><p>单独修改自身的属性</p>
<h1 id="Grid布局"><a href="#Grid布局" class="headerlink" title="Grid布局"></a>Grid布局</h1><h3 id="父元素Grid-container的属性"><a href="#父元素Grid-container的属性" class="headerlink" title="父元素Grid container的属性"></a>父元素Grid container的属性</h3><h4 id="display"><a href="#display" class="headerlink" title="display"></a>display</h4><p>将元素定义为gird container,并为其建立新的网格格式化上下文</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  display: grid | inline-grid |   subgrid;</span><br><span class="line">&#125;</span><br><span class="line">分别是生成一个块级网格;一行网格;如果本身是gird-item,可从父元素获取行列大小</span><br></pre></td></tr></table></figure>

<h3 id="gird-template-columns和gird-template-rows"><a href="#gird-template-columns和gird-template-rows" class="headerlink" title="gird-template-columns和gird-template-rows"></a>gird-template-columns和gird-template-rows</h3><p>设置网格的列和行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  gird-template-columns: <span class="number">40</span>px <span class="number">50</span>px auto <span class="number">50</span>px <span class="number">40</span>px;</span><br><span class="line">  grid-template-rows: <span class="number">25</span>% <span class="number">100</span>px auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>简化写法:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line"> gird-template-columns: repeat(<span class="number">3</span>, <span class="number">20</span>px [col-start]) <span class="number">5</span>%;</span><br><span class="line">&#125;</span><br><span class="line">等价于</span><br><span class="line">.container&#123;</span><br><span class="line">  gird-template-columns: <span class="number">20</span>px [col-start] <span class="number">20</span>px [col-start] <span class="number">20</span>px [col-start] <span class="number">5</span>%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>“fr”单位允许将轨道大小设置为网格容器自由空间的一部分.<br>如下代码会将每个gird item设置为gird container宽度的三分之一</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.container&#123;</span><br><span class="line">  .grid-template-columns: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="gird-template-areas"><a href="#gird-template-areas" class="headerlink" title="gird-template-areas"></a>gird-template-areas</h3><ol>
<li><gird-area-name>  — 使用gird-area属性设置的网络区域的名称</gird-area-name></li>
<li>.  — 点号代表一个空网格单元</li>
<li>none — 没有定义网格单元</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.item-a &#123;</span><br><span class="line">  grid-area: header;</span><br><span class="line">&#125;</span><br><span class="line">.item-b &#123;</span><br><span class="line">  grid-area: main;</span><br><span class="line">&#125;</span><br><span class="line">.item-c &#123;</span><br><span class="line">  grid-area: sidebar;</span><br><span class="line">&#125;</span><br><span class="line">.item-d &#123;</span><br><span class="line">  grid-area: footer;</span><br><span class="line">&#125;</span><br><span class="line">.container &#123;</span><br><span class="line">  grid-template-columns: <span class="number">50</span>px <span class="number">50</span>px <span class="number">50</span>px <span class="number">50</span>px;</span><br><span class="line">  grid-template-rows: auto;</span><br><span class="line">  grid-template-areas: </span><br><span class="line">    <span class="string">"header header header header"</span></span><br><span class="line">    <span class="string">"main main . sidebar"</span></span><br><span class="line">    <span class="string">"footer footer footer footer"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这将创建一个四列宽三行高的网格。 整个第一行将由 header 区域组成。 中间一行将由两个 main 区域、一个空单元格和一个 sidebar 区域组成。 最后一行是footer区域组成。</p>
<h1 id="媒体查询-响应式"><a href="#媒体查询-响应式" class="headerlink" title="媒体查询(响应式)"></a>媒体查询(响应式)</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="comment">/* 屏幕宽度为300px-325px时的css样式  */</span></span><br><span class="line">  @media(min-width: <span class="number">300</span>px) and (max-width: <span class="number">325</span>px)&#123;  </span><br><span class="line">    body&#123;</span><br><span class="line">     background: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 屏幕宽度小于450px时的css样式  */</span></span><br><span class="line">  @media(max-width: <span class="number">450</span>px)&#123;  </span><br><span class="line">    body&#123;</span><br><span class="line">     background: black;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 这样前面那个就没用了，被覆盖了  */</span></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>一般不用第一个方法，直接引用一个手机版的css即可</p>
</blockquote>
<p><code>&lt;link rel=&quot;stylesheet&quot; media=&quot;(max-width:768px)&quot; href=&quot;mobile.css&quot;&gt;</code><br>在屏幕宽度小于768px时，就会渲染这个css，要把这个引用写在main.css之后，把main.css覆盖。<br>并加上meta:vp<br><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;</code><br>让视口等于理想视口,禁止用户缩放.</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/23/css/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/23/css/" class="post-title-link" itemprop="url">CSS</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-23 16:54:50" itemprop="dateCreated datePublished" datetime="2019-08-23T16:54:50+08:00">2019-08-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 16:59:57" itemprop="dateModified" datetime="2019-11-23T16:59:57+08:00">2019-11-23</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/css/" itemprop="url" rel="index"><span itemprop="name">css</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/css/css3/" itemprop="url" rel="index"><span itemprop="name">css3</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>css,即层叠样式表,可以为网页添加样式.<br>stylesheet</p>
<h1 id="应用方式"><a href="#应用方式" class="headerlink" title="应用方式"></a>应用方式</h1><h2 id="外部样式表"><a href="#外部样式表" class="headerlink" title="外部样式表"></a>外部样式表</h2><ol>
<li>通过<code>&lt;link&gt;</code>引入<br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;index.css&quot;&gt;</code></li>
<li>通过<code>@import</code>引入,注意末尾加;号,CSS语法,只能在CSS内使用.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@<span class="keyword">import</span> url(<span class="string">"index.css"</span>);</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"index.css"</span>;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>媒体查询(响应式)</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@media (min-width: <span class="number">801</span>px) &#123;</span><br><span class="line">  body &#123;</span><br><span class="line">    margin: <span class="number">0</span> auto;</span><br><span class="line">    width: <span class="number">800</span>px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="内部样式表"><a href="#内部样式表" class="headerlink" title="内部样式表"></a>内部样式表</h2><p>将css放到<code>&lt;style&gt;</code>元素中,一般放到文档的<code>&lt;head&gt;</code>中.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span> /&gt;</span><br><span class="line">&lt;title&gt;CSS&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;style&gt;</span></span><br><span class="line"><span class="regexp">h1 &#123;</span></span><br><span class="line"><span class="regexp">    background: red;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;h1&gt;AMD yes!&lt;/</span>h1&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="内联样式"><a href="#内联样式" class="headerlink" title="内联样式"></a>内联样式</h2><p><code>&lt;p style=&quot;background: red; font-size: 20px;&quot;&gt;AMD yes!&lt;p&gt;</code></p>
<h1 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h1><table>
<thead>
<tr>
<th align="left">基本选择器</th>
<th align="left">名称</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">*</td>
<td align="left">通用选择器</td>
<td align="left">匹配任何元素</td>
</tr>
<tr>
<td align="left">E</td>
<td align="left">标签选择器</td>
<td align="left">匹配所有使用E标签的元素</td>
</tr>
<tr>
<td align="left">.info</td>
<td align="left">class选择器</td>
<td align="left">匹配所有class属性中包含info的元素</td>
</tr>
<tr>
<td align="left">#footer</td>
<td align="left">id选择器</td>
<td align="left">匹配所有id属性等于footer的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">组合选择器</th>
<th align="left">名称</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E,F</td>
<td align="left">多元素选择器</td>
<td align="left">同时匹配所有E元素或F元素</td>
</tr>
<tr>
<td align="left">E F</td>
<td align="left">后代选择器</td>
<td align="left">匹配所有属于E元素后代的F元素</td>
</tr>
<tr>
<td align="left">E&gt;F</td>
<td align="left">子元素选择器</td>
<td align="left">匹配所有E元素的直接子元素</td>
</tr>
<tr>
<td align="left">E+F</td>
<td align="left">直接相邻元素选择器</td>
<td align="left">匹配E元素后的直接相邻元素</td>
</tr>
<tr>
<td align="left">E~F</td>
<td align="left">兄弟元素选择器</td>
<td align="left">匹配E元素后的所有兄弟元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">属性选择器</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E[attr]</td>
<td align="left">匹配所有具有attr属性的E元素</td>
</tr>
<tr>
<td align="left">E[attr=val]</td>
<td align="left">匹配所有attr属性等于val的E元素</td>
</tr>
<tr>
<td align="left">E[attr~=val]</td>
<td align="left">匹配所有attr属性具有多个空格分隔的值,其中一个等于val的E元素</td>
</tr>
<tr>
<td align="left">E[attr</td>
<td align="left">=val]</td>
</tr>
<tr>
<td align="left">E[attr*=val]</td>
<td align="left">匹配所有attr属性中包含val的E元素</td>
</tr>
<tr>
<td align="left">E[attr^=val]</td>
<td align="left">匹配所有attr属性中以val开头的E元素</td>
</tr>
<tr>
<td align="left">E[attr$=val]</td>
<td align="left">匹配所有attr属性中以val结尾的E元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">伪类</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E:first-child</td>
<td align="left">匹配父元素的第一个子元素</td>
</tr>
<tr>
<td align="left">E:link</td>
<td align="left">匹配所有未被点击的链接</td>
</tr>
<tr>
<td align="left">E:visited</td>
<td align="left">匹配所有已被点击的链接</td>
</tr>
<tr>
<td align="left">E:active</td>
<td align="left">匹配鼠标已经按下没有释放的E元素</td>
</tr>
<tr>
<td align="left">E:hover</td>
<td align="left">匹配鼠标悬停其上的E元素</td>
</tr>
<tr>
<td align="left">E:focus</td>
<td align="left">匹配获得焦点的E元素</td>
</tr>
<tr>
<td align="left"><strong>E:enabled</strong></td>
<td align="left"><strong>匹配表单中激活的元素</strong></td>
</tr>
<tr>
<td align="left"><strong>E:disabled</strong></td>
<td align="left"><strong>匹配表单中禁用的元素</strong></td>
</tr>
<tr>
<td align="left"><strong>E:checked</strong></td>
<td align="left"><strong>匹配表单中被选中的radio或者checkbox元素</strong></td>
</tr>
<tr>
<td align="left">E:root</td>
<td align="left">匹配文档的根元素,对于html文档,就是html元素</td>
</tr>
<tr>
<td align="left">E:nth-child(n)</td>
<td align="left">匹配其父元素的第n个子元素,第一个编号为1</td>
</tr>
<tr>
<td align="left">E:nth-last-child(n)</td>
<td align="left">匹配其父元素的倒数第n个子元素,第一个编号为1</td>
</tr>
<tr>
<td align="left">E:nth-of-type</td>
<td align="left">与nth-child类似,但仅匹配使用同种标签的元素</td>
</tr>
<tr>
<td align="left">E:nth-last-child</td>
<td align="left">与nth-last-child类似,但仅匹配使用同种标签的元素</td>
</tr>
<tr>
<td align="left">E:last-child</td>
<td align="left">匹配父元素的最后一个元素</td>
</tr>
<tr>
<td align="left">E:first-of-type</td>
<td align="left">匹配父元素下使用同种标签的第一个子元素</td>
</tr>
<tr>
<td align="left">E:last-of-type</td>
<td align="left">匹配父元素下使用同种标签的最后一个子元素</td>
</tr>
<tr>
<td align="left">E:only-child</td>
<td align="left">匹配父元素下仅有的一个子元素，等同于:first-child:last-child或 :nth-child(1):nth-last-child(1)</td>
</tr>
<tr>
<td align="left">E:only-of-type</td>
<td align="left">匹配父元素下使用同种标签的唯一一个子元素，等同于:first-of-type:last-of-type或 :nth-of-type(1):nth-last-of-type(1)</td>
</tr>
<tr>
<td align="left">E:empty</td>
<td align="left">匹配一个不包含任何子元素的元素,注意,文本节点也被看做子元素</td>
</tr>
<tr>
<td align="left">E:not(s)</td>
<td align="left">匹配不符合当前选择器的任何元素</td>
</tr>
<tr>
<td align="left">E:target</td>
<td align="left">代表一个唯一的页面元素(目标元素)，其id 与当前URL片段匹配</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">伪元素</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">E::first-line</td>
<td align="left">匹配E元素的第一行</td>
</tr>
<tr>
<td align="left">E::first-letter</td>
<td align="left">匹配E元素的第一个字母</td>
</tr>
<tr>
<td align="left">E::before</td>
<td align="left">在E元素之前插入生成的内容</td>
</tr>
<tr>
<td align="left">E::after</td>
<td align="left">在E元素之后插入生成的内容</td>
</tr>
<tr>
<td align="left">E::selection</td>
<td align="left">匹配用户当前选中的元素</td>
</tr>
</tbody></table>
<blockquote>
<p>伪元素必须要有<code>content</code></p>
</blockquote>
<h3 id="伪元素和伪类的区别"><a href="#伪元素和伪类的区别" class="headerlink" title="伪元素和伪类的区别"></a>伪元素和伪类的区别</h3><ol>
<li>伪元素使用两个冒号,伪类使用一个冒号</li>
<li>伪元素添加了一个页面中没有的元素(只是从视觉效果上添加了,不是在文档树中添加),伪类是给页面中已经存在的的元素添加一个类.</li>
</ol>
<h2 id="CSS选择器有哪些？哪些属性可以继承？"><a href="#CSS选择器有哪些？哪些属性可以继承？" class="headerlink" title="CSS选择器有哪些？哪些属性可以继承？"></a>CSS选择器有哪些？哪些属性可以继承？</h2><p>1.id选择器（ # myid）<br>2.类选择器（.myclassname）<br>3.标签选择器（div, h1, p）<br>4.相邻选择器（h1 + p）<br>5.子选择器（ul &gt; li）<br>6.后代选择器（li a）<br>7.通配符选择器（ * ）<br>8.属性选择器（a[rel = “external”]）<br>9.伪类选择器（a:hover, li:nth-child）</p>
<p>可继承的样式： <code>font-size</code> <code>font-family</code> <code>color</code>, <code>ul</code> <code>li</code> <code>dl</code> <code>dd</code> <code>dt</code>;</p>
<p>不可继承的样式：<code>border</code> <code>padding</code> <code>margin</code> <code>width</code> <code>height</code>;</p>
<h1 id="选择器优先级"><a href="#选择器优先级" class="headerlink" title="选择器优先级"></a>选择器优先级</h1><p><code>!important</code>优先级最高(由于IE不支持!important，所以也可以利用它区分不同的浏览器。)<br>同权重: 内联样式表（标签内部）&gt; 嵌入样式表（当前文件中）&gt; 外部样式表（外部文件中）<br>行内样式(写在style标签里的样式) &gt; id样式 &gt; class样式 &gt; 标签名样式</p>
<h1 id="CSS基本样式"><a href="#CSS基本样式" class="headerlink" title="CSS基本样式"></a>CSS基本样式</h1><p>div（块级元素）：高度是由内部文档流元素高度的总和决定的。<strong>文档流</strong>：文档内元素的流动方向，<strong>内联元素</strong>是从左往右，<strong>块级元素</strong>是从上往下<br>span（内联元素）：高度是由其中文字高度决定的，内联元素设置width和height是无效的，上下的margin和padding也无效，要将它们设为<code>display:inline-block</code>才有效。</p>
<ul>
<li>常见块级元素: <code>div h1~h6 p hr form ul ol li table td tr th dl dt dd pre</code></li>
<li>常见内联元素: <code>em strong span a br img button input label select textarea code script</code></li>
</ul>
<blockquote>
<p>尽量不写height和width，这两个属性会引出很多bug，要宽高的时候可以用padding，但img最好先写width，因为可以先占位，因为引用图片时浏览器不知道图片大小，所有等图片下载完成，它后面的元素又要重新排位置，若先写好width，则不用重排，知道height也可以先写好height。<br>另外span元素设置padding的时候要将它设为display:inline-block，因为内联元素不能设置宽高，inline-block具有inline的同行特性，也具有block的高度特性。<br>对于display:inline(内联元素)的元素，设置width/height/上下margin和padding都是无效的</p>
</blockquote>
<h2 id="inline-block"><a href="#inline-block" class="headerlink" title="inline-block"></a>inline-block</h2><ol>
<li>inline-block 之间空隙</li>
</ol>
<ul>
<li>inline-block 之间有空格、Tab、换行符。</li>
<li>给父元素设置 font-size: 0，在 inline-block 元素上重新设置 font-size。</li>
</ul>
<ol start="2">
<li>inline-block 导致父元素增高若干像素</li>
</ol>
<ul>
<li>给 inline-block 元素设置 vertical-align: top</li>
</ul>
<p><strong>通用解决办法</strong> 不要设置 inline-block，使用 float 或 flex。</p>
<h2 id="浏览器默认样式"><a href="#浏览器默认样式" class="headerlink" title="浏览器默认样式"></a>浏览器默认样式</h2><p>浏览器对某些元素设置有默认样式，如 h1, ul, li 等。</p>
<h3 id="常见处理方式"><a href="#常见处理方式" class="headerlink" title="常见处理方式"></a>常见处理方式</h3><ol>
<li>Normalize.css</li>
<li>CSS Reset</li>
<li>简单去除</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  margin: <span class="number">0</span>;</span><br><span class="line">  padding: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CSS常见样式"><a href="#CSS常见样式" class="headerlink" title="CSS常见样式"></a>CSS常见样式</h2><h3 id="边框border"><a href="#边框border" class="headerlink" title="边框border"></a>边框border</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  border-width: <span class="number">1</span>px;</span><br><span class="line">  border-color: red;</span><br><span class="line">  border-style: solid;</span><br><span class="line">  border-bottom: none;<span class="comment">//下边框消失</span></span><br><span class="line">  border-radius: <span class="number">50</span>%;<span class="comment">//圆角</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line">.box2 &#123;</span><br><span class="line">  border: <span class="number">1</span>px red solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="实现不使用-border-画出1px高的线，在不同浏览器的标准模式与怪异模式下都能保持一致的效果。"><a href="#实现不使用-border-画出1px高的线，在不同浏览器的标准模式与怪异模式下都能保持一致的效果。" class="headerlink" title="实现不使用 border 画出1px高的线，在不同浏览器的标准模式与怪异模式下都能保持一致的效果。"></a>实现不使用 border 画出1px高的线，在不同浏览器的标准模式与怪异模式下都能保持一致的效果。</h2><p><code>&lt;div style=&quot;height:1px;overflow:hidden;background:red&quot;&gt;&lt;/div&gt;</code></p>
<h3 id="内边距padding"><a href="#内边距padding" class="headerlink" title="内边距padding"></a>内边距padding</h3><p><code>padding: 10px 20px 30px;//按照上右下左,即顺时针,缺哪个补哪个,缺左边,按20px补上.</code></p>
<h3 id="外边距margin"><a href="#外边距margin" class="headerlink" title="外边距margin"></a>外边距margin</h3><p>margin可以合写,可以分开.可以是数值,可以是百分比(相对于父元素).还可以是负值.有外边距合并问题</p>
<h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><ul>
<li>块级: block,list-item,table</li>
<li>行内: inline,inline-table,inline-block</li>
<li><code>inherit</code>: 规定应该从父元素继承display属性的值</li>
</ul>
<h2 id="display-inline-block-什么时候会显示间隙"><a href="#display-inline-block-什么时候会显示间隙" class="headerlink" title="display:inline-block 什么时候会显示间隙"></a>display:inline-block 什么时候会显示间隙</h2><p>移除空格、使用margin负值、使用font-size:0、letter-spacing、word-spacing</p>
<h3 id="font"><a href="#font" class="headerlink" title="font"></a>font</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">body&#123; </span><br><span class="line">  font: <span class="number">12</span>px/<span class="number">1.5</span> Arial;</span><br><span class="line">&#125;</span><br><span class="line">p&#123;</span><br><span class="line">  line-height: <span class="number">1.5</span>;<span class="comment">//行高是字体的1.5倍</span></span><br><span class="line">  font-size: <span class="number">14</span>px;<span class="comment">//字体大小</span></span><br><span class="line">  font-family: Arial;<span class="comment">//字体</span></span><br><span class="line">  font-weight: bold;<span class="comment">//文字粗度,粗体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Chrome默认字体是16px,最小字体是12px.</p>
</blockquote>
<h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><ul>
<li>text-aglin: 文本对齐方式,left,right,center,justify</li>
<li>text-ident: 文案第一行缩进距离</li>
<li>text-decoration: 划线,none,underline,line-through,overline</li>
<li>text-transform: 改变文字大小写,none,uppercase,lowercase,captialize</li>
<li>word-spacing: 可以改变字(单词)之间的标准间距</li>
<li>letter-spacing: 字母之间的间隔<h4 id="单行文本溢出加…"><a href="#单行文本溢出加…" class="headerlink" title="单行文本溢出加…"></a>单行文本溢出加…</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.box&gt;h3 &#123;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  text-overflow: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><ul>
<li>单词: red,blue,black,pink,yellow</li>
<li>十六进制: #000000(黑),#fff(白),#eee(淡灰),#ccc(灰色),#666(深灰)</li>
<li><code>rgb</code>:rgb(255,255,255)白色,rgba(0,0,0,0.5)透明度为0.5的黑色</li>
</ul>
<h3 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h3><h4 id="px-rpx-em-rem的区别"><a href="#px-rpx-em-rem的区别" class="headerlink" title="px rpx em rem的区别"></a><code>px rpx em rem</code>的区别</h4><ol>
<li><code>px</code>是像素pixel，相对于屏幕分辨率的单位</li>
<li><code>em</code>是相对单位，相对于当前对象内的文本尺寸。如果没有设置，则相对浏览器默认尺寸16px，1em=16px。<br>为了简化，可以将body里font-size=62.5%，那么em就是16px*62%=10px。1em=10px</li>
</ol>
<p><strong>em特点</strong>：em值不固定，会继承父元素字体大小</p>
<ol start="3">
<li><code>rem</code>是root em。只相对于html根元素</li>
<li><code>rpx</code>是微信小程序的方案,是响应式像素,可以根据屏幕宽度进行自适应。规定屏幕为750rpx.物理像素<br>1px=2rpx</li>
<li><code>vh vw</code>: 相对单位,1vw为屏幕宽度的1%</li>
</ol>
<h3 id="background"><a href="#background" class="headerlink" title="background"></a>background</h3><ul>
<li><code>background-color</code>: transparent 透明背景;颜色值;半透明浮层的背景颜色建议使用 rgba() 而不是 opacity 设置透明度。</li>
<li><code>background-image</code>: url(../images/bg.png);// 属性用于给元素设置一张或多张背景图。</li>
<li><code>background-repeat</code> 控制背景图片的重复方式。<code>no-repeat</code>不重复;<code>repeat-x</code>水平方向重复;<code>repeat-y</code> 垂直方向重复;</li>
<li><code>background-position</code> 设置背景图的位置。<code>x y</code>;<code>x% y%</code>;<code>[top|center|bottom][left|center|right]</code></li>
<li><code>background-size</code> 设定背景图片的大小。IE9 以下不支持;<code>cover</code>缩放背景图片以完全覆盖背景区，可能背景图片部分看不见;<code>contain</code>缩放背景图片以完全装入背景区，可能背景区部分空白。</li>
<li><code>background-clip</code>: 设置元素背景区域覆盖的范围.border-box 覆盖至边框的最外围;padding-box 覆盖至内边距的最外围;content-box 仅覆盖元素内容区域</li>
</ul>
<p>缩写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.avatar &#123;</span><br><span class="line">  background: #fff url(avatar.svg) no-repeat left center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="隐藏or透明"><a href="#隐藏or透明" class="headerlink" title="隐藏or透明"></a>隐藏or透明</h3><ul>
<li>opacity: 0;//透明度为0,整体</li>
<li>visibility: hidden;//和opacity: 0;类似</li>
<li>display: none;//消失,不占用位置</li>
<li>background-color: rgba(0,0,0,0.2);//只是背景色透明</li>
</ul>
<h4 id="display-none和visibility-hidden的区别"><a href="#display-none和visibility-hidden的区别" class="headerlink" title="display:none和visibility:hidden的区别"></a>display:none和visibility:hidden的区别</h4><p><code>display:none</code>:<br>不占据任何空间，在文档渲染时，该元素如同不存在（但依然存在文档对象模型树中）.会触发reflow（回流）,进行渲染.不是继承属性，元素及其子元素都会消失<br><code>visibility</code>:<br>该元素空间依旧存在.只会触发repaint（重绘），因为没有发现位置变化，不进行渲染.是继承属性，若子元素使用了visibility:visible，则不继承，这个子孙元素又会显现出</p>
<h3 id="box-shadow"><a href="#box-shadow" class="headerlink" title="box-shadow"></a>box-shadow</h3><p><code>box-shadow: -16px 0 16px 1px rgba(102,102,102,0.4);</code><br>第一个值代表阴影左右偏移，正数往右，负数往左<br>第二个值代表上下偏移，正往下，负往上<br>第三个值越大，模糊面积越大越淡<br>第四个值取正值时，阴影扩大，取负值时，阴影收缩</p>
<h3 id="line-height"><a href="#line-height" class="headerlink" title="line-height"></a>line-height</h3><ul>
<li>line-height: 2;//本身字体高度的2倍</li>
<li>line-height: 200%;//父元素高度的2倍,父元素没写行高就是默认16px*2=32px</li>
<li>height=line-height;//垂直居中单行文本</li>
</ul>
<h3 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h3><ul>
<li>标准盒模型: border-box,即padding,border不在width,height范围内</li>
<li>IE盒模型: content-box,即width=content尺寸+padding+border</li>
</ul>
<blockquote>
<p>css3可以设置<code>box-sizing: content-box;//标准盒模型</code></p>
</blockquote>
<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><p>CSS position属性用于指定一个元素在文档中的定位方式。<br>语法: <code>static</code> | <code>relative</code> | <code>absolute</code> | <code>sticky</code> | <code>fixed</code></p>
<ol>
<li><code>static</code>: 该关键字指定元素使用正常的布局行为，即元素在文档常规流中当前的布局位置。此时 <code>top, right, bottom, left 和 z-index</code> 属性无效。</li>
<li><code>relative:</code> 该关键字下，元素先放置在未添加定位时的位置，再在不改变页面布局的前提下调整元素位置（因此会在此元素未添加定位时所在位置留下空白）。<code>position:relative</code> 对 table元素无效.</li>
<li><code>absolute</code>: 不为元素预留空间，通过指定元素相对于最近的非 static 定位父元素的偏移，来确定元素位置。绝对定位的元素可以设置外边距（margins），且不会与其他边距合并。</li>
<li><code>fixed</code>: 不为元素预留空间，而是通过指定元素相对于屏幕视口（viewport）的位置来指定元素位置。元素的位置在屏幕滚动时不会改变。fixed 属性会创建新的层叠上下文。当元素祖先的 transform  属性非 none 时，容器由视口改为该祖先。</li>
<li><code>sticky</code>: 盒位置根据正常流计算(这称为正常流动中的位置)，然后相对于该元素在流中的 flow root（BFC）和 containing block（最近的块级祖先元素）定位。在所有情况下（即便被定位元素为 table 时），该元素定位均不对后续元素造成影响。当元素 B 被粘性定位时，后续元素的位置仍按照 B 未定位时的位置来确定。</li>
</ol>
<h3 id="相对定位-relative"><a href="#相对定位-relative" class="headerlink" title="相对定位(relative)"></a>相对定位(relative)</h3><p>相对定位的元素是在文档中的正常位置偏移给定的值，但是不影响其他元素的偏移。</p>
<h3 id="绝对定位-absolute-fixed"><a href="#绝对定位-absolute-fixed" class="headerlink" title="绝对定位(absolute,fixed)"></a>绝对定位(absolute,fixed)</h3><p>相对定位的元素并未脱离文档流，而绝对定位的元素则脱离了文档流。在布置文档流中其它元素时，绝对定位元素不占据空间。绝对定位元素相对于最近的非 static 祖先元素定位。当这样的祖先元素不存在时，则相对于ICB（inital container block, 初始包含块）。</p>
<h3 id="固定定位-fixed"><a href="#固定定位-fixed" class="headerlink" title="固定定位(fixed)"></a>固定定位(fixed)</h3><p>固定定位与绝对定位相似，但元素的包含块为 viewport 视口。该定位方式常用于创建在滚动屏幕时仍固定在相同位置的元素。</p>
<h3 id="粘性定位-sticky"><a href="#粘性定位-sticky" class="headerlink" title="粘性定位(sticky)"></a>粘性定位(sticky)</h3><p>粘性定位可以被认为是相对定位和固定定位的混合。元素在跨越特定阈值前为相对定位，之后为固定定位。<br><code>#one { position: sticky; top: 10px; }</code><br>在 viewport 视口滚动到元素 top 距离小于 10px 之前，元素为相对定位。之后，元素将固定在与顶部距离 10px 的位置，直到 viewport 视口回滚到阈值以下。(理解为大于10px时,属于相对定位,可以在页面滚动时随之滚动,当距视口10px时,固定了,就像粘在那里了)</p>
<h2 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h2><p><code>float: left;//向左浮动</code></p>
<ul>
<li>浮动元素并不是完全意义上的脱离文档流,至少普通元素里的文本可以发现,行内元素也可以发现</li>
<li>设置浮动会让块级元素从左到右或从右到左排列.</li>
<li>块级元素设置浮动呈现inline-block特性,不再撑开父元素,宽度也会收缩</li>
<li>行内元素设置浮动呈现inline-block特性,可以设置宽高.</li>
</ul>
<h3 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h3><p>问题:</p>
<ul>
<li>对后续元素位置产生影响</li>
<li>父容器高度计算出现问题</li>
</ul>
<p>清除浮动是为了清除使用浮动元素产生的影响。浮动的元素，高度会塌陷，而高度的塌陷使我们页面后面的布局不能正常显示。<br><strong>通用解决方案</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">父元素加clearfix</span><br><span class="line">.clearfix::after&#123;</span><br><span class="line">  content:<span class="string">''</span>;</span><br><span class="line">  display: block;</span><br><span class="line">  clear: both;</span><br><span class="line">&#125;</span><br><span class="line">.clearfix&#123;</span><br><span class="line">  *zoom: <span class="number">1</span></span><br><span class="line">  <span class="comment">//兼容IE6,7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="BFC-块级格式化上下文"><a href="#BFC-块级格式化上下文" class="headerlink" title="BFC(块级格式化上下文)"></a>BFC(块级格式化上下文)</h2><p>决定了其子元素将如何定位,以及其他元素的关系和相互作用<br>在正常流中的盒子要么属于块级格式化上下文,要么属于内联格式化上下文</p>
<h3 id="BFC的产生"><a href="#BFC的产生" class="headerlink" title="BFC的产生"></a>BFC的产生</h3><ol>
<li>根元素</li>
<li>float不为none;</li>
<li>position: absolute/fixed;</li>
<li>display: inline-block/flex/inline-flex/table-cell;</li>
<li>overflow不为visible;</li>
</ol>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ol>
<li>内部的Box会在垂直方向，一个接一个地放置。</li>
<li>Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠.每个元素的margin box的左边，与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。(如果有多个浮动盒,因为是浮动盒,所以后面的有新的BFC,会挨着前面的从左到右排列)</li>
<li>BFC的区域不会与float box重叠。(不跟外面的浮动盒重叠,会把浮动盒挤到一边)</li>
<li>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</li>
<li>计算BFC的高度时，浮动元素也参与计算(包裹浮动元素).</li>
</ol>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ol>
<li>阻止margin合并,因为BFC与外界隔离,自己的margin也就不再合并.</li>
<li>contain float(包裹浮动元素).</li>
</ol>
<h2 id="边距合并"><a href="#边距合并" class="headerlink" title="边距合并"></a>边距合并</h2><h3 id="合并场景"><a href="#合并场景" class="headerlink" title="合并场景"></a>合并场景</h3><ol>
<li>相邻元素合并,间距为二者中较大值</li>
<li>父子合并</li>
<li>自己合并</li>
</ol>
<h3 id="取消合并"><a href="#取消合并" class="headerlink" title="取消合并"></a>取消合并</h3><ol>
<li>加border,padding</li>
<li>BFC</li>
</ol>
<h1 id="居中"><a href="#居中" class="headerlink" title="居中"></a>居中</h1><h2 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h2><ol>
<li><strong>块级元素水平居中</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">margin-left:auto;</span><br><span class="line">margin-right:auto;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>内联元素水平居中，给它们的父元素加上</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-align:center;</span><br></pre></td></tr></table></figure>

<p>若不是内联元素想让它居中，可加<code>display:inline-block</code>，加了之后一般还要加下面这句，不然可能会有bug（下面可能会空出一行）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vertical-align: top;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>让导航栏横过来，并在同一行里均匀分布</strong></li>
</ol>
<p>给ul加css</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ul&#123;</span><br><span class="line">  display:flex;  </span><br><span class="line">  justyfy-content:space-between;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>去掉li的<code>float:left</code><br>去掉ul的<code>clearfix</code></p>
<h2 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h2><ol>
<li><strong>若父元素没有写height，则直接在父元素写</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">padding: <span class="number">10</span>px <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>子元素就可以居中，所以尽量避免父亲高度确定</p>
<h3 id="以下是宽高确定-注意写宽高"><a href="#以下是宽高确定-注意写宽高" class="headerlink" title="以下是宽高确定(注意写宽高)"></a>以下是宽高确定(注意写宽高)</h3><ol start="2">
<li><strong>让一个元素在父级元素中绝对居中</strong></li>
</ol>
<p>方法一：<br>给父级元素加:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">position:relative;   <span class="comment">//若父级元素是body可以不用加</span></span><br><span class="line"><span class="comment">//注意父元素需要宽高</span></span><br></pre></td></tr></table></figure>

<p>再给自己加：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">  <span class="comment">//注意子元素也需要宽高</span></span><br><span class="line"> position: absolute;</span><br><span class="line"> top: <span class="number">0</span>;</span><br><span class="line"> left: <span class="number">0</span>;</span><br><span class="line"> bottom: <span class="number">0</span>;</span><br><span class="line"> right: <span class="number">0</span>;</span><br><span class="line"> margin: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法二：（若不兼容IE，工作中只要用这一种方法即可，最简单，Chrome，移动端都可以用）<br>给父元素加：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">display: flex;               <span class="comment">//让它变成一个弹性盒</span></span><br><span class="line">justify-content: center;     <span class="comment">//水平居中</span></span><br><span class="line">align-items: center;         <span class="comment">//垂直居中</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>table自带居中（兼容IE）</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.parent&#123;</span><br><span class="line">  border: <span class="number">1</span>px solid red;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.child&#123;</span><br><span class="line">  border: <span class="number">1</span>px solid green;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;table class="parent"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;tr&gt;</span></span><br><span class="line"><span class="regexp">    &lt;td class="child"&gt;</span></span><br><span class="line"><span class="regexp">      文字</span></span><br><span class="line"><span class="regexp">    &lt;/</span>td&gt;</span><br><span class="line">  &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>table&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<p>文字会居中</p>
<ol start="4">
<li><strong>用div假扮table（兼容IE）</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">div.table&#123;</span><br><span class="line">  display: table;</span><br><span class="line">  border: <span class="number">1</span>px solid red;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.tr&#123;</span><br><span class="line">  display: table-row;</span><br><span class="line">  border: <span class="number">1</span>px solid green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.td&#123;</span><br><span class="line">  display: table-cell;</span><br><span class="line">  border: <span class="number">1</span>px solid blue;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="table"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div class="tr"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div class="td"&gt;</span></span><br><span class="line"><span class="regexp">        文字</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>用100%高度的before和after</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">.parent&#123;</span><br><span class="line">  border: <span class="number">3</span>px solid red;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child&#123;</span><br><span class="line">  border: <span class="number">3</span>px solid black;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: <span class="number">300</span>px;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.parent:before&#123;</span><br><span class="line">  content:<span class="string">''</span>;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line">.parent:after&#123;</span><br><span class="line">  content:<span class="string">''</span>;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>绝对定位加上margin-top: -自身height的50%</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.parent&#123;</span><br><span class="line">  height: <span class="number">600</span>px;</span><br><span class="line">  border: <span class="number">1</span>px solid red;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.child&#123;</span><br><span class="line">  border: <span class="number">1</span>px solid green;</span><br><span class="line">  width: <span class="number">300</span>px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: <span class="number">50</span>%;</span><br><span class="line">  left: <span class="number">50</span>%;</span><br><span class="line">  margin-left: <span class="number">-150</span>px;</span><br><span class="line">  height: <span class="number">20</span>px;</span><br><span class="line">  margin-top: <span class="number">-10</span>px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="parent"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div class="child"&gt;</span></span><br><span class="line"><span class="regexp">    文字</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="7">
<li>使用<strong>transform</strong></li>
</ol>
<p>子元素加<code>{top:50%,transform:translate(-50%)}</code></p>
<h1 id="CSS3有哪些新特性？"><a href="#CSS3有哪些新特性？" class="headerlink" title="CSS3有哪些新特性？"></a>CSS3有哪些新特性？</h1><p>新增各种CSS选择器    （: not(.input)：所有 class 不是“input”的节点）<br>圆角            （border-radius:8px）<br>多列布局        （multi-column layout）<br>阴影和反射    （box-shadow\reflect）<br>文字特效        （text-shadow）<br>文字渲染        （Text-decoration）<br>线性渐变        （gradient）<br>旋转             transform:rotate(90deg)<br>缩放      transform:scale(0.85,0.90)<br>位移      transform:translate(0px,-30px)<br>倾斜      transform:skew(-9deg,0deg)<br>动画      Animation</p>
<h1 id="CSS动画"><a href="#CSS动画" class="headerlink" title="CSS动画"></a>CSS动画</h1><h2 id="transition-过渡"><a href="#transition-过渡" class="headerlink" title="transition(过渡)"></a>transition(过渡)</h2><p><code>transition</code>的作用在于指定状态变化所需要的时间.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">  transition: <span class="number">1</span>s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="指定属性"><a href="#指定属性" class="headerlink" title="指定属性"></a>指定属性</h3><p>可以指定<code>transition</code>使用的属性,比如只适用于height<br><code>transition: 1s height;</code></p>
<h3 id="delay-延迟"><a href="#delay-延迟" class="headerlink" title="delay(延迟)"></a>delay(延迟)</h3><p><code>transition: 1s height,1s 1s width;</code><br>width在一秒之后在开始变化,也就是延迟一秒.delay可以指定动画发生的顺序,使得不同transition可以连在一起,形成不同效果.</p>
<h3 id="transition-timing-function-缓动函数"><a href="#transition-timing-function-缓动函数" class="headerlink" title="transition-timing-function(缓动函数)"></a>transition-timing-function(缓动函数)</h3><p>transition的状态变化速度,默认不是匀速的,而是逐渐放慢的,这叫做ease.<br><code>transition: 1s ease;</code><br>除了ease,其他模式还有:</p>
<ol>
<li>linear: 匀速</li>
<li>ease-in: 加速</li>
<li>ease-out: 减速</li>
<li>cubic-bezier: 自定义速度模式(可以在cubic-bezier.com里设置)</li>
</ol>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>简写:<br><code>transition: 1s 1s height ease;</code><br>完整写法:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">transition-property: height;</span><br><span class="line">transition-duration: <span class="number">1</span>s;</span><br><span class="line">transition-delay: <span class="number">1</span>s;</span><br><span class="line">transition-timing-<span class="function"><span class="keyword">function</span>: <span class="title">ease</span>;</span></span><br></pre></td></tr></table></figure>

<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ol>
<li>transition需要明确知道，开始状态和结束状态的具体数值，才能计算出中间状态，什么none到block之类的是不行的</li>
<li>transition是一次性的，不能重复发生，除非一再触发</li>
</ol>
<h2 id="animation-动画"><a href="#animation-动画" class="headerlink" title="animation(动画)"></a>animation(动画)</h2><p>使用animation首先需要定义动画过程,即关键帧</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@keyframes rainbow &#123;</span><br><span class="line">  0% &#123; background: #c00; &#125;</span><br><span class="line">  <span class="number">50</span>% &#123; <span class="attr">background</span>: orange; &#125;</span><br><span class="line">  <span class="number">100</span>% &#123; <span class="attr">background</span>: yellowgreen; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>写动画帧里的css记得加<code>;</code>号.<br>定义关键帧后可以给DOM元素绑定动画,和事件比较像.加<code>infinite</code>代表无限次,改成数字就是循环多少次.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div:hover &#123;</span><br><span class="line">  animation: <span class="number">1</span>s rainbow infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="animation-fill-mode"><a href="#animation-fill-mode" class="headerlink" title="animation-fill-mode"></a>animation-fill-mode</h3><p>动画结束后,会立即跳到结束状态,如果想让动画保持在结束状态,需要使用animation-fill-mode属性.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div:hover&#123;</span><br><span class="line">  animation: <span class="number">1</span>s rainbow forwards;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>animation-fill-mode的属性:</p>
<ol>
<li>none: 默认值,回到动画未开始的状态.</li>
<li>forwards: 让动画停留在结束状态</li>
<li>backwards: 让动画回到第一帧的状态</li>
<li>both: animation-direction轮流应用forwards和backwards规则</li>
</ol>
<h3 id="animation-direction"><a href="#animation-direction" class="headerlink" title="animation-direction"></a>animation-direction</h3><p>动画循环播放时，每次都是从结束状态跳回到起始状态，再开始播放。animation-direction属性，可以改变顺序<br>默认情况是，animation-direction等于normal.此外，还可以等于取alternate(先从前往后再从后往前)、reverse(从后往前)、alternate-reverse等值.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div:hover &#123;</span><br><span class="line">  animation: <span class="number">1</span>s rainbow <span class="number">3</span> normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="animation-play-state"><a href="#animation-play-state" class="headerlink" title="animation-play-state"></a>animation-play-state</h3><p>有时，动画播放过程中，会突然停止。这时，默认行为是跳回到动画的开始状态，如果想让动画保持突然终止时的状态，就要使用animation-play-state属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    animation: spin <span class="number">1</span>s linear infinite;</span><br><span class="line">    animation-play-state: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:hover &#123;</span><br><span class="line">  animation-play-state: running;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><p>简写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div:hover &#123;</span><br><span class="line">  animation: <span class="number">1</span>s <span class="number">1</span>s rainbow linear <span class="number">3</span> forwards normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完整:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">div:hover &#123;</span><br><span class="line">  animation-name: rainbow;</span><br><span class="line">  animation-duration: <span class="number">1</span>s;</span><br><span class="line">  animation-timing-<span class="function"><span class="keyword">function</span>: <span class="title">linear</span>;</span></span><br><span class="line"><span class="function">  <span class="title">animation</span>-<span class="title">delay</span>: 1<span class="title">s</span>;</span></span><br><span class="line"><span class="function">  <span class="title">animation</span>-<span class="title">fill</span>-<span class="title">mode</span>:<span class="title">forwards</span>;</span></span><br><span class="line"><span class="function">  <span class="title">animation</span>-<span class="title">direction</span>: <span class="title">normal</span>;</span></span><br><span class="line"><span class="function">  <span class="title">animation</span>-<span class="title">iteration</span>-<span class="title">count</span>: 3;</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>0%可以用from代表，100%可以用to代表，因此上面的代码等同于下面的形式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@keyframes rainbow &#123;</span><br><span class="line">  from &#123; background: #c00 &#125;</span><br><span class="line">  <span class="number">50</span>% &#123; <span class="attr">background</span>: orange &#125;</span><br><span class="line">  to &#123; <span class="attr">background</span>: yellowgreen &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="steps-分步过渡"><a href="#steps-分步过渡" class="headerlink" title="steps(分步过渡)"></a>steps(分步过渡)</h3><p>浏览器从一个状态向另一个状态过渡，是平滑过渡。steps函数可以实现分步过渡。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div:hover &#123;</span><br><span class="line">  animation: <span class="number">1</span>s rainbow infinite steps(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="歌词效果"><a href="#歌词效果" class="headerlink" title="歌词效果"></a>歌词效果</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@keyframes moving &#123;</span><br><span class="line">  <span class="keyword">from</span> &#123;</span><br><span class="line">    width: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.line &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">p &#123;</span><br><span class="line">  width: <span class="number">600</span>px;</span><br><span class="line">  font-size: <span class="number">40</span>px;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: <span class="number">0</span>;</span><br><span class="line">  z-index: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p:nth-child(<span class="number">1</span>) &#123;</span><br><span class="line">  color: red;</span><br><span class="line">  animation: moving <span class="number">20</span>s</span><br><span class="line">&#125;</span><br><span class="line">p:nth-child(<span class="number">2</span>) &#123;</span><br><span class="line">  z-index: <span class="number">-1</span>;</span><br><span class="line">  color: #666;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="line"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;p&gt;To my days change my ways为生活我试着不断改变&lt;/</span>p&gt;</span><br><span class="line">  &lt;p&gt;This sudden end to my days这生命的终点突如其来&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="打字机效果"><a href="#打字机效果" class="headerlink" title="打字机效果"></a>打字机效果</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@keyframes typing &#123;<span class="keyword">from</span> &#123; <span class="attr">width</span>: <span class="number">0</span> &#125; &#125;</span><br><span class="line">@keyframes blink-caret &#123; <span class="number">50</span>% &#123; border-clolr: transparent &#125; &#125;</span><br><span class="line">h1 &#123;</span><br><span class="line">  border-right: <span class="number">0.1</span>em solid;</span><br><span class="line">  color: #fff;</span><br><span class="line">  width: <span class="number">352</span>px;</span><br><span class="line">  height: <span class="number">30</span>px;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  animation: typing <span class="number">5</span>s steps(<span class="number">11</span>, end),<span class="comment">//变11次变成最终状态</span></span><br><span class="line">  blink-caret <span class="number">.5</span>s infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line">body &#123;</span><br><span class="line">  background: #000;</span><br><span class="line">  height: <span class="number">100</span>vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;h1&gt;躺在你的学校操场看星空&lt;/</span>h1&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="如果需要手动写动画，你认为最小时间间隔是多久，为什么"><a href="#如果需要手动写动画，你认为最小时间间隔是多久，为什么" class="headerlink" title="如果需要手动写动画，你认为最小时间间隔是多久，为什么"></a>如果需要手动写动画，你认为最小时间间隔是多久，为什么</h1><p>多数显示器默认频率是60Hz，即1秒刷新60次，所以理论上最小间隔为1/60＊1000ms ＝ 16.7ms</p>
<h1 id="transform-变形"><a href="#transform-变形" class="headerlink" title="transform(变形)"></a>transform(变形)</h1><p>transform属性主要包括rotate(旋转),skew(扭曲),scale(缩放),translate(移动),matrix(矩阵变形)<br>transform ： none | <transform-function> [ <transform-function> ]*<br>transform中使用多个属性时却需要有空格隔开，可用于内联(inline)元素和块级(block)元素</transform-function></transform-function></p>
<h2 id="rotate-旋转"><a href="#rotate-旋转" class="headerlink" title="rotate(旋转)"></a>rotate(旋转)</h2><p>可以通过rotate使元素旋转一定的度数<br><code>transform: rotate(30deg)//顺时针旋转30度</code></p>
<ol>
<li>旋转之后元素仍占据原来位置，实际上所有的transform都是这样，缩放、位移等都不会改变元素占据的位置</li>
<li>元素旋转的的基点默认是中心，可以通过transform-origin属性改变<br><code>transform:rotate(30deg); transform-origin: 0% 0%;</code></li>
</ol>
<p>transform-origin的取值可以是:</p>
<ol>
<li>top, bottom, left, right, center</li>
<li>百分数</li>
</ol>
<h2 id="translate-位移"><a href="#translate-位移" class="headerlink" title="translate(位移)"></a>translate(位移)</h2><p><code>transform: translateY(100px)//Y轴位移100px;</code></p>
<h2 id="scale-缩放"><a href="#scale-缩放" class="headerlink" title="scale(缩放)"></a>scale(缩放)</h2><p>scale(x,y): 使元素水平方向和垂直方向同时缩放<br><code>transform: translate(3)//相同的比例缩放两个方向</code></p>
<h2 id="skew-扭曲"><a href="#skew-扭曲" class="headerlink" title="skew(扭曲)"></a>skew(扭曲)</h2><p>通过skew使元素扭曲一定的度数<br><code>transform:skew(10deg, 20deg);//x轴扭曲10度,y轴扭曲20度</code></p>
<h2 id="3D"><a href="#3D" class="headerlink" title="3D"></a>3D</h2><p>元素需要设置需要设置perspective来激活3D效果</p>
<ol>
<li><code>transform: perspective( 600px );</code></li>
<li><code>perspective: 600px;</code></li>
</ol>
<p>perspective属性的值决定了3D效果的强烈程度，可以认为是观察者到页面的距离。<br>越大距离越远，视觉上的3D效果就会相应的减弱。</p>
<h3 id="3D变形方法"><a href="#3D变形方法" class="headerlink" title="3D变形方法"></a>3D变形方法</h3><p>rotateX( angle )<br>rotateY( angle )<br>rotateZ( angle )<br>translateZ( tz )<br>scaleZ( sz )<br>translateX()方法使元素延X轴移动，translateZ()使元素延Z轴（在3D空间中方向从前到后）移动。正值使元素离观察者更近，负值使元素变远。</p>
<h1 id="渐进增强和优雅降级"><a href="#渐进增强和优雅降级" class="headerlink" title="渐进增强和优雅降级"></a>渐进增强和优雅降级</h1><p><strong>渐进增强</strong>（Progressive Enhancement）：一开始就针对低版本浏览器进行构建页面，完成基本的功能，然后再针对高级浏览器进行效果、交互、追加功能达到更好的体验。</p>
<p><strong>优雅降级</strong>（Graceful Degradation）：一开始就构建站点的完整功能，然后针对浏览器测试和修复。比如一开始使用 CSS3 的特性构建了一个应用，然后逐步针对各大浏览器进行 hack 使其可以在低版本浏览器上正常浏览。</p>
<p>其实渐进增强和优雅降级并非什么新概念，只是旧的概念换了一个新的说法。在传统软件开发中，经常会提到向上兼容和向下兼容的概念。渐进增强相当于向上兼容，而优雅降级相当于向下兼容。</p>
<h2 id="二者区别"><a href="#二者区别" class="headerlink" title="二者区别"></a>二者区别</h2><p>优雅降级观点认为:<br>应该针对那些最高级、最完善的浏览器来设计网站。而将那些被认为“过时”或有功能缺失的浏览器下的测试工作安排在开发周期的最后阶段，并把测试对象限定为主流浏览器（如 IE、Mozilla 等）的前一个版本。在这种设计范例下，旧版的浏览器被认为仅能提供“简陋却无妨 (poor, but passable)” 的浏览体验。你可以做一些小的调整来适应某个特定的浏览器。但由于它们并非我们所关注的焦点，因此除了修复较大的错误之外，其它的差异将被直接忽略。</p>
<p>渐进增强观点则认为:<br>应关注于内容本身。请注意其中的差别：我甚至连“浏览器”三个字都没提。内容是我们建立网站的诱因。有的网站展示它，有的则收集它，有的寻求，有的操作，还有的网站甚至会包含以上的种种，但相同点是它们全都涉及到内容。这使得渐进增强成为一种更为合理的设计范例。这也是它立即被 Yahoo! 所采纳并用以构建其“分级式浏览器支持 (Graded Browser Support)”策略的原因所在。</p>
<h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.transition &#123; <span class="comment">/*渐进增强写法*/</span></span><br><span class="line">  -webkit-transition: all <span class="number">.5</span>s;</span><br><span class="line">     -moz-transition: all <span class="number">.5</span>s;</span><br><span class="line">       -o-transition: all <span class="number">.5</span>s;</span><br><span class="line">          transition: all <span class="number">.5</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.transition &#123; <span class="comment">/*优雅降级写法*/</span></span><br><span class="line">          transition: all <span class="number">.5</span>s;</span><br><span class="line">       -o-transition: all <span class="number">.5</span>s;</span><br><span class="line">     -moz-transition: all <span class="number">.5</span>s;</span><br><span class="line">  -webkit-transition: all <span class="number">.5</span>s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前缀CSS3（<code>-webkit-* / -moz-* / -o-*</code>）和正常CSS3在浏览器中的支持情况是这样的：</p>
<ol>
<li>很久以前：浏览器前缀CSS3和正常CSS3都不支持；</li>
<li>不久之前：浏览器只支持前缀CSS3，不支持正常CSS3；</li>
<li>现在：浏览器既支持前缀CSS3，又支持正常CSS3；</li>
<li>未来：浏览器不支持前缀CSS3，仅支持正常CSS3. </li>
</ol>
<p>渐进增强的写法，优先考虑老版本浏览器的可用性，最后才考虑新版本的可用性。在时期3前缀CSS3和正常CSS3都可用的情况下，正常CSS3会覆盖前缀CSS3。优雅降级的写法，优先考虑新版本浏览器的可用性，最后才考虑老版本的可用性。在时期3前缀CSS3和正常CSS3都可用的情况下，前缀CSS3会覆盖正常的CSS3。</p>
<h1 id="重绘和回流"><a href="#重绘和回流" class="headerlink" title="重绘和回流"></a>重绘和回流</h1><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><ol>
<li>浏览器使用流式布局模型 (Flow Based Layout)。</li>
<li>浏览器会把HTML解析成DOM，把CSS解析成CSSOM，DOM和CSSOM合并就产生了Render Tree。</li>
<li>有了RenderTree，我们就知道了所有节点的样式，然后计算他们在页面上的大小和位置，最后把节点绘制到页面上。</li>
<li>由于浏览器使用流式布局，对Render Tree的计算通常只需要遍历一次就可以完成，但table及其内部元素除外，他们可能需要多次计算，通常要花3倍于同等元素的时间，这也是为什么要避免使用table布局的原因之一。</li>
</ol>
<blockquote>
<p>回流必将引起重绘，重绘不一定会引起回流。</p>
</blockquote>
<h2 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h2><p>定义: 当页面中元素样式的改变并不影响它在文档流中的位置时（例如：color、background-color、visibility等），浏览器会将新样式赋予给元素并重新绘制它，这个过程称为重绘。</p>
<h2 id="回流"><a href="#回流" class="headerlink" title="回流"></a>回流</h2><p>定义: 当Render Tree中部分或全部元素的尺寸、结构、或某些属性发生改变时，浏览器重新渲染部分或全部文档的过程称为回流。</p>
<h3 id="导致回流的操作"><a href="#导致回流的操作" class="headerlink" title="导致回流的操作"></a>导致回流的操作</h3><p>页面首次渲染<br>浏览器窗口大小发生改变<br>元素尺寸或位置发生改变<br>元素内容变化（文字数量或图片大小等等）<br>元素字体大小变化<br>添加或者删除可见的DOM元素<br>激活CSS伪类（例如：:hover）<br>查询某些属性或调用某些方法</p>
<h3 id="导致回流的属性"><a href="#导致回流的属性" class="headerlink" title="导致回流的属性"></a>导致回流的属性</h3><p>clientWidth、clientHeight、clientTop、clientLeft<br>offsetWidth、offsetHeight、offsetTop、offsetLeft<br>scrollWidth、scrollHeight、scrollTop、scrollLeft<br>scrollIntoView()、scrollIntoViewIfNeeded()<br>getComputedStyle()<br>getBoundingClientRect()<br>scrollTo()</p>
<h2 id="性能影响"><a href="#性能影响" class="headerlink" title="性能影响"></a>性能影响</h2><p><strong>回流比重绘的代价要更高。</strong><br>有时即使仅仅回流一个单一的元素，它的父元素以及任何跟随它的元素也会产生回流。<br>现代浏览器会对频繁的回流或重绘操作进行优化：<br>浏览器会维护一个队列，把所有引起回流和重绘的操作放入队列中，如果队列中的任务数量或者时间间隔达到一个阈值的，浏览器就会将队列清空，进行一次批处理，这样可以把多次回流和重绘变成一次。<br>当你访问以下属性或方法时，浏览器会立刻清空队列：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">clientWidth、clientHeight、clientTop、clientLeft</span><br><span class="line">offsetWidth、offsetHeight、offsetTop、offsetLeft</span><br><span class="line">scrollWidth、scrollHeight、scrollTop、scrollLeft</span><br><span class="line">width、height</span><br><span class="line">getComputedStyle()</span><br><span class="line">getBoundingClientRect()</span><br></pre></td></tr></table></figure>

<p>因为队列中可能会有影响到这些属性或方法返回值的操作，即使你希望获取的信息与队列中操作引发的改变无关，浏览器也会强行清空队列，确保你拿到的值是最精确的。</p>
<h2 id="如何避免"><a href="#如何避免" class="headerlink" title="如何避免"></a>如何避免</h2><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><p>避免使用table布局。<br>尽可能在DOM树的最末端改变class。<br>避免设置多层内联样式。<br>将动画效果应用到position属性为absolute或fixed的元素上。<br>避免使用CSS表达式（例如：calc()）。</p>
<h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><p>避免频繁操作样式，最好一次性重写style属性，或者将样式列表定义为class并一次性更改class属性。<br>避免频繁操作DOM，创建一个documentFragment，在它上面应用所有DOM操作，最后再把它添加到文档中。<br>也可以先为元素设置<code>display: none</code>，操作结束后再把它显示出来。因为在display属性为none的元素上进行的DOM操作不会引发回流和重绘。<br>避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。<br>对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/jQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/22/jQuery/" class="post-title-link" itemprop="url">jQuery</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-22 13:14:59" itemprop="dateCreated datePublished" datetime="2019-08-22T13:14:59+08:00">2019-08-22</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-24 19:59:58" itemprop="dateModified" datetime="2019-09-24T19:59:58+08:00">2019-09-24</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JS/jQuery/" itemprop="url" rel="index"><span itemprop="name">jQuery</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><table>
<thead>
<tr>
<th align="left">jQuery基本选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘*‘)</td>
<td align="left">匹配所有元素</td>
</tr>
<tr>
<td align="left">$(‘#id’)</td>
<td align="left">id选择器</td>
</tr>
<tr>
<td align="left">$(‘.class’)</td>
<td align="left">类选择器</td>
</tr>
<tr>
<td align="left">$(‘element’)</td>
<td align="left">标签选择器</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">组合选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E,F’)</td>
<td align="left">多元素选择器，同时匹配E和F</td>
</tr>
<tr>
<td align="left">$(‘E F’)</td>
<td align="left">后代选择器,用空格分隔,匹配E元素所有后代</td>
</tr>
<tr>
<td align="left">$(‘E&gt;F’)</td>
<td align="left">子元素选择器,匹配E元素所有直接子元素</td>
</tr>
<tr>
<td align="left">$(‘E+F’)</td>
<td align="left">直接相邻元素,匹配E元素之后的相邻的同级元素F</td>
</tr>
<tr>
<td align="left">$(‘E~F’)</td>
<td align="left">普通相邻元素(弟弟选择器),匹配E元素之后的同级元素F(无论是否直接相邻)</td>
</tr>
<tr>
<td align="left">$(‘class1.class2’)</td>
<td align="left">匹配类名中既含有class1又含有class2的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">基本过滤选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:first’)</td>
<td align="left">所有E中的第一个</td>
</tr>
<tr>
<td align="left">$(‘E:last’)</td>
<td align="left">所有E中的最后一个</td>
</tr>
<tr>
<td align="left">$(‘E:not(selector)’)</td>
<td align="left">按照selector过滤E</td>
</tr>
<tr>
<td align="left">$(‘E:even’)</td>
<td align="left">所有E中index是偶数</td>
</tr>
<tr>
<td align="left">$(‘E:odd’)</td>
<td align="left">所有E中index是奇数</td>
</tr>
<tr>
<td align="left">$(‘E:eq(n)’)</td>
<td align="left">所有E中index为n的元素</td>
</tr>
<tr>
<td align="left">$(‘E:gt(n)’)</td>
<td align="left">所有E中index大于n的元素</td>
</tr>
<tr>
<td align="left">$(‘E:lt(n)’)</td>
<td align="left">所有E中index小于n的元素</td>
</tr>
<tr>
<td align="left">$(‘header’)</td>
<td align="left">选择h1~h6元素</td>
</tr>
<tr>
<td align="left">$(‘div:animated’)</td>
<td align="left">选择正在执行动画效果的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">内容过滤器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:contains(value)’)</td>
<td align="left">内容包含value的元素</td>
</tr>
<tr>
<td align="left">$(‘E:empty’)</td>
<td align="left">内容为空的元素</td>
</tr>
<tr>
<td align="left">$(‘E:has(F)’)</td>
<td align="left">子元素中有F的元素,$(‘div:has(a)’):包含a标签的div</td>
</tr>
<tr>
<td align="left">$(‘E:parent’)</td>
<td align="left">父元素是E的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">可视化选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:hidden’)</td>
<td align="left">所有被隐藏的E</td>
</tr>
<tr>
<td align="left">$(‘E:visible’)</td>
<td align="left">所有可见的E</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">属性过滤选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E[attr]’)</td>
<td align="left">含有属性attr的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr=value]’)</td>
<td align="left">属性attr=value的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr !=value]’)</td>
<td align="left">属性attr！=value的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr ^=value]’)</td>
<td align="left">属性attr以value开头的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr $=value]’)</td>
<td align="left">属性attr以value结尾的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr *=value]’)</td>
<td align="left">属性attr包含value的E</td>
</tr>
<tr>
<td align="left">$(‘E[attr][attr*value]’)</td>
<td align="left">可以连用</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">子元素过滤器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:nth-child(n)’)</td>
<td align="left">E的第n个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(3n+1)’)</td>
<td align="left">E的第3n+1个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(even)’)</td>
<td align="left">E的index为偶数的子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(odd)’)</td>
<td align="left">E的index为奇数的子节点</td>
</tr>
<tr>
<td align="left">$(‘E:first-child’)</td>
<td align="left">所有E的第一个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:last-child’)</td>
<td align="left">所有E的最后一个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:only-child’)</td>
<td align="left">只有唯一子节点的E的子节点</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">表单元素选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:type’)</td>
<td align="left">特定类型的input</td>
</tr>
<tr>
<td align="left">$(‘:checked’)</td>
<td align="left">被选中的checkbox或者radio</td>
</tr>
<tr>
<td align="left">$(‘option:selected’)</td>
<td align="left">被选中的option</td>
</tr>
</tbody></table>
<h3 id="其他查找相关元素的方法"><a href="#其他查找相关元素的方法" class="headerlink" title="其他查找相关元素的方法"></a>其他查找相关元素的方法</h3><h4 id="eq-index-get-index"><a href="#eq-index-get-index" class="headerlink" title=".eq(index), .get([index])"></a>.eq(index), .get([index])</h4><p><code>$(&#39;div&#39;).eq(3) //获取所有div中第4个jQuery对象</code><br><code>$(&#39;div&#39;)[2] 或者 $(&#39;div&#39;).get(2) //获取第三个的DOM对象</code><br><code>get()</code>不写参数把所有对象转为DOM对象返回</p>
<h4 id="兄弟元素获取"><a href="#兄弟元素获取" class="headerlink" title="兄弟元素获取"></a>兄弟元素获取</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.next([selector])</td>
<td align="left">没有写selcetor,返回所有后面的兄弟元素.写了就返回满足条件的</td>
</tr>
<tr>
<td align="left">.prev([selector])</td>
<td align="left">和上面相反,获取前面的兄弟元素</td>
</tr>
<tr>
<td align="left">.nextAll([selector])</td>
<td align="left">获取所有后面的兄弟元素</td>
</tr>
<tr>
<td align="left">.prevAll([selector])</td>
<td align="left">获取所有前面的兄弟元素</td>
</tr>
<tr>
<td align="left">.siblings([selector])</td>
<td align="left">获取所有前后邻居的元素</td>
</tr>
</tbody></table>
<h4 id="父子元素获取"><a href="#父子元素获取" class="headerlink" title="父子元素获取"></a>父子元素获取</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.parent([selector])</td>
<td align="left">获取父元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.parents([selector])</td>
<td align="left">获取祖先元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.children([selector])</td>
<td align="left">获取子元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.find([selector])</td>
<td align="left">查找符合选择器的后代</td>
</tr>
</tbody></table>
<h4 id="筛选当前结果集"><a href="#筛选当前结果集" class="headerlink" title="筛选当前结果集"></a>筛选当前结果集</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.first()</td>
<td align="left">获取当前结果集第一个对象</td>
</tr>
<tr>
<td align="left">.last()</td>
<td align="left">获取当前结果集最后一个对象</td>
</tr>
<tr>
<td align="left">.filter(slector), .filter(function(index))</td>
<td align="left">筛选当前结果集符合条件的对象</td>
</tr>
<tr>
<td align="left">.not(selector), .not(function(index))</td>
<td align="left">从当前结果集中移除指定元素</td>
</tr>
<tr>
<td align="left">.is(selector), is(function(index)), is(dom/jqObj)</td>
<td align="left">判断结果集中的元素，是否为一个选择器，DOM元素，或者jQuery对象，如果这些元素至少一个匹配给定的参数，那么返回true</td>
</tr>
<tr>
<td align="left">.has(seletor), has(dom)</td>
<td align="left">筛选匹配结果集中符合条件的后代元素</td>
</tr>
</tbody></table>
<h2 id="jQueryDOM操作"><a href="#jQueryDOM操作" class="headerlink" title="jQueryDOM操作"></a>jQueryDOM操作</h2><h3 id="创建元素"><a href="#创建元素" class="headerlink" title="创建元素"></a>创建元素</h3><p>将DOM传入$方法即可返回一个jQuery对象<br><code>var obj = $(&#39;&lt;div class=&quot;test&quot;&gt;&lt;p&gt;&lt;span&gt;Done&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&#39;)</code></p>
<h3 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.append(content[,content]) / .append(function(index,html))</td>
<td align="left">可以添加多个内容,DOM对象,字符串,jQuery对象</td>
<td align="left">$(‘p’).append($newdiv); $(‘p’).append($(‘strong’)); $(‘p’).append(document.createTextNode(‘hello’))</td>
</tr>
<tr>
<td align="left">.appendTo(target)</td>
<td align="left">把对象插入到目标target尾部,可以是selector,DOM对象,字符串,元素集合,jQuery对象(最后一个孩子)</td>
<td align="left">$(‘h2’).appendTo($(‘.container’)); $(‘&lt;p&gt;Test&lt;/p&gt;’).appendTo(‘.inner’)</td>
</tr>
<tr>
<td align="left">.prepend(content[,content]) / .prepend(function(index, html))</td>
<td align="left">向头部追加内容,内容添加到最前面(第一个孩子)</td>
<td align="left">$(‘.inner’).prepend(‘&lt;p&gt;Test&lt;/p&gt;’)</td>
</tr>
<tr>
<td align="left">.prependTo(Target)</td>
<td align="left">把对象插入到目标头部</td>
<td align="left">$(‘&lt;p&gt;Test&lt;/p&gt;’).prependTo(‘.inner’)</td>
</tr>
<tr>
<td align="left">.before([content][,content]) / .before(function)</td>
<td align="left">在对象前面(不是头部,而是外面,和对象并列同级)插入内容(放到前面做邻居)</td>
<td align="left">$(‘.inner’).before(‘&lt;p&gt;Test&lt;/p&gt;’); $(‘.container’).before($(‘h2’)); $( “p” ).before( document.createTextNode( “Hello” ) )</td>
</tr>
<tr>
<td align="left">.insertBefore(target)</td>
<td align="left">把对象插入到target之前(不是头部,是同级)(做邻居)</td>
<td align="left">$(‘h2’).insertBefore($(‘.container))</td>
</tr>
<tr>
<td align="left">.after([content][,content]) / .after(function（index）)</td>
<td align="left">和before相反，在对象后面(不是尾部，而是外面，和对象并列同级)插入内容，参数和append类似</td>
<td align="left">$( “.inner” ).after( “&lt;p&gt;Test&lt;/p&gt;” ); $( “p” ).after( document.createTextNode( “Hello” ) );</td>
</tr>
<tr>
<td align="left">.insertAfter(target)</td>
<td align="left">和insertBefore相反，把对象插入到target之后（同样不是尾部，是同级）</td>
<td align="left">$( “&lt;p&gt;Test&lt;/p&gt;” ).insertAfter( “.inner” ); $( “p” ).insertAfter( “#foo” );</td>
</tr>
</tbody></table>
<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.remove([selector])</td>
<td align="left">删除被选元素及其子元素</td>
<td align="left">$(‘.div’).remove()</td>
</tr>
<tr>
<td align="left">.empty()</td>
<td align="left">清空被选元素内所有子元素</td>
<td align="left">$(‘body’).empty()</td>
</tr>
<tr>
<td align="left">.detach()</td>
<td align="left">.detach() 方法和.remove()一样, 除了 .detach()保存所有jQuery数据和被移走的元素相关联。当需要移走一个元素，不久又将该元素插入DOM时，这种方法很有用。</td>
<td align="left">$(‘.div’).detach()</td>
</tr>
</tbody></table>
<h3 id="包裹元素"><a href="#包裹元素" class="headerlink" title="包裹元素"></a>包裹元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.wrap(wrapElement) / .wrap(function(index))</td>
<td align="left">为每个对象包裹一层HTML结构，可以是selector, element, HTML string, jQuery object</td>
<td align="left">$( “.inner” ).wrap( “&lt;div class=’new’&gt;&lt;/div&gt;” )</td>
</tr>
<tr>
<td align="left">.wrapAll(wrappingElement)</td>
<td align="left">把所有匹配对象包裹在同一个html结构里</td>
<td align="left">$(‘.inner’).wrapAll(‘&lt;div class=”new”&gt;&lt;/div&gt;)</td>
</tr>
<tr>
<td align="left">.wrapInner(wrapingElement)</td>
<td align="left">为每个匹配的对象包裹一层HTML结构</td>
<td align="left">$(‘.inner’).wrapInner(‘&lt;div class=”new”&gt;&lt;/div&gt;)</td>
</tr>
<tr>
<td align="left">.unwrap</td>
<td align="left">把DOM元素外的壳去掉</td>
<td align="left">$(‘p’).unwrap()</td>
</tr>
</tbody></table>
<h3 id="html-string"><a href="#html-string" class="headerlink" title="html([string])"></a>html([string])</h3><p><code>$(&#39;div&#39;).html()</code><br><code>$(&#39;div&#39;).html(&#39;123&#39;)</code><br>这是一个读写两用的方法,用于获取修改元素的innerHTML</p>
<ol>
<li>没有传递参数的时候,返回元素的innerHTML</li>
<li>当传递一个string参数时,修改元素的innerHTML为参数值</li>
</ol>
<h3 id="text"><a href="#text" class="headerlink" title="text()"></a>text()</h3><p>和html方法类似，操作的是DOM的innerText值</p>
<h2 id="jQuery属性操作"><a href="#jQuery属性操作" class="headerlink" title="jQuery属性操作"></a>jQuery属性操作</h2><h3 id="属性相关"><a href="#属性相关" class="headerlink" title="属性相关"></a>属性相关</h3><h4 id="val-value"><a href="#val-value" class="headerlink" title=".val([value])"></a>.val([value])</h4><p>这是一个读写双用的方法,用来处理input的value值,当方法没有参数时返回input的value值.<br>当传递一个参数时,方法修改input的value值为参数值.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.input'</span>).val()</span><br><span class="line">$(<span class="string">'.input'</span>).val(<span class="string">'newValue'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="attr"><a href="#attr" class="headerlink" title=".attr()"></a>.attr()</h4><h5 id="attr-attributeName"><a href="#attr-attributeName" class="headerlink" title=".attr(attributeName)"></a>.attr(attributeName)</h5><p>获取元素特定属性的值<br><code>var title = $(&#39;em&#39;).attr(&#39;title&#39;)</code></p>
<h5 id="attr-attributeName-value-attr-attributesJson-attr-attributeName-funtion-index-attr"><a href="#attr-attributeName-value-attr-attributesJson-attr-attributeName-funtion-index-attr" class="headerlink" title=".attr(attributeName,value)/.attr(attributesJson)/.attr(attributeName,funtion(index,attr))"></a>.attr(attributeName,value)/.attr(attributesJson)/.attr(attributeName,funtion(index,attr))</h5><p>为元素属性赋值<br><code>$( &quot;#greatphoto&quot; ).attr( &quot;alt&quot;, &quot;Beijing&quot; )</code></p>
<h5 id="removeAttr"><a href="#removeAttr" class="headerlink" title=".removeAttr()"></a>.removeAttr()</h5><p>为匹配的元素集合中的每个元素移除一个属性<br><code>$(&#39;div&#39;).removeAttr(&#39;id&#39;)</code></p>
<h5 id="prop-removeProp"><a href="#prop-removeProp" class="headerlink" title=".prop()/.removeProp()"></a>.prop()/.removeProp()</h5><p>这两个方法是用来操作元素的property的</p>
<h3 id="CSS相关"><a href="#CSS相关" class="headerlink" title="CSS相关"></a>CSS相关</h3><h4 id="css"><a href="#css" class="headerlink" title=".css()"></a>.css()</h4><h5 id="css-propertyName-css-propertyNames"><a href="#css-propertyName-css-propertyNames" class="headerlink" title=".css(propertyName) / .css(propertyNames)"></a>.css(propertyName) / .css(propertyNames)</h5><p>获取元素style特定property的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color = $( <span class="keyword">this</span> ).css( <span class="string">"background-color"</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> styleProps = $( <span class="keyword">this</span> ).css([</span><br><span class="line">  <span class="string">"width"</span>,</span><br><span class="line">  <span class="string">"height"</span>,</span><br><span class="line">  <span class="string">"color"</span>,</span><br><span class="line">  <span class="string">"background-color"</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h5 id="css-propertyName-value-css-propertyName-function-index-value-css-propertiesJson"><a href="#css-propertyName-value-css-propertyName-function-index-value-css-propertiesJson" class="headerlink" title=".css(propertyName,value)/.css(propertyName,function(index,value))/ .css(propertiesJson)"></a>.css(propertyName,value)/.css(propertyName,function(index,value))/ .css(propertiesJson)</h5><p>设置元素style特定property的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"div.example"</span> ).css( <span class="string">"width"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> index </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> index * <span class="number">50</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$( <span class="keyword">this</span> ).css( <span class="string">"width"</span>, <span class="string">"+=200"</span> )</span><br><span class="line"></span><br><span class="line">$( <span class="keyword">this</span> ).css( <span class="string">"background-color"</span>, <span class="string">"yellow"</span> )</span><br><span class="line"></span><br><span class="line">$( <span class="keyword">this</span> ).css(&#123;</span><br><span class="line">  <span class="string">"background-color"</span>: <span class="string">"yellow"</span>,</span><br><span class="line">  <span class="string">"font-weight"</span>: <span class="string">"bolder"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="addClass-className-addClass-function-index-currentClass"><a href="#addClass-className-addClass-function-index-currentClass" class="headerlink" title=".addClass(className) / .addClass(function(index,currentClass))"></a>.addClass(className) / .addClass(function(index,currentClass))</h5><p>为元素添加class，不是覆盖原class，是追加，也不会检查重复</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"p"</span> ).addClass( <span class="string">"myClass yourClass"</span> )</span><br><span class="line"></span><br><span class="line">$( <span class="string">"ul li"</span> ).addClass(<span class="function"><span class="keyword">function</span>(<span class="params"> index </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"item-"</span> + index;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="removeClass-className-removeClass-function-index-class"><a href="#removeClass-className-removeClass-function-index-class" class="headerlink" title=".removeClass([className])/.removeClass(function(index,class))"></a>.removeClass([className])/.removeClass(function(index,class))</h5><p>移除元素单个/多个/所有class</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"p"</span> ).removeClass( <span class="string">"myClass yourClass"</span> );</span><br><span class="line"></span><br><span class="line">$( <span class="string">"li:last"</span> ).removeClass(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> $( <span class="keyword">this</span> ).prev().attr( <span class="string">"class"</span> );</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="hasClass-className"><a href="#hasClass-className" class="headerlink" title=".hasClass(className)"></a>.hasClass(className)</h5><p>检查元素是否包含某个class，返回true/false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$( <span class="string">"#mydiv"</span> ).hasClass( <span class="string">"foo"</span> )</span><br></pre></td></tr></table></figure>

<h5 id="toggleClass-className"><a href="#toggleClass-className" class="headerlink" title=".toggleClass(className)"></a>.toggleClass(className)</h5><p>toggle是切换的意思，方法用于切换，switch是个bool类型值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"tumble"</span>&gt;Some text.&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/第一次执行 </span></span><br><span class="line"><span class="regexp">$( "div.tumble" ).toggleClass( "bounce" )</span></span><br><span class="line"><span class="regexp">&lt;div class="tumble bounce"&gt;Some text.&lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二次执行</span></span><br><span class="line">$( <span class="string">"div.tumble"</span> ).toggleClass( <span class="string">"bounce"</span> )</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"tumble"</span>&gt;Some text.&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="jQuery常用方法"><a href="#jQuery常用方法" class="headerlink" title="jQuery常用方法"></a>jQuery常用方法</h2><h4 id="each-fnction-index-Element"><a href="#each-fnction-index-Element" class="headerlink" title=".each(fnction(index, Element))"></a>.each(fnction(index, Element))</h4><p>遍历一个jQuery对象,为每个匹配元素执行一个函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'li'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(index + <span class="string">':'</span> + $(<span class="keyword">this</span>).text())</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//回调函数返回的是DOM对象,所以this需要加$变成jQuery对象才能使用.text()方法</span></span><br><span class="line"><span class="comment">//否则使用this.innerText方法</span></span><br></pre></td></tr></table></figure>

<h4 id="jQuery-each-collection-callback-indexInArray-valueOfElement"><a href="#jQuery-each-collection-callback-indexInArray-valueOfElement" class="headerlink" title="jQuery.each(collection, callback(indexInArray, valueOfElement))"></a>jQuery.each(collection, callback(indexInArray, valueOfElement))</h4><p>一个通用迭代函数,可以迭代对象和数组.数组和类数组对象通过长度属性来迭代数字索引,从0到length-1.<br>其他对象通过其属性名进行迭代.<br>上面jQuery可以用$替代,即<code>$.each()</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="string">"fla"</span> : <span class="string">"infla"</span>,</span><br><span class="line">    <span class="string">"duh"</span> : <span class="string">" no duh"</span></span><br><span class="line">&#125;</span><br><span class="line">$.each(obj, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">":"</span> + value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="map-callback-index-domElement"><a href="#map-callback-index-domElement" class="headerlink" title=".map(callback(index, domElement))"></a>.map(callback(index, domElement))</h4><p>通过一个函数匹配当前集合中的每个元素,返回一个包含新的jQuery对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.div'</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params">i, ele</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.id</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="jQuery-extend-deep-target-ovject1-objectN"><a href="#jQuery-extend-deep-target-ovject1-objectN" class="headerlink" title="jQuery.extend([deep,]target[,ovject1][,objectN])"></a>jQuery.extend([deep,]target[,ovject1][,objectN])</h4><ol>
<li>当提供两个或多个对象给$.extend(),对象的所有属性都添加到目标对象(target参数).</li>
<li>如果只有一个参数提供给$.extend(),这意味着目标参数被省略,在这种情况下,jQuery对象本身默认为目标对象.<br>这样我们可以在jQuery的命名空间下添加新功能.<br><code>var obj = $.extend({}, object1, object2)</code><br><code>object1,object2</code>会被添加到{}中</li>
</ol>
<p>如果第一个对象的属性本身是一个数组或对象,那它将完全用第二个对象相同的key重写一个属性.<br>这些值不会被合并.如果true作为第一个参数,那么会在对象上进行递归的合并.</p>
<h4 id="clone-withDataAndEvents"><a href="#clone-withDataAndEvents" class="headerlink" title=".clone([withDataAndEvents])"></a>.clone([withDataAndEvents])</h4><p>.clone()方法深度复制所有匹配的元素集合,包括所有匹配元素,匹配元素的下级,文字节点.<br><code>$(&#39;.hello&#39;).clone().appendTo(&#39;.Goodbye&#39;)</code></p>
<h4 id="index-index-selector-index-element"><a href="#index-index-selector-index-element" class="headerlink" title=".index()/.index(selector)/.index(element)"></a>.index()/.index(selector)/.index(element)</h4><p>从给定集合中查找特定元素index</p>
<ol>
<li>没参数返回第一个元素index</li>
<li>如果参数是DOM对象或jQuery对象,则返回参数在集合中的index</li>
<li>如果参数是选择器,返回第一个匹配元素的index,没有找到返回-1</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> listItem = $(<span class="string">'.bar'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Index:'</span> + $(<span class="string">'li'</span>).index( listItem ))</span><br></pre></td></tr></table></figure>

<h4 id="ready-handler"><a href="#ready-handler" class="headerlink" title=".ready(handler)"></a>.ready(handler)</h4><p>当DOM加载完毕,执行.<br>下面两种等价</p>
<ul>
<li><code>$(document).ready(handler)</code></li>
<li><code>$(handler)</code></li>
</ul>
<h2 id="jQuery事件"><a href="#jQuery事件" class="headerlink" title="jQuery事件"></a>jQuery事件</h2><h4 id="on-events-selector-data-handler-eventObject"><a href="#on-events-selector-data-handler-eventObject" class="headerlink" title=".on(events[,selector][,data],handler(eventObject))"></a>.on(events[,selector][,data],handler(eventObject))</h4><ol>
<li>events: 一个或多个空格分隔的事件类型和可选空间</li>
<li>selector: 一个选择器字符串,用于过滤被选中的元素中能触发事件的后代元素.<br>如果选择器是null或者忽略,那么被选中的元素总能触发事件</li>
<li>data: 当一个事件被触发,要传递给事件处理函数的event.data</li>
<li>handler(eventObject): 事件被触发时,执行的函数.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"box"</span>&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li&gt;<span class="number">1</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;li&gt;2&lt;/</span>li&gt;</span><br><span class="line">&lt;li&gt;<span class="number">3</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;li&gt;4&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;input id=<span class="string">"ipt"</span> type=<span class="string">"text"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;div id=<span class="string">"wrap"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">$(<span class="string">'.box li'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> str = $(<span class="keyword">this</span>).text()</span><br><span class="line">  $(<span class="string">'#wrap'</span>).text(str)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line">$(<span class="string">'.box&gt;ul&gt;li'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">var</span> str = $(<span class="keyword">this</span>).text()</span><br><span class="line">  $(<span class="string">'#wrap'</span>).text(str)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//下面新增的元素是没有绑定事件的</span></span><br><span class="line">$(<span class="string">'btn'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = $(<span class="string">'#ipt'</span>).val()</span><br><span class="line">  $(<span class="string">'.box&gt;li'</span>).append(<span class="string">'&lt;li&gt;'</span> + value + <span class="string">'&lt;/li&gt;'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//可以用事件代理</span></span><br><span class="line">$(<span class="string">'.box ul'</span>).on(<span class="string">'click'</span>,<span class="string">'li'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = $(<span class="keyword">this</span>).text()</span><br><span class="line">  $(<span class="string">'#wrap'</span>).text(Str)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//上面代码换成原生js代码</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.box ul'</span>).addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(e.target.tagName.toLowerCase() === <span class="string">'li'</span>)&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="one-events-selector-data-handler-eventObject"><a href="#one-events-selector-data-handler-eventObject" class="headerlink" title=".one(events[,selector][,data],handler(eventObject))"></a>.one(events[,selector][,data],handler(eventObject))</h4><p>同on，绑定事件，但只执行一次</p>
<h4 id="off-events-selector-handler"><a href="#off-events-selector-handler" class="headerlink" title=".off(events[,selector][,handler])"></a>.off(events[,selector][,handler])</h4><p>移除一个事件处理函数<br><code>$(&#39;.box li&#39;).off(&#39;click&#39;)</code></p>
<h4 id="trigger-eventType-extraParameters"><a href="#trigger-eventType-extraParameters" class="headerlink" title=".trigger(eventType[,extraParameters])"></a>.trigger(eventType[,extraParameters])</h4><p>根据绑定到匹配元素的给定的事件类型执行所有的处理程序和行为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#foo'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log($(<span class="keyword">this</span>).text())</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">'#foo'</span>).trigger(<span class="string">'click'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><p>blur([[data],fn])<br>change([[data],fn])<br>click([[data],fn])<br>dblclick([[data],fn])<br>error([[data],fn])<br>focus([[data],fn])<br>focusin([data],fn)<br>focusout([data],fn)<br>keydown([[data],fn])<br>keypress([[data],fn])<br>keyup([[data],fn])<br>mousedown([[data],fn])<br>mouseenter([[data],fn])<br>mouseleave([[data],fn])<br>mousemove([[data],fn])<br>mouseout([[data],fn])<br>mouseover([[data],fn])<br>mouseup([[data],fn])<br>resize([[data],fn])<br>scroll([[data],fn])<br>select([[data],fn])<br>submit([[data],fn])</p>
<h4 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h4><p>eve.currentTarget<br>eve.data<br>eve.delegateTarget<br>eve.isDefaultPrevented()<br>eve.isImmediatePropag…()<br>eve.isPropagationStopped()<br>eve.namespace<br>eve.pageX<br>eve.pageY<br>eve.preventDefault()<br>eve.relatedTarget<br>eve.result<br>eve.stopImmediatePro…()<br>eve.stopPropagation()<br>eve.target<br>eve.timeStamp<br>eve.type<br>eve.which</p>
<h2 id="jQuery动画"><a href="#jQuery动画" class="headerlink" title="jQuery动画"></a>jQuery动画</h2><h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><h4 id="hide-duration-easting-fn"><a href="#hide-duration-easting-fn" class="headerlink" title=".hide([duration][,easting][,fn])"></a>.hide([duration][,easting][,fn])</h4><ul>
<li>duration: 三种预定速度之一的字符串(“slow”,”normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)</li>
<li>easing: 用来指定切换效果，默认是”swing”，可用参数”linear”</li>
<li>fn: 在动画完成时执行的函数，每个元素执行一次。<br>用于隐藏元素,没有参数等同于直接设置display属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.target'</span>).hide()</span><br><span class="line"><span class="comment">//等同于$('.target').css('display','none')</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#book'</span>).hide(<span class="number">300</span>, <span class="string">'linear'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Animation complete.'</span>)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="show-duration-easing-fn"><a href="#show-duration-easing-fn" class="headerlink" title=".show([duration][,easing][,fn])"></a>.show([duration][,easing][,fn])</h4><p>显示元素,用法类似hide</p>
<h4 id="toggle-duration-easing-fn"><a href="#toggle-duration-easing-fn" class="headerlink" title=".toggle([duration][,easing][,fn])"></a>.toggle([duration][,easing][,fn])</h4><p>事件处理套件也有一个名为.toggle()方法。哪一个被调用取决于传递的参数的设置<br>用来切换元素的隐藏、显示，类似于toggleClass，用法和show、hide类似</p>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><h4 id="fadeIn-duration-easing-complete"><a href="#fadeIn-duration-easing-complete" class="headerlink" title=".fadeIn( [duration ] [, easing ] [, complete ] )"></a>.fadeIn( [duration ] [, easing ] [, complete ] )</h4><p>渐入效果</p>
<h4 id="fadeOut-duration-easing-complete"><a href="#fadeOut-duration-easing-complete" class="headerlink" title=".fadeOut( [duration ] [, easing ] [, complete ] )"></a>.fadeOut( [duration ] [, easing ] [, complete ] )</h4><p>渐出效果</p>
<h4 id="fadeTo-duration-opacity-easing-complete"><a href="#fadeTo-duration-opacity-easing-complete" class="headerlink" title=".fadeTo( duration, opacity [, easing ] [, complete ] )"></a>.fadeTo( duration, opacity [, easing ] [, complete ] )</h4><p>调整匹配元素的透明度，方法通过匹配元素的不透明度做动画效果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#book'</span>).fadeTo(<span class="string">'slow'</span>, <span class="number">0.5</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Animation complete.</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="fadeToggle-speed-easing-fn"><a href="#fadeToggle-speed-easing-fn" class="headerlink" title="fadeToggle([speed,[easing],[fn]])"></a>fadeToggle([speed,[easing],[fn]])</h4><p>通过不透明度的变化来开关所有匹配元素的淡入和淡出效果，并在动画完成后可选地触发一个回调函数。<br>这个动画只调整元素的不透明度，也就是说所有匹配的元素的高度和宽度不会发生变化。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"p"</span>).fadeToggle(<span class="string">"fast"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   alert(<span class="string">"Animation Done."</span>)</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="comment">//用200毫秒快速将段落淡入，之后弹出一个对话框</span></span><br></pre></td></tr></table></figure>

<h4 id="slideDown-speed-easing-fn"><a href="#slideDown-speed-easing-fn" class="headerlink" title="slideDown([speed],[easing],[fn])"></a>slideDown([speed],[easing],[fn])</h4><p> 下拉动画.这个动画效果只调整元素的高度，可以使匹配的元素以“滑动”的方式显示出来。</p>
<h4 id="slideUp-speed-easing-fn"><a href="#slideUp-speed-easing-fn" class="headerlink" title="slideUp([speed,[easing],[fn]])"></a>slideUp([speed,[easing],[fn]])</h4><p> 上浮动画,向上隐藏,在隐藏完成后可选地触发一个回调函数。</p>
<h4 id="slideToggle-speed-easing-fn"><a href="#slideToggle-speed-easing-fn" class="headerlink" title="slideToggle([speed],[easing],[fn])"></a>slideToggle([speed],[easing],[fn])</h4><p> 上下切换</p>
<h3 id="动画队列"><a href="#动画队列" class="headerlink" title="动画队列"></a>动画队列</h3><p> 因为动画是异步,所以将动画执行函数放入回调函数中,等动画执行完毕再执行其他的.<br> 但是这样写会形成回调地狱.又因为存在动画队列,可以按代码二方法执行会有同样效果.<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> $box.hide(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   $box.show(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     $box.fadeOut(<span class="string">'slow'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       $box.fadeIn(<span class="string">'slow'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         $box.slideUp(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           $box.slideDown(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">             <span class="built_in">console</span>.log(<span class="string">'动画执行完毕'</span>)</span><br><span class="line">           &#125;)</span><br><span class="line">         &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">$box.hide(<span class="number">1000</span>)</span><br><span class="line">    .show(<span class="number">1000</span>)</span><br><span class="line">    .fadeOut()</span><br><span class="line">    .fadeIn()</span><br><span class="line">    .slideUp()</span><br><span class="line">    .slideDown(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'真的完毕了'</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="自定义动画"><a href="#自定义动画" class="headerlink" title="自定义动画"></a>自定义动画</h3><p><code>animate(params,[speed],[easing],[fn])</code><br>这个函数的关键在于指定动画形式及结果样式属性对象。<br>这个对象中每个属性都表示一个可以变化的样式属性（如“height”、“top”或“opacity”）。<br>注意：所有指定的属性必须用驼峰形式，比如用marginLeft代替margin-left.</p>
<ul>
<li>params:一组包含作为动画属性和终值的样式属性和及其值的集合</li>
<li>speed:三种预定速度之一的字符串(“slow”,”normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)</li>
<li>easing:要使用的擦除效果的名称(需要插件支持).默认jQuery提供”linear” 和 “swing”.</li>
<li>fn:在动画完成时执行的函数，每个元素执行一次。</li>
</ul>
<h4 id="finish"><a href="#finish" class="headerlink" title=".finish"></a>.finish</h4><p>停止当前动画，并清除动画队列中所有未完成的动画,最终展示动画队列最后一帧的最终状态</p>
<h4 id="stop-clearQueue-jumpToEnd"><a href="#stop-clearQueue-jumpToEnd" class="headerlink" title=".stop( [clearQueue] [,jumpToEnd])"></a>.stop( [clearQueue] [,jumpToEnd])</h4><p>停止当前正在运行的动画</p>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><h3 id="jQuery-ajax-url-settings"><a href="#jQuery-ajax-url-settings" class="headerlink" title="jQuery.ajax(url,[settings])"></a>jQuery.ajax(url,[settings])</h3><p>jQuery底层AJAX实现.<code>$.ajax()</code>返回其创建的XMLHttpRequest对象。<br>大多数情况下你无需直接操作该函数，除非你需要操作不常用的选项，以获得更多的灵活性。<br>最简单的情况下，<code>$.ajax()</code>可以不带任何参数直接使用。<br>注意，所有的选项都可以通过<code>$.ajaxSetup()</code>函数来全局设置。<br><strong>回调函数</strong><br>如果要处理<code>$.ajax()</code>得到的数据，则需要使用回调函数。beforeSend、error、dataFilter、success、complete。</p>
<ul>
<li>beforeSend 在发送请求之前调用，并且传入一个XMLHttpRequest作为参数。</li>
<li>error 在请求出错时调用。传入XMLHttpRequest对象，描述错误类型的字符串以及一个异常对象（如果有的话）</li>
<li>dataFilter 在请求成功之后调用。传入返回的数据以及”<code>dataType</code>“参数的值。<br>并且必须返回新的数据（可能是处理过的）传递给success回调函数。</li>
<li>success 当请求之后调用。传入返回后的数据，以及包含成功代码的字符串。</li>
<li>complete 当请求完成之后调用这个函数，无论成功或失败。传入XMLHttpRequest对象，以及一个包含成功或错误代码的字符串。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  url: <span class="string">'test.com'</span>,</span><br><span class="line">  type: <span class="string">'GET'</span>,</span><br><span class="line">  datatype: json,</span><br><span class="line">  data: &#123;</span><br><span class="line">    name: <span class="string">'tom'</span>,</span><br><span class="line">    age: <span class="string">'12'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &lt;!-- success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result)</span><br><span class="line">  &#125; --&gt;</span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">jqXHR, textStatus</span>)</span>&#123;</span><br><span class="line">  consloe.log(textStatus)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>url: 一个用来包含发送请求的URL字符串。<br>settings: AJAX请求设置。所有选项都是可选的。</p>
<h5 id="seting中的设置"><a href="#seting中的设置" class="headerlink" title="seting中的设置"></a>seting中的设置</h5><ol>
<li><code>async</code>：默认设置下，所有请求均为异步请求（也就是说这是默认设置为 true ）。<br>如果需要发送同步请求，请将此选项设置为 false</li>
<li><code>beforeSend</code>：请求发送前的回调函数，用来修改请求发送前jqXHR对象，此功能用来设置自定义 HTTP 头信息<br>该jqXHR和设置对象作为参数传递</li>
<li><code>cache</code>：如果设置为 false ，浏览器将不缓存此页面。<br>注意: 设置cache为 false将在 HEAD和GET请求中正常工作。<br>它的工作原理是在GET请求参数中附加”_={timestamp}”</li>
<li><code>context</code>：这个对象用于设置Ajax相关回调函数的上下文。<br>默认情况下，这个上下文是一个ajax请求使用的参数设置对象</li>
<li><code>data</code>：发送到服务器的数据。将自动转换为请求字符串格式。<br>GET 请求中将附加在 URL 后面，POST请求作为表单数据</li>
<li><code>headers</code>：一个额外的{键:值}对映射到请求一起发送。此设置会在beforeSend 函数调用之前被设置;<br>因此，请求头中的设置值，会被beforeSend 函数内的设置覆盖</li>
<li><code>type</code>: 请求方式 (“POST” 或 “GET”)，默认为 “GET”。<br>注意:其它HTTP请求方法，如PUT和DELETE也可以使用，但仅部分浏览器支持。</li>
</ol>
<h3 id="jQuery-get-settings-jQuery-post-settings"><a href="#jQuery-get-settings-jQuery-post-settings" class="headerlink" title="jQuery.get( [settings] ) / jQuery.post( [settings ] )"></a>jQuery.get( [settings] ) / jQuery.post( [settings ] )</h3><p>这两个方法专门用来处理get和post请求</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="keyword">get</span>('test.html',function(data)&#123;</span><br><span class="line">  $(<span class="string">'.result'</span>).html(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="jQuery-getJSON-url-data-success-data-textStatus-jqXHR"><a href="#jQuery-getJSON-url-data-success-data-textStatus-jqXHR" class="headerlink" title="jQuery.getJSON(url[,data][,success(data,textStatus,jqXHR)])"></a>jQuery.getJSON(url[,data][,success(data,textStatus,jqXHR)])</h3><p>使用一个HTTP GET请求从服务器加载JSON编码的数据<br>范例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.getJSON(<span class="string">'ajax/test.json'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> items = [];</span><br><span class="line"> </span><br><span class="line">  $.each(data, <span class="function"><span class="keyword">function</span>(<span class="params">key, val</span>) </span>&#123;</span><br><span class="line">    items.push(<span class="string">'&lt;li id="'</span> + key + <span class="string">'"&gt;'</span> + val + <span class="string">'&lt;/li&gt;'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"> </span><br><span class="line">  $(<span class="string">'&lt;ul/&gt;'</span>, &#123;</span><br><span class="line">    <span class="string">'class'</span>: <span class="string">'my-new-list'</span>,</span><br><span class="line">    html: items.join(<span class="string">''</span>)</span><br><span class="line">  &#125;).appendTo(<span class="string">'body'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="load-url-data-complete-responseText-textStatus-XMLHttpRequest"><a href="#load-url-data-complete-responseText-textStatus-XMLHttpRequest" class="headerlink" title=".load(url[,data][,complete(responseText,textStatus,XMLHttpRequest)])"></a>.load(url[,data][,complete(responseText,textStatus,XMLHttpRequest)])</h3><p>从服务器载入数据并且将返回的HTML代码并插入至匹配的元素中<br><code>$(&#39;#result&#39;).load(&#39;ajax/test.html&#39;)</code></p>
<h3 id="serialize-serializeArray"><a href="#serialize-serializeArray" class="headerlink" title=".serialize() / serializeArray()"></a><code>.serialize()</code> / <code>serializeArray()</code></h3><p>将用作提交的表单元素的值编译成字符串，方法没有参数，使用标准的 URL-encoded 符号上建立一个文本字符串.<br>它可以对一个代表一组表单元素的 jQuery 对象进行操作，比如<code>&lt;input&gt;, &lt;textarea&gt;, 和 &lt;select&gt;</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">"holder"</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">"text"</span> name=<span class="string">"a"</span> value=<span class="string">"1"</span>/&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"b"</span> value=<span class="string">"2"</span> id=<span class="string">"b"</span> /&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;input type="hidden" name="c" value="3" id="c" /</span>&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"f"</span> value=<span class="string">"8"</span> checked=<span class="string">"true"</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"f"</span> value=<span class="string">"9"</span> checked=<span class="string">"true"</span>/&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>form&gt;</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#holder"</span>).serialize(); <span class="comment">//a=1&amp;b=2&amp;c=3&amp;f=8&amp;f=9</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">"#holder"</span>).serializeArray();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">      &#123;name: 'a', value: '1'&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: 'b', value: '2'&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: 'c', value: '3'&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: 'f', value: '8'&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: 'f', value: '9'&#125;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>serialize和serializeArray都是针对JQuery对象(选中的form元素)进行操作，只是返回值格式不同而已。<br>这里特别要注意：这2个API只能操作form，如果将holder改成div，会发现不起作用</p>
</blockquote>
<h2 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBooks</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">'get'</span>,</span><br><span class="line">        url:<span class="string">'http://test.com/bookservice.php'</span>,</span><br><span class="line">        dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">        jsonp:<span class="string">'callback'</span>,</span><br><span class="line">        jsonpCallback:<span class="string">'displayBooks'</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然使用jsonp会在一定程度上造成安全性问题，如果请求的站点不是信任站点，那么可能会在返回的方法调用中包含一些恶意代码。<br>所以尽量向信任的站点发送请求。另外xss也经常会利用jsonp向站点注入恶意代码。</p>
</blockquote>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/21/HTTP基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zax Tseng">
      <meta itemprop="description" content="Zax's BLOG">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zax's BLOG">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/21/HTTP基础/" class="post-title-link" itemprop="url">HTTP基础</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-21 14:53:32" itemprop="dateCreated datePublished" datetime="2019-08-21T14:53:32+08:00">2019-08-21</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-26 19:35:38" itemprop="dateModified" datetime="2019-11-26T19:35:38+08:00">2019-11-26</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML/" itemprop="url" rel="index"><span itemprop="name">HTML</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HTML/HTTP基础/" itemprop="url" rel="index"><span itemprop="name">HTTP基础</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h1><p>ajax是一种技术方案，核心依赖浏览器提供的XMLHttpRequest对象，是这个对象使得浏览器可以发出http请求与接受响应。</p>
<h2 id="如何与后端交互"><a href="#如何与后端交互" class="headerlink" title="如何与后端交互"></a>如何与后端交互</h2><ol>
<li>form表单提交.缺点会跳转，无后台反馈</li>
<li>ajax</li>
<li>websocket</li>
</ol>
<h3 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h3><ol>
<li>XMLHttpRequest对象(该对象支持同步和异步请求)</li>
<li>fetch</li>
</ol>
<h3 id="范例"><a href="#范例" class="headerlink" title="范例"></a>范例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequst() </span><br><span class="line"><span class="comment">//true默认是异步的方式,false是同步的方式</span></span><br><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"/xxx.com"</span>, <span class="literal">true</span>) </span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span>) || xhr.status === <span class="number">304</span>) &#123;</span><br><span class="line">            <span class="comment">//成功</span></span><br><span class="line">            <span class="built_in">console</span>.log(xhr.responseText)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"服务器异常"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//发送请求</span></span><br><span class="line">xhr.send()</span><br></pre></td></tr></table></figure>

<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="number">2.</span> xhr.open(<span class="string">'GET'</span>,<span class="string">'/xxx'</span>)  <span class="comment">//初始化xhr</span></span><br><span class="line"><span class="number">3.</span> xhr.send()  <span class="comment">//发送请求</span></span><br><span class="line"><span class="number">4.</span> xhr.onreadystatechange  <span class="comment">//监听请求状态的变化&lt;readystatechange&gt;是一个事件</span></span><br><span class="line"><span class="number">5.</span> xhr.readyState === <span class="number">1</span>  <span class="comment">//xhr.open()已经完成</span></span><br><span class="line"><span class="number">6.</span> xhr.readyState === <span class="number">2</span>  <span class="comment">//xhr.send()已经完成</span></span><br><span class="line"><span class="number">7.</span> xhr.readyState === <span class="number">3</span>  <span class="comment">//xhr.responseText正在下载</span></span><br><span class="line"><span class="number">5.</span> xhr.readyState === <span class="number">4</span>  <span class="comment">//响应完成</span></span><br><span class="line"><span class="number">6.</span> xhr.status  <span class="comment">//HTTP状态码</span></span><br><span class="line"><span class="number">7.</span> <span class="keyword">var</span> string = xhr.responseText  <span class="comment">//响应的内容</span></span><br><span class="line"><span class="number">8.</span> <span class="keyword">var</span> value = <span class="built_in">JSON</span>.parse(xhr.responseText)  <span class="comment">//把符合JSON语法的字符串转换成JS，解析响应返回的内容</span></span><br><span class="line"><span class="number">9.</span> value.node   <span class="comment">//若value是对象，这就是对象里内容</span></span><br><span class="line"><span class="number">10.</span> value.node.name  <span class="comment">//对象里的name的值</span></span><br></pre></td></tr></table></figure>

<p><strong>post</strong>形式需要将数据放入到send中</p>
<h1 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h1><h3 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h3><p>同协议，域名，端口</p>
<h1 id="实现跨域的方法"><a href="#实现跨域的方法" class="headerlink" title="实现跨域的方法"></a>实现跨域的方法</h1><h2 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h2><p>JSON with padding</p>
<blockquote>
<p>通过script标签加载数据的方式获取数据当做js代码来执行。jsonp需要对应接口的后端配合才可以实现。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addScriptTag</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">  script.setAttribute(<span class="string">"type"</span>,<span class="string">"text/javascript"</span>);</span><br><span class="line">  script.src = src;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  addScriptTag(<span class="string">'http://example.com/ip?callback=foo'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Your public IP address is: '</span> + data.ip);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面代码通过动态添加<code>&lt;script&gt;</code>元素，向服务器example.com发出请求。注意，该请求的查询字符串有一个callback参数，用来指定回调函数的名字，这对于JSONP是必需的。<br>服务器收到这个请求以后，会将数据放在回调函数的参数位置返回。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo(&#123;</span><br><span class="line">  <span class="string">"ip"</span>: <span class="string">"8.8.8.8"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>由于<code>&lt;script&gt;</code>元素请求的脚本，直接作为代码运行。这时，只要浏览器定义了foo函数，该函数就会立即调用。作为参数的JSON数据被视为JavaScript对象，而不是字符串，因此避免了使用<code>JSON.parse</code>的步骤。</p>
</blockquote>
<h3 id="必考面试题：JSONP为什么不支持POST请求"><a href="#必考面试题：JSONP为什么不支持POST请求" class="headerlink" title="必考面试题：JSONP为什么不支持POST请求"></a>必考面试题：JSONP为什么不支持POST请求</h3><p>答：因为JSONP是通过动态创建script的方法进行的，而script只能发送get请求不能发送post请求。</p>
<h3 id="jquery的写法"><a href="#jquery的写法" class="headerlink" title="jquery的写法"></a>jquery的写法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">        url:<span class="string">"http://jack.com:8002/pay"</span>,</span><br><span class="line">        dataType: <span class="string">"jsonp"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(response)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="axios写法"><a href="#axios写法" class="headerlink" title="axios写法"></a>axios写法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$http = axios;</span><br><span class="line"><span class="keyword">this</span>.$http.jsonp(<span class="string">'http://www.domain2.com:8080/login'</span>, &#123;</span><br><span class="line">    params: &#123;&#125;,</span><br><span class="line">    jsonp: <span class="string">'handleCallback'</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res); </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><p>跨域资源共享，是一种ajax跨域请求资源的方式。<br>写法就是普通的ajax写法.不过在浏览器请求上加点处理.而且是浏览器自动处理的.<br>当使用XMLHttpRequest发送请求时，浏览器发现该请求不符合同源策略，会给请求加一个请求头:<code>Origin</code>。<br>后台进行处理，如果确定接受请求，则在返回结果中加响应头：<code>Access-Control-Allow-Origin</code>。<br>浏览器判断该响应头中是否包含<code>Origin</code>的值，如果有，浏览器会处理响应，就可以拿到响应数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">// IE8/9需用window.XDomainRequest兼容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 前端设置是否带cookie</span></span><br><span class="line">xhr.withCredentials = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">xhr.open(<span class="string">'post'</span>, <span class="string">'http://www.domain2.com:8080/login'</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">xhr.send(<span class="string">'user=admin'</span>);</span><br><span class="line"></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">        alert(xhr.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h2><ol>
<li><strong>A页面</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, <span class="keyword">this</span>.receiveMessage, <span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> iframeImg = <span class="keyword">this</span>.iframe.contentWindow</span><br><span class="line">    iframeImg.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        iframeImg.postMessage(<span class="string">'message'</span>, <span class="string">'http://www.blogoog.com:8088'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">receiveMessage = <span class="function">(<span class="params">event</span>) =&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> origin = event.origin || event.originalEvent.origin</span><br><span class="line">        <span class="keyword">const</span> thisData = <span class="built_in">JSON</span>.parse(event.data)</span><br><span class="line">        <span class="keyword">const</span> imgUrl = <span class="built_in">Object</span>.values(thisData)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123; imgUrl &#125;)</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.closeIframe();</span><br><span class="line">            message.success(<span class="string">'上传成功'</span>)</span><br><span class="line">        &#125;,<span class="number">1000</span>)</span><br><span class="line">        <span class="keyword">if</span> (origin !== <span class="string">'http://www.blogoog.com:80881) &#123;</span></span><br><span class="line">          window.location.hash = '#/exception/404'</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt; iframe className = &#123; styles.iframeWrap &#125;</span><br><span class="line">src=<span class="string">"http://www.blogoog.com:8088"</span> name=<span class="string">"imgIframe"</span> frameBorder=<span class="string">"0"</span> scrolling=<span class="string">"auto"</span> ref=&#123;dom =&gt; &#123;<span class="keyword">this</span>.iframe = dom &#125;&#125;&gt;您的浏览器不支持iframe</span><br><span class="line">&lt;<span class="regexp">/iframe&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>A页面使用的语法</li>
</ol>
<p><strong>window.postMessage()</strong><br><code>otherWindow.postMessage(message, targetOrigin, [transfer])</code></p>
<ul>
<li>otherWindow：其他窗口的一个引用（在这里我使用了iframe的contentWindow属性）</li>
<li>message：将要发送到其他window的数据（可以不受限制的将数据对象安全的传送给目标窗口而无需自己序列化，原因是因为采用了结构化克隆算法）</li>
<li>targetOrigin：接收信息的URL（在这里我当然填的B页面的URL）</li>
<li>transfer：可选参数</li>
</ul>
<p><strong>window.addEventListener(‘message’, receiveMessage, false)</strong><br><code>target.addEventListener(type, listener, options)</code></p>
<ul>
<li>type：表示监听事件类型的字符串</li>
<li>listener：当所监听的事件类型触发时，会通知的一个对象或者一个函数</li>
<li>potions：可选参数（在此我用false，表示在listener被调用之后不会自动移除）</li>
</ul>
<p><strong>receiveMessage = (event) =&gt; {}</strong></p>
<ul>
<li>event.data：从另一个window传递过来的对象（包含传递过来的所有信息）</li>
<li>event.origin||event.originalEvent.origin：window.postMessage()发送消息的目标URL</li>
<li>event.source：对发送消息的窗口对象的引用<h3 id="注意点！！！"><a href="#注意点！！！" class="headerlink" title="注意点！！！"></a>注意点！！！</h3></li>
<li>在页面内嵌入iframe页面的情况下，需要等到页面内的iframe页面，也就是B页面加载完成之后，才能进行postMessage跨域通信</li>
<li>event.origin中的origin不能保证是该窗口的当前origin或者未来origin，因为postMessage被调用后，可能会被导航到不同的位置，所以需要做个异常情况判断处理<code>origin !== &#39;http://www.blogoog.com:8088&#39;</code></li>
</ul>
<ol start="2">
<li><strong>B页面</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener&#123;<span class="string">"message"</span>, <span class="keyword">this</span>.receiveMessage, <span class="literal">false</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">receiveMessage(e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e origin === <span class="string">'http://www.blogoog.com:8080'</span> || e.origin === <span class="string">'http://www.blogoog.com:8088'</span>) &#123; </span><br><span class="line">        <span class="keyword">this</span>.sendBtnShow = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">this</span>.originSource = e.origin </span><br><span class="line">        <span class="keyword">this</span>.magicBuildData = <span class="built_in">JSON</span>.parse(e.data)</span><br><span class="line">    &#125;,</span><br><span class="line">    sendMsg() &#123;</span><br><span class="line">        top.postMessage(<span class="built_in">JSON</span>.stringify(data), <span class="string">'http://www.blogoog.com:8000'</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>B页面使用到的语法</li>
</ol>
<p><code>top.postMessage(&#39;data&#39;, &#39;http://www.blogoog.com:8000&#39;)</code><br>参考上面A页面的语法<br>为什么用top而不用window下面再讲<br><code>window.addEventListener(&#39;message&#39;, receiveMessage, false)</code><br>参考上面A页面的语法<br><code>receiveMessage = (event) =&gt; {}</code><br>参考上面A页面的语法</p>
<h4 id="window-postMessage-中的window到底是啥？"><a href="#window-postMessage-中的window到底是啥？" class="headerlink" title="window.postMessage()中的window到底是啥？"></a>window.postMessage()中的window到底是啥？</h4><p>始终是你需要通信的目标窗口</p>
<ul>
<li>A页面中：A页面向B页面发送跨域信息，window就是在A页面中嵌入的iframe指向的B页面的window，即：iframe.contentWindow</li>
<li>B页面中：B页面想A页面发送跨域信息，window就是A页面的window，在这里因为B页面时嵌入到A页面中的，对于B页面来讲，window就是top或者parent</li>
</ul>
<h3 id="需要特别注意的坑"><a href="#需要特别注意的坑" class="headerlink" title="需要特别注意的坑"></a>需要特别注意的坑</h3><ol>
<li>一定要等A页面嵌入的B页面加载完成之后，再进行postMessage跨域通信</li>
<li>一定要对origin做判断，去掉不是来自我们目标窗口的origin，防止来自其他origin的攻击</li>
<li>着重注意window.postMessage()中window的用法，明确目标窗口的window</li>
</ol>
<h1 id="websocket协议跨域"><a href="#websocket协议跨域" class="headerlink" title="websocket协议跨域"></a>websocket协议跨域</h1><p>WebSocket protocol是HTML5一种新的协议。它实现了浏览器与服务器全双工通信，同时允许跨域通讯，是server push技术的一种很好的实现。<br>原生WebSocket API使用起来不太方便，我们使用Socket.io，它很好地封装了webSocket接口，提供了更简单、灵活的接口，也对不支持webSocket的浏览器提供了向下兼容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;user input：&lt;input type=<span class="string">"text"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;script src=<span class="string">"https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> socket = io(<span class="string">'http://www.domain2.com:8080'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接成功处理</span></span><br><span class="line">socket.on(<span class="string">'connect'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 监听服务端消息</span></span><br><span class="line">    socket.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'data from server: ---&gt; '</span> + msg); </span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听服务端关闭</span></span><br><span class="line">    socket.on(<span class="string">'disconnect'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Server socket has closed.'</span>); </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'input'</span>)[<span class="number">0</span>].onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    socket.send(<span class="keyword">this</span>.value);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>后端node</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> socket = <span class="built_in">require</span>(<span class="string">'socket.io'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启http服务</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">'Content-type'</span>: <span class="string">'text/html'</span></span><br><span class="line">    &#125;);</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="string">'8080'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Server is running at port 8080...'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听socket连接</span></span><br><span class="line">socket.listen(server).on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">client</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 接收信息</span></span><br><span class="line">    client.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">        client.send(<span class="string">'hello：'</span> + msg);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'data from client: ---&gt; '</span> + msg);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 断开处理</span></span><br><span class="line">    client.on(<span class="string">'disconnect'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Client socket has closed.'</span>); </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><h2 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h2><p>HTML内联框架元素<code>&lt;iframe&gt;</code> 表示嵌套的browsing context。它能够将另一个HTML页面嵌入到当前页面中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=<span class="string">"https://mdn-samples.mozilla.org/snippets/html/iframe-simple-contents.html"</span> title=<span class="string">"iframe example 1"</span> width=<span class="string">"400"</span> height=<span class="string">"300"</span>&gt;</span><br><span class="line">  &lt;p&gt;Your browser does not support iframes.&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;/i</span>frame&gt;</span><br></pre></td></tr></table></figure>

<h2 id="canvas"><a href="#canvas" class="headerlink" title="canvas"></a>canvas</h2><p>标签定义图形，比如图表和其他图像。该标签基于 JavaScript 的绘图 API</p>
<h2 id="source"><a href="#source" class="headerlink" title="source"></a>source</h2><p>定义多媒体资源 <code>&lt;video&gt;</code> 和<code>&lt;audio&gt;</code></p>
<h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><p>定义命令按钮，比如单选按钮、复选框或按钮</p>
<h2 id="figure"><a href="#figure" class="headerlink" title="figure"></a>figure</h2><p>规定独立的流内容（图像、图表、照片、代码等等）</p>
<h2 id="nav"><a href="#nav" class="headerlink" title="nav"></a>nav</h2><p>导航</p>
<h2 id="section"><a href="#section" class="headerlink" title="section"></a>section</h2><p>定义文档中的节（section、区段）</p>
<h1 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a>HTTP报文</h1><p>HTTP报文是在HTTP应用程序之间发送的数据块。这些数据块以一些文本形式的元信息开头，描述报文的内容及含义，后面跟着可选的数据部分</p>
<h2 id="URI和URL"><a href="#URI和URL" class="headerlink" title="URI和URL"></a>URI和URL</h2><p>URI：统一资源标识符<br>URL：统一资源定位符</p>
<h2 id="报文组成"><a href="#报文组成" class="headerlink" title="报文组成"></a>报文组成</h2><ol>
<li>对报文进行描述的起始行 —— start line</li>
<li>包含属性的首部块 —— header</li>
<li>可选的包含数据的主体部分 —— body</li>
</ol>
<h2 id="报文语法"><a href="#报文语法" class="headerlink" title="报文语法"></a>报文语法</h2><ol>
<li>请求报文：</li>
</ol>
<p>向web服务器请求一个动作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;method&gt;&lt;request-URL&gt;&lt;version&gt;</span><br><span class="line">&lt;headers&gt;</span><br><span class="line"></span><br><span class="line">&lt;entity-body&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>响应报文</li>
</ol>
<p>把请求结果返回给客户端</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;version&gt;&lt;status&gt;&lt;reason-phrase&gt;</span><br><span class="line">&lt;headers&gt;</span><br><span class="line"></span><br><span class="line">&lt;entity-body&gt;</span><br></pre></td></tr></table></figure>

<h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><p>服务器和浏览器之间的约定</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类:"></a>分类:</h3><p>100-199 用于指定客户端应相应的某些动作。<br>200-299 用于表示请求成功。<br>300-399 用于已经移动的文件并且常被包含在定位头信息中指定新的地址信息。<br>400-499 用于指出客户端的错误。<br>500-599 用于支持服务器错误。</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">状态信息</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">100</td>
<td align="left">Continue</td>
<td align="left">初始请求已接受,继续发送</td>
</tr>
<tr>
<td align="left">101</td>
<td align="left">switching Protocols</td>
<td align="left">服务器遵从客户请求转换到另一种协议</td>
</tr>
<tr>
<td align="left"><strong>200</strong></td>
<td align="left"><strong>OK</strong></td>
<td align="left"><strong>请求成功</strong></td>
</tr>
<tr>
<td align="left">201</td>
<td align="left">Created</td>
<td align="left">服务器已经创建了文档,Location头给出了他的URL</td>
</tr>
<tr>
<td align="left">202</td>
<td align="left">Accepted</td>
<td align="left">已接受请求,但处理尚未完成</td>
</tr>
<tr>
<td align="left">203</td>
<td align="left">Non-Authoritative Information</td>
<td align="left">文档已正常返回但一些应答头可能不正确,因为使用的是文档的拷贝</td>
</tr>
<tr>
<td align="left"><strong>204</strong></td>
<td align="left"><strong>No Content</strong></td>
<td align="left"><strong>服务器接到请求已经处理完毕,但浏览器页面不会刷新</strong></td>
</tr>
<tr>
<td align="left">205</td>
<td align="left">Reset Content</td>
<td align="left">没有新内容,但浏览器应该重置它所显示的内容,用来强制浏览器清除表单输入内容.</td>
</tr>
<tr>
<td align="left">206</td>
<td align="left">Partial Content</td>
<td align="left">客户发送了一个带有Range头的GET请求,服务器完成了它</td>
</tr>
<tr>
<td align="left">300</td>
<td align="left">Multiple Choices</td>
<td align="left">客户请求的文档可以在多个位置找到,这些位置已经在返回的文档中列出.如果服务器要提出优先选择,则应该在Location应答头指明</td>
</tr>
<tr>
<td align="left"><strong>301</strong></td>
<td align="left"><strong>Moved Permanently</strong></td>
<td align="left"><strong>永久重定向,请求的网页已经永久移动到新位置</strong></td>
</tr>
<tr>
<td align="left"><strong>302</strong></td>
<td align="left"><strong>Found</strong></td>
<td align="left"><strong>临时重定向,POST方法的重定向在未询问用户的情况下就会变成GET</strong></td>
</tr>
<tr>
<td align="left"><strong>303</strong></td>
<td align="left"><strong>See Other</strong></td>
<td align="left"><strong>类似301/302,不同之处在于,原来的请求是POST,现在是GET</strong></td>
</tr>
<tr>
<td align="left"><strong>304</strong></td>
<td align="left"><strong>Not Modified</strong></td>
<td align="left"><strong>自从上次请求后,网页未被修改过</strong></td>
</tr>
<tr>
<td align="left">305</td>
<td align="left">Use Proxy</td>
<td align="left">使用代理服务器</td>
</tr>
<tr>
<td align="left"><strong>307</strong></td>
<td align="left"><strong>Temporary Redirect</strong></td>
<td align="left"><strong>临时重定向，不同之处,把POST转为GET</strong></td>
</tr>
<tr>
<td align="left"><strong>400</strong></td>
<td align="left"><strong>Bad Request</strong></td>
<td align="left"><strong>请求出现语法错误</strong></td>
</tr>
<tr>
<td align="left"><strong>401</strong></td>
<td align="left"><strong>Unauthorized</strong></td>
<td align="left"><strong>用户未授权,需要用户验证</strong></td>
</tr>
<tr>
<td align="left"><strong>403</strong></td>
<td align="left"><strong>Forbidden</strong></td>
<td align="left"><strong>服务器已经理解请求,但是拒绝执行</strong></td>
</tr>
<tr>
<td align="left"><strong>404</strong></td>
<td align="left"><strong>Not Found</strong></td>
<td align="left"><strong>服务器找不到请求的网页</strong></td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">Method Not Allowed</td>
<td align="left">请求方法（GET、POST、HEAD、DELETE、PUT、TRACE等）对指定的资源不适用。</td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">Not Acceptable</td>
<td align="left">指定的资源已经找到，但它的MIME类型和客户在Accpet头中所指定的不兼容</td>
</tr>
<tr>
<td align="left">407</td>
<td align="left">Proxy Authentication Required</td>
<td align="left">类似于401，表示客户必须先经过代理服务器的授权</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">Request Timeout</td>
<td align="left">请求超时</td>
</tr>
<tr>
<td align="left"><strong>500</strong></td>
<td align="left"><strong>Internal Server Error</strong></td>
<td align="left"><strong>服务器遇到错误,无法完成请求</strong></td>
</tr>
<tr>
<td align="left"><strong>503</strong></td>
<td align="left"><strong>Service Unavailable</strong></td>
<td align="left"><strong>由于临时的服务器维护或过载,暂时无法处理请求</strong></td>
</tr>
<tr>
<td align="left">504</td>
<td align="left">Gateway Timeout</td>
<td align="left">由作为代理或网关的服务器使用，表示不能及时地从远程服务器获得应答</td>
</tr>
<tr>
<td align="left">505</td>
<td align="left">HTTP Version Not Supported</td>
<td align="left">服务器不支持请求中所指明的HTTP版本。</td>
</tr>
</tbody></table>
<h2 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h2><ol>
<li><strong>GET</strong></li>
</ol>
<p>请求服务器发送某个资源</p>
<ol start="2">
<li><strong>HEAD</strong></li>
</ol>
<p>与GET方法类似,但是在服务器的响应中没有资源的内容,只有资源的一些基本信息,主要用于</p>
<ul>
<li>在不获取资源的情况下获取信息(类型,大小等)</li>
<li>通过状态码看资源是否存在</li>
<li>通过查看首部,测试资源是否被修改</li>
</ul>
<ol start="3">
<li><strong>PUT</strong></li>
</ol>
<p>和GET从服务器获取资源相反,PUT用于向服务器写入资源.PUT的语义就是让服务器用请求的主体部分创建一个请求URL命名的文档.如果存在就替换</p>
<ol start="4">
<li><strong>POST</strong></li>
</ol>
<p>POST用于向服务器发送数据,通常用来支持HTML的表单(input,select,textarea),表单中的数据会被发送到服务器</p>
<ol start="5">
<li><strong>TRACE</strong></li>
</ol>
<p>客户端发送一个请求,这个请求可能会穿过防火墙,代理,网关,和一些其他应用程序,每个中间节点都可以修改HTTP请求,TRACE方法允许客户端在最终请求发往服务器的时候,看看他变成了什么样子<br>TRACE请求会在目的服务器端发送一个”闭环”诊断,行程最后一站服务器会弹回一条TRACE响应,并在响应主题中携带他收到的原始请求报文</p>
<ol start="5">
<li><strong>DELETE</strong></li>
</ol>
<p>用于要求服务器删除请求的URL,和PUT一样,服务器可能不支持</p>
<ol start="6">
<li><strong>OPTIONS</strong></li>
</ol>
<p>用于请求服务器告知其支持的各种功能</p>
<h1 id="浏览器缓存"><a href="#浏览器缓存" class="headerlink" title="浏览器缓存"></a>浏览器缓存</h1><p>缓存是一种保存资源副本并在下次请求时直接使用该副本的技术.<br>HTTP缓存有多种规则，根据是否需要重新向服务器发起请求来分类，分为两大类(<strong>强制缓存，协商缓存</strong>)<br>http缓存机制主要在http响应头中设定，响应头中相关字段为<strong>Expires、Cache-Control、Last-Modified、Etag</strong>。</p>
<h3 id="cache-control"><a href="#cache-control" class="headerlink" title="cache-control"></a>cache-control</h3><p>cache-control通常用于优化网页性能,适当使用可减少重复读取相同内容<br>可以在服务端setHeader设置cache-control<br>可以设置让该字段存于缓存中,浏览器下次访问时不发起请求,直接从缓存中读取该资源</p>
<h3 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h3><p>ETag通常用于优化网页性能,适当使用可减少重复读取相同内容<br>可通过服务端setHeader设置etag为相应的字段的md5值<br>浏览器访问时,request.headers会带有if-none-match属性(为上述MD5),若不等于则说明服务器上的<br>该资源与本地存储的该资源不相同,需要重新从服务器加载;若相等则说明两者资源相同,则直接从本地<br>缓存获取.后端应设置statusCode=304.与cache-control不同的是:etag始终都要发请求和收响应,而<br>cache-control不发请求.</p>
<h1 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h1><p>存储信息到浏览器，可以用js设置，也可以在服务器端通过set-cookie让浏览器种下cookie，存在于响应头里。<br>每次请求都会带上cookie，最大容量4k<br>用途：记录用户名</p>
<p>设置cookie时的参数：</p>
<ol>
<li><code>path</code>: cookie影响到的路径，匹配该路径才发送cookie</li>
<li><code>expires</code>和<code>maxAge</code>:告诉浏览器cookie多久过期<br>不设置就会产生session cookie，当关闭浏览器，cookie就被清除</li>
<li><code>secure</code>: 为true时，在http无效，在https生效</li>
<li><code>httpOnly</code>: 浏览器不允许通过js修改cookie</li>
</ol>
<h1 id="session"><a href="#session" class="headerlink" title="session"></a>session</h1><p>用来保存状态。当用户输入用户名密码提交给服务器后，服务器验证通过后创建session用于记录用户信息，session可保存在服务器，也可以保存在数据库</p>
<ol>
<li>创建session后，会把关联的session_id通过是set-cookie添加到响应头</li>
<li>浏览器加载页面发现有set-cookie字段，就把这个cookie种到指定域名下</li>
<li>下次刷新页面，发送的请求带上cookie，服务器接受后根据session_id来识别用户<blockquote>
<p>cookie和session的区别:<br>cookie是存储在浏览器中的一小段数据,session是让服务器识别某个用户的机制session.在实现过程中需要使用cookie.二者不是同一维度的东西.</p>
</blockquote>
<h1 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h1></li>
<li>本地存储，永不过期，除非手动js删除。5M大小。</li>
<li>不参与网络传输</li>
<li>一般用于性能优化</li>
</ol>
<h2 id="localStorage的存储-获取-删除"><a href="#localStorage的存储-获取-删除" class="headerlink" title="localStorage的存储,获取,删除"></a>localStorage的存储,获取,删除</h2><p>只支持字符串存储.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//存储</span></span><br><span class="line">localStorage.setItem(<span class="string">'myCat'</span>, <span class="string">'Tom'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取</span></span><br><span class="line">localStorage.getItem(<span class="string">'Tom'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//移除</span></span><br><span class="line">localstorage.removeItem(<span class="string">'myCat'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//移除所有</span></span><br><span class="line">localstorage.clear()</span><br></pre></td></tr></table></figure>

<h1 id="sessionstorage"><a href="#sessionstorage" class="headerlink" title="sessionstorage"></a>sessionstorage</h1><p>与localstorage类似,属于本地存储与上面的session无关.但是关闭浏览器失效.</p>
<h2 id="浏览器缓存机制通俗语言版-自我理解"><a href="#浏览器缓存机制通俗语言版-自我理解" class="headerlink" title="浏览器缓存机制通俗语言版(自我理解)"></a>浏览器缓存机制通俗语言版(自我理解)</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cache-Contro<span class="variable">l:</span> <span class="built_in">max</span>-age=<span class="number">300</span>；</span><br><span class="line">ETa<span class="variable">g:W</span>/<span class="string">"e-cbxLFQW5zapn79tQwb/g6Q"</span></span><br></pre></td></tr></table></figure>

<p>浏览器第一次请求a.jpg这张图片,服务器发回一张图片,并且附送一个<code>ETag</code>(相当于一个用于验证的文件).浏览器把这张图片和ETag缓存到本地.如果在300秒内,浏览器又请求这张图片,那么直接从缓存中读取这张图.如果超过300秒,浏览器发现已经过了时间了,就重新向服务器发请求,并且附带之前给的ETag.服务器拿着当前文件计算后的<code>ETag</code>和浏览器发回的<code>ETag</code>比较,如果一样,说明图片没换,发回一个响应头(不包含图片,304,表示文件没修改,还能用).如果不一样,就把新的文件和新的<code>ETag</code>发回去.<br>另外还有<code>Last-Modified/If-Modified-Since</code>.和<code>ETag</code>功能类似.因为服务器可能不止一个,文件存储在不同的服务器,那就给请求文件上附带上<code>Last-Modified</code>声明,请求时带上<code>If-Modified-Since</code>,表明服务器上一次修改这个文件的时间,拿来和服务器上记录的最后修改时间对比.如果修改时间比较新,说明被动过,发回一个新文件.如果时间比较旧,说明不用换,发回304,使用缓存即可.</p>
<h2 id="严谨说法"><a href="#严谨说法" class="headerlink" title="严谨说法"></a>严谨说法</h2><p>浏览器缓存控制分为<strong>强缓存</strong>和<strong>协商缓存</strong>，<strong>协商缓存</strong>必须配合<strong>强缓存</strong>使用。</p>
<p>首先浏览器第一次跟服务器请求一个资源，服务器在返回这个资源和response header的同时，会根据开发者要求或者浏览器默认，在response的header加上相关字段的http response header。</p>
<p>一、当浏览器对某个资源的请求命中了<strong>强缓存</strong>时，利用[Expires]或者[Cache-Control]这两个http response header实现<br>。</p>
<ol>
<li><p>[Expires]：描述的是一个绝对时间，根据的是客户端时间。用GMT格式的字符串表示，如：Expires:Thu, 31 Dec 2037 23:55:55 GMT 下次浏览器再次请求同一资源时。先从客户端缓存中寻找，找到这个资源后，拿出它的[Expires]跟当前的请求时间比较。如果请求时间在[Expires]指定的失效时间之前，就能命中缓存，这样就不用再次到服务器上去缓存一遍，节省了资源。但是正因为是绝对时间，如果客户端时间被随意更改下，这个机制就失效了。所以我们需要[Cache-Control]。</p>
</li>
<li><p>[Cache-Control]：描述的是一个相对时间，在进行缓存命中时，都是利用浏览器时间判断。</p>
</li>
</ol>
<p>这两个header可以只启用一个，也可以同时启用，当response header中，[Expires]和[Cache-Control]同时存在时，[Cache-Control]优先级高于[Expires]。</p>
<p>二、当浏览器对某个资源的请求没有命中<strong>强缓存</strong>，就会发一个请求到服务器，验证<strong>协商缓存</strong>是否命中。<br>如果命中，则还是从客户端缓存中加载。<strong>协商缓存</strong>利用的是[Last-Modified，If-Modified-Since]和[ETag、If-None-Match]这两对Header来管理的。</p>
<ol>
<li><p>[Last-Modified]：原理和上面的[expires]相同，区别是它是根据服务器时间返回的header来判断缓存是否存在。但是有时候也会服务器上资源其实有变化，但是最后修改时间却没有变化的情况（这种问题也不容易被定位），这时候我们需要[ETag、If-None-Match]。</p>
</li>
<li><p>[ETag、If-None-Match]：原理与上相同，区别是浏览器跟服务器请求一个资源，服务器在返回这个资源的同时，在respone的header加上ETag的header，这个header是服务器根据当前请求的资源生成的一个唯一标识，这个唯一标识是一个字符串，只要资源有变化这个串就不同。</p>
</li>
<li><p>[ETag、If-None-Match]这么厉害我们为什么还需要[Last-Modified、If-Modified-Since]呢？有一个例子就是分布式系统尽量关闭掉ETag(每台机器生成的ETag都会不一样）</p>
</li>
</ol>
<p>[Last-Modified，If-Modified-Since]和[ETag、If-None-Match]一般都是同时启用。</p>
<h1 id="HTTPS原理"><a href="#HTTPS原理" class="headerlink" title="HTTPS原理"></a>HTTPS原理</h1><p>HTTP+SSL/TLS， 即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL，用于安全的HTTP数据传输。</p>
<h2 id="加密算法："><a href="#加密算法：" class="headerlink" title="加密算法："></a>加密算法：</h2><ol>
<li>对称加密<br>有流式、分组两种，加密和解密都是使用的同一个密钥。</li>
<li>非对称加密<br>加密使用的密钥和解密使用的密钥是不相同的，分别称为：公钥、私钥，公钥和算法都是公开的，私钥是保密的。非对称加密算法性能较低，但是安全性超强，由于其加密特性，非对称加密算法能加密的数据长度也是有限的</li>
<li>哈希算法<br>将任意长度的信息转换为较短的固定长度的值，通常其长度要比信息小得多，且算法不可逆。</li>
<li>数字签名<br>签名就是在信息的后面再加上一段内容（信息经过hash后的值），可以证明信息没有被修改过。hash值一般都会加密后（也就是签名）再和信息一起发送，以保证这个hash值不被修改。</li>
</ol>
<h1 id="简单通信流程"><a href="#简单通信流程" class="headerlink" title="简单通信流程"></a>简单通信流程</h1><p>概括来说，整个简化的加密通信的流程就是：</p>
<ol>
<li>小明访问网站，网站将自己的证书给到小明（其实是给到浏览器，小明不会有感知）</li>
<li>浏览器从证书中拿到网站的公钥A</li>
<li>浏览器生成一个只有自己知道的对称密钥B，用公钥A加密，并传给网站（其实是有协商的过程，这里为了便于理解先简化）</li>
<li>网站通过私钥解密，拿到对称密钥B</li>
<li>浏览器、网站 之后的数据通信，都用密钥B进行加密</li>
</ol>
<h1 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h1><h2 id="证书可能存在的问题"><a href="#证书可能存在的问题" class="headerlink" title="证书可能存在的问题"></a>证书可能存在的问题</h2><p>证书是伪造的：压根不是CA颁发的<br>证书被篡改过：比如将XX网站的公钥给替换了<br>解决方法: <strong>数字签名和摘要</strong><br>“摘要”就是对传输的内容，通过hash算法计算出一段固定长度的串。然后，在通过CA的私钥对这段摘要进行加密，加密后得到的结果就是“数字签名.这段数字签名只有CA的公钥才能够解密。</p>
<h1 id="一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？（流程说的越详细越好）"><a href="#一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？（流程说的越详细越好）" class="headerlink" title="一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？（流程说的越详细越好）"></a>一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？（流程说的越详细越好）</h1><h2 id="详细版："><a href="#详细版：" class="headerlink" title="详细版："></a>详细版：</h2><p>1、浏览器会开启一个线程来处理这个请求，对 URL 分析判断如果是 http 协议就按照 Web 方式来处理;<br>2、调用浏览器内核中的对应方法，比如 WebView 中的 loadUrl 方法;<br>3、通过DNS解析获取网址的IP地址，设置 UA 等信息发出第二个GET请求;<br>4、进行HTTP协议会话，客户端发送报头(请求报头);<br>5、进入到web服务器上的 Web Server，如 Apache、Tomcat、Node.JS 等服务器;<br>6、进入部署好的后端应用，如 PHP、Java、JavaScript、Python 等，找到对应的请求处理;<br>7、处理结束回馈报头，此处如果浏览器访问过，缓存上有对应资源，会与服务器最后修改时间对比，一致则返回304;<br>8、浏览器开始下载html文档(响应报头，状态码200)，同时使用缓存;<br>9、文档树建立，根据标记请求所需指定MIME类型的文件（比如css、js）,同时设置了cookie;<br>10、页面开始渲染DOM，JS根据DOM API操作DOM,执行事件绑定等，页面显示完成。</p>
<h2 id="简洁版："><a href="#简洁版：" class="headerlink" title="简洁版："></a>简洁版：</h2><p>浏览器根据请求的URL交给DNS域名解析，找到真实IP，向服务器发起请求；<br>服务器交给后台处理完成后返回数据，浏览器接收文件（HTML、JS、CSS、图象等）；<br>浏览器对加载到的资源（HTML、JS、CSS等）进行语法解析，建立相应的内部数据结构（如HTML的DOM）；<br>载入解析到的资源文件，渲染页面，完成。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zax Tseng</p>
  <div class="site-description motion-element" itemprop="description">Zax's BLOG</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zax Tseng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.3.0</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>


<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  

  


  
</body>
</html>
