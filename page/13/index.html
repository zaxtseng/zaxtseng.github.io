<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Zax&#39;s BLOG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Zax&#39;s BLOG">
<meta property="og:type" content="website">
<meta property="og:title" content="Zax&#39;s BLOG">
<meta property="og:url" content="http://yoursite.com/page/13/index.html">
<meta property="og:site_name" content="Zax&#39;s BLOG">
<meta property="og:description" content="Zax&#39;s BLOG">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zax Tseng">
<meta property="article:tag" content="javascript, React, Vue, HTML5">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Zax&#39;s BLOG" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zax&#39;s BLOG</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-vue可复用性" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/14/vue%E5%8F%AF%E5%A4%8D%E7%94%A8%E6%80%A7/" class="article-date">
  <time datetime="2019-10-14T07:08:18.000Z" itemprop="datePublished">2019-10-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/14/vue%E5%8F%AF%E5%A4%8D%E7%94%A8%E6%80%A7/">vue可复用性&amp;组合</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="混入mixin"><a href="#混入mixin" class="headerlink" title="混入mixin"></a>混入mixin</h1><p>一个混入对象可以包含任意组件选项.当组件使用混入对象时,所有混入对象的选项将被”混合”进组件本身的选项.<br>例子:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个混入对象</span></span><br><span class="line"><span class="keyword">var</span> myMixin = &#123;</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">hello</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">hello</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello from mixin&quot;)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//定义一个使用混入对象的组件</span></span><br><span class="line"><span class="string">var Component = Vue.extend(&#123;</span></span><br><span class="line"><span class="string">    mixins: [myMixin]</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var component = new Component() //=&gt; &#x27;</span>hello <span class="keyword">from</span> mixin<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="选项合并"><a href="#选项合并" class="headerlink" title="选项合并"></a>选项合并</h2><p>当组件和混入对象含有同名选项时,这些选项将以恰当的方式进行”合并”.<br>比如,数据对象在内部会进行递归合并,并在发生冲突时以组件数据优先.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">            <span class="attr">foo</span>: <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">mixins</span>: [mixin],</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;goodbye&#x27;</span>,</span><br><span class="line">            <span class="attr">bar</span>: <span class="string">&#x27;def&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$data</span>)</span><br><span class="line">        <span class="comment">// =&gt; &#123; message: &#x27;goodbye&#x27;, foo:&#x27;abc&#x27;, bar: &#x27;def&#x27;&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>同名钩子函数将合并成一个数组,因此都将被调用.另外,混入对象的钩子将在组件自身钩子之前调用.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;混入对象钩子被调用&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">mixins</span>: [mixin],</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件钩子被调用&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt; &#x27;混入对象钩子被调用&#x27;</span></span><br><span class="line"><span class="comment">//=&gt; &#x27;组件钩子被调用&#x27;</span></span><br></pre></td></tr></table></figure>
<p>值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象。两个对象键名冲突时，取组件对象的键值对。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">foo</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">conficting</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;from mixin&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">mixins</span>: [mixin],</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">bar</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;bar&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">conficting</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;from self&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">vm.<span class="title function_">foo</span>() <span class="comment">// =&gt; &quot;foo&quot;</span></span><br><span class="line">vm.<span class="title function_">bar</span>() <span class="comment">// =&gt; &quot;bar&quot;</span></span><br><span class="line">vm.<span class="title function_">conflicting</span>() <span class="comment">// =&gt; &quot;from self&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：<code>Vue.extend()</code> 也使用同样的策略进行合并。</p>
</blockquote>
<h2 id="全局混入"><a href="#全局混入" class="headerlink" title="全局混入"></a>全局混入</h2><p>混入也可以进行全局注册,使用时需要小心.一但使用全局混入,他将影响每一个之后创建的Vue实例.<br>使用恰当时还可以用来为自定义选项注入处理逻辑.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为自定义的选项 &#x27;myOption&#x27; 注入一个处理器。</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> myOption = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">myOption</span></span><br><span class="line">    <span class="keyword">if</span> (myOption) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(myOption)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">myOption</span>: <span class="string">&#x27;hello!&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// =&gt; &quot;hello!&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>请谨慎使用全局混入，因为它会影响每个单独创建的 Vue 实例 (包括第三方组件)。大多数情况下，只应当应用于自定义选项，就像上面示例一样。推荐将其作为插件发布，以避免重复应用混入。</p>
</blockquote>
<h2 id="自定义选项合并策略"><a href="#自定义选项合并策略" class="headerlink" title="自定义选项合并策略"></a>自定义选项合并策略</h2><p>自定义选项将使用默认策略，即简单地覆盖已有值。如果想让自定义选项以自定义逻辑合并，可以向 Vue.config.optionMergeStrategies 添加一个函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">myOption</span> = <span class="keyword">function</span> (<span class="params">toVal, fromVal</span>) &#123;</span><br><span class="line">  <span class="comment">// 返回合并后的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于多数值为对象的选项，可以使用与 methods 相同的合并策略：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strategies = <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span></span><br><span class="line">strategies.<span class="property">myOption</span> = strategies.<span class="property">methods</span></span><br></pre></td></tr></table></figure>
<p>可以在 Vuex 1.x 的混入策略里找到一个更高级的例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">computed</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">vuex</span> = <span class="keyword">function</span> (<span class="params">toVal, fromVal</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!toVal) <span class="keyword">return</span> fromVal</span><br><span class="line">  <span class="keyword">if</span> (!fromVal) <span class="keyword">return</span> toVal</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">getters</span>: <span class="title function_">merge</span>(toVal.<span class="property">getters</span>, fromVal.<span class="property">getters</span>),</span><br><span class="line">    <span class="attr">state</span>: <span class="title function_">merge</span>(toVal.<span class="property">state</span>, fromVal.<span class="property">state</span>),</span><br><span class="line">    <span class="attr">actions</span>: <span class="title function_">merge</span>(toVal.<span class="property">actions</span>, fromVal.<span class="property">actions</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h1><p>输入框聚焦<br>当页面加载时，该元素将获得焦点 (注意：autofocus 在移动版 Safari 上不工作)。事实上，只要你在打开这个页面后还没点击过任何内容，这个输入框就应当还是处于聚焦状态。现在让我们用指令来实现这个功能：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册一个全局自定义指令v-focus</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line"><span class="comment">//当被绑定的元素插入到DOM中时...</span></span><br><span class="line"><span class="attr">inserted</span>: <span class="keyword">function</span>(<span class="params">el</span>)&#123;</span><br><span class="line">    <span class="comment">//聚焦元素</span></span><br><span class="line">    el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>局部指令注册,组件中接受<code>directive</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">    <span class="attr">focus</span>: &#123;</span><br><span class="line">        <span class="comment">//指令的定义</span></span><br><span class="line">        <span class="attr">inserted</span>: <span class="keyword">function</span>(<span class="params">el</span>)&#123;</span><br><span class="line">            el.<span class="title function_">focus</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在模板中任何元素上使用<code>v-focus</code>属性,例如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-focus&gt;</span><br></pre></td></tr></table></figure>
<h1 id="钩子函数"><a href="#钩子函数" class="headerlink" title="钩子函数"></a>钩子函数</h1><p>一个指令对象可以提供以下几个钩子函数:</p>
<ol>
<li><code>bind</code>: 只调用一次,指令第一次绑定到元素时调用.在这里进行一次性的初始化设置.</li>
<li><code>inserted</code>: 被绑定元素插入到父节点时调用.</li>
<li><code>update</code>: 所在组件的VNode更新时调用,但是可能发生在其子VNode更新之前.指令的值可能发生改变,也可能没有.</li>
<li><code>componentUpdated</code>: 指令所在组件的VNode及其子VNode全部更新后调用.</li>
<li><code>unbind</code>: 只调用一次,指令与元素解绑时调用.</li>
</ol>
<h2 id="钩子函数的参数"><a href="#钩子函数的参数" class="headerlink" title="钩子函数的参数"></a>钩子函数的参数</h2><p>指令钩子会被传入以下参数:</p>
<ul>
<li><code>el</code>: 指令所绑定的元素,可以直接操作DOM.</li>
<li><code>binding</code>: 一个对象,包含以下属性:<ul>
<li><code>name</code>: 指令名,不包括<code>v-</code>前缀.</li>
<li><code>value</code>: 指令的绑定值.例如：<code>v-my-directive=&quot;1 + 1&quot;</code>中，绑定值为2。</li>
<li><code>oldValue</code>: 指令绑定的上一个值.仅在update和componentUpdated钩子中可用.无论值是否改变都可用.</li>
<li><code>expression</code>: 字符串形式的指令表达式.例如 <code>v-my-directive=&quot;1 + 1&quot; </code>中，表达式为 <code>&quot;1 + 1&quot;</code>。</li>
<li><code>arg</code>: 传给指令的参数.可选.例如 <code>v-my-directive:foo</code> 中，参数为 “foo”。</li>
<li><code>modifiers</code>: 一个包含修饰符的对象.例如：<code>v-my-directive.foo.bar</code> 中，修饰符对象为 <code>&#123; foo: true, bar: true &#125;</code>。</li>
</ul>
</li>
<li><code>vnode</code>: Vue编译生成的虚拟节点.</li>
<li><code>oldVNode</code>: 上一个虚拟节点.</li>
</ul>
<blockquote>
<p>除了 <code>el</code> 之外，其它参数都应该是只读的，切勿进行修改。如果需要在钩子之间共享数据，建议通过元素的 <code>dataset</code> 来进行。</p>
</blockquote>
<p>范例:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html</span></span><br><span class="line">&lt;div id=<span class="string">&quot;hook-arguments-example&quot;</span> v-<span class="attr">demo</span>:foo.<span class="property">a</span>.<span class="property">b</span>=<span class="string">&quot;message&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//js</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;demo&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">bind</span>: <span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="title class_">JSON</span>.<span class="property">stringify</span></span><br><span class="line">    el.<span class="property">innerHTML</span> =</span><br><span class="line">      <span class="string">&#x27;name: &#x27;</span>       + <span class="title function_">s</span>(binding.<span class="property">name</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;value: &#x27;</span>      + <span class="title function_">s</span>(binding.<span class="property">value</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;expression: &#x27;</span> + <span class="title function_">s</span>(binding.<span class="property">expression</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;argument: &#x27;</span>   + <span class="title function_">s</span>(binding.<span class="property">arg</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;modifiers: &#x27;</span>  + <span class="title function_">s</span>(binding.<span class="property">modifiers</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;vnode keys: &#x27;</span> + <span class="title class_">Object</span>.<span class="title function_">keys</span>(vnode).<span class="title function_">join</span>(<span class="string">&#x27;, &#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#hook-arguments-example&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;hello!&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="动态指令参数"><a href="#动态指令参数" class="headerlink" title="动态指令参数"></a>动态指令参数</h1><p>在 <code>v-mydirective:[argument]=&quot;value&quot;</code> 中，argument 参数可以根据组件实例数据进行更新！<br>例如创建一个自定义指令,通过固定布局将元素固定在页面上.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;baseexample&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Scroll down this page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin</span>=<span class="string">&quot;200&quot;</span>&gt;</span>Stick me 200px from the top of the page<span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>自定义事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;pin&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">bind</span>: <span class="keyword">function</span>(<span class="params">el, bingding, vnode</span>)&#123;</span><br><span class="line">        el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span></span><br><span class="line">        el.<span class="property">style</span>.<span class="property">top</span> = binding.<span class="property">value</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#baseexample&quot;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>
<p>这会把元素固定在距离页面顶部200px的位置.<br>如果需要将元素固定在左侧呢?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;dynamicexample&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Scroll down this page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin:</span>[<span class="attr">direction</span>]=<span class="string">&quot;200&quot;</span>&gt;</span>I am pinned onto the page at 200px to the left.<span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;pin&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">bind</span>: <span class="keyword">function</span>(<span class="params">el, binding, vnode</span>)&#123;</span><br><span class="line">        el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span></span><br><span class="line">        <span class="keyword">var</span> s = (binding.<span class="property">arg</span> == <span class="string">&#x27;left&#x27;</span> ? <span class="string">&#x27;left&#x27;</span> : <span class="string">&#x27;top&#x27;</span>)</span><br><span class="line">        el.<span class="property">style</span>[s] = binding.<span class="property">value</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#dynamicexample&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">direction</span>: <span class="string">&#x27;left&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="函数简写"><a href="#函数简写" class="headerlink" title="函数简写"></a>函数简写</h2><p>在很多时候，你可能想在 bind 和 update 时触发相同行为，而不关心其它的钩子。比如这样写:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;color-swatch&#x27;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span><br><span class="line">  el.<span class="property">style</span>.<span class="property">backgroundColor</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="对象字面量"><a href="#对象字面量" class="headerlink" title="对象字面量"></a>对象字面量</h2><p>如果指令需要多个值，可以传入一个 JavaScript 对象字面量。记住，指令函数能够接受所有合法的 JavaScript 表达式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html</span></span><br><span class="line">&lt;div v-demo=<span class="string">&quot;&#123; color: &#x27;white&#x27;, text: &#x27;hello!&#x27; &#125;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="comment">//js</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;demo&#x27;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">color</span>) <span class="comment">// =&gt; &quot;white&quot;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">text</span>)  <span class="comment">// =&gt; &quot;hello!&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="渲染函数-amp-JSX"><a href="#渲染函数-amp-JSX" class="headerlink" title="渲染函数&amp;JSX"></a>渲染函数&amp;JSX</h1><p>渲染函数在Vue.js进阶里有讲到,JSX先不看了.</p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p>插件用来为Vue添加全局功能.<br>插件常用功能:</p>
<ol>
<li>添加全局方法或属性.</li>
<li>添加全局资源: 指令,过滤器,过渡</li>
<li>通过全局混入来添加一些组件选项.</li>
<li>添加Vue实例方法,通过把他们添加到Vue.prototype上实现.</li>
<li>一个库,提供自己的API,同时提供上面提到的一个或多个功能.如Vue-router</li>
</ol>
<h2 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h2><p>通过全局方法<code>Vue.use()</code>使用插件.需要在<code>new Vue()</code>之前调用.<br>也可以传入一个可选的对象.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">MyPlugin</span>, &#123; <span class="attr">someOption</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>Vue.use 会自动阻止多次注册相同插件，届时即使多次调用也只会注册一次该插件。</p>
<p>Vue.js 官方提供的一些插件 (例如 vue-router) 在检测到 Vue 是可访问的全局变量时会自动调用 <code>Vue.use()</code>。然而在像 CommonJS 这样的模块环境中，你应该始终显式地调用 <code>Vue.use()</code></p>
<h2 id="开发插件"><a href="#开发插件" class="headerlink" title="开发插件"></a>开发插件</h2><p>Vue.js的插件暴露一个install的方法.这个方法的第一个参数是Vue构造器,第二个参数是可选的选项对象:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MyPlugin</span>.<span class="property">install</span> = <span class="keyword">function</span>(<span class="params">Vue, options</span>)&#123;</span><br><span class="line">    <span class="comment">//1. 添加全局方法或属性</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property">myGlobalMethod</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">//逻辑..</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.添加全局资源</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;my-directive&#x27;</span>,&#123;</span><br><span class="line">        <span class="title function_">bind</span>(<span class="params">el, binding, vnode, oldVnode</span>)&#123;</span><br><span class="line">            <span class="comment">//逻辑</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 注入组件选项</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">        <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">//逻辑...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. 添加实例方法</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span>(<span class="params">methodOptions</span>)&#123;</span><br><span class="line">        <span class="comment">//逻辑...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h1><p>过滤器可以用在：双花括号插值和 v-bind 表达式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在双花括号中 --&gt;</span><br><span class="line">&#123;&#123; message | capitalize &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 在 <span class="string">`v-bind`</span> 中 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;rawId | formatId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>在组件的选项中定义本地的过滤器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filters</span>: &#123;</span><br><span class="line">  <span class="attr">capitalize</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    value = value.<span class="title function_">toString</span>()</span><br><span class="line">    <span class="keyword">return</span> value.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + value.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者在创建Vue实例之前全局定义过滤器:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;capitalize&#x27;</span>, <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  value = value.<span class="title function_">toString</span>()</span><br><span class="line">  <span class="keyword">return</span> value.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + value.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当全局过滤器和局部过滤器重名时，会采用局部过滤器。<br>过滤器可以串联</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; message | filterA | filterB &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，filterA 被定义为接收单个参数的过滤器函数，表达式 message 的值将作为参数传入到函数中。然后继续调用同样被定义为接收单个参数的过滤器函数 filterB，将 filterA 的结果传递到 filterB 中。</p>
<p>过滤器可以接收参数:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; message | <span class="title function_">filterA</span>(<span class="string">&#x27;arg1&#x27;</span>, arg2) &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>这里，filterA 被定义为接收三个参数的过滤器函数。其中 message 的值作为第一个参数，普通字符串 ‘arg1’ 作为第二个参数，表达式 arg2 的值作为第三个参数。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/14/vue%E5%8F%AF%E5%A4%8D%E7%94%A8%E6%80%A7/" data-id="cl9xpujrl003gdmopgonl17y6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js%E8%BF%9B%E9%98%B6/" rel="tag">Vue.js进阶</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue过渡和动画" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/14/vue%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB/" class="article-date">
  <time datetime="2019-10-14T04:08:18.000Z" itemprop="datePublished">2019-10-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/14/vue%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB/">vue过渡和动画</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/14/vue%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB/" data-id="cl9xpujrn003kdmop3jzp8wlr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js%E8%BF%9B%E9%98%B6/" rel="tag">Vue.js进阶</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-微信小程序入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/10/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2019-10-10T11:22:41.000Z" itemprop="datePublished">2019-10-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/10/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8/">微信小程序入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="小程序的文件结构"><a href="#小程序的文件结构" class="headerlink" title="小程序的文件结构"></a>小程序的文件结构</h1><p><code>app.js</code>: 设置一些项目的全局变量<br><code>app.json</code>: 每一个新页面都必须在这个页面注册<br><code>app.wxss</code>: 项目全局样式<br><code>project.config.json</code>: 项目配置文件</p>
<p>一个页面主要是包含以下四个文件，这四个文件的名字应该都是一样的，最好以页面所在的文件夹名字为标准：<br><code>xxx.wxml</code>: 页面结构<br><code>xxx.wxss</code>: 页面样式<br><code>xxx.json</code>: 页面配置文件<br><code>xxx.js</code>: 页面脚本文件</p>
<p>通过新建目录,新建component.可以快速建立上述同名称文件.</p>
<p>页面可以嵌套,但不能超过5个层级.<br><code>app.json</code>中<code>tabBar</code>可以设置导航栏颜色背景,下属的<code>list</code>中可以设置下标按钮的信息.</p>
<h1 id="设备分辨率和RPX"><a href="#设备分辨率和RPX" class="headerlink" title="设备分辨率和RPX"></a>设备分辨率和RPX</h1><p>pt: 视觉单位.与屏幕的物理尺寸有关系,也叫做逻辑分辨率,与移动端的栅格渲染有关.<br>px: 像素点,物理分辨率.随着屏幕变化不会变化.一般设计稿以px为单位.iphone6的分辨率是375,设计稿一般是750,那么<br>    rpx : px &#x3D; 2:1.<br>rpx 是响应式像素,可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx.</p>
<p>当需要的元素大小适应屏幕尺寸，就选择rpx作为单位，否则使用px作为单位。</p>
<h1 id="小程序的事件"><a href="#小程序的事件" class="headerlink" title="小程序的事件"></a>小程序的事件</h1><p>冒泡事件: 当一个组件上的事件被触发,该事件会向父节点传递.<br>非冒泡事件: 与之相反,不向父节点传递.</p>
<h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2><p>key以bind或者catch开头,然后跟上事件的类型,如<code>bindtap</code>,<code>catchtouchstart</code>.<br>value是一个字符串,需要在对应的page中定义同名的函数,不然当触发时会报错.<br><strong>区别</strong>: bind事件绑定不会阻止冒泡事件向上冒泡,catch事件绑定可以阻止.</p>
<h2 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h2><p>监听用户下拉刷新事件</p>
<ol>
<li>在app.json的window选项或者页面配置中开启<code>enablePullDownRefresh</code>.</li>
<li>可以通过<code>wx.startPullDownRefresh</code>触发下拉刷新,调用后触发下拉刷新动画.</li>
<li>当处理完数据刷新后,<code>wx.stopPullDownRefresh</code>可以停止当前页面的下拉刷新.</li>
</ol>
<h2 id="小程序更新数据的值"><a href="#小程序更新数据的值" class="headerlink" title="小程序更新数据的值"></a>小程序更新数据的值</h2><p>函数用于将数据从逻辑层更新到视图层(异步)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(object data, <span class="keyword">function</span> callback)</span><br></pre></td></tr></table></figure>
<p><code>data</code>: 传一个object,是这次要改变的数据<br><code>callback</code>: 传一个function,是setData引起页面更新渲染完毕后的回调函数</p>
<p>&#x2F;&#x2F;赋值的方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">arr</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">arr</span>&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>小程序中push方法基本失效.</p>
</blockquote>
<h2 id="改变object中的值"><a href="#改变object中的值" class="headerlink" title="改变object中的值"></a>改变object中的值</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="string">&quot;obj.text&quot;</span>: <span class="string">&quot;message2&quot;</span> &#125;)</span><br></pre></td></tr></table></figure>


<h1 id="小程序的路由方式"><a href="#小程序的路由方式" class="headerlink" title="小程序的路由方式"></a>小程序的路由方式</h1><p>打开新页面: <code>wx.navigateTo</code> 或使用组件<code>&lt;navigator open-type=&quot;navigateTo&quot; /&gt;</code><br>页面重定向: <code>wx.redirectTo</code> 或使用组件<code>&lt;navigator open-type=&quot;redirectTo&quot;/&gt;</code><br>压面返回: <code>wx.navigateBack</code> 或使用组件<code>&lt;navigator open-type=&quot;navigateBack&quot;/&gt;</code><br>Tab切换: <code>wx.switchTab</code>或使用组件<code>&lt;navigator open-type=&quot;switchTab&quot;/&gt;</code><br>重启动: <code>wx.reLauch</code>或使用组件<code>&lt;navigator open-type=&quot;reLauch&quot;/&gt;</code></p>
<h1 id="小程序请求接口方式"><a href="#小程序请求接口方式" class="headerlink" title="小程序请求接口方式"></a>小程序请求接口方式</h1><p>HTTPS请求: <code>wx.request</code><br>上传文件: <code>wx.uploadFile</code><br>下载文件: <code>wx.downloadFile</code><br>webSocket通信: <code>wx.connectSocket</code></p>
<h1 id="小程序的生命周期"><a href="#小程序的生命周期" class="headerlink" title="小程序的生命周期"></a>小程序的生命周期</h1><p><code>onLoad</code>: 页面加载时触发.一个页面只会调用一次.可以在<code>onLoad</code>的参数中获取打开当前页面路径中的参数<br><code>onShow</code>: 页面显示&#x2F;切入前台时触发<br><code>onReady</code>: 页面初次渲染时触发.一个页面只调用一次.<br><code>onHide</code>: 页面隐藏&#x2F;切入后台时触发.如<code>navigateTo</code>或底部tab切换到其他页面,小程序切入后台.<br><code>onUnload</code>: 页面卸载时触发.如<code>navigateTo</code>或<code>navigateBack</code>时触发.</p>
<h1 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h1><p>父传子: <code>properties</code><br>子传父: <code>triggerEvent(&#39;自定义事件名&#39;, &#123;&#125;)</code></p>
<h1 id="AppID-小程序ID"><a href="#AppID-小程序ID" class="headerlink" title="AppID(小程序ID)"></a>AppID(小程序ID)</h1><p>也是开发者ID,路径:<br>微信公众平台-小程序-开发-开发设置</p>
<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><p>微信小程序采用自有的标签,但是基本和h5标签有对应</p>
<table>
<thead>
<tr>
<th>小程序标签</th>
<th>h5标签</th>
</tr>
</thead>
<tbody><tr>
<td>view</td>
<td>div</td>
</tr>
<tr>
<td>text</td>
<td>span</td>
</tr>
<tr>
<td>scroll-view</td>
<td>可以滚动的div</td>
</tr>
</tbody></table>
<h1 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h1><p>数据绑定采用双大括号语法.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123; message &#125;&#125;&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<p>数据来自对应<code>Page</code>的data中.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="组件属性-需要在双大括号内"><a href="#组件属性-需要在双大括号内" class="headerlink" title="组件属性(需要在双大括号内)"></a>组件属性(需要在双大括号内)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view id=<span class="string">&quot;item-&#123;&#123;id&#125;&#125;&quot;</span>&gt;&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><p><code>wx: if=&quot;&#123;&#123;判断传入的文本用双括号&#125;&#125;&quot;</code><br><code>wx: else=&quot;&#123;&#123;判断传入的文本用双括号&#125;&#125;&quot;</code></p>
<h2 id="wx-if-和hidden"><a href="#wx-if-和hidden" class="headerlink" title="wx: if 和hidden"></a><code>wx: if</code> 和<code>hidden</code></h2><p>类似于<code>v-if</code>和<code>v-show</code>,<code>hidden</code>是始终渲染的,<code>wx: if</code>只有为<code>true</code>才渲染.</p>
<h1 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h1><p><code>wx: for</code><br>在组件上使用 <code>wx:for</code> 控制属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件。<br>默认数组的当前项的下标变量名默认为 <code>index</code>，数组当前项的变量名默认为 <code>item</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="attr">wx</span>:<span class="keyword">for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span>&gt;</span><br><span class="line">  &#123;&#123;index&#125;&#125;: &#123;&#123;item.<span class="property">message</span>&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">array</span>: [&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>使用 <code>wx:for-item</code> 可以指定数组当前元素的变量名，<br>使用 <code>wx:for-index</code> 可以指定数组当前下标的变量名：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="attr">wx</span>:<span class="keyword">for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span> <span class="attr">wx</span>:<span class="keyword">for</span>-index=<span class="string">&quot;idx&quot;</span> <span class="attr">wx</span>:<span class="keyword">for</span>-item=<span class="string">&quot;itemName&quot;</span>&gt;</span><br><span class="line">  &#123;&#123;idx&#125;&#125;: &#123;&#123;itemName.<span class="property">message</span>&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意: 当 <code>wx:for</code> 的值为字符串时，会将字符串解析成字符串数组.<br>花括号和引号之间如果有空格，将最终被解析成为字符串.</p>
</blockquote>
<h1 id="wx-key"><a href="#wx-key" class="headerlink" title="wx:key"></a><code>wx:key</code></h1><p>wx:key 的值以两种形式提供</p>
<ol>
<li>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。<blockquote>
<p>key是字符串,所以不用双大括号.<code>item</code>是默认值,可以不加.</p>
</blockquote>
</li>
<li>保留关键字 *this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：<br>当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。</li>
</ol>
<h1 id="组件中的样式"><a href="#组件中的样式" class="headerlink" title="组件中的样式"></a>组件中的样式</h1><p>组件对应 wxss 文件的样式，只对组件wxml内的节点生效。编写组件样式时，需要注意以下几点：</p>
<p>组件和引用组件的页面不能使用id选择器（#a）、属性选择器（[a]）和标签名选择器，请改用class选择器。<br>组件和引用组件的页面中使用后代选择器（.a .b）在一些极端情况下会有非预期的表现，如遇，请避免使用。<br>子元素选择器（.a&gt;.b）只能用于 view 组件与其子节点之间，用于其他组件可能导致非预期的情况。<br>继承样式，如 font 、 color ，会从组件外继承到组件内。<br>除继承样式外， app.wxss 中的样式、组件所在页面的的样式对自定义组件无效（除非更改组件样式隔离选项）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#a &#123; &#125; <span class="comment">/* 在组件中不能使用 */</span></span><br><span class="line">[a] &#123; &#125; <span class="comment">/* 在组件中不能使用 */</span></span><br><span class="line">button &#123; &#125; <span class="comment">/* 在组件中不能使用 */</span></span><br><span class="line">.<span class="property">a</span> &gt; .<span class="property">b</span> &#123; &#125; <span class="comment">/* 除非 .a 是 view 组件节点，否则不一定会生效 */</span></span><br></pre></td></tr></table></figure>
<p>除此以外，组件可以指定它所在节点的默认样式，使用 <code>:host</code> 选择器（需要包含基础库 1.7.2 或更高版本的开发者工具支持）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 组件 custom-component.wxss */</span></span><br><span class="line">:host &#123;</span><br><span class="line">  <span class="attr">color</span>: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 页面的 <span class="variable constant_">WXML</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">custom-component</span>&gt;</span>这段文本是黄色的<span class="tag">&lt;/<span class="name">custom-component</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><p>WXML提供模板（template），可以在模板中定义代码片段，然后在不同的地方调用。<br>##定义模板<br>使用 <code>name</code>属性，作为模板的名字。然后在<code>&lt;template/&gt;</code>内定义代码片段，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template name=<span class="string">&quot;msgItem&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> &#123;&#123;index&#125;&#125;: &#123;&#123;msg&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> Time: &#123;&#123;time&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="使用模板"><a href="#使用模板" class="headerlink" title="使用模板"></a>使用模板</h2><p>使用<code>is</code>属性,声明需要的使用模板,然后将模板所需要的data传入,</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template is=<span class="string">&quot;msgItem&quot;</span> data=<span class="string">&quot;&#123;&#123;..item&#125;&#125;&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">item</span>: &#123;</span><br><span class="line">      <span class="attr">index</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&quot;this is a template&quot;</span>,</span><br><span class="line">      <span class="attr">time</span>: <span class="string">&#x27;2019-11-11&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>is</code>属性可以用双大括号,来动态决定渲染哪个模板.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template name=<span class="string">&quot;odd&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span> odd<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;even&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">view</span>&gt;</span> even <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;[1,2,3,4,5]&#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;&#123;&#123;item % 2 == 0 ? &#x27;even&#x27; : &#x27;odd&#x27;&#125;&#125;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="模板的作用域"><a href="#模板的作用域" class="headerlink" title="模板的作用域"></a>模板的作用域</h2><p>模板拥有自己的作用域，只能使用 <code>data</code> 传入的数据以及模板定义文件中定义的 <code>&lt;wxs /&gt;</code> 模块。</p>
<h1 id="WXS语法-WeiXin-Script"><a href="#WXS语法-WeiXin-Script" class="headerlink" title="WXS语法(WeiXin Script)"></a><code>WXS</code>语法(<code>WeiXin Script</code>)</h1><ol>
<li>WXS 不依赖于运行时的基础库版本，可以在所有版本的小程序中运行。</li>
<li>WXS 与 JavaScript 是不同的语言，有自己的语法，并不和 JavaScript 一致。</li>
<li>WXS 的运行环境和其他 JavaScript 代码是隔离的，WXS 中不能调用其他 JavaScript 文件中定义的函数，也不能调用小程序提供的API。</li>
<li>WXS 函数不能作为组件的事件回调。</li>
<li>由于运行环境的差异，在 iOS 设备上小程序内的 WXS 会比 JavaScript 代码快 2 ~ 20 倍。在 android 设备上二者运行效率无差异</li>
</ol>
<h1 id="封装小程序wx-request"><a href="#封装小程序wx-request" class="headerlink" title="封装小程序wx.request"></a>封装小程序wx.request</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 官方例子</span></span><br><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;test.php&#x27;</span>, <span class="comment">//仅为示例，并非真实的接口地址</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">     <span class="attr">x</span>: <span class="string">&#x27;&#x27;</span> ,</span><br><span class="line">     <span class="attr">y</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">header</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> <span class="comment">// 默认值</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>Promsie封装</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&#x27;https://api.it120.cc&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">http</span> = (<span class="params">&#123; url = <span class="string">&#x27;&#x27;</span>, param = &#123;&#125;, ...other &#125; = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;请求中，请耐心等待..&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">let</span> timeStart = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="title function_">getUrl</span>(url),</span><br><span class="line">            <span class="attr">data</span>: param,</span><br><span class="line">            <span class="attr">header</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> <span class="comment">// 默认值 ,另一种是 &quot;content-type&quot;: &quot;application/x-www-form-urlencoded&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            ...other,</span><br><span class="line">            <span class="attr">complete</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`耗时<span class="subst">$&#123;<span class="built_in">Date</span>.now() - timeStart&#125;</span>`</span>);</span><br><span class="line">                <span class="keyword">if</span> (res.<span class="property">statusCode</span> &gt;= <span class="number">200</span> &amp;&amp; res.<span class="property">statusCode</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(res)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getUrl</span> = (<span class="params">url</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (url.<span class="title function_">indexOf</span>(<span class="string">&#x27;://&#x27;</span>) == -<span class="number">1</span>) &#123;</span><br><span class="line">        url = baseUrl + url;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> url</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_get</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">        url,</span><br><span class="line">        param</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_post</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">        url,</span><br><span class="line">        param,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_put</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">        url,</span><br><span class="line">        param,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_delete</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">        url,</span><br><span class="line">        param,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    baseUrl,</span><br><span class="line">    _get,</span><br><span class="line">    _post,</span><br><span class="line">    _put,</span><br><span class="line">    _delete</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>使用</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> api = <span class="built_in">require</span>(<span class="string">&#x27;../../utils/api.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单个请求</span></span><br><span class="line">api.<span class="title function_">get</span>(<span class="string">&#x27;list&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个页面多个请求</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">  api.<span class="title function_">get</span>(<span class="string">&#x27;list&#x27;</span>),</span><br><span class="line">  api.<span class="title function_">get</span>(<span class="string">`detail/<span class="subst">$&#123;id&#125;</span>`</span>)</span><br><span class="line">]).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>登录</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="attr">onLaunch</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;App onLaunch&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">//  获取商城名称</span></span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;https://api.it120.cc/&#x27;</span>+ that.<span class="property">globalData</span>.<span class="property">subDomain</span> +<span class="string">&#x27;/config/get-value&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&#x27;mallName&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;mallName&#x27;</span>, res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">value</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">login</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getUserInfo</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  login : <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">var</span> token = that.<span class="property">globalData</span>.<span class="property">token</span>;</span><br><span class="line">    <span class="comment">// 如果有token</span></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="comment">// 检查token是否有效</span></span><br><span class="line">      wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://api.it120.cc/&#x27;</span> + that.<span class="property">globalData</span>.<span class="property">subDomain</span> + <span class="string">&#x27;/user/check-token&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">token</span>: token</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">          <span class="comment">// 如果token失效了</span></span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            that.<span class="property">globalData</span>.<span class="property">token</span> = <span class="literal">null</span>;</span><br><span class="line">            that.<span class="title function_">login</span>(); <span class="comment">// 重新登陆</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 【1】调用微信自带登陆</span></span><br><span class="line">    wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="comment">// 【2】 拿到code去访问我们的后台换取其他信息</span></span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;https://api.it120.cc/&#x27;</span>+ that.<span class="property">globalData</span>.<span class="property">subDomain</span> +<span class="string">&#x27;/user/wxapp/login&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">code</span>: res.<span class="property">code</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果说这个code失效的</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">10000</span>) &#123;</span><br><span class="line">              <span class="comment">// 去注册</span></span><br><span class="line">              that.<span class="title function_">registerUser</span>();</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果返回失败了</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> != <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="comment">// 登录错误 </span></span><br><span class="line">              wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">              <span class="comment">// 提示无法登陆</span></span><br><span class="line">              wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&#x27;提示&#x27;</span>,</span><br><span class="line">                <span class="attr">content</span>: <span class="string">&#x27;无法登录，请重试&#x27;</span>,</span><br><span class="line">                <span class="attr">showCancel</span>:<span class="literal">false</span></span><br><span class="line">              &#125;)</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 【3】 如果成功后设置token到本地</span></span><br><span class="line">            that.<span class="property">globalData</span>.<span class="property">token</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span>;</span><br><span class="line">            <span class="comment">// 保存用户信息</span></span><br><span class="line">            wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">              <span class="attr">key</span>: <span class="string">&#x27;token&#x27;</span>,</span><br><span class="line">              <span class="attr">data</span>:  res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 注册？？ [这个看需求]</span></span><br><span class="line">  <span class="attr">registerUser</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> code = res.<span class="property">code</span>; <span class="comment">// 微信登录接口返回的 code 参数，下面注册接口需要用到</span></span><br><span class="line">        wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">          <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> iv = res.<span class="property">iv</span>;</span><br><span class="line">            <span class="keyword">var</span> encryptedData = res.<span class="property">encryptedData</span>;</span><br><span class="line">            <span class="comment">// 下面开始调用注册接口</span></span><br><span class="line">            wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">              <span class="attr">url</span>: <span class="string">&#x27;https://api.it120.cc/&#x27;</span> + that.<span class="property">globalData</span>.<span class="property">subDomain</span> +<span class="string">&#x27;/user/wxapp/register/complex&#x27;</span>,</span><br><span class="line">              <span class="attr">data</span>: &#123;<span class="attr">code</span>:code,<span class="attr">encryptedData</span>:encryptedData,<span class="attr">iv</span>:iv&#125;, <span class="comment">// 设置请求的 参数</span></span><br><span class="line">              <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span>&#123;</span><br><span class="line">                wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">                that.<span class="title function_">login</span>();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取用户信息</span></span><br><span class="line">  <span class="attr">getUserInfo</span>:<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>:<span class="function">(<span class="params">data</span>) =&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span> = data.<span class="property">userInfo</span>;</span><br><span class="line">        wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">          <span class="attr">key</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>:  data.<span class="property">userInfo</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">globalData</span>:&#123;</span><br><span class="line">    <span class="attr">userInfo</span>:<span class="literal">null</span>,</span><br><span class="line">    <span class="attr">subDomain</span>:<span class="string">&quot;34vu54u7vuiuvc546d&quot;</span>,</span><br><span class="line">    <span class="attr">token</span>: <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>授权</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getUserInfo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 先调用wx.getSetting 获取用户权限设置</span></span><br><span class="line">  wx.<span class="title function_">getSetting</span>(&#123;</span><br><span class="line">    <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (!res.<span class="property">authSetting</span>[<span class="string">&#x27;scope.userInfo&#x27;</span>]) &#123;</span><br><span class="line">        wx.<span class="title function_">authorize</span>(&#123;</span><br><span class="line">          <span class="attr">scope</span>: <span class="string">&#x27;scope.userInfo&#x27;</span>,</span><br><span class="line">          <span class="title function_">success</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 用户已经同意小程序使用录音功能，后续调用 wx.getUserInfo接口不会弹窗询问</span></span><br><span class="line">            wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">              <span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span> = data.<span class="property">userInfo</span>;</span><br><span class="line">                wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">                  <span class="attr">key</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">                  <span class="attr">data</span>: data.<span class="property">userInfo</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="小程序的双向绑定和vue哪里不一样"><a href="#小程序的双向绑定和vue哪里不一样" class="headerlink" title="小程序的双向绑定和vue哪里不一样"></a>小程序的双向绑定和vue哪里不一样</h1><p>小程序直接<code>this.data</code>的属性不可以直接同步到视图,必须调用<code>this.data</code></p>
<h1 id="data和params的区别"><a href="#data和params的区别" class="headerlink" title="data和params的区别"></a>data和params的区别</h1><h1 id="哪些方法可以用来提高微信小程序的应用速度"><a href="#哪些方法可以用来提高微信小程序的应用速度" class="headerlink" title="哪些方法可以用来提高微信小程序的应用速度"></a>哪些方法可以用来提高微信小程序的应用速度</h1><ol>
<li>提高页面加载速度</li>
<li>用户行为预测</li>
<li>减少默认 data 的大小</li>
<li>组件化方案</li>
</ol>
<h1 id="番茄闹钟的问题"><a href="#番茄闹钟的问题" class="headerlink" title="番茄闹钟的问题"></a>番茄闹钟的问题</h1><ol>
<li>组件内css选择器不能有id,target,attr选择器,一律使用class选择器.</li>
<li><code>wx:key</code>后跟字符串,不能是<code>双大括号</code>.</li>
<li>页面wxss样式名不要和<code>app.wxss</code>重复,容易使设置样式失效.</li>
<li>没有出现登录页的情况是需要在<code>app.json</code>中将<code>pages/login/login</code>放在最前面.</li>
<li>登录页面中跳转时,使用<code>wx.reLaunch</code>并未跳转,使用<code>wx.switchTab</code>可以.<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原因:reLaunch必须写相对路径才能正确跳转</span></span><br><span class="line">wx.<span class="title function_">reLaunch</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;../../pages/home/home&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">//wx.switchTab可以直接跳转绝对路径</span></span><br><span class="line">wx.<span class="title function_">switchTab</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;/pages/home/home&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure></li>
<li>登录验证中的<code>encrypted_data</code>,<code>event</code>返回的是<code>encryptedData</code>.注意</li>
<li>请求头里的设置<code>&#39;t-app-id&#39;: t_app_id</code>,注意横线.</li>
<li>登录存储storage时,<code>wx.setStorageSync(&#39;me&#39;, response.res.data.resource)</code>,注意是<code>response.res</code></li>
<li>创建任务时,第一个按照后端api文档写的报错,第二个正确<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">req.<span class="title function_">post</span>(<span class="string">&#x27;/todos&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">todo</span>: &#123;</span><br><span class="line">      <span class="attr">completed</span>: <span class="literal">false</span>, description</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">req.<span class="title function_">post</span>(<span class="string">&#x27;/todos&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">completed</span>: <span class="literal">false</span>, description</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>创建时多一个空白,并且没有id和index.原因:将resource写成resources.有些有s,有些没有.<br>11.登录时显示500报错,解决方法: 清缓存,全部清除,编译.即可.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/10/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8/" data-id="cl9xpujrz004bdmop27x16nkp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/微信小程序入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/10/yuque/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2019-10-10T11:22:41.000Z" itemprop="datePublished">2019-10-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/10/yuque/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8/">微信小程序入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="小程序的文件结构"><a href="#小程序的文件结构" class="headerlink" title="小程序的文件结构"></a>小程序的文件结构</h1><p><code>app.js</code>: 设置一些项目的全局变量</p>
<p><code>app.json</code>: 每一个新页面都必须在这个页面注册</p>
<p><code>app.wxss</code>: 项目全局样式</p>
<p><code>project.config.json</code>: 项目配置文件</p>
<p>一个页面主要是包含以下四个文件，这四个文件的名字应该都是一样的，最好以页面所在的文件夹名字为标准：</p>
<p><code>xxx.wxml</code>: 页面结构</p>
<p><code>xxx.wxss</code>: 页面样式</p>
<p><code>xxx.json</code>: 页面配置文件</p>
<p><code>xxx.js</code>: 页面脚本文件</p>
<p>通过新建目录,新建 component.可以快速建立上述同名称文件.</p>
<p>页面可以嵌套,但不能超过 5 个层级.</p>
<p><code>app.json</code>中<code>tabBar</code>可以设置导航栏颜色背景,下属的<code>list</code>中可以设置下标按钮的信息.</p>
<h1 id="设备分辨率和-RPX"><a href="#设备分辨率和-RPX" class="headerlink" title="设备分辨率和 RPX"></a>设备分辨率和 RPX</h1><p>pt: 视觉单位.与屏幕的物理尺寸有关系,也叫做逻辑分辨率,与移动端的栅格渲染有关.</p>
<p>px: 像素点,物理分辨率.随着屏幕变化不会变化.一般设计稿以 px 为单位.iphone6 的分辨率是 375,设计稿一般是 750,那么</p>
<p>rpx : px &#x3D; 2:1.</p>
<p>rpx 是响应式像素,可以根据屏幕宽度进行自适应。规定屏幕宽为 750rpx.</p>
<p>当需要的元素大小适应屏幕尺寸，就选择 rpx 作为单位，否则使用 px 作为单位。</p>
<h1 id="小程序的事件"><a href="#小程序的事件" class="headerlink" title="小程序的事件"></a>小程序的事件</h1><p>冒泡事件: 当一个组件上的事件被触发,该事件会向父节点传递.</p>
<p>非冒泡事件: 与之相反,不向父节点传递.</p>
<h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2><p>key 以 bind 或者 catch 开头,然后跟上事件的类型,如<code>bindtap</code>,<code>catchtouchstart</code>.</p>
<p>value 是一个字符串,需要在对应的 page 中定义同名的函数,不然当触发时会报错.</p>
<p><strong>区别</strong>: bind 事件绑定不会阻止冒泡事件向上冒泡,catch 事件绑定可以阻止.</p>
<h2 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h2><p>监听用户下拉刷新事件</p>
<ol>
<li>在 app.json 的 window 选项或者页面配置中开启<code>enablePullDownRefresh</code>.</li>
<li>可以通过<code>wx.startPullDownRefresh</code>触发下拉刷新,调用后触发下拉刷新动画.</li>
<li>当处理完数据刷新后,<code>wx.stopPullDownRefresh</code>可以停止当前页面的下拉刷新.</li>
</ol>
<h2 id="小程序更新数据的值"><a href="#小程序更新数据的值" class="headerlink" title="小程序更新数据的值"></a>小程序更新数据的值</h2><p>函数用于将数据从逻辑层更新到视图层(异步)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(object data, <span class="keyword">function</span> callback)</span><br></pre></td></tr></table></figure>

<p><code>data</code>: 传一个 object,是这次要改变的数据</p>
<p><code>callback</code>: 传一个 function,是 setData 引起页面更新渲染完毕后的回调函数</p>
<p>&#x2F;&#x2F;赋值的方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">arr</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">arr</span> &#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>小程序中 push 方法基本失效.</p>
</blockquote>
<h2 id="改变-object-中的值"><a href="#改变-object-中的值" class="headerlink" title="改变 object 中的值"></a>改变 object 中的值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="string">&quot;obj.text&quot;</span>: <span class="string">&quot;message2&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>

<h1 id="小程序的路由方式"><a href="#小程序的路由方式" class="headerlink" title="小程序的路由方式"></a>小程序的路由方式</h1><p>打开新页面: <code>wx.navigateTo</code> 或使用组件<code>&lt;navigator open-type=&quot;navigateTo&quot; /&gt;</code></p>
<p>页面重定向: <code>wx.redirectTo</code> 或使用组件<code>&lt;navigator open-type=&quot;redirectTo&quot;/&gt;</code></p>
<p>压面返回: <code>wx.navigateBack</code> 或使用组件<code>&lt;navigator open-type=&quot;navigateBack&quot;/&gt;</code></p>
<p>Tab 切换: <code>wx.switchTab</code>或使用组件<code>&lt;navigator open-type=&quot;switchTab&quot;/&gt;</code></p>
<p>重启动: <code>wx.reLauch</code>或使用组件<code>&lt;navigator open-type=&quot;reLauch&quot;/&gt;</code></p>
<h1 id="小程序请求接口方式"><a href="#小程序请求接口方式" class="headerlink" title="小程序请求接口方式"></a>小程序请求接口方式</h1><p>HTTPS 请求: <code>wx.request</code></p>
<p>上传文件: <code>wx.uploadFile</code></p>
<p>下载文件: <code>wx.downloadFile</code></p>
<p>webSocket 通信: <code>wx.connectSocket</code></p>
<h1 id="小程序的生命周期"><a href="#小程序的生命周期" class="headerlink" title="小程序的生命周期"></a>小程序的生命周期</h1><p><code>onLoad</code>: 页面加载时触发.一个页面只会调用一次.可以在<code>onLoad</code>的参数中获取打开当前页面路径中的参数</p>
<p><code>onShow</code>: 页面显示&#x2F;切入前台时触发</p>
<p><code>onReady</code>: 页面初次渲染时触发.一个页面只调用一次.</p>
<p><code>onHide</code>: 页面隐藏&#x2F;切入后台时触发.如<code>navigateTo</code>或底部 tab 切换到其他页面,小程序切入后台.</p>
<p><code>onUnload</code>: 页面卸载时触发.如<code>navigateTo</code>或<code>navigateBack</code>时触发.</p>
<h1 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h1><p>父传子: <code>properties</code></p>
<p>子传父: <code>triggerEvent(&#39;自定义事件名&#39;, &#123;&#125;)</code></p>
<h1 id="AppID-小程序-ID"><a href="#AppID-小程序-ID" class="headerlink" title="AppID(小程序 ID)"></a>AppID(小程序 ID)</h1><p>也是开发者 ID,路径:</p>
<p>微信公众平台-小程序-开发-开发设置</p>
<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><p>微信小程序采用自有的标签,但是基本和 h5 标签有对应</p>
<table>
<thead>
<tr>
<th>小程序标签</th>
<th>h5 标签</th>
</tr>
</thead>
<tbody><tr>
<td>view</td>
<td>div</td>
</tr>
<tr>
<td>text</td>
<td>span</td>
</tr>
<tr>
<td>scroll-view</td>
<td>可以滚动的 div</td>
</tr>
</tbody></table>
<h1 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h1><p>数据绑定采用双大括号语法.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123; message &#125;&#125;&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>数据来自对应<code>Page</code>的 data 中.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&quot;hello world&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="组件属性-需要在双大括号内"><a href="#组件属性-需要在双大括号内" class="headerlink" title="组件属性(需要在双大括号内)"></a>组件属性(需要在双大括号内)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view id=<span class="string">&quot;item-&#123;&#123;id&#125;&#125;&quot;</span>&gt;&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><p><code>wx: if=&quot;&#123;&#123;判断传入的文本用双括号&#125;&#125;&quot;</code></p>
<p><code>wx: else=&quot;&#123;&#123;判断传入的文本用双括号&#125;&#125;&quot;</code></p>
<h2 id="wx-if-和hidden"><a href="#wx-if-和hidden" class="headerlink" title="wx: if 和hidden"></a><code>wx: if</code> 和<code>hidden</code></h2><p>类似于<code>v-if</code>和<code>v-show</code>,<code>hidden</code>是始终渲染的,<code>wx: if</code>只有为<code>true</code>才渲染.</p>
<h1 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h1><p><code>wx: for</code></p>
<p>在组件上使用 <code>wx:for</code> 控制属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件。</p>
<p>默认数组的当前项的下标变量名默认为 <code>index</code>，数组当前项的变量名默认为 <code>item</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="attr">wx</span>:<span class="keyword">for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span>&gt;</span><br><span class="line">  &#123;&#123;index&#125;&#125;: &#123;&#123;item.<span class="property">message</span>&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">array</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>使用 <code>wx:for-item</code> 可以指定数组当前元素的变量名，</p>
<p>使用 <code>wx:for-index</code> 可以指定数组当前下标的变量名：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="attr">wx</span>:<span class="keyword">for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span> <span class="attr">wx</span>:<span class="keyword">for</span>-index=<span class="string">&quot;idx&quot;</span> <span class="attr">wx</span>:<span class="keyword">for</span>-item=<span class="string">&quot;itemName&quot;</span>&gt;</span><br><span class="line">  &#123;&#123;idx&#125;&#125;: &#123;&#123;itemName.<span class="property">message</span>&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意: 当 <code>wx:for</code> 的值为字符串时，会将字符串解析成字符串数组.</p>
</blockquote>
<p>花括号和引号之间如果有空格，将最终被解析成为字符串.</p>
<h1 id="wx-key"><a href="#wx-key" class="headerlink" title="wx:key"></a><code>wx:key</code></h1><p>wx:key 的值以两种形式提供</p>
<ol>
<li>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。</li>
</ol>
<blockquote>
<p>key 是字符串,所以不用双大括号.<code>item</code>是默认值,可以不加.</p>
</blockquote>
<ol start="2">
<li>保留关键字 *this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：</li>
</ol>
<p>当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。</p>
<h1 id="组件中的样式"><a href="#组件中的样式" class="headerlink" title="组件中的样式"></a>组件中的样式</h1><p>组件对应 wxss 文件的样式，只对组件 wxml 内的节点生效。编写组件样式时，需要注意以下几点：</p>
<p>组件和引用组件的页面不能使用 id 选择器（#a）、属性选择器（[a]）和标签名选择器，请改用 class 选择器。</p>
<p>组件和引用组件的页面中使用后代选择器（.a .b）在一些极端情况下会有非预期的表现，如遇，请避免使用。</p>
<p>子元素选择器（.a&gt;.b）只能用于 view 组件与其子节点之间，用于其他组件可能导致非预期的情况。</p>
<p>继承样式，如 font 、 color ，会从组件外继承到组件内。</p>
<p>除继承样式外， app.wxss 中的样式、组件所在页面的的样式对自定义组件无效（除非更改组件样式隔离选项）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#a &#123; &#125; <span class="comment">/* 在组件中不能使用 */</span></span><br><span class="line">[a] &#123; &#125; <span class="comment">/* 在组件中不能使用 */</span></span><br><span class="line">button &#123; &#125; <span class="comment">/* 在组件中不能使用 */</span></span><br><span class="line">.<span class="property">a</span> &gt; .<span class="property">b</span> &#123; &#125; <span class="comment">/* 除非 .a 是 view 组件节点，否则不一定会生效 */</span></span><br></pre></td></tr></table></figure>

<p>除此以外，组件可以指定它所在节点的默认样式，使用 <code>:host</code> 选择器（需要包含基础库 1.7.2 或更高版本的开发者工具支持）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 组件 custom-component.wxss */</span></span><br><span class="line">:host &#123;</span><br><span class="line">  <span class="attr">color</span>: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 页面的 <span class="variable constant_">WXML</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">custom-component</span>&gt;</span>这段文本是黄色的<span class="tag">&lt;/<span class="name">custom-component</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><p>WXML 提供模板（template），可以在模板中定义代码片段，然后在不同的地方调用。</p>
<p>##定义模板</p>
<p>使用 <code>name</code>属性，作为模板的名字。然后在<code>&lt;template/&gt;</code>内定义代码片段，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template name=<span class="string">&quot;msgItem&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;&quot; &quot;&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;&#123; index &#125;&#125;: &#123;&#123; msg &#125;&#125;&#123;&quot; &quot;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> Time: &#123;&#123; time &#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="使用模板"><a href="#使用模板" class="headerlink" title="使用模板"></a>使用模板</h2><p>使用<code>is</code>属性,声明需要的使用模板,然后将模板所需要的 data 传入,</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template is=<span class="string">&quot;msgItem&quot;</span> data=<span class="string">&quot;&#123;&#123;..item&#125;&#125;&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">item</span>: &#123;</span><br><span class="line">      <span class="attr">index</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&quot;this is a template&quot;</span>,</span><br><span class="line">      <span class="attr">time</span>: <span class="string">&quot;2019-11-11&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>is</code>属性可以用双大括号,来动态决定渲染哪个模板.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template name=<span class="string">&quot;odd&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span> odd<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;even&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">view</span>&gt;</span> even <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;[1,2,3,4,5]&#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;&#123;&#123;item % 2 == 0 ? &#x27;even&#x27; : &#x27;odd&#x27;&#125;&#125;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="模板的作用域"><a href="#模板的作用域" class="headerlink" title="模板的作用域"></a>模板的作用域</h2><p>模板拥有自己的作用域，只能使用 <code>data</code> 传入的数据以及模板定义文件中定义的 <code>&lt;wxs /&gt;</code> 模块。</p>
<h1 id="WXS语法-WeiXin-Script"><a href="#WXS语法-WeiXin-Script" class="headerlink" title="WXS语法(WeiXin Script)"></a><code>WXS</code>语法(<code>WeiXin Script</code>)</h1><ol>
<li>WXS 不依赖于运行时的基础库版本，可以在所有版本的小程序中运行。</li>
<li>WXS 与 JavaScript 是不同的语言，有自己的语法，并不和 JavaScript 一致。</li>
<li>WXS 的运行环境和其他 JavaScript 代码是隔离的，WXS 中不能调用其他 JavaScript 文件中定义的函数，也不能调用小程序提供的 API。</li>
<li>WXS 函数不能作为组件的事件回调。</li>
<li>由于运行环境的差异，在 iOS 设备上小程序内的 WXS 会比 JavaScript 代码快 2 ~ 20 倍。在 android 设备上二者运行效率无差异</li>
</ol>
<h1 id="封装小程序-wx-request"><a href="#封装小程序-wx-request" class="headerlink" title="封装小程序 wx.request"></a>封装小程序 wx.request</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 官方例子</span></span><br><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;test.php&quot;</span>, <span class="comment">//仅为示例，并非真实的接口地址</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">header</span>: &#123;</span><br><span class="line">    <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json&quot;</span>, <span class="comment">// 默认值</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>Promsie 封装</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&quot;https://api.it120.cc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">http</span> = (<span class="params">&#123; url = <span class="string">&quot;&quot;</span>, param = &#123;&#125;, ...other &#125; = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">  wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;请求中，请耐心等待..&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">let</span> timeStart = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="title function_">getUrl</span>(url),</span><br><span class="line">      <span class="attr">data</span>: param,</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json&quot;</span>, <span class="comment">// 默认值 ,另一种是 &quot;content-type&quot;: &quot;application/x-www-form-urlencoded&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      ...other,</span><br><span class="line">      <span class="attr">complete</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`耗时<span class="subst">$&#123;<span class="built_in">Date</span>.now() - timeStart&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">statusCode</span> &gt;= <span class="number">200</span> &amp;&amp; res.<span class="property">statusCode</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(res.<span class="property">data</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(res);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getUrl</span> = (<span class="params">url</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (url.<span class="title function_">indexOf</span>(<span class="string">&quot;://&quot;</span>) == -<span class="number">1</span>) &#123;</span><br><span class="line">    url = baseUrl + url;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> url;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_get</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">    url,</span><br><span class="line">    param,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_post</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">    url,</span><br><span class="line">    param,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_put</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">    url,</span><br><span class="line">    param,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;put&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_delete</span> = (<span class="params">url, param = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">    url,</span><br><span class="line">    param,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;put&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  baseUrl,</span><br><span class="line">  _get,</span><br><span class="line">  _post,</span><br><span class="line">  _put,</span><br><span class="line">  _delete,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>使用</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> api = <span class="built_in">require</span>(<span class="string">&quot;../../utils/api.js&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单个请求</span></span><br><span class="line">api</span><br><span class="line">  .<span class="title function_">get</span>(<span class="string">&quot;list&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个页面多个请求</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([api.<span class="title function_">get</span>(<span class="string">&quot;list&quot;</span>), api.<span class="title function_">get</span>(<span class="string">`detail/<span class="subst">$&#123;id&#125;</span>`</span>)])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p><strong>登录</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="attr">onLaunch</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;App onLaunch&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">//  获取商城名称</span></span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>:</span><br><span class="line">        <span class="string">&quot;https://api.it120.cc/&quot;</span> +</span><br><span class="line">        that.<span class="property">globalData</span>.<span class="property">subDomain</span> +</span><br><span class="line">        <span class="string">&quot;/config/get-value&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&quot;mallName&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">setStorageSync</span>(<span class="string">&quot;mallName&quot;</span>, res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">value</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">login</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getUserInfo</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">login</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">var</span> token = that.<span class="property">globalData</span>.<span class="property">token</span>;</span><br><span class="line">    <span class="comment">// 如果有token</span></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="comment">// 检查token是否有效</span></span><br><span class="line">      wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>:</span><br><span class="line">          <span class="string">&quot;https://api.it120.cc/&quot;</span> +</span><br><span class="line">          that.<span class="property">globalData</span>.<span class="property">subDomain</span> +</span><br><span class="line">          <span class="string">&quot;/user/check-token&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">token</span>: token,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">          <span class="comment">// 如果token失效了</span></span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            that.<span class="property">globalData</span>.<span class="property">token</span> = <span class="literal">null</span>;</span><br><span class="line">            that.<span class="title function_">login</span>(); <span class="comment">// 重新登陆</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 【1】调用微信自带登陆</span></span><br><span class="line">    wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="comment">// 【2】 拿到code去访问我们的后台换取其他信息</span></span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">          <span class="attr">url</span>:</span><br><span class="line">            <span class="string">&quot;https://api.it120.cc/&quot;</span> +</span><br><span class="line">            that.<span class="property">globalData</span>.<span class="property">subDomain</span> +</span><br><span class="line">            <span class="string">&quot;/user/wxapp/login&quot;</span>,</span><br><span class="line">          <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">code</span>: res.<span class="property">code</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果说这个code失效的</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">10000</span>) &#123;</span><br><span class="line">              <span class="comment">// 去注册</span></span><br><span class="line">              that.<span class="title function_">registerUser</span>();</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果返回失败了</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> != <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="comment">// 登录错误</span></span><br><span class="line">              wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">              <span class="comment">// 提示无法登陆</span></span><br><span class="line">              wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&quot;提示&quot;</span>,</span><br><span class="line">                <span class="attr">content</span>: <span class="string">&quot;无法登录，请重试&quot;</span>,</span><br><span class="line">                <span class="attr">showCancel</span>: <span class="literal">false</span>,</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 【3】 如果成功后设置token到本地</span></span><br><span class="line">            that.<span class="property">globalData</span>.<span class="property">token</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span>;</span><br><span class="line">            <span class="comment">// 保存用户信息</span></span><br><span class="line">            wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">              <span class="attr">key</span>: <span class="string">&quot;token&quot;</span>,</span><br><span class="line">              <span class="attr">data</span>: res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 注册？？ [这个看需求]</span></span><br><span class="line">  <span class="attr">registerUser</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> code = res.<span class="property">code</span>; <span class="comment">// 微信登录接口返回的 code 参数，下面注册接口需要用到</span></span><br><span class="line">        wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">          <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> iv = res.<span class="property">iv</span>;</span><br><span class="line">            <span class="keyword">var</span> encryptedData = res.<span class="property">encryptedData</span>;</span><br><span class="line">            <span class="comment">// 下面开始调用注册接口</span></span><br><span class="line">            wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">              <span class="attr">url</span>:</span><br><span class="line">                <span class="string">&quot;https://api.it120.cc/&quot;</span> +</span><br><span class="line">                that.<span class="property">globalData</span>.<span class="property">subDomain</span> +</span><br><span class="line">                <span class="string">&quot;/user/wxapp/register/complex&quot;</span>,</span><br><span class="line">              <span class="attr">data</span>: &#123; <span class="attr">code</span>: code, <span class="attr">encryptedData</span>: encryptedData, <span class="attr">iv</span>: iv &#125;, <span class="comment">// 设置请求的 参数</span></span><br><span class="line">              <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">                that.<span class="title function_">login</span>();</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取用户信息</span></span><br><span class="line">  <span class="attr">getUserInfo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span> = data.<span class="property">userInfo</span>;</span><br><span class="line">        wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">          <span class="attr">key</span>: <span class="string">&quot;userInfo&quot;</span>,</span><br><span class="line">          <span class="attr">data</span>: data.<span class="property">userInfo</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">globalData</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">subDomain</span>: <span class="string">&quot;34vu54u7vuiuvc546d&quot;</span>,</span><br><span class="line">    <span class="attr">token</span>: <span class="literal">null</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>授权</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getUserInfo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 先调用wx.getSetting 获取用户权限设置</span></span><br><span class="line">  wx.<span class="title function_">getSetting</span>(&#123;</span><br><span class="line">    <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (!res.<span class="property">authSetting</span>[<span class="string">&#x27;scope.userInfo&#x27;</span>]) &#123;</span><br><span class="line">        wx.<span class="title function_">authorize</span>(&#123;</span><br><span class="line">          <span class="attr">scope</span>: <span class="string">&#x27;scope.userInfo&#x27;</span>,</span><br><span class="line">          <span class="title function_">success</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 用户已经同意小程序使用录音功能，后续调用 wx.getUserInfo接口不会弹窗询问</span></span><br><span class="line">            wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">              <span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span> = data.<span class="property">userInfo</span>;</span><br><span class="line">                wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">                  <span class="attr">key</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">                  <span class="attr">data</span>: data.<span class="property">userInfo</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="小程序的双向绑定和-vue-哪里不一样"><a href="#小程序的双向绑定和-vue-哪里不一样" class="headerlink" title="小程序的双向绑定和 vue 哪里不一样"></a>小程序的双向绑定和 vue 哪里不一样</h1><p>小程序直接<code>this.data</code>的属性不可以直接同步到视图,必须调用<code>this.data</code></p>
<h1 id="data-和-params-的区别"><a href="#data-和-params-的区别" class="headerlink" title="data 和 params 的区别"></a>data 和 params 的区别</h1><h1 id="哪些方法可以用来提高微信小程序的应用速度"><a href="#哪些方法可以用来提高微信小程序的应用速度" class="headerlink" title="哪些方法可以用来提高微信小程序的应用速度"></a>哪些方法可以用来提高微信小程序的应用速度</h1><ol>
<li>提高页面加载速度</li>
<li>用户行为预测</li>
<li>减少默认 data 的大小</li>
<li>组件化方案</li>
</ol>
<h1 id="番茄闹钟的问题"><a href="#番茄闹钟的问题" class="headerlink" title="番茄闹钟的问题"></a>番茄闹钟的问题</h1><ol>
<li>组件内 css 选择器不能有 id,target,attr 选择器,一律使用 class 选择器.</li>
<li><code>wx:key</code>后跟字符串,不能是<code>双大括号</code>.</li>
<li>页面 wxss 样式名不要和<code>app.wxss</code>重复,容易使设置样式失效.</li>
<li>没有出现登录页的情况是需要在<code>app.json</code>中将<code>pages/login/login</code>放在最前面.</li>
<li>登录页面中跳转时,使用<code>wx.reLaunch</code>并未跳转,使用<code>wx.switchTab</code>可以.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原因:reLaunch必须写相对路径才能正确跳转</span></span><br><span class="line">wx.<span class="title function_">reLaunch</span>(&#123; <span class="attr">url</span>: <span class="string">&quot;../../pages/home/home&quot;</span> &#125;);</span><br><span class="line"><span class="comment">//wx.switchTab可以直接跳转绝对路径</span></span><br><span class="line">wx.<span class="title function_">switchTab</span>(&#123; <span class="attr">url</span>: <span class="string">&quot;/pages/home/home&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>登录验证中的<code>encrypted_data</code>,<code>event</code>返回的是<code>encryptedData</code>.注意</li>
<li>请求头里的设置<code>&#39;t-app-id&#39;: t_app_id</code>,注意横线.</li>
<li>登录存储 storage 时,<code>wx.setStorageSync(&#39;me&#39;, response.res.data.resource)</code>,注意是<code>response.res</code></li>
<li>创建任务时,第一个按照后端 api 文档写的报错,第二个正确</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">req.<span class="title function_">post</span>(<span class="string">&quot;/todos&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">todo</span>: &#123;</span><br><span class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</span><br><span class="line">    description,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">req.<span class="title function_">post</span>(<span class="string">&quot;/todos&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">completed</span>: <span class="literal">false</span>,</span><br><span class="line">  description,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>创建时多一个空白,并且没有 id 和 index.原因:将 resource 写成 resources.有些有 s,有些没有.</li>
</ol>
<p>11.登录时显示 500 报错,解决方法: 清缓存,全部清除,编译.即可.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/10/yuque/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8/" data-id="cl9xpujuf009edmop0a8v39zf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-移动端适配" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/09/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/" class="article-date">
  <time datetime="2019-10-09T13:30:02.000Z" itemprop="datePublished">2019-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/09/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/">移动端适配</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="媒体查询media-query"><a href="#媒体查询media-query" class="headerlink" title="媒体查询media-query"></a>媒体查询media-query</h1><p>当媒体查询为true时，相关的样式表或样式规则会按照正常的级联规被应用。 当媒体查询返回false， 标签上带有媒体查询的样式表仍将被下载 （只不过不会被应用）。</p>
<p>包含了一个媒体类型和至少一个使用宽度、高度和颜色等媒体属性来限制样式表范围的表达式。CSS3加入的媒体查询使得无需修改内容便可以使样式应用于某些特定的设备范围。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt; </span><br><span class="line">@media (min-<span class="attr">width</span>: 700px) and (<span class="attr">orientation</span>: landscape)&#123; </span><br><span class="line">    .<span class="property">sidebar</span> &#123; </span><br><span class="line">        <span class="attr">display</span>: none; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="视口iewport"><a href="#视口iewport" class="headerlink" title="视口iewport"></a>视口iewport</h1><p> 为什么要设置 viewport<br>viewport 的设置不会对 PC 页面产生影响，但对于移动页面却很重要。下面我们举例来说明：</p>
<ol>
<li>媒体查询 @media响应式布局中，会根据媒体查询功能来适配多端布局，必须对 viewport 进行设置，否则根据查询到的尺寸无法正确匹配视觉宽度而导致布局混乱。如不设置 viewport 参数，多说移动端媒体查询的结果将是 980px 这个节点布局的参数，而非我们通常设置的 768px 范围内的这个布局参数</li>
<li>由于目前多数手机的 dpr 都不再是 1，为了产出高保真页面，我们一般会给出 750px 的设计稿，那么就需要通过设置 viewport 的参数来进行整体换算，而不是在每次设置尺寸时进行长度的换算。</li>
</ol>
<h2 id="viewport-详解"><a href="#viewport-详解" class="headerlink" title="viewport 详解"></a>viewport 详解</h2><p>在移动端有三种类型的 viewport: layoutviewport、visualviewport、idealviewport。具体解释如下：</p>
<p><code>layoutviewport</code>:  大于实际屏幕， 元素的宽度继承于 layoutviewport，用于保证网站的外观特性与桌面浏览器一样。layoutviewport 到底多宽，每个浏览器不同。iPhone 的 safari 为 980px，通过 document.documentElement.clientWidth 获取。<br><code>visualviewport</code>: 当前显示在屏幕上的页面，即浏览器可视区域的宽度。<br><code>idealviewport</code>: 为浏览器定义的可完美适配移动端的理想 viewport，固定不变，可以认为是设备视口宽度。比如 iphone 7 为 375px, iphone 7p 为 414px。</p>
<h2 id="viewport设置"><a href="#viewport设置" class="headerlink" title="viewport设置"></a>viewport设置</h2><p><code>&lt;meta name=&#39;viewport&#39; content=&#39;width=device-width,initial-scale=1,user-scalable=no&#39;/&gt;</code><br>通过对meta标签三个viewport的设置，最终使页面完美展示。</p>
<ol>
<li>width 设置的是 layoutviewport 的宽度</li>
<li>initial-scale 设置页面的初始缩放值，并且这个初始缩放值是相对于 idealviewport 缩放的，最终得到的结果不仅会决定 visualviewport，还会影响到 layoutviewport</li>
<li>user-scalable 是否允许用户进行缩放的设置</li>
</ol>
<blockquote>
<p>只要 layoutviewport &#x3D;&#x3D;&#x3D; visualviewport，页面下面不会出现滚动条，默认只是把页面放大或缩小。</p>
</blockquote>
<h2 id="设备像素比-dpr-与-1px-物理像素"><a href="#设备像素比-dpr-与-1px-物理像素" class="headerlink" title="设备像素比 dpr 与 1px 物理像素"></a>设备像素比 dpr 与 1px 物理像素</h2><h4 id="物理像素（physical-pixel）"><a href="#物理像素（physical-pixel）" class="headerlink" title="物理像素（physical pixel）"></a>物理像素（physical pixel）</h4><p>手机屏幕上显示的最小单元，该最小单元具有颜色及亮度的属性可供设置，iphone6、7、8 为：750 * 1334，iphone6+、7+、8+ 为 1242 * 2208</p>
<h4 id="设备独立像素（density-indenpendent-pixel）"><a href="#设备独立像素（density-indenpendent-pixel）" class="headerlink" title="设备独立像素（density-indenpendent pixel）"></a>设备独立像素（density-indenpendent pixel）</h4><p>此为逻辑像素，计算机设备中的一个点，css 中设置的像素指的就是该像素。老早在没有 retina 屏之前，设备独立像素与物理像素是相等的。</p>
<h4 id="设备像素比（device-pixel-ratio）"><a href="#设备像素比（device-pixel-ratio）" class="headerlink" title="设备像素比（device pixel ratio）"></a>设备像素比（device pixel ratio）</h4><p>设备像素比(dpr) &#x3D; 物理像素&#x2F;设备独立像素。如 iphone 6、7、8 的 dpr 为 2，那么一个设备独立像素便为 4 个物理像素，因此在 css 上设置的 1px 在其屏幕上占据的是 2个物理像素，0.5px 对应的才是其所能展示的最小单位。这就是 1px 在 retina 屏上变粗的原因，目前有很多办法来解决这一问题。</p>
<h4 id="1px的物理像素的解决方案"><a href="#1px的物理像素的解决方案" class="headerlink" title="1px的物理像素的解决方案"></a>1px的物理像素的解决方案</h4><p>从第一部分的讨论可知 viewport 的 initial-scale 具有缩放页面的效果。对于 dpr&#x3D;2 的屏幕，1px压缩一半便可与1px的设备像素比匹配，这就可以通过将缩放比 initial-scale 设置为 0.5&#x3D;1&#x2F;2 而实现。以此类推 dpr&#x3D;3的屏幕可以将 initial-scale设置为 0.33&#x3D;1&#x2F;3 来实现。</p>
<h1 id="设备像素比-dpr-与-rem-的适配方案"><a href="#设备像素比-dpr-与-rem-的适配方案" class="headerlink" title="设备像素比 dpr 与 rem 的适配方案"></a>设备像素比 dpr 与 rem 的适配方案</h1><p>rem 是相对于根元素 html 的 font-size 来做计算。通常在页面初始化时加载时通过对document.documentElement.style.fontSize 设置来实现。</p>
<h4 id="rem适配规则"><a href="#rem适配规则" class="headerlink" title="rem适配规则"></a>rem适配规则</h4><p>通过对 initial-scale &#x3D; 1&#x2F;dpr 的设置，已将对屏幕的描述从物理像素转化到了物理像素上了，这将是后续推导的基础，且设计稿为 750px。</p>
<p>物理像素为 750 &#x3D; 375 * 2，若屏幕等分为 10 份，那么 1rem &#x3D; 75px，10rem &#x3D; 750px;<br>物理像素为 1125 &#x3D; 375 * 3，若屏幕等分为 10 份，那么 1rem &#x3D; 112.5px, 10rem &#x3D; 1125px;<br>物理像素为 1242 &#x3D; 414 * 3, 若屏幕等分为 10 份，那么 1rem &#x3D; 124.2px, 10rem &#x3D; 1242px;</p>
<p>同时为了书写方便可以直接通过 px 布局，然后在打包时利用 pxtorem 库转化为基于 rem 的布局。</p>
<h1 id="视口单位-vw-vh-适配方案"><a href="#视口单位-vw-vh-适配方案" class="headerlink" title="视口单位(vw,vh)适配方案"></a>视口单位(vw,vh)适配方案</h1><p>将视口宽度 window.innerWidth 和视口高度 window.innerHeight 等分为 100 份，且将这里的视口理解成 idealviewport 更为贴切，并不会随着 viewport 的不同设置而改变。</p>
<p>vw : 1vw 为视口宽度的 1%<br>vh : 1vh 为视口高度的 1%<br>vmin :  vw 和 vh 中的较小值<br>vmax : 选取 vw 和 vh 中的较大值</p>
<p>如果设计稿为 750px，那么 1vw &#x3D; 7.5px，100vw &#x3D; 750px。其实设计稿按照设么都没多大关系，最终转化过来的都是相对单位，上面讲的 rem 也是对它的模拟。这里的比例关系也推荐不要自己换算，使用 pxtoviewport 的库就可以帮我们转换。当然每种方案都会有其弊端，这里就不展开讨论。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/09/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/" data-id="cl9xpujs3004odmopfpgbfbqf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag">移动端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Echarts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/06/Echarts/" class="article-date">
  <time datetime="2019-10-06T06:24:07.000Z" itemprop="datePublished">2019-10-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/HTML5/">HTML5</a>►<a class="article-category-link" href="/categories/HTML5/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/06/Echarts/">Echarts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="浏览器画图原理"><a href="#浏览器画图原理" class="headerlink" title="浏览器画图原理"></a>浏览器画图原理</h1><ul>
<li><p>canvas<br>基于像素<br>单个 html,类似于画笔在画布上画画<br>Echarts 基于 canvas 画图</p>
</li>
<li><p>svg<br>基于对象模型<br>多个图形元素<br>高保真</p>
</li>
</ul>
<h1 id="使用-canvas-画图"><a href="#使用-canvas-画图" class="headerlink" title="使用 canvas 画图"></a>使用 canvas 画图</h1><p>基础操作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//获取canvas对象</span></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myCanvas&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//开始一个新的绘制路径</span></span><br><span class="line">ctx.<span class="title function_">beginPath</span>()</span><br><span class="line"><span class="comment">//设置弧线颜色</span></span><br><span class="line">ctx.<span class="property">strokeStyle</span> = <span class="string">&quot;blue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> circle = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">100</span>,   <span class="comment">//圆心的x轴</span></span><br><span class="line">    <span class="attr">y</span>: <span class="number">100</span>,   <span class="comment">//圆心的y轴</span></span><br><span class="line">    <span class="attr">r</span>: <span class="number">50</span>     <span class="comment">//圆的半径</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//沿着坐标点(100,100)为圆心,半径为50px的圆顺时针方向绘制弧线</span></span><br><span class="line">ctx.<span class="title function_">arc</span>(circle.<span class="property">x</span>, circle.<span class="property">y</span>, circle.<span class="property">r</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//按照指定的路径绘制弧线</span></span><br><span class="line">ctr.<span class="title function_">stroke</span>()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="使用-svg-画图"><a href="#使用-svg-画图" class="headerlink" title="使用 svg 画图"></a>使用 svg 画图</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg</span><br><span class="line">  width=<span class="string">&quot;100%&quot;</span></span><br><span class="line">  height=<span class="string">&quot;100%&quot;</span></span><br><span class="line">  version=<span class="string">&quot;1.1&quot;</span></span><br><span class="line">  xmlns=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span><br><span class="line">&gt;</span><br><span class="line">  <span class="comment">// circle是圆形标签</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;70&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;50&quot;</span> <span class="attr">r</span>=<span class="string">&quot;40&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;black&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;red&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="comment">//rect是长方形标签</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">rect</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">x</span>=<span class="string">&quot;120&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">width</span>=<span class="string">&quot;100&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">height</span>=<span class="string">&quot;100&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">style</span>=<span class="string">&quot;fill:rgb(0,0,255);stroke-width:1; stroke:rgb(0,0,0)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  /&gt;</span></span></span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Echarts-条形图-直方图"><a href="#Echarts-条形图-直方图" class="headerlink" title="Echarts 条形图(直方图)"></a>Echarts 条形图(直方图)</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 引入 ECharts 文件 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 为 ECharts 准备一个具备大小（宽高）的 DOM --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 600px;height:400px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//基于DOM,初始化Echarts实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//指定图表的配置项和数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> option = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//标题组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">text</span>: <span class="string">&quot;直方图(条形图)&quot;</span>, <span class="comment">//主标题</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">subtext</span>: <span class="string">&quot;学习Echarts&quot;</span>, <span class="comment">//副标题</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">left</span>: <span class="number">150</span>, <span class="comment">//数字是像素值,距离左侧.也可以是left,center</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">borderColor</span>: <span class="string">&quot;red&quot;</span>, <span class="comment">//边框颜色</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">borderWidth</span>: <span class="number">5</span> <span class="comment">//边框粗细</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//工具箱组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">toolbox</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">show</span>: <span class="literal">true</span>, <span class="comment">//是否显示toolbox</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//具体显示功能</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">feature</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//保存图片</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">saveAsImage</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">show</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//数据视图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">dataView</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">show</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//缩放视图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">dataZoom</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">show</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//还原</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title class_">Restore</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">show</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//动态类型切换</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">magicType</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">type</span>: [<span class="string">&#x27;line&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//弹窗(当鼠标滑过图表显示)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">tooltip</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//触发方式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span> <span class="comment">//x轴触发</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//图例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">legend</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: [<span class="string">&#x27;销量&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//x轴</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">xAxis</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">yAxis</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">series</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="comment">//bar表示条形图.line表示折线图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//标记点(数据点)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">markPoint</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">data</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#123;<span class="attr">type</span>: <span class="string">&#x27;max&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;最大值&#x27;</span>&#125;, <span class="comment">//最大值的点会默认方块显示</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#123;<span class="attr">type</span>: <span class="string">&#x27;min&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;最小值&#x27;</span>, <span class="attr">symbol</span>: <span class="string">&#x27;arrow&#x27;</span>&#125; <span class="comment">//最小值的点会变成箭头</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//标记线</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">markLine</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">data</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#123;<span class="attr">type</span>: <span class="string">&#x27;average&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;平均值&#x27;</span>&#125; <span class="comment">//设置平均值线</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//使用配置数据显示图表</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    myChart.<span class="title function_">setOption</span>(option)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h1 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h1><p>特点:</p>
<ul>
<li>展示百分比</li>
<li>type: pie</li>
</ul>
<p>center 圆心坐标<br>radius 半径<br>name 图例名字<br>selectedMode 是否支持多选</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width=900px;height=600px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> option = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">text</span>: <span class="string">&quot;站点访问来源&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">subtext</span>: <span class="string">&quot;副标题&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">x</span>: center</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">tooltip</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">trigger</span>: <span class="string">&quot;item&quot;</span>, </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">formatter</span>: <span class="string">&quot;&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">legend</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">orient</span>: <span class="string">&quot;vertical&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">left</span>: <span class="string">&quot;left&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: [<span class="string">&#x27;直接访问&#x27;</span>,<span class="string">&#x27;邮件营销&#x27;</span>,<span class="string">&#x27;联盟广告&#x27;</span>,<span class="string">&#x27;视频广告&#x27;</span>,<span class="string">&#x27;搜索引擎&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">series</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: <span class="string">&#x27;访问来源&#x27;</span>, <span class="comment">//图例名字</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">radius</span>: <span class="string">&#x27;55%&#x27;</span>, <span class="comment">//半径</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">center</span>: [<span class="string">&#x27;50%&#x27;</span>, <span class="string">&#x27;60%&#x27;</span>], <span class="comment">//圆心坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123;<span class="attr">value</span>: <span class="number">335</span>, <span class="attr">name</span>: <span class="string">&#x27;直接访问&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123;<span class="attr">value</span>: <span class="number">210</span>, <span class="attr">name</span>: <span class="string">&#x27;邮件营销&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123;<span class="attr">value</span>: <span class="number">445</span>, <span class="attr">name</span>: <span class="string">&#x27;联盟广告&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123;<span class="attr">value</span>: <span class="number">135</span>, <span class="attr">name</span>: <span class="string">&#x27;视频广告&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123;<span class="attr">value</span>: <span class="number">2453</span>, <span class="attr">name</span>: <span class="string">&#x27;搜索引擎&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h1 id="仪表盘"><a href="#仪表盘" class="headerlink" title="仪表盘"></a>仪表盘</h1><p><code>type: gauge</code><br>&#96;&#96;&#96;js&#96;</p>
<body>
<div id="main" style="width=900px;height=600px"></div>
</body>
<script>
myChart = echarts.init(document.getElementById("main"))

<p>var option &#x3D; {<br>    tooltip: {<br>        formatter: “{a} <br/>{b} : {c}%”<br>    },<br>    toolbox: {<br>        feature: {<br>            restore: {},<br>            saveAsImage: {}<br>        }<br>    },<br>    series: [{<br>        name: ‘业务指标’, &#x2F;&#x2F;图例名字<br>        type: ‘gauge’,<br>        detail: {formatter: ‘{value}%’},<br>        data: [<br>            {value: 33, name: ‘完成率’}<br>        ]<br>    }]<br>    }<br>}<br></script></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br></pre></td><td class="code"><pre><span class="line"># 地图</span><br><span class="line">需要配合地图坐标,可以下载china.js</span><br><span class="line">```js</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;ECharts&lt;/title&gt;</span><br><span class="line">    &lt;!<span class="comment">-- 引入 echarts.js --&gt;</span></span><br><span class="line">    &lt;script src=&quot;../echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;../china.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!<span class="comment">-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;</span></span><br><span class="line">&lt;div id=&quot;main&quot; style=&quot;width: 900px;height:600px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script <span class="keyword">type</span>=&quot;text/javascript&quot;&gt;</span><br><span class="line">        // 基于准备好的dom，初始化echarts实例</span><br><span class="line">var myChart = echarts.init(document.getElementById(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">var geoCoordMap = &#123;</span><br><span class="line">    <span class="string">&#x27;上海&#x27;</span>: [<span class="number">121.4648</span>,<span class="number">31.2891</span>],</span><br><span class="line">    <span class="string">&#x27;东莞&#x27;</span>: [<span class="number">113.8953</span>,<span class="number">22.901</span>],</span><br><span class="line">    <span class="string">&#x27;东营&#x27;</span>: [<span class="number">118.7073</span>,<span class="number">37.5513</span>],</span><br><span class="line">    <span class="string">&#x27;中山&#x27;</span>: [<span class="number">113.4229</span>,<span class="number">22.478</span>],</span><br><span class="line">    <span class="string">&#x27;临汾&#x27;</span>: [<span class="number">111.4783</span>,<span class="number">36.1615</span>],</span><br><span class="line">    <span class="string">&#x27;临沂&#x27;</span>: [<span class="number">118.3118</span>,<span class="number">35.2936</span>],</span><br><span class="line">    <span class="string">&#x27;丹东&#x27;</span>: [<span class="number">124.541</span>,<span class="number">40.4242</span>],</span><br><span class="line">    <span class="string">&#x27;丽水&#x27;</span>: [<span class="number">119.5642</span>,<span class="number">28.1854</span>],</span><br><span class="line">    <span class="string">&#x27;乌鲁木齐&#x27;</span>: [<span class="number">87.9236</span>,<span class="number">43.5883</span>],</span><br><span class="line">    <span class="string">&#x27;佛山&#x27;</span>: [<span class="number">112.8955</span>,<span class="number">23.1097</span>],</span><br><span class="line">    <span class="string">&#x27;保定&#x27;</span>: [<span class="number">115.0488</span>,<span class="number">39.0948</span>],</span><br><span class="line">    <span class="string">&#x27;兰州&#x27;</span>: [<span class="number">103.5901</span>,<span class="number">36.3043</span>],</span><br><span class="line">    <span class="string">&#x27;包头&#x27;</span>: [<span class="number">110.3467</span>,<span class="number">41.4899</span>],</span><br><span class="line">    <span class="string">&#x27;北京&#x27;</span>: [<span class="number">116.4551</span>,<span class="number">40.2539</span>],</span><br><span class="line">    <span class="string">&#x27;北海&#x27;</span>: [<span class="number">109.314</span>,<span class="number">21.6211</span>],</span><br><span class="line">    <span class="string">&#x27;南京&#x27;</span>: [<span class="number">118.8062</span>,<span class="number">31.9208</span>],</span><br><span class="line">    <span class="string">&#x27;南宁&#x27;</span>: [<span class="number">108.479</span>,<span class="number">23.1152</span>],</span><br><span class="line">    <span class="string">&#x27;南昌&#x27;</span>: [<span class="number">116.0046</span>,<span class="number">28.6633</span>],</span><br><span class="line">    <span class="string">&#x27;南通&#x27;</span>: [<span class="number">121.1023</span>,<span class="number">32.1625</span>],</span><br><span class="line">    <span class="string">&#x27;厦门&#x27;</span>: [<span class="number">118.1689</span>,<span class="number">24.6478</span>],</span><br><span class="line">    <span class="string">&#x27;台州&#x27;</span>: [<span class="number">121.1353</span>,<span class="number">28.6688</span>],</span><br><span class="line">    <span class="string">&#x27;合肥&#x27;</span>: [<span class="number">117.29</span>,<span class="number">32.0581</span>],</span><br><span class="line">    <span class="string">&#x27;呼和浩特&#x27;</span>: [<span class="number">111.4124</span>,<span class="number">40.4901</span>],</span><br><span class="line">    <span class="string">&#x27;咸阳&#x27;</span>: [<span class="number">108.4131</span>,<span class="number">34.8706</span>],</span><br><span class="line">    <span class="string">&#x27;哈尔滨&#x27;</span>: [<span class="number">127.9688</span>,<span class="number">45.368</span>],</span><br><span class="line">    <span class="string">&#x27;唐山&#x27;</span>: [<span class="number">118.4766</span>,<span class="number">39.6826</span>],</span><br><span class="line">    <span class="string">&#x27;嘉兴&#x27;</span>: [<span class="number">120.9155</span>,<span class="number">30.6354</span>],</span><br><span class="line">    <span class="string">&#x27;大同&#x27;</span>: [<span class="number">113.7854</span>,<span class="number">39.8035</span>],</span><br><span class="line">    <span class="string">&#x27;大连&#x27;</span>: [<span class="number">122.2229</span>,<span class="number">39.4409</span>],</span><br><span class="line">    <span class="string">&#x27;天津&#x27;</span>: [<span class="number">117.4219</span>,<span class="number">39.4189</span>],</span><br><span class="line">    <span class="string">&#x27;太原&#x27;</span>: [<span class="number">112.3352</span>,<span class="number">37.9413</span>],</span><br><span class="line">    <span class="string">&#x27;威海&#x27;</span>: [<span class="number">121.9482</span>,<span class="number">37.1393</span>],</span><br><span class="line">    <span class="string">&#x27;宁波&#x27;</span>: [<span class="number">121.5967</span>,<span class="number">29.6466</span>],</span><br><span class="line">    <span class="string">&#x27;宝鸡&#x27;</span>: [<span class="number">107.1826</span>,<span class="number">34.3433</span>],</span><br><span class="line">    <span class="string">&#x27;宿迁&#x27;</span>: [<span class="number">118.5535</span>,<span class="number">33.7775</span>],</span><br><span class="line">    <span class="string">&#x27;常州&#x27;</span>: [<span class="number">119.4543</span>,<span class="number">31.5582</span>],</span><br><span class="line">    <span class="string">&#x27;广州&#x27;</span>: [<span class="number">113.5107</span>,<span class="number">23.2196</span>],</span><br><span class="line">    <span class="string">&#x27;廊坊&#x27;</span>: [<span class="number">116.521</span>,<span class="number">39.0509</span>],</span><br><span class="line">    <span class="string">&#x27;延安&#x27;</span>: [<span class="number">109.1052</span>,<span class="number">36.4252</span>],</span><br><span class="line">    <span class="string">&#x27;张家口&#x27;</span>: [<span class="number">115.1477</span>,<span class="number">40.8527</span>],</span><br><span class="line">    <span class="string">&#x27;徐州&#x27;</span>: [<span class="number">117.5208</span>,<span class="number">34.3268</span>],</span><br><span class="line">    <span class="string">&#x27;德州&#x27;</span>: [<span class="number">116.6858</span>,<span class="number">37.2107</span>],</span><br><span class="line">    <span class="string">&#x27;惠州&#x27;</span>: [<span class="number">114.6204</span>,<span class="number">23.1647</span>],</span><br><span class="line">    <span class="string">&#x27;成都&#x27;</span>: [<span class="number">103.9526</span>,<span class="number">30.7617</span>],</span><br><span class="line">    <span class="string">&#x27;扬州&#x27;</span>: [<span class="number">119.4653</span>,<span class="number">32.8162</span>],</span><br><span class="line">    <span class="string">&#x27;承德&#x27;</span>: [<span class="number">117.5757</span>,<span class="number">41.4075</span>],</span><br><span class="line">    <span class="string">&#x27;拉萨&#x27;</span>: [<span class="number">91.1865</span>,<span class="number">30.1465</span>],</span><br><span class="line">    <span class="string">&#x27;无锡&#x27;</span>: [<span class="number">120.3442</span>,<span class="number">31.5527</span>],</span><br><span class="line">    <span class="string">&#x27;日照&#x27;</span>: [<span class="number">119.2786</span>,<span class="number">35.5023</span>],</span><br><span class="line">    <span class="string">&#x27;昆明&#x27;</span>: [<span class="number">102.9199</span>,<span class="number">25.4663</span>],</span><br><span class="line">    <span class="string">&#x27;杭州&#x27;</span>: [<span class="number">119.5313</span>,<span class="number">29.8773</span>],</span><br><span class="line">    <span class="string">&#x27;枣庄&#x27;</span>: [<span class="number">117.323</span>,<span class="number">34.8926</span>],</span><br><span class="line">    <span class="string">&#x27;柳州&#x27;</span>: [<span class="number">109.3799</span>,<span class="number">24.9774</span>],</span><br><span class="line">    <span class="string">&#x27;株洲&#x27;</span>: [<span class="number">113.5327</span>,<span class="number">27.0319</span>],</span><br><span class="line">    <span class="string">&#x27;武汉&#x27;</span>: [<span class="number">114.3896</span>,<span class="number">30.6628</span>],</span><br><span class="line">    <span class="string">&#x27;汕头&#x27;</span>: [<span class="number">117.1692</span>,<span class="number">23.3405</span>],</span><br><span class="line">    <span class="string">&#x27;江门&#x27;</span>: [<span class="number">112.6318</span>,<span class="number">22.1484</span>],</span><br><span class="line">    <span class="string">&#x27;沈阳&#x27;</span>: [<span class="number">123.1238</span>,<span class="number">42.1216</span>],</span><br><span class="line">    <span class="string">&#x27;沧州&#x27;</span>: [<span class="number">116.8286</span>,<span class="number">38.2104</span>],</span><br><span class="line">    <span class="string">&#x27;河源&#x27;</span>: [<span class="number">114.917</span>,<span class="number">23.9722</span>],</span><br><span class="line">    <span class="string">&#x27;泉州&#x27;</span>: [<span class="number">118.3228</span>,<span class="number">25.1147</span>],</span><br><span class="line">    <span class="string">&#x27;泰安&#x27;</span>: [<span class="number">117.0264</span>,<span class="number">36.0516</span>],</span><br><span class="line">    <span class="string">&#x27;泰州&#x27;</span>: [<span class="number">120.0586</span>,<span class="number">32.5525</span>],</span><br><span class="line">    <span class="string">&#x27;济南&#x27;</span>: [<span class="number">117.1582</span>,<span class="number">36.8701</span>],</span><br><span class="line">    <span class="string">&#x27;济宁&#x27;</span>: [<span class="number">116.8286</span>,<span class="number">35.3375</span>],</span><br><span class="line">    <span class="string">&#x27;海口&#x27;</span>: [<span class="number">110.3893</span>,<span class="number">19.8516</span>],</span><br><span class="line">    <span class="string">&#x27;淄博&#x27;</span>: [<span class="number">118.0371</span>,<span class="number">36.6064</span>],</span><br><span class="line">    <span class="string">&#x27;淮安&#x27;</span>: [<span class="number">118.927</span>,<span class="number">33.4039</span>],</span><br><span class="line">    <span class="string">&#x27;深圳&#x27;</span>: [<span class="number">114.5435</span>,<span class="number">22.5439</span>],</span><br><span class="line">    <span class="string">&#x27;清远&#x27;</span>: [<span class="number">112.9175</span>,<span class="number">24.3292</span>],</span><br><span class="line">    <span class="string">&#x27;温州&#x27;</span>: [<span class="number">120.498</span>,<span class="number">27.8119</span>],</span><br><span class="line">    <span class="string">&#x27;渭南&#x27;</span>: [<span class="number">109.7864</span>,<span class="number">35.0299</span>],</span><br><span class="line">    <span class="string">&#x27;湖州&#x27;</span>: [<span class="number">119.8608</span>,<span class="number">30.7782</span>],</span><br><span class="line">    <span class="string">&#x27;湘潭&#x27;</span>: [<span class="number">112.5439</span>,<span class="number">27.7075</span>],</span><br><span class="line">    <span class="string">&#x27;滨州&#x27;</span>: [<span class="number">117.8174</span>,<span class="number">37.4963</span>],</span><br><span class="line">    <span class="string">&#x27;潍坊&#x27;</span>: [<span class="number">119.0918</span>,<span class="number">36.524</span>],</span><br><span class="line">    <span class="string">&#x27;烟台&#x27;</span>: [<span class="number">120.7397</span>,<span class="number">37.5128</span>],</span><br><span class="line">    <span class="string">&#x27;玉溪&#x27;</span>: [<span class="number">101.9312</span>,<span class="number">23.8898</span>],</span><br><span class="line">    <span class="string">&#x27;珠海&#x27;</span>: [<span class="number">113.7305</span>,<span class="number">22.1155</span>],</span><br><span class="line">    <span class="string">&#x27;盐城&#x27;</span>: [<span class="number">120.2234</span>,<span class="number">33.5577</span>],</span><br><span class="line">    <span class="string">&#x27;盘锦&#x27;</span>: [<span class="number">121.9482</span>,<span class="number">41.0449</span>],</span><br><span class="line">    <span class="string">&#x27;石家庄&#x27;</span>: [<span class="number">114.4995</span>,<span class="number">38.1006</span>],</span><br><span class="line">    <span class="string">&#x27;福州&#x27;</span>: [<span class="number">119.4543</span>,<span class="number">25.9222</span>],</span><br><span class="line">    <span class="string">&#x27;秦皇岛&#x27;</span>: [<span class="number">119.2126</span>,<span class="number">40.0232</span>],</span><br><span class="line">    <span class="string">&#x27;绍兴&#x27;</span>: [<span class="number">120.564</span>,<span class="number">29.7565</span>],</span><br><span class="line">    <span class="string">&#x27;聊城&#x27;</span>: [<span class="number">115.9167</span>,<span class="number">36.4032</span>],</span><br><span class="line">    <span class="string">&#x27;肇庆&#x27;</span>: [<span class="number">112.1265</span>,<span class="number">23.5822</span>],</span><br><span class="line">    <span class="string">&#x27;舟山&#x27;</span>: [<span class="number">122.2559</span>,<span class="number">30.2234</span>],</span><br><span class="line">    <span class="string">&#x27;苏州&#x27;</span>: [<span class="number">120.6519</span>,<span class="number">31.3989</span>],</span><br><span class="line">    <span class="string">&#x27;莱芜&#x27;</span>: [<span class="number">117.6526</span>,<span class="number">36.2714</span>],</span><br><span class="line">    <span class="string">&#x27;菏泽&#x27;</span>: [<span class="number">115.6201</span>,<span class="number">35.2057</span>],</span><br><span class="line">    <span class="string">&#x27;营口&#x27;</span>: [<span class="number">122.4316</span>,<span class="number">40.4297</span>],</span><br><span class="line">    <span class="string">&#x27;葫芦岛&#x27;</span>: [<span class="number">120.1575</span>,<span class="number">40.578</span>],</span><br><span class="line">    <span class="string">&#x27;衡水&#x27;</span>: [<span class="number">115.8838</span>,<span class="number">37.7161</span>],</span><br><span class="line">    <span class="string">&#x27;衢州&#x27;</span>: [<span class="number">118.6853</span>,<span class="number">28.8666</span>],</span><br><span class="line">    <span class="string">&#x27;西宁&#x27;</span>: [<span class="number">101.4038</span>,<span class="number">36.8207</span>],</span><br><span class="line">    <span class="string">&#x27;西安&#x27;</span>: [<span class="number">109.1162</span>,<span class="number">34.2004</span>],</span><br><span class="line">    <span class="string">&#x27;贵阳&#x27;</span>: [<span class="number">106.6992</span>,<span class="number">26.7682</span>],</span><br><span class="line">    <span class="string">&#x27;连云港&#x27;</span>: [<span class="number">119.1248</span>,<span class="number">34.552</span>],</span><br><span class="line">    <span class="string">&#x27;邢台&#x27;</span>: [<span class="number">114.8071</span>,<span class="number">37.2821</span>],</span><br><span class="line">    <span class="string">&#x27;邯郸&#x27;</span>: [<span class="number">114.4775</span>,<span class="number">36.535</span>],</span><br><span class="line">    <span class="string">&#x27;郑州&#x27;</span>: [<span class="number">113.4668</span>,<span class="number">34.6234</span>],</span><br><span class="line">    <span class="string">&#x27;鄂尔多斯&#x27;</span>: [<span class="number">108.9734</span>,<span class="number">39.2487</span>],</span><br><span class="line">    <span class="string">&#x27;重庆&#x27;</span>: [<span class="number">107.7539</span>,<span class="number">30.1904</span>],</span><br><span class="line">    <span class="string">&#x27;金华&#x27;</span>: [<span class="number">120.0037</span>,<span class="number">29.1028</span>],</span><br><span class="line">    <span class="string">&#x27;铜川&#x27;</span>: [<span class="number">109.0393</span>,<span class="number">35.1947</span>],</span><br><span class="line">    <span class="string">&#x27;银川&#x27;</span>: [<span class="number">106.3586</span>,<span class="number">38.1775</span>],</span><br><span class="line">    <span class="string">&#x27;镇江&#x27;</span>: [<span class="number">119.4763</span>,<span class="number">31.9702</span>],</span><br><span class="line">    <span class="string">&#x27;长春&#x27;</span>: [<span class="number">125.8154</span>,<span class="number">44.2584</span>],</span><br><span class="line">    <span class="string">&#x27;长沙&#x27;</span>: [<span class="number">113.0823</span>,<span class="number">28.2568</span>],</span><br><span class="line">    <span class="string">&#x27;长治&#x27;</span>: [<span class="number">112.8625</span>,<span class="number">36.4746</span>],</span><br><span class="line">    <span class="string">&#x27;阳泉&#x27;</span>: [<span class="number">113.4778</span>,<span class="number">38.0951</span>],</span><br><span class="line">    <span class="string">&#x27;青岛&#x27;</span>: [<span class="number">120.4651</span>,<span class="number">36.3373</span>],</span><br><span class="line">    <span class="string">&#x27;韶关&#x27;</span>: [<span class="number">113.7964</span>,<span class="number">24.7028</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var BJData = [</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>,<span class="keyword">value</span>:<span class="number">95</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>,<span class="keyword">value</span>:<span class="number">90</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;大连&#x27;</span>,<span class="keyword">value</span>:<span class="number">80</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;南宁&#x27;</span>,<span class="keyword">value</span>:<span class="number">70</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;南昌&#x27;</span>,<span class="keyword">value</span>:<span class="number">60</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;拉萨&#x27;</span>,<span class="keyword">value</span>:<span class="number">50</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;长春&#x27;</span>,<span class="keyword">value</span>:<span class="number">40</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;包头&#x27;</span>,<span class="keyword">value</span>:<span class="number">30</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;重庆&#x27;</span>,<span class="keyword">value</span>:<span class="number">20</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;, &#123;<span class="type">name</span>:<span class="string">&#x27;常州&#x27;</span>,<span class="keyword">value</span>:<span class="number">10</span>&#125;]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">var SHData = [</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;包头&#x27;</span>,<span class="keyword">value</span>:<span class="number">95</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;昆明&#x27;</span>,<span class="keyword">value</span>:<span class="number">90</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>,<span class="keyword">value</span>:<span class="number">80</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;郑州&#x27;</span>,<span class="keyword">value</span>:<span class="number">70</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;长春&#x27;</span>,<span class="keyword">value</span>:<span class="number">60</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;重庆&#x27;</span>,<span class="keyword">value</span>:<span class="number">50</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;长沙&#x27;</span>,<span class="keyword">value</span>:<span class="number">40</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>,<span class="keyword">value</span>:<span class="number">30</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;丹东&#x27;</span>,<span class="keyword">value</span>:<span class="number">20</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;大连&#x27;</span>,<span class="keyword">value</span>:<span class="number">10</span>&#125;]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">var GZData = [</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;福州&#x27;</span>,<span class="keyword">value</span>:<span class="number">95</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;太原&#x27;</span>,<span class="keyword">value</span>:<span class="number">90</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;长春&#x27;</span>,<span class="keyword">value</span>:<span class="number">80</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;重庆&#x27;</span>,<span class="keyword">value</span>:<span class="number">70</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;西安&#x27;</span>,<span class="keyword">value</span>:<span class="number">60</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;成都&#x27;</span>,<span class="keyword">value</span>:<span class="number">50</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;常州&#x27;</span>,<span class="keyword">value</span>:<span class="number">40</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;北京&#x27;</span>,<span class="keyword">value</span>:<span class="number">30</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;北海&#x27;</span>,<span class="keyword">value</span>:<span class="number">20</span>&#125;],</span><br><span class="line">    [&#123;<span class="type">name</span>:<span class="string">&#x27;广州&#x27;</span>&#125;,&#123;<span class="type">name</span>:<span class="string">&#x27;海口&#x27;</span>,<span class="keyword">value</span>:<span class="number">10</span>&#125;]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">var planePath = <span class="string">&#x27;path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z&#x27;</span>;</span><br><span class="line"></span><br><span class="line">var convertData = <span class="keyword">function</span> (data) &#123;</span><br><span class="line">    var res = [];</span><br><span class="line">    <span class="keyword">for</span> (var i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">        var dataItem = data[i];</span><br><span class="line">        var fromCoord = geoCoordMap[dataItem[<span class="number">0</span>].name];</span><br><span class="line">        var toCoord = geoCoordMap[dataItem[<span class="number">1</span>].name];</span><br><span class="line">        <span class="keyword">if</span> (fromCoord &amp;&amp; toCoord) &#123;</span><br><span class="line">            res.push([&#123;</span><br><span class="line">                <span class="type">name</span>: dataItem[<span class="number">0</span>].name,</span><br><span class="line">                coord: fromCoord</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="type">name</span>: dataItem[<span class="number">1</span>].name,</span><br><span class="line">                coord: toCoord</span><br><span class="line">            &#125;]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var color = [<span class="string">&#x27;#a6c84c&#x27;</span>, <span class="string">&#x27;#ffa022&#x27;</span>, <span class="string">&#x27;#46bee9&#x27;</span>];</span><br><span class="line">var series = [];</span><br><span class="line">[[<span class="string">&#x27;北京&#x27;</span>, BJData], [<span class="string">&#x27;上海&#x27;</span>, SHData], [<span class="string">&#x27;广州&#x27;</span>, GZData]].<span class="keyword">forEach</span>(<span class="keyword">function</span> (item, i) &#123;</span><br><span class="line">    series.push(&#123;</span><br><span class="line">        <span class="type">name</span>: item[<span class="number">0</span>] + <span class="string">&#x27; Top10&#x27;</span>,</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">&#x27;lines&#x27;</span>,</span><br><span class="line">        zlevel: <span class="number">1</span>,</span><br><span class="line">        effect: &#123;</span><br><span class="line">            <span class="keyword">show</span>: <span class="keyword">true</span>,</span><br><span class="line">            period: <span class="number">6</span>,</span><br><span class="line">            trailLength: <span class="number">0.7</span>,</span><br><span class="line">            color: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">            symbolSize: <span class="number">3</span></span><br><span class="line">        &#125;,</span><br><span class="line">        lineStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                color: color[i],</span><br><span class="line">                width: <span class="number">0</span>,</span><br><span class="line">                curveness: <span class="number">0.2</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: convertData(item[<span class="number">1</span>])</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">name</span>: item[<span class="number">0</span>] + <span class="string">&#x27; Top10&#x27;</span>,</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">&#x27;lines&#x27;</span>,</span><br><span class="line">        zlevel: <span class="number">2</span>,</span><br><span class="line">        effect: &#123;</span><br><span class="line">            <span class="keyword">show</span>: <span class="keyword">true</span>,</span><br><span class="line">            period: <span class="number">6</span>,</span><br><span class="line">            trailLength: <span class="number">0</span>,</span><br><span class="line">            symbol: planePath,</span><br><span class="line">            symbolSize: <span class="number">15</span></span><br><span class="line">        &#125;,</span><br><span class="line">        lineStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                color: color[i],</span><br><span class="line">                width: <span class="number">1</span>,</span><br><span class="line">                opacity: <span class="number">0.4</span>,</span><br><span class="line">                curveness: <span class="number">0.2</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: convertData(item[<span class="number">1</span>])</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">name</span>: item[<span class="number">0</span>] + <span class="string">&#x27; Top10&#x27;</span>,</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">&#x27;effectScatter&#x27;</span>,</span><br><span class="line">        coordinateSystem: <span class="string">&#x27;geo&#x27;</span>,</span><br><span class="line">        zlevel: <span class="number">2</span>,</span><br><span class="line">        rippleEffect: &#123;</span><br><span class="line">            brushType: <span class="string">&#x27;stroke&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                <span class="keyword">show</span>: <span class="keyword">true</span>,</span><br><span class="line">                position: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">                formatter: <span class="string">&#x27;&#123;b&#125;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        symbolSize: <span class="keyword">function</span> (val) &#123;</span><br><span class="line">            <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">8</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                color: color[i]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: item[<span class="number">1</span>].map(<span class="keyword">function</span> (dataItem) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="type">name</span>: dataItem[<span class="number">1</span>].name,</span><br><span class="line">                <span class="keyword">value</span>: geoCoordMap[dataItem[<span class="number">1</span>].name].concat([dataItem[<span class="number">1</span>].<span class="keyword">value</span>])</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span> = &#123;</span><br><span class="line">    backgroundColor: <span class="string">&#x27;#404a59&#x27;</span>,</span><br><span class="line">    title : &#123;</span><br><span class="line">        <span class="type">text</span>: <span class="string">&#x27;城市航线&#x27;</span>,</span><br><span class="line">        subtext: <span class="string">&#x27;数据纯属虚构&#x27;</span>,</span><br><span class="line">        left: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">        textStyle : &#123;</span><br><span class="line">            color: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip : &#123;</span><br><span class="line">        <span class="keyword">trigger</span>: <span class="string">&#x27;item&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        orient: <span class="string">&#x27;vertical&#x27;</span>,</span><br><span class="line">        top: <span class="string">&#x27;bottom&#x27;</span>,</span><br><span class="line">        left: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">        data:[<span class="string">&#x27;北京 Top10&#x27;</span>, <span class="string">&#x27;上海 Top10&#x27;</span>, <span class="string">&#x27;广州 Top10&#x27;</span>],</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">            color: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        selectedMode: <span class="string">&#x27;single&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    geo: &#123;</span><br><span class="line">        map: <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">        label: &#123;</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                <span class="keyword">show</span>: <span class="keyword">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        roam: <span class="keyword">true</span>,</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                areaColor: <span class="string">&#x27;#323c48&#x27;</span>,</span><br><span class="line">                borderColor: <span class="string">&#x27;#404a59&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                areaColor: <span class="string">&#x27;#2a333d&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    series: series</span><br><span class="line">&#125;;</span><br><span class="line">// 使用刚指定的配置项和数据显示图表。</span><br><span class="line">myChart.setOption(<span class="keyword">option</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/06/Echarts/" data-id="cl9xpujq60009dmopcaw4dq0j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html5/" rel="tag">html5</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-TypeScript入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/03/TypeScript%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2019-10-03T08:00:08.000Z" itemprop="datePublished">2019-10-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/03/TypeScript%E5%85%A5%E9%97%A8/">TypeScript入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>TypeScript具有类型系统，且是JavaScript的超集。 它可以编译成普通的JavaScript代码。<br>TypeScript支持任意浏览器，任意环境，任意系统并且是开源的。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br><span class="line"><span class="regexp">//</span>查看版本号</span><br><span class="line">tsc -v</span><br><span class="line"><span class="regexp">//</span>查看安装目录</span><br><span class="line">npm bin -g</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>代码编译</span><br><span class="line">tsc helloworld.ts</span><br><span class="line"><span class="regexp">//</span>会出现一个helloworld.js</span><br></pre></td></tr></table></figure>
<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>输出文件夹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将文件编译到dist文件夹下</span></span><br><span class="line">tsc --outDir dist helloworld.<span class="property">ts</span></span><br></pre></td></tr></table></figure>
<h2 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用代码初始化,生成tsconfig.json</span></span><br><span class="line">tsc --init</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改文件内属性</span></span><br><span class="line"><span class="comment">//设置输出文件夹dist</span></span><br><span class="line"><span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;./dist&quot;</span></span><br><span class="line"><span class="comment">//设置源代码文件夹</span></span><br><span class="line"><span class="string">&quot;rootDir&quot;</span>: <span class="string">&quot;./src&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="动态监视"><a href="#动态监视" class="headerlink" title="动态监视"></a>动态监视</h2><p>发现代码变动,自动编译</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc -w</span><br></pre></td></tr></table></figure>

<h1 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h1><ol>
<li>变量使用前要定义</li>
<li>变量类型</li>
<li>any类型</li>
</ol>
<h2 id="变量使用前要定义"><a href="#变量使用前要定义" class="headerlink" title="变量使用前要定义"></a>变量使用前要定义</h2><p>let&#x2F;var 变量名:变量类型 &#x3D; 默认值</p>
<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><p>number,string,boolean,symbol,any,object</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">name</span>:string = <span class="string">&quot;Tom&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My name is&quot;</span> + name)</span><br><span class="line">name = <span class="number">100</span> <span class="comment">//编译错误,类型不匹配</span></span><br></pre></td></tr></table></figure>
<h2 id="any类型"><a href="#any类型" class="headerlink" title="any类型"></a>any类型</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//any类型让编译器忽略检测</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">name</span>:any = <span class="string">&quot;Tom&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My name is&quot;</span> + name)</span><br><span class="line">name = <span class="number">100</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My name is&quot;</span> + name)</span><br></pre></td></tr></table></figure>
<h1 id="常量保存"><a href="#常量保存" class="headerlink" title="常量保存"></a>常量保存</h1><h2 id="常量定义方法"><a href="#常量定义方法" class="headerlink" title="常量定义方法"></a>常量定义方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常量的定义语法</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>:type = initial_value</span><br><span class="line"></span><br><span class="line"><span class="comment">//数据库连接串</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">dbstr</span>:string = <span class="string">&quot;ip=192.168.2.1;port=5433;uid=ayin;pwd=123123;&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dbstr)</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">DATA</span>:number[] = [<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">DATA</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// DATA = [10,20,30]; //编译错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组地址并未改变,值可以改变</span></span><br><span class="line"><span class="comment">//正常赋值</span></span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">1</span>] = <span class="number">20</span></span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">2</span>] = <span class="number">30</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">DATA</span>) <span class="comment">//[10,20,30]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组元素增加</span></span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">3</span>] = <span class="number">40</span></span><br></pre></td></tr></table></figure>

<h1 id="数组的使用"><a href="#数组的使用" class="headerlink" title="数组的使用"></a>数组的使用</h1><h2 id="定义方法"><a href="#定义方法" class="headerlink" title="定义方法"></a>定义方法</h2><p><code>let name:type[] = initial</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义数组</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>:string[] = [<span class="string">&#x27;金&#x27;</span>,<span class="string">&#x27;木&#x27;</span>,<span class="string">&#x27;水&#x27;</span>,<span class="string">&#x27;火&#x27;</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data) <span class="comment">//[&#x27;金&#x27;,&#x27;木&#x27;,&#x27;水&#x27;,&#x27;火&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>]) <span class="comment">//金</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//追加赋值</span></span><br><span class="line">data[<span class="number">4</span>] = <span class="string">&#x27;土&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//越界赋值</span></span><br><span class="line">data[<span class="number">10</span>] = <span class="string">&#x27;风&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="多维数组的定义"><a href="#多维数组的定义" class="headerlink" title="多维数组的定义"></a>多维数组的定义</h2><p><code>let name:type[][] = [[],[],[],...]</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义三行五列的数组</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>:number[][] = [</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>],</span><br><span class="line">    [<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>,<span class="number">400</span>,<span class="number">500</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印第一行数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>]) <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//打印第一行第一个元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>][<span class="number">0</span>]) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h1 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h1><h2 id="定义方法-1"><a href="#定义方法-1" class="headerlink" title="定义方法"></a>定义方法</h2><p><code>enum name = &#123;name1, name2, name3, ...&#125;</code><br>注意定义的是常量,后期不会变化.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用枚举</span></span><br><span class="line">enum <span class="title class_">Sex</span> &#123;</span><br><span class="line">    <span class="variable constant_">MALE</span>,</span><br><span class="line">    <span class="variable constant_">FEMALE</span>,</span><br><span class="line">    <span class="variable constant_">UNKNOWN</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">member_sex</span>: <span class="title class_">Sex</span> = <span class="title class_">Sex</span>.<span class="property">FEMALE</span> <span class="comment">//默认为FEMALE</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(member_sex) <span class="comment">//输出1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Sex</span>[member_sex]) <span class="comment">//输出FEMALE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断中枚举需要在传入对象前加字符+</span></span><br><span class="line"><span class="keyword">switch</span> (+member_sex)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">MALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;男&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">FEMALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;女&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">UNKNOWN</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者将判断套入函数中</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkSex</span>(<span class="params">sex: Sex</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">result</span>:string = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">switch</span> (sex)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">MALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;男&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">FEMALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;女&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">UNKNOWN</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h1><p>指包含多种类型的变量类型,在实际项目中不常用.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//联合类型的定义</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>: type1 | type2 | type3 | ...</span><br><span class="line"></span><br><span class="line"><span class="comment">//联合类型的使用</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">mydata</span>: string | boolean</span><br><span class="line"></span><br><span class="line">mydata = <span class="string">&quot;hello TS&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mydata) <span class="comment">//hello TS</span></span><br><span class="line"></span><br><span class="line">mydata = <span class="literal">true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mydata) <span class="comment">//true,没有报错</span></span><br></pre></td></tr></table></figure>
<h1 id="null空检查"><a href="#null空检查" class="headerlink" title="null空检查"></a>null空检查</h1><p>空检查用于代码编译时对程序中的变量做null空值检查,避免业务级别的错误.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">data1</span>: string = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data2</span>: string = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data3</span>: string = <span class="string">&quot;&quot;</span></span><br><span class="line">data3 = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在tsconfig.json中开启</span></span><br><span class="line"><span class="string">&quot;strickNullChecks&quot;</span>: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//输入tsc进行检查</span></span><br></pre></td></tr></table></figure>

<h1 id="第三方库的使用"><a href="#第三方库的使用" class="headerlink" title="第三方库的使用"></a>第三方库的使用</h1><p>node-request库</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">request</span>(<span class="string">&#x27;http://api.komavideo.com/news/list&#x27;</span>, <span class="keyword">function</span>(<span class="params">error, response, body</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(body)</span><br><span class="line">        <span class="keyword">var</span> body = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(body)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; body.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">var</span> item = body[i]</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(item.<span class="property">title</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//直接使用是会报错的</span></span><br></pre></td></tr></table></figure>
<p>需要添加tsd文件</p>
<h2 id="如何找tsd文件"><a href="#如何找tsd文件" class="headerlink" title="如何找tsd文件"></a>如何找tsd文件</h2><p>网站: <code>http://microsoft.github.io/TypeSearch</code><br>直接搜索</p>
<h2 id="导入tsd文件"><a href="#导入tsd文件" class="headerlink" title="导入tsd文件"></a>导入tsd文件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @types/request</span><br></pre></td></tr></table></figure>
<h1 id="函数的使用"><a href="#函数的使用" class="headerlink" title="函数的使用"></a>函数的使用</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//格式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fname</span>(<span class="params">param1:type, param2:type,...</span>) : return_type &#123;</span><br><span class="line">    <span class="comment">//函数内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x:number, y:number</span>) : number &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">10</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用变量</span></span><br><span class="line"><span class="keyword">let</span> func_add = add</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">func_add</span>(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p>范例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="attr">x</span>:number, <span class="attr">y</span>:number) : <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">10</span>, <span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<h2 id="可省略参数"><a href="#可省略参数" class="headerlink" title="可省略参数"></a>可省略参数</h2><p>定义符号: ?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">sayHello</span>(name?: string): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(name == <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello ayin&quot;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sayHello</span>(<span class="string">&quot;Tom&quot;</span>)) <span class="comment">//Hello Tom</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sayHello</span>()) <span class="comment">//Hello ayin</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认值形式</span></span><br><span class="line"><span class="title function_">sayHello</span>(<span class="attr">name</span>: string = <span class="string">&quot;ayin&quot;</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name</span><br></pre></td></tr></table></figure>
<h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>定义符号: <code>...</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(...<span class="attr">vals</span>: number[]): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> val <span class="keyword">of</span> vals)&#123;</span><br><span class="line">        result += val</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment">//6</span></span><br></pre></td></tr></table></figure>
<h1 id="类的定义"><a href="#类的定义" class="headerlink" title="类的定义"></a>类的定义</h1><p>类似于ES6</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="attr">name</span>: sting</span><br><span class="line">    <span class="attr">sex</span>: number <span class="comment">//0:女,1:男</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: string, sex: number</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sex</span> = sex</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">sayHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,你好<span class="subst">$&#123;<span class="variable language_">this</span>.sex&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> qq = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;花藤&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">qq.<span class="title function_">sayHello</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(qq.<span class="property">name</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(qq.<span class="property">sex</span>)</span><br></pre></td></tr></table></figure>
<h2 id="类的访问限制"><a href="#类的访问限制" class="headerlink" title="类的访问限制"></a>类的访问限制</h2><p>类的访问修饰符</p>
<ul>
<li>public: 共有访问</li>
<li>protected: 本类和子类访问</li>
<li>private: 本类访问</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Datebase</span>&#123;</span><br><span class="line">    <span class="attr">dbname</span>: string</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">bdname: string</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dbname</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//外部调用</span></span><br><span class="line">public <span class="title function_">showDB</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`数据库:<span class="subst">$&#123;<span class="variable language_">this</span>.dbname&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//本类和子类调用</span></span><br><span class="line">protected <span class="title function_">connect</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>,<span class="string">&quot;连接中...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//本类调用</span></span><br><span class="line">private <span class="title function_">disconnect</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>,<span class="string">&quot;关闭&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> oracle = <span class="keyword">new</span> <span class="title class_">Database</span>(<span class="string">&quot;甲骨文&quot;</span>)</span><br><span class="line">oracle.<span class="title function_">showDB</span>()</span><br><span class="line"><span class="comment">//oracle.connect()</span></span><br><span class="line"><span class="comment">//oracle.disconnect()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PostgreSql</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Database</span>&#123;</span><br><span class="line">    public <span class="title function_">doIt</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">connect</span>()</span><br><span class="line">        <span class="comment">//super.disconnect()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> postgres = <span class="keyword">new</span> <span class="title class_">PostregSql</span>(<span class="string">&quot;小象&quot;</span>)</span><br><span class="line">postgres.<span class="title function_">showDB</span>()</span><br><span class="line">postgres.<span class="title function_">doIt</span>()</span><br></pre></td></tr></table></figure>
<h2 id="getter和setter"><a href="#getter和setter" class="headerlink" title="getter和setter"></a>getter和setter</h2><p>书接上回,由于<code>private</code>属于私有,无法直接访问.可以使用get进行访问.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Datebase</span>&#123;</span><br><span class="line">    private <span class="attr">dbname</span>: string</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">bdname: string</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dbname</span> = name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>(): string &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dbname</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">val: string</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dbname</span> = val</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过name属性访问到</span></span><br><span class="line"><span class="keyword">let</span> db = <span class="keyword">new</span> <span class="title class_">Database</span>(<span class="string">&#x27;oracle is good&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(db.<span class="property">name</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">//修改name属性</span></span><br><span class="line">db.<span class="property">name</span> = <span class="string">&quot;mysql is better&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(db.<span class="property">name</span>)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/03/TypeScript%E5%85%A5%E9%97%A8/" data-id="cl9xpujqv001pdmop3cxi4o3r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Chart-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/03/Chart-js/" class="article-date">
  <time datetime="2019-10-03T03:30:37.000Z" itemprop="datePublished">2019-10-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/HTML5/">HTML5</a>►<a class="article-category-link" href="/categories/HTML5/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/03/Chart-js/">Chart.js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>而另一个版本 Chart.bundle.js 和 Chart.bundle.min.js 早就包含了 Moment.js 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install chart.<span class="property">js</span> --save</span><br></pre></td></tr></table></figure>

<h2 id="CDN-引入"><a href="#CDN-引入" class="headerlink" title="CDN 引入"></a>CDN 引入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.bundle.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="模块化引入"><a href="#模块化引入" class="headerlink" title="模块化引入"></a>模块化引入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Chart</span> <span class="keyword">from</span> <span class="string">&#x27;chart.js&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> myChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;...&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="简单上手"><a href="#简单上手" class="headerlink" title="简单上手"></a>简单上手</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;myChart&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 获取我们要选择的canvas元素的上下文</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> ctx = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myChart&quot;</span>).<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> myNewChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;...&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 使用jQuery获取上下文-使用jQuery的.get（）方法。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> ctx = $(<span class="string">&quot;#myChart&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 这将获取jQuery集合中第一个返回的节点。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> myNewChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果您希望所有创建的图表都具有响应性，并在浏览器窗口打开时调整大小，则可以更改以下设置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Chart</span>.<span class="property">defaults</span>.<span class="property">global</span>.<span class="property">responsive</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<h1 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h1><p>折线图是在一条线上绘制数据点的方法.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myLineChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: data,</span><br><span class="line">  <span class="attr">options</span>: options</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>数据结构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  <span class="comment">//横坐标显示的值</span></span><br><span class="line">  <span class="attr">labels</span>: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>, <span class="number">2019</span>],</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//第一条线表示优酷</span></span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;优酷&quot;</span>,</span><br><span class="line">      <span class="comment">//设定data数值,表示每年用户总量</span></span><br><span class="line">      <span class="attr">data</span>: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//第二条线表示YouTube</span></span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;YouTube&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="设置坐标轴"><a href="#设置坐标轴" class="headerlink" title="设置坐标轴"></a>设置坐标轴</h2><h3 id="Y-轴"><a href="#Y-轴" class="headerlink" title="Y 轴"></a>Y 轴</h3><p>options.yAxes</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="comment">//设置缩放</span></span><br><span class="line">  <span class="attr">scales</span>: &#123;</span><br><span class="line">    <span class="comment">//设置Y轴</span></span><br><span class="line">    <span class="attr">yAxes</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//刻度</span></span><br><span class="line">        <span class="attr">ticks</span>: &#123;</span><br><span class="line">          <span class="comment">//固定最大最小</span></span><br><span class="line">          <span class="attr">min</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//建议最大最小</span></span><br><span class="line">          <span class="attr">suggestedMin</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">suggestedMax</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//跨度</span></span><br><span class="line">          <span class="attr">stepSize</span>: <span class="number">400</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//用回调函数设置单位</span></span><br><span class="line">          <span class="attr">callback</span>: <span class="keyword">function</span>(<span class="params">value, index, values</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value + <span class="string">&quot;人&quot;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="标题和图例"><a href="#标题和图例" class="headerlink" title="标题和图例"></a>标题和图例</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">    <span class="comment">//设置标题</span></span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">        <span class="attr">display</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;阿银&#x27;</span>,</span><br><span class="line">        <span class="attr">fontColor</span>: <span class="string">&#x27;black&#x27;</span>,</span><br><span class="line">        <span class="attr">fontSize</span>: <span class="string">&#x27;24&#x27;</span>,</span><br><span class="line">        <span class="attr">position</span>: <span class="string">&#x27;top&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">legend</span>: &#123;</span><br><span class="line">        <span class="comment">//设置图例</span></span><br><span class="line">        <span class="attr">position</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">        <span class="attr">display</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">animation</span>: &#123;</span><br><span class="line">        <span class="comment">//动态效果,为0时禁用动画</span></span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span>,</span><br><span class="line">        <span class="attr">easing</span>: <span class="string">&#x27;easeOutQuart&#x27;</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="线型变换"><a href="#线型变换" class="headerlink" title="线型变换"></a>线型变换</h1><p><code>data.datasets</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">    <span class="attr">labels</span>: [<span class="number">2014</span>,<span class="number">2015</span>,<span class="number">2016</span>,<span class="number">2017</span>,<span class="number">2018</span>,<span class="number">2019</span>],</span><br><span class="line">    <span class="attr">datasets</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">label</span>:  <span class="string">&#x27;优酷&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: [<span class="number">100</span>,<span class="number">200</span>,<span class="number">400</span>,<span class="number">800</span>,<span class="number">1600</span>],</span><br><span class="line">            <span class="comment">//线段颜色</span></span><br><span class="line">            <span class="attr">borderColor</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">            <span class="comment">//线宽</span></span><br><span class="line">            <span class="attr">borderWidth</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="comment">//背景色是否填充</span></span><br><span class="line">            <span class="attr">fill</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//背景色</span></span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;rgba(128,0,0,0.5),</span></span><br><span class="line"><span class="string">            //线段曲率,为0显示折线</span></span><br><span class="line"><span class="string">            lineTension: 0,</span></span><br><span class="line"><span class="string">            //折点的造型,默认是圆点.可选三角,方块,星星</span></span><br><span class="line"><span class="string">            pointStyle: &#x27;</span>rect<span class="string">&#x27;</span></span><br><span class="line"><span class="string">        &#125;,&#123;</span></span><br><span class="line"><span class="string">            label: &#x27;</span><span class="title class_">YouTube</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">            data: [50,100,200,400,600]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="条形图-柱状图"><a href="#条形图-柱状图" class="headerlink" title="条形图(柱状图)"></a>条形图(柱状图)</h1><p>垂直条形图: <code>type: bar</code><br>水平条形图: <code>type: horizontalBar</code></p>
<p>大部分属性类似于折线图</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  <span class="attr">labels</span>: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>],</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;优酷&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>],</span><br><span class="line">      <span class="comment">//为每个条形单独设置颜色</span></span><br><span class="line">      <span class="attr">backgroundColor</span>: [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;YouTube&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>还可以设置条形重叠(覆盖)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">scales</span>: &#123;</span><br><span class="line">            <span class="attr">xAxes</span>: [&#123;</span><br><span class="line">                <span class="comment">//设置覆盖</span></span><br><span class="line">                <span class="attr">stacked</span>: <span class="literal">true</span></span><br><span class="line">            &#125;],</span><br><span class="line">            <span class="attr">yAxes</span>: [&#123;</span><br><span class="line">                <span class="comment">//设置覆盖</span></span><br><span class="line">                <span class="attr">stacked</span>: <span class="literal">true</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="混合图"><a href="#混合图" class="headerlink" title="混合图"></a>混合图</h1><p>线形图和条形图的混合</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixedChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">datasets</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&quot;优酷&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&quot;YouTube&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>],</span><br><span class="line">        <span class="comment">//再改成线图</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">        <span class="comment">//防止填充遮盖到条形图</span></span><br><span class="line">        <span class="attr">fill</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">labels</span>: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">options</span>: options</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="雷达图-六边形图"><a href="#雷达图-六边形图" class="headerlink" title="雷达图(六边形图)"></a>雷达图(六边形图)</h1><p><code>type = &#39;radar&#39;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">type = <span class="string">&quot;radar&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  <span class="attr">labels</span>: [<span class="string">&quot;力量&quot;</span>, <span class="string">&quot;速度&quot;</span>, <span class="string">&quot;经验&quot;</span>, <span class="string">&quot;防守&quot;</span>, <span class="string">&quot;技术&quot;</span>, <span class="string">&quot;发球&quot;</span>],</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;帝国の破坏龙-马龙&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&quot;rgba(247,247,9,0.2)&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;帝国の绝凶虎-张继科&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&quot;rgba(238,61,17,0.2)&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="attr">scale</span>: &#123;</span><br><span class="line">    <span class="attr">ticks</span>: &#123;</span><br><span class="line">      <span class="attr">suggestedMin</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">suggestedMax</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="attr">stepSize</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;桌球帝国战力值&quot;</span>,</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="string">&quot;24&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="饼图和甜甜圈"><a href="#饼图和甜甜圈" class="headerlink" title="饼图和甜甜圈"></a>饼图和甜甜圈</h1><p>饼图: <code>type: &#39;pie&#39;</code><br>甜甜圈: <code>type: &#39;doughnut&#39;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">30</span>, <span class="number">20</span>, <span class="number">30</span>],</span><br><span class="line">      <span class="attr">backgroundColor</span>: [<span class="string">&#x27;green&#x27;</span>,<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;yellow&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="attr">labels</span>: [<span class="string">&quot;马龙&quot;</span>, <span class="string">&quot;张继科&quot;</span>, <span class="string">&quot;王浩&quot;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="comment">//50-用于甜甜圈，0-用于饼图</span></span><br><span class="line">  <span class="attr">cutoutPercentage</span>: <span class="number">80</span>,</span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;桌球帝国战力值&quot;</span>,</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="string">&quot;24&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="极区图"><a href="#极区图" class="headerlink" title="极区图"></a>极区图</h1><p><code>type: &#39;polarArea&#39;</code><br>极区图类似于饼图，但是每个线段具有相同的角度-线段的半径根据值而不同。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/03/Chart-js/" data-id="cl9xpujq40006dmop8al5f38b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html5/" rel="tag">html5</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Git版本管理工具" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/01/Git%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" class="article-date">
  <time datetime="2019-10-01T05:44:59.000Z" itemprop="datePublished">2019-10-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/01/Git%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">Git版本管理工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><p>去官网下载吧</p>
<h1 id="建立Git库"><a href="#建立Git库" class="headerlink" title="建立Git库"></a>建立Git库</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>先新建一个空文件夹</span><br><span class="line">mkdir newBash</span><br><span class="line"><span class="regexp">//</span>在git bash中</span><br><span class="line">cd newBash <span class="regexp">//</span>切换到newBash文件夹下</span><br><span class="line">git  init <span class="regexp">//</span>初始化仓库</span><br></pre></td></tr></table></figure>
<h1 id="设置基础信息"><a href="#设置基础信息" class="headerlink" title="设置基础信息"></a>设置基础信息</h1><p>配置相关信息</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在git bash中</span></span><br><span class="line">git init</span><br><span class="line">git <span class="keyword">config</span> -l  <span class="comment">//查看当前配置</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> user<span class="variable">.name</span> <span class="string">&quot;你的用户名&quot;</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> user<span class="variable">.email</span> <span class="string">&quot;邮箱地址&quot;</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> color<span class="variable">.ui</span> true  <span class="comment">//代码颜色高亮显示</span></span><br><span class="line">git <span class="keyword">config</span> -l  <span class="comment">//再查看一下对不对</span></span><br></pre></td></tr></table></figure>

<h1 id="提交commit"><a href="#提交commit" class="headerlink" title="提交commit"></a>提交commit</h1><p>基本步骤:</p>
<ol>
<li>建立文件(本地工作文件夹)</li>
<li>追加文件(索引区stage)</li>
<li>提交文件(本地库local,远程库remote)</li>
</ol>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>新建一个文件</span><br><span class="line">touch a.md</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>在文件中写字符</span><br><span class="line">echo <span class="string">&quot;helloworld&quot;</span> &gt; a.md</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看此时状态</span><br><span class="line">git status (未提交文件名颜色为红色)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>提交到索引区(也叫暂存区)</span><br><span class="line">git add a.md  (或者直接git add . 表示提交修改文件)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>再看看状态</span><br><span class="line">git status  (提交了颜色变绿了)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>将暂存区的文件提交到本地库(需要附带说明)</span><br><span class="line">git commit -m <span class="string">&quot;add file&quot;</span>  <span class="regexp">//</span>add file 就是说明,会显示在github的文件名后面</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>再看看状态</span><br><span class="line">git status  (提交到本地库后,暂存区里就空了)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>看看提交历史</span><br><span class="line">git log </span><br><span class="line"><span class="regexp">//</span>(会显示提交者的名字,时间,提交记录)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>提交到远程仓库</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><p>一般远程仓库有一个master主分支,多个其他分支.<br>现在展示如何从远端dev分支下载并修改,再推送.</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>切换到一个文件夹下</span><br><span class="line">cd newclone</span><br><span class="line"><span class="regexp">//</span>从远端仓库clone</span><br><span class="line">git clone git@xxx.com</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看当前分支</span><br><span class="line">git branch  (发现远端仓库只有master被clone下来,其他没有)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看所有分支(包括远端分支)</span><br><span class="line">git branch -a  (此时出现远端dev分支)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>创建dev分支,映射远端dev分支</span><br><span class="line">git branch dev remotes<span class="regexp">/origin/</span>dev </span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>上面几步不执行也可以,直接执行切换分支就可以clone数据</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>切换到dev分支</span><br><span class="line">git checkout dev (此时dev下所有文件都会clone下来)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>修改其中的文件</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>推送素质三连</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;修改情况&quot;</span></span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure>
<h1 id="分支branch"><a href="#分支branch" class="headerlink" title="分支branch"></a>分支branch</h1><h2 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>查看当前分支状态</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>新建一个分支dev</span><br><span class="line">git branch dev</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>切换到dev分支</span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>修改文件</span><br><span class="line">nano style.css</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>提交dev分支中内容到索引区</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>提交dev分支到本地库</span><br><span class="line">git commit -m <span class="string">&quot;added style.css&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看记录</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>切换到主分支master</span><br><span class="line">git checkout master</span><br></pre></td></tr></table></figure>
<h2 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h2><p>书接上回</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>查看分支状态</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>在主分支master下,合并dev分支</span><br><span class="line">git merge dev</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看记录</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看后没有问题,删除开发分支</span><br><span class="line">git branch -d dev</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>最后查看分支状态</span><br><span class="line">git branch</span><br></pre></td></tr></table></figure>
<h2 id="分支冲突"><a href="#分支冲突" class="headerlink" title="分支冲突"></a>分支冲突</h2><p>案例分析:<br>在dev分支创建index文件并修改.在主分支创建index文件并修改.合并分支,必有冲突<br>代码重现:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>创建dev分支并切换到dev</span><br><span class="line">git checkout -b dev</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>创建文件.修改文件</span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>提交操作</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;modified by dev&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>切换到主分支</span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>重复上述操作</span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;modified by master&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看分支状态</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>合并分支(必有冲突)</span><br><span class="line">git merge dev</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>报错,在冲突文件中出现提示</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>由leader决定以哪个分支的信息为准</span><br><span class="line"><span class="regexp">//</span>编辑文件,去掉冲突提示,选择以哪个分支的修改为准</span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>重新提交,并将</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;meraged by leader.&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="查看提交历史"><a href="#查看提交历史" class="headerlink" title="查看提交历史"></a>查看提交历史</h1><p>书接上回</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//提交之后,查看提交历史</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查看最近几次历史,接一个数字</span></span><br><span class="line">git <span class="built_in">log</span> -<span class="number">3</span> (查看最近<span class="number">3</span>次的)</span><br><span class="line"></span><br><span class="line"><span class="comment">//把历史记录缩成一行.简略显示</span></span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br><span class="line"></span><br><span class="line"><span class="comment">//详细显示</span></span><br><span class="line">git <span class="built_in">log</span> -p (非常详细)</span><br></pre></td></tr></table></figure>

<h1 id="提交回退"><a href="#提交回退" class="headerlink" title="提交回退"></a>提交回退</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>把刚修改的文件退到未修改状态</span><br><span class="line">git checkout -- a.md (取消修改,恢复到初始状态)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查看状态</span><br><span class="line">git status (文件已恢复)</span><br></pre></td></tr></table></figure>
<p>提交到索引区,想回退</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把文件从索引区头部退出</span></span><br><span class="line">git reset HEAD <span class="selector-tag">a</span><span class="selector-class">.md</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//把刚修改的文件退到未修改状态</span></span><br><span class="line">git checkout -- <span class="selector-tag">a</span>.md</span><br></pre></td></tr></table></figure>
<h1 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h1><p>回退到远程库最后提交的版本,覆盖本地工作区</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//回退到最后一次</span></span><br><span class="line">git reset <span class="attr">--hard</span> HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment">//回退到倒数第二次</span></span><br><span class="line">git reset <span class="attr">--hard</span> HEAD~</span><br><span class="line"></span><br><span class="line"><span class="comment">//回退到倒数第三次</span></span><br><span class="line">git reset <span class="attr">--hard</span> HEAD~<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//回退到指定版本</span></span><br><span class="line">git reset <span class="attr">--hard</span> <span class="number">5</span>d79467</span><br><span class="line">(后面的数字是提交时的ID)</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果没记住ID,通过reflog找到现在位置的id,再从过去返回来.</span></span><br><span class="line">git reflog  (会出现所有最近的记录,可以加-<span class="number">3</span>,显示最近<span class="number">3</span>条记录)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="比较修改内容"><a href="#比较修改内容" class="headerlink" title="比较修改内容"></a>比较修改内容</h1><p>修改文件后</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>和修改前进行比较</span><br><span class="line">git diff</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>把修改后的文件加到索引区</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>和索引区的进行比较</span><br><span class="line">git diff --cached</span><br></pre></td></tr></table></figure>

<h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将文件添加到索引区</span></span><br><span class="line">git add <span class="selector-attr">[file1 file2 ...]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将工作文件夹下所有文件添加到索引区</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">git rm</span><br><span class="line"><span class="comment">//删除索引区文件</span></span><br><span class="line">git rm <span class="attr">--cached</span> <span class="selector-tag">a</span><span class="selector-class">.md</span></span><br><span class="line"><span class="comment">//更名</span></span><br><span class="line">git mv <span class="selector-tag">a</span><span class="selector-class">.md</span> <span class="selector-tag">b</span>.md</span><br></pre></td></tr></table></figure>
<h1 id="Git忽略管理"><a href="#Git忽略管理" class="headerlink" title="Git忽略管理"></a>Git忽略管理</h1><p>设置Git忽略文件,这些文件不参与Git库提交.</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>新建.gitignore文件</span><br><span class="line">在该文件中写入要忽略的文件名</span><br></pre></td></tr></table></figure>
<h1 id="更新最后的提交"><a href="#更新最后的提交" class="headerlink" title="更新最后的提交"></a>更新最后的提交</h1><p>最后一条提交代码里有bug,想更改,又不想新增一条提交.把更改追加到最后一条提交里.</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;最后一次提交&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>发现bug,修改bug后</span><br><span class="line"><span class="regexp">//</span>此时文件已修改</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>提交到最后一次修改里</span><br><span class="line">git commit --amend</span><br></pre></td></tr></table></figure>
<h1 id="使用Tag标签"><a href="#使用Tag标签" class="headerlink" title="使用Tag标签"></a>使用Tag标签</h1><p>系统版本号管理<br>例如: 1.1.3</p>
<p>格式: NNN.abc.xxx</p>
<ul>
<li>NNN: 大版本号</li>
<li>abc: 每次做出小的更新时发布的版本号</li>
<li>xxx: 每次bug修正时发布的版本号</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>查看当前版本号</span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>设置当前版本号</span><br><span class="line">git tag v1.<span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>查询该版本号时文件状态</span><br><span class="line">git show v1.<span class="number">0.0</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/01/Git%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" data-id="cl9xpujq8000cdmoph2t80jnf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Axios" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/24/Axios/" class="article-date">
  <time datetime="2019-09-24T03:33:48.000Z" itemprop="datePublished">2019-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/24/Axios/">Axios</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h1><p>axios是一个基于Promise用于浏览器和nodejs的HTTP客户端，它本身具有以下特征：</p>
<ul>
<li>从浏览器中创建XMLHttpRequest </li>
<li>从node.js发出http请求 </li>
<li>支持 Promise API 拦截请求和响应 </li>
<li>转换请求和响应数据 </li>
<li>取消请求 </li>
<li>自动转换JSON数据 </li>
<li>客户端支持防止 CSRF&#x2F;XSRF</li>
</ul>
<p>步骤:</p>
<ol>
<li>安装<br><code>$ npm install axios</code><br>或者CDN引入</li>
<li>引入</li>
<li>一般是把axios挂载到原型上,便于全局使用</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = axios</span><br></pre></td></tr></table></figure>

<h2 id="Axios之get请求"><a href="#Axios之get请求" class="headerlink" title="Axios之get请求"></a>Axios之get请求</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;https://cnode.js.org/api/v1/topic&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">params</span>: &#123;</span><br><span class="line">            <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">limit</span>: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">items</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上面get请求的其他写法</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//如果只有一个选项</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//将数据写到url里</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/user?page=1&amp;limit=10&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Axios之post请求"><a href="#Axios之post请求" class="headerlink" title="Axios之post请求"></a>Axios之post请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;green&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>POST传递参数有两种格式:</p>
<ul>
<li>form­-data 格式: <code>?page=1&amp;limit=48 </code>.<strong>但是不能写在url里</strong></li>
<li>x-­www-­form-­urlencoded格式: <code>&#123; page: 1,limit: 10 &#125;</code></li>
</ul>
<blockquote>
<p>在axios中，post请求接收的参数必须是form-­data  <br>可以使用qs插件—­qs.stringify</p>
</blockquote>
<h2 id="执行多个并发请求"><a href="#执行多个并发请求" class="headerlink" title="执行多个并发请求"></a>执行多个并发请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUserAccount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/user/12345&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUserPermissions</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/user/12345/permissions&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">all</span>([<span class="title function_">getUserAccount</span>(), <span class="title function_">getUserPermissions</span>()])</span><br><span class="line">  .<span class="title function_">then</span>(axios.<span class="title function_">spread</span>(<span class="keyword">function</span> (<span class="params">acct, perms</span>) &#123;</span><br><span class="line">    <span class="comment">// 两个请求现在都执行完成</span></span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">postData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//先要安装qs插件,然后引入</span></span><br><span class="line">    <span class="comment">//使用qs插件将对象格式转化为form-data格式</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">post</span>(url,qs.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">limit</span>: <span class="number">10</span></span><br><span class="line">    &#125;))</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="拦截器interceptors"><a href="#拦截器interceptors" class="headerlink" title="拦截器interceptors"></a>拦截器interceptors</h1><p>在请求或响应被 then 或 catch 处理前拦截它们。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>如果你想在稍后移除拦截器，可以这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myInterceptor = axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">/*...*/</span>&#125;);</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">eject</span>(myInterceptor);</span><br></pre></td></tr></table></figure>
<p>可以为自定义 axios 实例添加拦截器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instance = axios.<span class="title function_">create</span>();</span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">/*...*/</span>&#125;);</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/09/24/Axios/" data-id="cl9xpujpw0001dmop78zzbra0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP%E8%BF%9B%E9%98%B6/" rel="tag">HTTP进阶</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/12/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/14/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/HTML%E5%9F%BA%E7%A1%80/">HTML基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/HTTP%E5%9F%BA%E7%A1%80/">HTTP基础</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/">HTML5</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/canvas/">canvas</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/ES6/">ES6</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/JS%E5%9F%BA%E7%A1%80/">JS基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/JS%E8%BF%9B%E9%98%B6/">JS进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/jQuery/">jQuery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/css/css3/">css3</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/Node-js/">Node.js</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E5%AE%89%E5%85%A8/" rel="tag">HTTP安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E8%BF%9B%E9%98%B6/" rel="tag">HTTP进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS%E6%B7%B1%E5%85%A5/" rel="tag">JS深入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS%E8%BF%9B%E9%98%B6/" rel="tag">JS进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-SSR/" rel="tag">Vue-SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js%E5%9F%BA%E7%A1%80/" rel="tag">Vue.js基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js%E8%BF%9B%E9%98%B6/" rel="tag">Vue.js进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/" rel="tag">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/" rel="tag">css3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag">移动端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTML/" style="font-size: 18.57px;">HTML</a> <a href="/tags/HTTP%E5%AE%89%E5%85%A8/" style="font-size: 10px;">HTTP安全</a> <a href="/tags/HTTP%E8%BF%9B%E9%98%B6/" style="font-size: 10px;">HTTP进阶</a> <a href="/tags/JS/" style="font-size: 12.86px;">JS</a> <a href="/tags/JS%E6%B7%B1%E5%85%A5/" style="font-size: 10px;">JS深入</a> <a href="/tags/JS%E8%BF%9B%E9%98%B6/" style="font-size: 11.43px;">JS进阶</a> <a href="/tags/React/" style="font-size: 17.14px;">React</a> <a href="/tags/Vue-SSR/" style="font-size: 15.71px;">Vue-SSR</a> <a href="/tags/Vue-js/" style="font-size: 20px;">Vue.js</a> <a href="/tags/Vue-js%E5%9F%BA%E7%A1%80/" style="font-size: 11.43px;">Vue.js基础</a> <a href="/tags/Vue-js%E8%BF%9B%E9%98%B6/" style="font-size: 17.14px;">Vue.js进阶</a> <a href="/tags/android/" style="font-size: 11.43px;">android</a> <a href="/tags/css/" style="font-size: 14.29px;">css</a> <a href="/tags/css3/" style="font-size: 11.43px;">css3</a> <a href="/tags/html5/" style="font-size: 12.86px;">html5</a> <a href="/tags/javascript/" style="font-size: 15.71px;">javascript</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 11.43px;">后端</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 11.43px;">基础</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 11.43px;">小程序</a> <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" style="font-size: 10px;">移动端</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 14.29px;">面试题</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 12.86px;">项目</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/01/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2022/10/25/yuque/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">自动化构建工具</a>
          </li>
        
          <li>
            <a href="/2022/10/25/yuque/%E8%84%9A%E6%89%8B%E6%9E%B6/">脚手架</a>
          </li>
        
          <li>
            <a href="/2022/10/24/yuque/React%20Query/">React Query</a>
          </li>
        
          <li>
            <a href="/2022/10/19/yuque/%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6/">常用组件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Zax Tseng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>