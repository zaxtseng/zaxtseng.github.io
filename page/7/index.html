<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Zax&#39;s BLOG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Zax&#39;s BLOG">
<meta property="og:type" content="website">
<meta property="og:title" content="Zax&#39;s BLOG">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="Zax&#39;s BLOG">
<meta property="og:description" content="Zax&#39;s BLOG">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zax Tseng">
<meta property="article:tag" content="javascript, React, Vue, HTML5">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Zax&#39;s BLOG" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zax&#39;s BLOG</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-yuque/企业微信推送2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/12/29/yuque/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A8%E9%80%812/" class="article-date">
  <time datetime="2021-12-29T11:14:40.000Z" itemprop="datePublished">2021-12-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/12/29/yuque/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A8%E9%80%812/">企业微信推送2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>telegram@MaiKaDe666 制作<br>一、下载注册企业微信<br>1．搜索下载企业，并使用手机号进行企业微信注册<br>2．选择成立企业<br>3．输入企业名称等信息<br>4．完成后，在通讯录内添加成员<br>二、企业微信推送<br>1．打开<a target="_blank" rel="noopener" href="https://work.weixin.qq.com/,%E6%89%AB%E7%A0%81%E7%99%BB%E9%99%86">https://work.weixin.qq.com/,扫码登陆</a><br>2．点击我的企业，在最下边找到企业 ID<strong>（此为 QYWX_AM 变量第一个参数）</strong><br>3．点击应用管理，选择创建应用<br><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/473454/1640776572720-c83e14f3-a32a-4f08-afc0-a646b0a0f2b3.jpeg#clientId=ua44ca094-5cbf-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u2369b37c&margin=%5Bobject%20Object%5D&name=ip_image002.jpeg&originHeight=388&originWidth=400&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=16431&status=done&style=none&taskId=uae62aedd-8bfa-494a-ac41-ff038916de9&title=" alt="ip_image002.jpeg"><br><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/473454/1640776584002-9100caf4-a981-4300-8548-1d179315244e.jpeg#clientId=ua44ca094-5cbf-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u0b99f5cc&margin=%5Bobject%20Object%5D&name=ip_image004.jpeg&originHeight=381&originWidth=372&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=12493&status=done&style=none&taskId=u1a9a9f4f-e955-4ceb-910a-f36f88a2451&title=" alt="ip_image004.jpeg"><br>4．创建完成后找到 AgentId 和 Secret 记录下来<strong>（此为 QYWX_AM 变量第四个和第二个参数）</strong><br><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/473454/1640776595572-4ea70403-8aa5-4ba1-b423-0748c725b713.jpeg#clientId=ua44ca094-5cbf-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u75948032&margin=%5Bobject%20Object%5D&name=ip_image006.jpeg&originHeight=702&originWidth=830&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=38624&status=done&style=none&taskId=u4c4754ea-026e-4657-a4de-6af8cbdbb37&title=" alt="ip_image006.jpeg"><br>5．点击发消息，找到素材库，点击图片，添加图片<br><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/473454/1640776608098-09d35064-7c51-480f-a9b5-71e1bd72c75a.jpeg#clientId=ua44ca094-5cbf-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=uc75d5c5e&margin=%5Bobject%20Object%5D&name=ip_image008.jpeg&originHeight=418&originWidth=830&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=28767&status=done&style=none&taskId=u76d93bea-de3f-45cb-b87b-6db085d9dec&title=" alt="ip_image008.jpeg"><br>6．点击复制图像链接。找到 media_id 后边的 XXXX <strong>（此为 QYWX_AM 变量第五个）</strong><br>7．<a target="_blank" rel="noopener" href="https://work.weixin.qq.com/wework_admin/material/getOpenMsgBuf?type=image&amp;**media_id**=XXXXXXXXXXXXXXXXXXXX&amp;file_name=XXXXXX">https://work.weixin.qq.com/wework_admin/material/getOpenMsgBuf?type=image&amp;**media_id**=XXXXXXXXXXXXXXXXXXXX&amp;file_name=XXXXXX</a><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1640776638723-b8ac96aa-b9f5-476c-bfe8-c0596a604973.png#clientId=ua44ca094-5cbf-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u0e4adbc4&margin=%5Bobject%20Object%5D&name=lip_image010.png&originHeight=385&originWidth=830&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=88224&status=done&style=none&taskId=u77cbba1f-f63a-4866-8a88-1ca2093b1c0&title=" alt="lip_image010.png"><br>8．点击通讯录，找到要推送的人，点击。找到账号。<strong>（此为 QYWX_AM 变量第三个）</strong><br><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/473454/1640776649708-d3135f71-7fad-4c9d-aa92-410c14716553.jpeg#clientId=ua44ca094-5cbf-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u7bef780b&margin=%5Bobject%20Object%5D&name=ip_image012.jpeg&originHeight=332&originWidth=830&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=19880&status=done&style=none&taskId=u39a5c03d-215b-4b75-8eaa-19f74e5949c&title=" alt="ip_image012.jpeg"><br><strong>按照 cookie 顺序填写账号信息，如 cookie1 对应的 userid1,cookie2 对应的 userid2 用|隔开</strong><br><strong>Userid1|userid2|userid3</strong><br>最终<strong>QYWX_AM&#x3D;”<strong>企业 ID,Secret,userid1|userid2|userid3|xxx,AgentId,media_id</strong>“</strong><br>例：<br>QYWX_AM&#x3D;”wwcff56746d9adwers,B-791548lnzXBE6_BWfxdf3kSTMJr9vFEPKAbh6WERQ,mingcheng|maikade|abcdefg|lxk0301,1000001,2COXgjH2UIfERF2zxrtUOKgQ9XklUqMdGSWLBoW_lSDAdafat”</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/12/29/yuque/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A8%E9%80%812/" data-id="cl9xpuju80092dmop5mee85sh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/企业微信推送1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/12/29/yuque/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A8%E9%80%811/" class="article-date">
  <time datetime="2021-12-29T11:01:31.000Z" itemprop="datePublished">2021-12-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/12/29/yuque/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A8%E9%80%811/">企业微信推送1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>感谢余温大佬提供的模板，感谢豆豆提供的图片素材<br>第一个值是企业 id，第二个值是 secret，第三个值@all(或者成员 id)，第四个值是 AgentID，第五个值是图片 id   中间以逗号隔开<br>最终格式例：<code>&quot;ww479cadfqfe8c151f,MPKN9gX97w4e4b4h4u7u4i4i4i4iO6mN_dDedBFzqC5c,@all,1000002,2S8H-JWEdsadFDSFSDDijbrtkldfhjslafhs5zEU1GyUkU&quot;</code><br>最终将此代码填入<code>config.sh</code>推送渠道 9 企业微信应用消息推送的值</p>
<ol>
<li>扫码进入企业微信后台，获取企业 id<br><a target="_blank" rel="noopener" href="https://work.weixin.qq.com/wework_admin/loginpage_wx">https://work.weixin.qq.com/wework_admin&#x2F;loginpage_wx</a></li>
<li><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1640776115857-25a38e11-3c19-43c2-b8fd-ca935d884721.png#clientId=u9f014ae6-80dd-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u6ab9ab52&margin=%5Bobject%20Object%5D&name=%E6%88%AA%E5%9B%BE.png&originHeight=831&originWidth=1102&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=68812&status=done&style=none&taskId=u5fb0f1e0-5989-4c38-9142-bded2fec01a&title=" alt="截图.png"> 2.依次进入应用管理-应用-自建-创建应用，自己创建完成后获取 secret 和 AgentID 和成员 id<br>前两个直接填，如果给所有人推送填@all(这里的所有人指的是已经添加到可见范围内的成员)，如果指定某个接收者直接填 id,多个接收者用‘|’分隔。</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1640776143258-4491d643-feb0-423e-811d-fb2c53eef374.png#clientId=u9f014ae6-80dd-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u6367fa80&margin=%5Bobject%20Object%5D&name=%E6%88%AA%E5%9B%BE%20%281%29.png&originHeight=351&originWidth=992&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=34419&status=done&style=none&taskId=u1fede9f3-0548-41e4-ada4-6eca65ee1ba&title=" alt="截图 (1).png"></p>
<ol start="3">
<li>点击自建应用下方的发消息，依次选择素材库-图片-添加图片，上传完成后从下载库下载图片复制下载链接，然后图片 id 只需要填写下载链接中红色标出的部分。<br>例：<code>https://work.weixin.qq.com/wework_admin/material/getOpenMsgBuf?type=image&amp;media_id=28If78oLQTolSULoVBeKTvSK8-B6LtFJbc_JWwV2JSou6bftKVmpxyWA1kgU8bB2Y&amp;file_name=IMG_20210205_223133_888.jpg&amp;download=1</code></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1640776240295-0ec80d48-8df5-4dc2-8edd-603a06685df0.png#clientId=u9f014ae6-80dd-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u5e7854bd&margin=%5Bobject%20Object%5D&name=%E6%88%AA%E5%9B%BE%20%282%29.png&originHeight=350&originWidth=981&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=31541&status=done&style=none&taskId=udaadd7b7-d5d0-4dd6-a531-c503293b685&title=" alt="截图 (2).png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1640776253122-6a92e65e-2444-4606-a709-4d9cae69e470.png#clientId=u9f014ae6-80dd-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u0da3f761&margin=%5Bobject%20Object%5D&name=%E6%88%AA%E5%9B%BE%20%283%29.png&originHeight=465&originWidth=869&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=116978&status=done&style=none&taskId=ub024e741-4968-4b23-8c75-06585f633a4&title=" alt="截图 (3).png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1640776263063-a9760a08-408e-4b0c-8971-aea4476782d9.png#clientId=u9f014ae6-80dd-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u38bf6cde&margin=%5Bobject%20Object%5D&name=%E6%88%AA%E5%9B%BE%20%284%29.png&originHeight=366&originWidth=863&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=100156&status=done&style=none&taskId=uc3aa5532-76de-4937-9fec-fefd4c6ebbd&title=" alt="截图 (4).png"><br><a target="_blank" rel="noopener" href="https://work.weixin.qq.com/wework_admin/material/getOpenMsgBuf?type=image&media_id=28If78oLQTolSULoVBeKTvSK8-B6LtFJbc_JWwV2JSou6bftKVmpxyWA1kgU8bB2Y&file_name=IMG_20210205_223133_888.jpg&download=1">
</a></p>
<ol start="4">
<li>补充 1.推送到普通微信，需要扫一下这个</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1640776291381-1ba46e03-9f2f-40ac-ab44-c3226ed6abc6.png#clientId=u9f014ae6-80dd-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=ub3b2e6dc&margin=%5Bobject%20Object%5D&name=%E6%88%AA%E5%9B%BE%20%285%29.png&originHeight=514&originWidth=553&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=69662&status=done&style=none&taskId=u72653ec9-5561-4712-a291-d03278b6064&title=" alt="截图 (5).png"> 2.推送给多人必须邀请其他人也加入企业，加入到应用可见范围中，也需要扫码微信插件。 3.一切以官方 API 为准：<a target="_blank" rel="noopener" href="https://work.weixin.qq.com/api/doc/90000/90135/90235">https://work.weixin.qq.com/api/doc/90000/90135/90235</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/12/29/yuque/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A8%E9%80%811/" data-id="cl9xpuju80091dmop6x33dajc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/React Hooks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/12/26/yuque/React%20Hooks/" class="article-date">
  <time datetime="2021-12-26T06:15:52.000Z" itemprop="datePublished">2021-12-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/12/26/yuque/React%20Hooks/">React Hooks</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="类组件转化为函数组件"><a href="#类组件转化为函数组件" class="headerlink" title="类组件转化为函数组件"></a>类组件转化为函数组件</h1><ol>
<li>创建一个与重构页面类组件同名的函数。</li>
<li>return 进类组件中的页面结构。</li>
<li>类中定义的变量，可以使用一个状态变量去表示，使用 useState 钩子我们将把组件重写为一个函数。用 useState 钩子，来处理类中多状态值。</li>
<li>在函数组件中我们可以使用 useEffect 钩子去处理类组件中的生命周期方法</li>
<li>注意类组件转为函数组件以后功能的变化。</li>
</ol>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">year</span>: <span class="number">1995</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;Mercedes&quot;</span>,</span><br><span class="line">    <span class="attr">used</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  swapCar = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">year</span>: <span class="number">2018</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;BMW&quot;</span>,</span><br><span class="line">      <span class="attr">used</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">marginBottom:</span> &quot;<span class="attr">50px</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Challenge 3<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Car Spec is:<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;this.state.type&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;this.state.year&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;this.state.used ? &quot;Used Car&quot; : &quot;Brand New!&quot;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.swapCar&#125;</span>&gt;</span>Swap Car!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数组件重写</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [year, changeYear] = <span class="title function_">useState</span>(<span class="number">1995</span>);</span><br><span class="line">  <span class="keyword">const</span> [type, changeType] = <span class="title function_">useState</span>(<span class="string">&quot;Mercedes&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [used, changeCondition] = <span class="title function_">useState</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">swapCar</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">changeYear</span>(<span class="number">2018</span>);</span><br><span class="line">    <span class="title function_">changeType</span>(<span class="string">&quot;BMW&quot;</span>);</span><br><span class="line">    <span class="title function_">changeCondition</span>(<span class="literal">false</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">marginBottom:</span> &quot;<span class="attr">50px</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Challenge 3<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Car Spec is:<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;type&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;year&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;used ? &quot;Used Car&quot; : &quot;Brand New!&quot;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;swapCar&#125;</span>&gt;</span>Swap Car!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/TiAmopanduola/article/details/123277862">
</a></p>
<h1 id="自定义-hook"><a href="#自定义-hook" class="headerlink" title="自定义 hook"></a>自定义 hook</h1><p>相当于将复用逻辑封装到一个 hook 中.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">useInputValue</span> = (<span class="params">initialValue</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(initialValue);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    value,</span><br><span class="line">    <span class="attr">onChange</span>: <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">TodoForm</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> text = <span class="title function_">useInputValue</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> password = <span class="title function_">useInputValue</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> &#123;<span class="attr">...text</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> &#123;<span class="attr">...password</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">TodoForm</span>;</span><br></pre></td></tr></table></figure>

<h1 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h1><p>为函数引入状态的钩子.<br>useState 中可以是对象,数组,函数.<br>如果是函数,那么函数的返回值就是初始值.而不是保存函数的状态.这是惰性初始值.<br>set 方法是异步操作.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在react中引入</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="comment">//在function中设置</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用一个数组包裹</span></span><br><span class="line"><span class="comment">     * count: 状态</span></span><br><span class="line"><span class="comment">     * setCount: 修改状态</span></span><br><span class="line"><span class="comment">     * useState(0): 括号内的值是初始值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">  	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123; count &#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;setCount(count+1)&#125;&gt;add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="comment">// 如果将调用函数抽离,使用setCount时注意参数是count</span></span><br><span class="line">   <span class="keyword">const</span> <span class="title function_">handleCount</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(<span class="function"><span class="params">count</span> =&gt;</span> count +<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h1><p>useEffect 相当于三种状态<br>分别是挂载后,更新后,卸载前.</p>
<ul>
<li>componentDidMount: useEffect(()&#x3D;&gt;{},[])</li>
<li>componentDidUpdate,componentDidMount: useEffect(()&#x3D;&gt;{})</li>
<li>componentWillUnmount: useEffect(()&#x3D;&gt;{ return ()&#x3D;&gt;{ &#x2F;&#x2F;这里相当于 compoonentWillUnmount }},[])</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//useEffect使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//class示例</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  state = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  <span class="comment">//想要在title上点击更新title</span></span><br><span class="line">  <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`clicked <span class="subst">$&#123;<span class="variable language_">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        count: &#123;`clicked $&#123;this.state.count&#125; times`&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            this.setState(&#123;</span></span><br><span class="line"><span class="language-xml">              count: (this.state.count += 1),</span></span><br><span class="line"><span class="language-xml">            &#125;);</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        &gt;</span></span><br><span class="line"><span class="language-xml">          add</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//hook示例</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * useEffect相当于三种状态</span></span><br><span class="line"><span class="comment">   * componentDidMount: useEffect(()=&gt;&#123;&#125;,[])</span></span><br><span class="line"><span class="comment">   * componentDidUpdate,componentDidMount: useEffect(()=&gt;&#123;&#125;)</span></span><br><span class="line"><span class="comment">   * componentWillUnmount: useEffect(()=&gt;&#123;</span></span><br><span class="line"><span class="comment">   * return ()=&gt;&#123; //这里相当于compoonentWillUnmount &#125;&#125;,[])</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      count: &#123;`clicked $&#123;count&#125; times`&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="useEffect-结合异步函数"><a href="#useEffect-结合异步函数" class="headerlink" title="useEffect 结合异步函数"></a>useEffect 结合异步函数</h1><p>需要将异步函数改为自执行的形式,因为 useEffect 返回清理资源的函数,而异步函数返回 Promise,</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">  (<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> axios.<span class="title function_">get</span>()</span><br><span class="line">  &#125;)()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="useEffect-副作用"><a href="#useEffect-副作用" class="headerlink" title="useEffect 副作用"></a>useEffect 副作用</h1><h2 id="纯函数"><a href="#纯函数" class="headerlink" title="纯函数"></a>纯函数</h2><ul>
<li>纯函数的输出和输入值以外的其他信息无关</li>
<li>纯函数不能有可观察的函数副作用</li>
</ul>
<h2 id="副作用"><a href="#副作用" class="headerlink" title="副作用"></a>副作用</h2><p>副作用指函数在执行过程中,除了返回可能的函数值外,还对主调用函数产生附加的影响.<br>例如：修改了全局变量、修改了传入的参数、甚至是 console.log()， ajax 操作，直接修改 DOM，计时器函数，其他异步操作，其他会对外部产生影响的操作都是算作副作用</p>
<p>我们知道，如果在 useEffect 函数中返回一个函数，这个函数就是清除副作用函数，它会在组件销毁的时候执行，但是其实，它会在组件每次重新渲染时执行，并且先执行清除上一个 effect 的副作用。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyAPI</span> = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="title function_">subscribe</span>(<span class="params">cb</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">intervalId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span> += <span class="number">1</span>;</span><br><span class="line">      <span class="title function_">cb</span>(<span class="variable language_">this</span>.<span class="property">count</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">unSubscribe</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">intervalId</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> = <span class="number">0</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//class写法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//设置定时器</span></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">MyAPI</span>.<span class="title function_">subscribe</span>(<span class="function">(<span class="params">count</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">count</span>: count &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//清除定时器</span></span><br><span class="line">  <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">MyAPI</span>.<span class="title function_">unSubscribe</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Hook写法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//设置定时器</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">MyAPI</span>.<span class="title function_">subscribe</span>(<span class="function">(<span class="params">currentCount</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(currentCount);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//使用清除副作用函数,清除定时器</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">MyAPI</span>.<span class="title function_">unSubscribe</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="useEffect-定时器问题"><a href="#useEffect-定时器问题" class="headerlink" title="useEffect 定时器问题"></a>useEffect 定时器问题</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c + <span class="number">1</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure>

<p>使用<code>setState</code>的函数形式,实现当前值的<code>+1</code>.</p>
<blockquote>
<p>尽管 effect 只运行了一次，第一次渲染中的定时器回调函数可以完美地在每次触发的时候给 React 发送 c &#x3D;&gt; c + 1 更新指令。它不再需要知道当前的 count 值。因为 React 已经知道了。</p>
</blockquote>
<h1 id="useHook-与闭包"><a href="#useHook-与闭包" class="headerlink" title="useHook 与闭包"></a>useHook 与闭包</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>); <span class="comment">// 0,1,2,3...</span></span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        Click me</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对比class组件</span></span><br><span class="line">  <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`You clicked <span class="subst">$&#123;<span class="variable language_">this</span>.state.count&#125;</span> times`</span>);<span class="comment">// 5,5,5,5,5</span></span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>上面两个对比,uesEffect 因为有闭包存在,记录的都是当时 count 的值.<br>class 组件里,React 修改了 class 中的 this.state 使其指向最新状态.所以全都是 5.</p>
<blockquote>
<p><strong>每一个组件内的函数（包括事件处理函数，effects，定时器或者 API 调用等等）会捕获某次渲染中定义的 props 和 state。</strong></p>
</blockquote>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">useDocumentTitle</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  title: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  keepOnUnmount: <span class="built_in">boolean</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 挂载前</span></span><br><span class="line">  <span class="keyword">const</span> oldTitle = <span class="variable language_">document</span>.<span class="property">title</span>;</span><br><span class="line">  <span class="comment">// 挂载时,传入的title赋给文档的title,而且oldTitle也改变了</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = title;</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="comment">// 卸载时</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!keepOnUnmount) &#123;</span><br><span class="line">        <span class="comment">// 因为这里面是一个闭包, 所以里面的oldTitle还是最初的title</span></span><br><span class="line">        <span class="comment">// 如果不指定依赖,这里的闭包就让title是旧title</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = oldTitle;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="一直误解的闭包问题"><a href="#一直误解的闭包问题" class="headerlink" title="一直误解的闭包问题"></a>一直误解的闭包问题</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Article</span>(<span class="params">&#123; id &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [article, setArticle] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> didCancel = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;effect&quot;</span>, didCancel);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setArticle begin&quot;</span>, didCancel);</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setTimeout&quot;</span>, didCancel);</span><br><span class="line">          <span class="title function_">resolve</span>(id);</span><br><span class="line">        &#125;, id);</span><br><span class="line">      &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">article</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 快速点击 Add id 的 button，这里 didCancel 为什么会打印 true</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setArticle end&quot;</span>, didCancel, article);</span><br><span class="line">        <span class="keyword">if</span> (!didCancel) &#123;</span><br><span class="line">          <span class="comment">// 把这一行代码注释就会出现错误覆盖状态值的情况</span></span><br><span class="line">          <span class="title function_">setArticle</span>(article);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fetchData begin&quot;</span>, didCancel);</span><br><span class="line">    <span class="title function_">fetchData</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fetchData end&quot;</span>, didCancel);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      didCancel = <span class="literal">true</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;clear&quot;</span>, didCancel);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [id]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;article&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [id, setId] = <span class="title function_">useState</span>(<span class="number">5000</span>);</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setId</span>(id - <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>add id<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Article</span> <span class="attr">id</span>=<span class="string">&#123;id&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>

<p>快速连点两次,为什么 didCancel 是 true?<br>解释: 第一次点击,4 秒 setTimeout,页面刷新,渲染 3 秒的 UI,调用 4 秒的移除副作用,设置 4 秒的 didCancel 为 true.setTimeout 中的 didCancel 就是此时的 true<br>.第二次点击,3 秒 setTimeout,页面没有卸载或更新,didCancel 还是 false.<br><strong>这里主要是 effect 移除副作用是在第二次 ui 渲染后,再移除上一次的 effect 副作用.因为它会捕获记住那一次的 props 和 state.setTimeout 中记录的也是上一次的.</strong></p>
<h1 id="Hook-规则"><a href="#Hook-规则" class="headerlink" title="Hook 规则"></a>Hook 规则</h1><p>不要在循环,条件,嵌套中使用 Hook,确保它在最顶层.<br>只在 React 函数中调用 Hook,不要在 js 函数中调用.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误方式</span></span><br><span class="line"><span class="keyword">if</span> (count === <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//正确方式</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (count === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h1><p>行为类似于 Vue 中的计算属性.防止内部因 js 属性导致无限循环.<br>另外当 obj 是对象的 state 时,不会无限循环.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//如果count变化则此函数重新执行</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;, [count]);</span><br></pre></td></tr></table></figure>

<h1 id="memo-方法"><a href="#memo-方法" class="headerlink" title="memo 方法"></a>memo 方法</h1><p>用于性能优化,节省开销.,如果本组件内数据未变化,阻止组件更新.<br>类似于 React.pureComponent,该函数会浅比较 props,state 是否变化,未变化就不重复渲染.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./child&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">time</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//当time设置为1时,即使渲染还是1,但是log还是会打印render.</span></span><br><span class="line">      <span class="comment">//使用PureComponent可以浅比较发现数据没有变化,就不会继续打印.</span></span><br><span class="line">      <span class="comment">// this.setState(&#123; time: 1&#125;,1000)</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">time</span>: <span class="keyword">new</span> <span class="title class_">Date</span>() &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 加入child组件 */&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;/* 当赋值没有变化时,依旧会渲染log */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Child</span> <span class="attr">seconds</span>=<span class="string">&#123;1&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;this.state.time.toString()&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Child</span> = (<span class="params">&#123; seconds &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;child&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>current time: &#123;seconds&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//加入memo防止组件重复渲染</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br></pre></td></tr></table></figure>

<h1 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h1><p>返回一个 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Memoization">memoized</a> 回调函数。<br>依旧是节省资源.<br>被 useCallback 包裹的函数是否执行,取决于后面的参数是否变化.<br>如果后面参数没有执行,而且在第一次的时候时可以执行一次的.</p>
<p>当写自定义 hook 时,返回的函数大概率需要用 useCallback 包裹.返回的函数保证不会每次都变化.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useCallback &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count1, setCount1] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="comment">//useCallback第二个参数决定是否允许第一个参数执行</span></span><br><span class="line">  <span class="comment">//如果count发生变化则允许执行</span></span><br><span class="line">  <span class="comment">//useCallback第一个参数会先执行一次,之后才判断第二个参数是否变化</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count1&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count1 + 1)&#125;&gt;click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;useCallback(()</span> =&gt;</span> setCount(count + 1), [count])&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        click</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>在 class 组件中，函数属性本身并不是数据流的一部分</strong>。组件的方法中包含了可变的 this 变量导致我们不能确定无疑地认为它是不变的。因此，即使我们只需要一个函数，我们也必须把一堆数据传递下去仅仅是为了做“diff”。我们无法知道传入的 this.props.fetchData 是否依赖状态，并且不知道它依赖的状态是否改变了。</p>
<p>使用 useCallback，函数完全可以参与到数据流中。我们可以说如果一个函数的输入改变了，这个函数就改变了。如果没有，函数也不会改变。感谢周到的 useCallback，属性比如 props.fetchData 的改变也会自动传递下去。</p>
<h1 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h1><p>useReducer 是另一种返回状态的方法.<br>对于单个状态,可以使用 useState,多个状态,且互相关联,就可以使用 useReducer.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initalState = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;dcrement&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialState);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Count: &#123;state.count&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;dcrement&quot; &#125;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h1><ul>
<li>接收一个 context 对象（React.createContext 的返回值）并返回该 context 的当前值</li>
<li>当前的 context 值由上层组件中距离当前组件最近的 &lt;MyContext.Provider&gt; 的 value prop 决定</li>
<li>当组件上层最近的 <code>&lt;MyContext.Provider&gt;</code> 更新时，该 Hook 会触发重渲染，并使用最新传递给 <code>MyContext provider</code> 的 <code>context value</code> 值</li>
<li><code>useContext(MyContext)</code> 相当于 class 组件中的 <code>static contextType = MyContext</code> 或者 <code>&lt;MyContext.Consumer&gt;</code></li>
<li><code>useContext(MyContext)</code> 只是让你能够读取 context 的值以及订阅 context 的变化。你仍然需要在上层组件树中使用 <code>&lt;MyContext.Provider&gt;</code>来为下层组件提供 context</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styles.css&quot;</span>;</span><br><span class="line"><span class="comment">//先创建一个Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AppContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Navbar</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; username &#125; = <span class="title function_">useContext</span>(<span class="title class_">AppContext</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;navbar&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>AwesomeSite<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;username&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Messages</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; username &#125; = <span class="title function_">useContext</span>(<span class="title class_">AppContext</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;messages&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Messages<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>1 message for &#123;username&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;message&quot;</span>&gt;</span>useContext is awesome!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//用创建的Context包裹组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">AppContext.Provider</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">value</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">username:</span> &quot;<span class="attr">superawesome</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Navbar</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Messages</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">AppContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rootElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, rootElement);</span><br></pre></td></tr></table></figure>

<h2 id="全局使用"><a href="#全局使用" class="headerlink" title="全局使用"></a>全局使用</h2><h3 id="创建-context"><a href="#创建-context" class="headerlink" title="创建 context"></a>创建 context</h3><p>使用 createContext 方法创建 context</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 泛型可以约束传入的内容</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AuthContext</span> = createContext&lt;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">user</span>: <span class="title class_">User</span> | <span class="literal">null</span>;</span><br><span class="line">      <span class="attr">login</span>: <span class="function">(<span class="params">form: AuthForm</span>) =&gt;</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line">      <span class="attr">register</span>: <span class="function">(<span class="params">form: AuthForm</span>) =&gt;</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line">      <span class="attr">logout</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  | <span class="literal">undefined</span></span><br><span class="line">&gt;(<span class="literal">undefined</span>);</span><br><span class="line"><span class="comment">// context 的名字</span></span><br><span class="line"><span class="title class_">AuthContext</span>.<span class="property">displayName</span> = <span class="string">&quot;AuthContext&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="创建-Provider-及其附属方法"><a href="#创建-Provider-及其附属方法" class="headerlink" title="创建 Provider 及其附属方法"></a>创建 Provider 及其附属方法</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">AuthProvider</span> = (<span class="params">&#123; children &#125;: &#123; children: ReactNode &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = useState&lt;<span class="title class_">User</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params">form: AuthForm</span>) =&gt; auth.<span class="title function_">login</span>(form).<span class="title function_">then</span>(setUser);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">register</span> = (<span class="params">form: AuthForm</span>) =&gt; auth.<span class="title function_">register</span>(form).<span class="title function_">then</span>(setUser);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">logout</span> = (<span class="params"></span>) =&gt; auth.<span class="title function_">logout</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">AuthContext.Provider</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">children</span>=<span class="string">&#123;children&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">user</span>, <span class="attr">login</span>, <span class="attr">register</span>, <span class="attr">logout</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="使-Context-在全局生效"><a href="#使-Context-在全局生效" class="headerlink" title="使 Context 在全局生效"></a>使 Context 在全局生效</h3><p>包裹 App 组件</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">AppProviders</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">AppProviders</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="调用-context"><a href="#调用-context" class="headerlink" title="调用 context"></a>调用 context</h3><p>使用 useHook 自定义 hook 调用 context</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">useAuth</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> context = <span class="title function_">useContext</span>(<span class="title class_">AuthContext</span>);</span><br><span class="line">  <span class="keyword">if</span> (!context) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;useAuth必须在AuthProvider中使用&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> context;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="页面中使用"><a href="#页面中使用" class="headerlink" title="页面中使用"></a>页面中使用</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; login, user &#125; = <span class="title function_">useAuth</span>();</span><br></pre></td></tr></table></figure>

<h1 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h1><p>类组件、React 元素用 React.createRef，函数组件使用 useRef<br>useRef 返回一个可变的 ref 对象，其 current 属性被初始化为传入的参数（initialValue）.<br>第二个作用是保存数据<br>即使组件重新渲染,保存的数据仍然存在.保存的数据被更改不会触发组件渲染.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> refContainer = <span class="title function_">useRef</span>(initialValue);</span><br></pre></td></tr></table></figure>

<p>useRef 返回的 ref 对象在组件的整个生命周期内保持不变，也就是说每次重新渲染函数组件时，返回的 ref 对象都是同一个（使用 React.createRef ，每次重新渲染组件都会重新创建 ref）</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> [<span class="built_in">number</span>, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setNumber(&#123; number: number + 1 &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> input;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;input===inputRef&quot;</span>, input === inputRef);</span><br><span class="line">  input = inputRef;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getFocus</span>(<span class="params"></span>) &#123;</span><br><span class="line">    inputRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;getFocus&#125;</span>&gt;</span>获得焦点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Parent</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>

<h1 id="forwardRef"><a href="#forwardRef" class="headerlink" title="forwardRef"></a>forwardRef</h1><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//因为函数组件没有实例，所以函数组件无法像类组件一样可以接收 ref 属性</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      // <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;xxx&#125;</span> /&gt;</span> 这样是不行的</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>forwardRef 可以在父组件中操作子组件的 ref 对象</li>
<li>forwardRef 可以将父组件中的 ref 对象转发到子组件中的 dom 元素上</li>
<li>子组件接受 props 和 ref 作为参数</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props, ref</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Child</span> = <span class="title class_">React</span>.<span class="title function_">forwardRef</span>(<span class="title class_">Child</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> [<span class="built_in">number</span>, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="comment">// 在使用类组件的时候，创建 ref 返回一个对象，该对象的 current 属性值为空</span></span><br><span class="line">  <span class="comment">// 只有当它被赋给某个元素的 ref 属性时，才会有值</span></span><br><span class="line">  <span class="comment">// 所以父组件（类组件）创建一个 ref 对象，然后传递给子组件（类组件），子组件内部有元素使用了</span></span><br><span class="line">  <span class="comment">// 那么父组件就可以操作子组件中的某个元素</span></span><br><span class="line">  <span class="comment">// 但是函数组件无法接收 ref 属性 &lt;Child ref=&#123;xxx&#125; /&gt; 这样是不行的</span></span><br><span class="line">  <span class="comment">// 所以就需要用到 forwardRef 进行转发</span></span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(); <span class="comment">//&#123;current:&#x27;&#x27;&#125;</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getFocus</span>(<span class="params"></span>) &#123;</span><br><span class="line">    inputRef.<span class="property">current</span>.<span class="property">value</span> = <span class="string">&quot;focus&quot;</span>;</span><br><span class="line">    inputRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setNumber(&#123; number: number + 1 &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;getFocus&#125;</span>&gt;</span>获得焦点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="useImperativeHandle"><a href="#useImperativeHandle" class="headerlink" title="useImperativeHandle"></a>useImperativeHandle</h1><ul>
<li>useImperativeHandle 可以让你在使用 ref 时，自定义暴露给父组件的实例值，不能让父组件想干嘛就干嘛</li>
<li>在大多数情况下，应当避免使用 ref 这样的命令式代码。useImperativeHandle 应当与 forwardRef 一起使用</li>
<li>父组件可以使用操作子组件中的多个 ref</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useState,useEffect,createRef,useRef,forwardRef,useImperativeHandle&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props,parentRef</span>)&#123;</span><br><span class="line">    <span class="comment">// 子组件内部自己创建 ref</span></span><br><span class="line">    <span class="keyword">let</span> focusRef = <span class="title function_">useRef</span>();</span><br><span class="line">    <span class="keyword">let</span> inputRef = <span class="title function_">useRef</span>();</span><br><span class="line">    <span class="title function_">useImperativeHandle</span>(parentRef,<span class="function">()=&gt;</span>(</span><br><span class="line">      <span class="comment">// 这个函数会返回一个对象</span></span><br><span class="line">      <span class="comment">// 该对象会作为父组件 current 属性的值</span></span><br><span class="line">      <span class="comment">// 通过这种方式，父组件可以使用操作子组件中的多个 ref</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            focusRef,</span><br><span class="line">            inputRef,</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;计数器&#x27;</span>,</span><br><span class="line">            <span class="title function_">focus</span>(<span class="params"></span>)&#123;</span><br><span class="line">                focusRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">changeText</span>(<span class="params">text</span>)&#123;</span><br><span class="line">                inputRef.<span class="property">current</span>.<span class="property">value</span> = text;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;focusRef&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Child</span> = <span class="title function_">forwardRef</span>(<span class="title class_">Child</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> parentRef = <span class="title function_">useRef</span>();<span class="comment">//&#123;current:&#x27;&#x27;&#125;</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getFocus</span>(<span class="params"></span>)&#123;</span><br><span class="line">    parentRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">    <span class="comment">// 因为子组件中没有定义这个属性，实现了保护，所以这里的代码无效</span></span><br><span class="line">    parentRef.<span class="property">current</span>.<span class="title function_">addNumber</span>(<span class="number">666</span>);</span><br><span class="line">    parentRef.<span class="property">current</span>.<span class="title function_">changeText</span>(<span class="string">&#x27;&lt;script&gt;alert(1)&lt;/script&gt;&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(parentRef.<span class="property">current</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ForwardChild</span> <span class="attr">ref</span>=<span class="string">&#123;parentRef&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;getFocus&#125;</span>&gt;</span>获得焦点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/12/26/yuque/React%20Hooks/" data-id="cl9xpujsw006hdmop2qyj2ogr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/Echarts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/12/13/yuque/Echarts/" class="article-date">
  <time datetime="2021-12-13T02:54:17.000Z" itemprop="datePublished">2021-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/12/13/yuque/Echarts/">Echarts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="动态数据"><a href="#动态数据" class="headerlink" title="动态数据"></a>动态数据</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//view</span></span><br><span class="line"> &lt;div style=<span class="string">&quot;width: 100%;height:700rpx;&quot;</span> ref=<span class="string">&quot;bar&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="comment">//script</span></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="attr">option</span>: &#123;</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">dataset</span>: &#123;</span><br><span class="line">          <span class="attr">dimensions</span>: [<span class="string">&quot;teamGroup&quot;</span>, <span class="string">&quot;oeeRate&quot;</span>],</span><br><span class="line">          <span class="attr">source</span>: <span class="variable language_">this</span>.<span class="property">monthsData</span>, <span class="comment">//主要数据(后台返回值)</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">yAxis</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">legend</span>: &#123;</span><br><span class="line">          <span class="attr">show</span>: <span class="literal">false</span>, <span class="comment">//图例不展示</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">            <span class="comment">// data: [5, 20, 36, 10],</span></span><br><span class="line">            <span class="attr">itemStyle</span>: &#123; <span class="comment">//柱状图上的值</span></span><br><span class="line">              <span class="attr">normal</span>: &#123;</span><br><span class="line">                <span class="attr">label</span>: &#123;</span><br><span class="line">                  <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">                  <span class="attr">position</span>: <span class="string">&quot;top&quot;</span>,</span><br><span class="line">                  <span class="attr">textStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&quot;#999&quot;</span>,</span><br><span class="line">                    <span class="attr">fontSize</span>: <span class="number">14</span>,</span><br><span class="line">                  &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">color</span>: <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="keyword">const</span> colorList = [</span><br><span class="line">                    <span class="string">&quot;#df6e6a&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;#83bfdb&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;#599f76&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;#ed895d&quot;</span>,</span><br><span class="line">                  ];</span><br><span class="line">                  <span class="keyword">return</span> colorList[params.<span class="property">dataIndex</span>];</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">option</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">monthsData</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> myChart = <span class="variable language_">this</span>.<span class="property">$echarts</span>.<span class="title function_">init</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&quot;bar&quot;</span>]);</span><br><span class="line">            <span class="keyword">if</span> (myChart) &#123;</span><br><span class="line">              <span class="keyword">if</span> (newVal) &#123;</span><br><span class="line">                myChart.<span class="title function_">setOption</span>(newVal);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                myChart.<span class="title function_">setOption</span>(oldVal);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="动态数据-包含初始化"><a href="#动态数据-包含初始化" class="headerlink" title="动态数据,包含初始化"></a>动态数据,包含初始化</h2><p>适用于多个 div 导致报错问题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">  public <span class="attr">option</span>: any = &#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">x</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">      <span class="attr">subtext</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">grid</span>: &#123;</span><br><span class="line">      <span class="attr">left</span>: <span class="string">&#x27;14%&#x27;</span>,</span><br><span class="line">      <span class="attr">right</span>: <span class="string">&#x27;9%&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">tooltip</span>: &#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">showContent</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// legend: &#123;</span></span><br><span class="line">    <span class="comment">//   show: false,</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="attr">dataset</span>: &#123;</span><br><span class="line">      <span class="attr">source</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">        <span class="attr">radius</span>: <span class="string">&#x27;50%&#x27;</span>,</span><br><span class="line">        <span class="comment">// label: &#123;</span></span><br><span class="line">        <span class="comment">//   show: true,</span></span><br><span class="line">        <span class="comment">//   position: &#x27;bottom&#x27;,</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getData</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">myChart</span> = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="variable language_">this</span>.<span class="property">id</span>));</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">myChart</span>.<span class="title function_">setOption</span>(<span class="variable language_">this</span>.<span class="property">option</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> @<span class="title class_">Watch</span>(<span class="string">&#x27;option&#x27;</span>, &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  public <span class="title function_">handlerOption</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dataList</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> myChart = <span class="variable language_">this</span>.<span class="property">myChart</span>;</span><br><span class="line">        <span class="keyword">if</span> (myChart) &#123;</span><br><span class="line">          <span class="keyword">if</span> (newVal) &#123;</span><br><span class="line">            myChart.<span class="title function_">setOption</span>(newVal);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            myChart.<span class="title function_">setOption</span>(oldVal);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/12/13/yuque/Echarts/" data-id="cl9xpujsa0056dmopfmbm1uvo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/less补档" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/11/23/yuque/less%E8%A1%A5%E6%A1%A3/" class="article-date">
  <time datetime="2021-11-23T05:53:10.000Z" itemprop="datePublished">2021-11-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/11/23/yuque/less%E8%A1%A5%E6%A1%A3/">less补档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>除了基本的嵌套.还有一些常用的.</p>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@width:</span> <span class="number">10px</span>;</span><br><span class="line"><span class="variable">@height:</span> <span class="variable">@width</span> + <span class="number">20px</span>;</span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@width</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">@height</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="混合"><a href="#混合" class="headerlink" title="混合"></a>混合</h1><p>将一组属性从一个规则集包含到另一个规则集的方法.<br>比如将下面的类放到其他类中.</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bordered</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: dotted <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>放到下面中使用</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#111</span>;</span><br><span class="line">  <span class="selector-class">.bordered</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h1><h2 id="clearfix"><a href="#clearfix" class="headerlink" title="clearfix"></a>clearfix</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: block;</span><br><span class="line">  zoom: 1;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="selector-tag">heightL</span> <span class="number">0</span>;</span><br><span class="line">    <span class="selector-tag">clear</span>: <span class="selector-tag">both</span>;</span><br><span class="line">    <span class="selector-tag">visibility</span>: <span class="selector-tag">hidden</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h1><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@min768:</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>);</span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="keyword">@media</span> <span class="variable">@min768</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译为</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.element</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h1><p>导入一个<code>.less</code>文件,此文件中的所有变量就可以全部使用.<br>另外<code>.less</code>可以省略文件名.</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;library&quot;</span>; <span class="comment">//library.less</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;typo.css&quot;</span>;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/23/yuque/less%E8%A1%A5%E6%A1%A3/" data-id="cl9xpujtw008idmop15hahere" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/node处理excel输出json" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/11/03/yuque/node%E5%A4%84%E7%90%86excel%E8%BE%93%E5%87%BAjson/" class="article-date">
  <time datetime="2021-11-03T08:37:26.000Z" itemprop="datePublished">2021-11-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/11/03/yuque/node%E5%A4%84%E7%90%86excel%E8%BE%93%E5%87%BAjson/">node处理excel输出json</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>通过<code>node-xlsx</code>或者<code>js-xlsx</code>将数据表处理成 data 多维数组输出后自行处理.</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i node-xlsx</span><br></pre></td></tr></table></figure>

<p>新增文件夹,将 xlsx 文件放到<code>excel</code>文件夹下.<br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1635929012254-f166cfee-aae1-456e-b3e9-7d541515c42b.png#clientId=ucfce2243-d17c-4&from=ui&id=u7fc008c0&margin=%5Bobject%20Object%5D&name=iShot2021-11-03%2016.42.19.png&originHeight=192&originWidth=196&originalType=binary%E2%88%B6=1&size=13517&status=done&style=none&taskId=u5e063c68-5e01-4c83-b082-6fe82cc20ee" alt="iShot2021-11-03 16.42.19.png"></p>
<h1 id="文件预览"><a href="#文件预览" class="headerlink" title="文件预览"></a>文件预览</h1><p><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1635929153310-b8b62fd5-eb81-45c8-a804-cb86a77ef7f2.png#clientId=ucfce2243-d17c-4&from=ui&id=ubb720b73&margin=%5Bobject%20Object%5D&name=iShot2021-11-03%2016.45.35.png&originHeight=122&originWidth=223&originalType=binary%E2%88%B6=1&size=14251&status=done&style=none&taskId=ue1d3a1b8-1069-4287-8c02-e52571ba84d" alt="iShot2021-11-03 16.45.35.png"></p>
<h1 id="创建执行文件-index-js"><a href="#创建执行文件-index-js" class="headerlink" title="创建执行文件 index.js"></a>创建执行文件 index.js</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> xlsx = <span class="built_in">require</span>(<span class="string">&quot;node-xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//几列数据,返回name是表单几,data是数组数据</span></span><br><span class="line"><span class="keyword">const</span> excelData = xlsx.<span class="title function_">parse</span>(<span class="string">&quot;./excel/card.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(excelData)</span></span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     name: &quot;Sheet1&quot;,</span></span><br><span class="line"><span class="comment">//     data: [</span></span><br><span class="line"><span class="comment">//       [&quot;goods&quot;, &quot;feifan&quot;, &quot;jiujiu&quot;],</span></span><br><span class="line"><span class="comment">//       [&quot;屈50&quot;, 43, 44],</span></span><br><span class="line"><span class="comment">//       [&quot;呷50&quot;, 36, 33],</span></span><br><span class="line"><span class="comment">//       [&quot;德30&quot;, 27, 32],</span></span><br><span class="line"><span class="comment">//       [&quot;奈30&quot;, 20, 31],</span></span><br><span class="line"><span class="comment">//       [&quot;本50&quot;, 43.5, 44.2],</span></span><br><span class="line"><span class="comment">//       [&quot;本50&quot;, 43.5, 44.2],</span></span><br><span class="line"><span class="comment">//     ],</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// ];</span></span><br><span class="line"><span class="comment">//现在要做的就是把这个data,组合成想要的json格式,如下</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//         goods: &#x27;屈50&#x27;,</span></span><br><span class="line"><span class="comment">//         feifan: 43,</span></span><br><span class="line"><span class="comment">//         jiujiu: 44</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//         goods: &#x27;呷50&#x27;,</span></span><br><span class="line"><span class="comment">//         feifan: 36,</span></span><br><span class="line"><span class="comment">//         jiujiu: 33</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//         goods: &#x27;德30&#x27;,</span></span><br><span class="line"><span class="comment">//         feifan: 27,</span></span><br><span class="line"><span class="comment">//         jiujiu: 32</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//     ...</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure>

<h1 id="函数处理"><a href="#函数处理" class="headerlink" title="函数处理"></a>函数处理</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">handleExcel</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  excelData.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> xlsData = item.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">let</span> keyArr = xlsData[<span class="number">0</span>]; <span class="comment">//key的数组</span></span><br><span class="line">    <span class="keyword">let</span> dataArr = xlsData.<span class="title function_">slice</span>(<span class="number">1</span>); <span class="comment">//data的数组,除去第一行</span></span><br><span class="line"></span><br><span class="line">    dataArr.<span class="title function_">map</span>(<span class="function">(<span class="params">lineItem</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> arrItem = &#123;&#125;;</span><br><span class="line">      lineItem.<span class="title function_">map</span>(<span class="function">(<span class="params">i, index</span>) =&gt;</span></span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">assign</span>(arrItem, &#123; [keyArr[index]]: i &#125;)</span><br><span class="line">      ); <span class="comment">//再加一层[]是因为keyArr[index]是字符串</span></span><br><span class="line">      arr.<span class="title function_">push</span>(arrItem);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//文件输出方法</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">generatJSON</span> = (<span class="params">fileName, data</span>) =&gt; &#123;</span><br><span class="line">  fs.<span class="title function_">writeFile</span>(fileName, data, <span class="string">&quot;UTF-8&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">handleExcel</span>();</span><br><span class="line"><span class="title function_">generatJSON</span>(<span class="string">&quot;./data/data.json&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(arr, <span class="literal">null</span>, <span class="string">&quot;\t&quot;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node inde.<span class="property">js</span></span><br></pre></td></tr></table></figure>

<p>查看 data 文件夹下的输出文件</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/03/yuque/node%E5%A4%84%E7%90%86excel%E8%BE%93%E5%87%BAjson/" data-id="cl9xpujty008mdmop4dm82j9w" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/安卓原生打包" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/09/27/yuque/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F%E6%89%93%E5%8C%85/" class="article-date">
  <time datetime="2021-09-27T09:17:00.000Z" itemprop="datePublished">2021-09-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/09/27/yuque/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F%E6%89%93%E5%8C%85/">安卓原生打包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>下载 android Studio(4.1.1), JDK8,<br>安装完成后,导入 demo 项目(300M,).<br>开始初始化下载,有可能下载较慢,科学网即可.<br>完成后,项目同步有可能报错(Sync Project with Gradle Files).需要下载对应 SDK 版本.<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/yezip/article/details/108998454">sdk 报错解决方法</a></p>
<h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p>build &#x3D;&gt; Genenate Signed Budle&#x2F;APK<br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1632735936926-3dd60957-ad25-4d9a-9303-8e5b199f6380.png#clientId=ud8eed2ce-b12c-4&from=ui&id=u20e70d58&margin=%5Bobject%20Object%5D&name=WechatIMG1989.png&originHeight=880&originWidth=968&originalType=binary%E2%88%B6=1&size=250436&status=done&style=none&taskId=u8ed96517-9597-40a9-8247-84129788312" alt="WechatIMG1989.png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1632735946757-cc0004a6-c424-4775-aec7-50f9a85a4c71.png#clientId=ud8eed2ce-b12c-4&from=ui&id=u2dcf9ae4&margin=%5Bobject%20Object%5D&name=WechatIMG1990.png&originHeight=826&originWidth=1188&originalType=binary%E2%88%B6=1&size=100589&status=done&style=none&taskId=u66285518-2892-4c6c-9eb5-7b5c223ae1b" alt="WechatIMG1990.png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1632735954103-388521a6-e849-496f-9407-2afa711a02af.png#clientId=ud8eed2ce-b12c-4&from=ui&id=u5b2395a1&margin=%5Bobject%20Object%5D&name=WechatIMG1992.png&originHeight=826&originWidth=1188&originalType=binary%E2%88%B6=1&size=109109&status=done&style=none&taskId=u09ede0fe-b2d8-46af-b120-dac402aaeb1" alt="WechatIMG1992.png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1632735962717-da7f5dba-9e9f-48d2-b942-b682143448ef.png#clientId=ud8eed2ce-b12c-4&from=ui&id=u6418437e&margin=%5Bobject%20Object%5D&name=WechatIMG1994.png&originHeight=826&originWidth=1188&originalType=binary%E2%88%B6=1&size=85326&status=done&style=none&taskId=u350019ce-f319-4b5a-bd77-e451ce50e97" alt="WechatIMG1994.png"></p>
<h2 id="打包完成"><a href="#打包完成" class="headerlink" title="打包完成"></a>打包完成</h2><p><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1632736037814-1f6860cb-c78f-446f-a76b-acb7db15fbc7.png#clientId=ud8eed2ce-b12c-4&from=ui&id=ubffb4464&margin=%5Bobject%20Object%5D&name=WechatIMG2057.png&originHeight=217&originWidth=958&originalType=binary%E2%88%B6=1&size=82281&status=done&style=none&taskId=u14022146-90d8-45ac-9ee1-fe59104822b" alt="WechatIMG2057.png"></p>
<h1 id="H5-端-webview"><a href="#H5-端-webview" class="headerlink" title="H5 端 webview"></a>H5 端 webview</h1><h3 id="修改浏览器的固定-url"><a href="#修改浏览器的固定-url" class="headerlink" title="修改浏览器的固定 url"></a>修改浏览器的固定 url</h3><p>将 webview 用 HBuilderX 打开,修改<code>pages/index/webview.vue</code>中的 url 地址.</p>
<h2 id="打包成-wgt-包"><a href="#打包成-wgt-包" class="headerlink" title="打包成 wgt 包"></a>打包成 wgt 包</h2><p>将<code>webview.zip</code>解压.用 HBuilderX 修改后发行为原生 app,制作应用 wgt 包.生产包后修改后缀为 zip 解压.<br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1634366875716-11f4a6ce-0a6d-40e5-8047-a6832f53b99a.png#clientId=u8592e4fc-d636-4&from=ui&id=u2ea16012&margin=%5Bobject%20Object%5D&name=1.png&originHeight=1002&originWidth=1192&originalType=binary%E2%88%B6=1&size=321944&status=done&style=none&taskId=u6fe97e4f-af03-448d-9601-b329b052a52" alt="1.png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1632736814316-37430acc-faa8-4583-83d7-754e6c8e7ff6.png#clientId=ud8eed2ce-b12c-4&from=ui&id=u0c2d8502&margin=%5Bobject%20Object%5D&name=WechatIMG2086.png&originHeight=516&originWidth=446&originalType=binary%E2%88%B6=1&size=63110&status=done&style=none&taskId=u4da2e966-bed8-47d5-8282-e2c9d2859f6" alt="WechatIMG2086.png"><br>将解压后文件复制到<code>simpleDemo/src/main/assets/apps/__UNI__0DD8DA0/www</code><br>重新打包.</p>
<h2 id="logo-及启动图制作"><a href="#logo-及启动图制作" class="headerlink" title="logo 及启动图制作"></a>logo 及启动图制作</h2><p><a target="_blank" rel="noopener" href="https://console.eeui.app/tools/icons">logo 生成</a><br><a target="_blank" rel="noopener" href="https://console.eeui.app/tools/launchimage">启动图生成</a><br><img src="https://cdn.nlark.com/yuque/0/2021/png/473454/1632737000983-0205cf9a-915c-4156-85b3-794b5ad884c4.png#clientId=ud8eed2ce-b12c-4&from=ui&id=u251b0c54&margin=%5Bobject%20Object%5D&name=WechatIMG2093.png&originHeight=648&originWidth=788&originalType=binary%E2%88%B6=1&size=70873&status=done&style=none&taskId=u315c94c1-36c8-420a-8514-13e1e931a4e" alt="WechatIMG2093.png"><br>生成后复制到<code>/simpleDemo/src/main/res/drawable</code>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/09/27/yuque/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F%E6%89%93%E5%8C%85/" data-id="cl9xpujue009cdmop7o0w6qk0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/HTML补档" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/09/24/yuque/HTML%E8%A1%A5%E6%A1%A3/" class="article-date">
  <time datetime="2021-09-24T12:15:29.000Z" itemprop="datePublished">2021-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/09/24/yuque/HTML%E8%A1%A5%E6%A1%A3/">HTML补档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="图片的相对路径"><a href="#图片的相对路径" class="headerlink" title="图片的相对路径"></a>图片的相对路径</h2><p>图片的前缀不再使用固定的 url,可以加<code>/</code>给图片地址.就会自动在前面拼接上 url 的 origin 地址前缀.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例如</span></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&quot;/&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> baseURL + item.<span class="property">downloadPath</span>;</span><br><span class="line"><span class="comment">//例如</span></span><br><span class="line"><span class="string">&quot;/Rest/pc/file/download?&quot;</span> + item.<span class="property">url</span>;</span><br></pre></td></tr></table></figure>

<p>如果存在网关,则需要加上网关.</p>
<h2 id="export-和-export-default-区别"><a href="#export-和-export-default-区别" class="headerlink" title="export 和 export default 区别"></a>export 和 export default 区别</h2><ul>
<li>在一个文件或模块中，export、import 可以有多个，export default 仅有一个</li>
<li>通过 export 方式导出，在导入时要加{ }，export default 则不需要</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="keyword">let</span> sex = <span class="string">&quot;boy&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sex（sex不能加大括号）</span><br><span class="line"><span class="comment">//原本直接export sex外部是无法识别的，加上default就可以了.</span></span><br><span class="line"><span class="comment">//但是一个文件内最多只能有一个export default。</span></span><br><span class="line"><span class="comment">//其实此处相当于为sex变量值&quot;boy&quot;起了一个系统默认的变量名default，</span></span><br><span class="line"><span class="comment">//自然default只能有一个值，所以一个文件内不能有多个export default。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.js</span></span><br><span class="line">本质上，a.<span class="property">js</span>文件的<span class="keyword">export</span> <span class="keyword">default</span>输出一个叫做<span class="keyword">default</span>的变量，</span><br><span class="line"><span class="comment">//然后系统允许你为它取任意名字。所以可以为import的模块起任何变量名，且不需要用大括号包含</span></span><br><span class="line"><span class="keyword">import</span> any <span class="keyword">from</span> <span class="string">&quot;./a.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> any12 <span class="keyword">from</span> <span class="string">&quot;./a.js&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(any,any12)   <span class="comment">// boy,boy</span></span><br></pre></td></tr></table></figure>

<h1 id="defer-和-async-区别"><a href="#defer-和-async-区别" class="headerlink" title="defer 和 async 区别"></a>defer 和 async 区别</h1><p>区别主要在于一个执行时间,script 的执行时机.<br>两个网络请求都是异步的,不会阻塞浏览器解析 HTML.加载是都会加载,执行就有区别了.</p>
<p><code>defer</code>会在 dom 解析完之后执行,并且多个<code>defer</code>会按照顺序执行,<br><code>async</code>则是在 js 加载好之后就会执行脚本,并且多个<code>async</code>,哪个加载好就执行哪个</p>
<p>解析：<br>在没有 defer 或者 async 的情况下：会立即执行脚本,所以通常建议把 script 放在 body 最后<br><code>&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</code><br>async：有 async 的话,加载和渲染后续文档元素的过程将和 script.js 的加载与执行并行进行（异步）。<br>但是多个 js 文件的加载顺序不会按照书写顺序进行<br><code>&lt;script async src=&quot;script.js&quot;&gt;&lt;/script&gt;</code><br>defer：有 defer 的话,加载后续文档元素的过程将和 script.js 的加载并行进行（异步），但是 script.js 的执行要在所有元素解析完成之后，DOMContentLoaded 事件触发之前完成,并且多个 defer 会按照顺序进行加载。<br><code>&lt;script defer src=&quot;script.js&quot;&gt;&lt;/script&gt;</code></p>
<h1 id="link-和-import-区别"><a href="#link-和-import-区别" class="headerlink" title="link 和 @import 区别"></a>link 和 @import 区别</h1><p>作用: 样式的导入方式</p>
<ol>
<li>引入内容不同.<code>link</code>除了引入样式还可以引入图片等文件,<code>@import</code>只能引入 css.</li>
<li>加载顺序不同.<code>link</code>在页面加载时同时加载,<code>@import</code>需要等页面加载完.</li>
<li>兼容性不同.<code>link</code>是<code>XHTML</code>标签,无兼容性问题.<code>@import</code>低版本浏览器有可能不支持.</li>
<li>对 JS 支持不同.<code>link</code>支持用 js 控制 DOM 去改变样式.<code>@import</code>不支持.</li>
</ol>
<h1 id="为什么-link-用-href-获取资源-而-script-和-img-用-src"><a href="#为什么-link-用-href-获取资源-而-script-和-img-用-src" class="headerlink" title="为什么 link 用 href 获取资源,而 script 和 img 用 src?"></a>为什么 link 用 href 获取资源,而 script 和 img 用 src?</h1><p>link 用于在当前文档和引用资源建立联系,<br>src 用于替换当前元素.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href=<span class="string">&quot;common.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>在文档中添加 link 标签，浏览器会识别该文档为 css 文件，就会并行下载资源并且不会停止对当前文档的处理。这也是为什么建议使用 link 方式来加载 css，而不是使用@import 方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;a.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>当浏览器解析到该元素时，会暂停其他资源的下载和处理，直到将该资源加载、编译、执行完毕，图片和框架 等元素也如此，类似于将所指向资源嵌入当前标签内。这也是为什么将 js 脚本放在底部而不是头部</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/09/24/yuque/HTML%E8%A1%A5%E6%A1%A3/" data-id="cl9xpujsi005hdmop9ind655r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/uniapp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/08/16/yuque/uniapp/" class="article-date">
  <time datetime="2021-08-16T11:16:30.000Z" itemprop="datePublished">2021-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/08/16/yuque/uniapp/">uniapp</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="路由栈缓存与登录返回"><a href="#路由栈缓存与登录返回" class="headerlink" title="路由栈缓存与登录返回"></a>路由栈缓存与登录返回</h1><p>通过<code>getCurrentPages</code>获取 VNode,遍历后得到其中的 route.通过<code>uni.navigateBack()</code>跳转回之前页面.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">backPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pages = <span class="title function_">getCurrentPages</span>()</span><br><span class="line">    <span class="keyword">let</span> routerList = pages.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> item.<span class="property">route</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">let</span> delta = <span class="number">0</span></span><br><span class="line">    <span class="comment">//查找数组中有多少登录页</span></span><br><span class="line">    routerList.<span class="title function_">forEach</span>(<span class="function"><span class="params">url</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (url == <span class="string">&#x27;pages/workbench/login/index&#x27;</span>) &#123;</span><br><span class="line">        delta++</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//如果路由中全是登录页,则跳转到首页</span></span><br><span class="line">    <span class="keyword">if</span> (delta == routerList.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$u</span>.<span class="title function_">route</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;pages/index/index&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;tab&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//否则就返回相应的页面</span></span><br><span class="line">      uni.<span class="title function_">navigateBack</span>(&#123;</span><br><span class="line">        delta,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h3><p>只在<code>App.vue</code>中.<br>onlaunch 之类</p>
<h3 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h3><p>onload 之类</p>
<h3 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h3><p>created 之类</p>
<h5 id="Page-页面生命周期函数执行顺序"><a href="#Page-页面生命周期函数执行顺序" class="headerlink" title="Page 页面生命周期函数执行顺序"></a>Page 页面生命周期函数执行顺序</h5><p>beforeCreate &#x3D;&gt; onLoad &#x3D;&gt; onShow &#x3D;&gt; created &#x3D;&gt; beforeMount &#x3D;&gt; onReady &#x3D;&gt; mounted</p>
<h5 id="刷新数据后"><a href="#刷新数据后" class="headerlink" title="刷新数据后"></a>刷新数据后</h5><p>beforeUpdate &#x3D;&gt; updated</p>
<h2 id="监听实体按键后退"><a href="#监听实体按键后退" class="headerlink" title="监听实体按键后退"></a>监听实体按键后退</h2><p>页面生命周期中的<code>onBackPress</code>.<br>注意: 由于 uni.navigateBack() 同样会触发 onBackPress 函数。因此在 onBackPress 中直接调用 uni.navigateBack() 并始终返回 true 会引发死循环。<br>此时，需要根据 onBackPress 的回调对象中的 from 值来做处理，当来源是 ‘navigateBack’ 时，返回 false。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">onBackPress</span>(<span class="params">options</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (options.<span class="property">from</span> === <span class="string">&#x27;navigateBack&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="title function_">back</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">back</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                uni.<span class="title function_">navigateBack</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">delta</span>: <span class="number">2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h1 id="封装中断请求"><a href="#封装中断请求" class="headerlink" title="封装中断请求"></a>封装中断请求</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在请求类中设置requestTask,uiapp存在中止方法requestTask.abort()</span></span><br><span class="line"><span class="comment">//将所有请求放置到请求数组中,当某一项请求完成则清除,</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> requestTask = <span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">			options.<span class="property">complete</span> = <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">				<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">requestArray</span> = <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">requestArray</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> item.<span class="property">id</span> !== requestTask.<span class="property">id</span></span><br><span class="line">				&#125;);</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">      requestTask = uni.<span class="title function_">request</span>(options);</span><br><span class="line">			requestTask.<span class="property">id</span> = <span class="title function_">guid</span>(); <span class="comment">//使用随机数</span></span><br><span class="line">			<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">requestArray</span> = [...<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">requestArray</span>,requestTask]</span><br><span class="line"></span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用</span></span><br><span class="line">    <span class="title function_">clearTask</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">requestArray</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        item &amp;&amp; item.<span class="title function_">abort</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//调用时添加到对应发请求处,如果该请求需要终止,就可以终止</span></span><br></pre></td></tr></table></figure>

<h2 id="uniapp-中-eCharts-在-h5-端导致-tooltip-不显示问题"><a href="#uniapp-中-eCharts-在-h5-端导致-tooltip-不显示问题" class="headerlink" title="uniapp 中 eCharts 在 h5 端导致 tooltip 不显示问题"></a>uniapp 中 eCharts 在 h5 端导致 tooltip 不显示问题</h2><p>因为会在 h5 端先判断环境,直接为 wx 环境导致,所以应将 wx 设置为<code>undefined</code>或<code>&#123;&#125;</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.ts</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">wx</span>  = &#123;&#125;</span><br><span class="line"><span class="comment">//如果是ts,全部变量声明也要写</span></span><br><span class="line"><span class="comment">//xx.d.ts</span></span><br><span class="line">declare <span class="variable language_">global</span> &#123;</span><br><span class="line">  interface <span class="title class_">Window</span> &#123;</span><br><span class="line">    wx?: any;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/08/16/yuque/uniapp/" data-id="cl9xpuju1008rdmopgi416lyr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuque/JS工具" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/08/02/yuque/JS%E5%B7%A5%E5%85%B7/" class="article-date">
  <time datetime="2021-08-02T06:38:27.000Z" itemprop="datePublished">2021-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/08/02/yuque/JS%E5%B7%A5%E5%85%B7/">JS工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="数组添加优雅写法"><a href="#数组添加优雅写法" class="headerlink" title="数组添加优雅写法"></a>数组添加优雅写法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(todo) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setTodoList</span>(<span class="function">(<span class="params">todoList</span>) =&gt;</span> [...todoList, todo]);</span><br><span class="line">&#125;; <span class="comment">//react hooks</span></span><br></pre></td></tr></table></figure>

<h2 id="金额格式化"><a href="#金额格式化" class="headerlink" title="金额格式化"></a>金额格式化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * formatMoney(s,type)</span></span><br><span class="line"><span class="comment"> * 功能：金额按千位逗号分隔，负号用&#x27;-&#x27;号</span></span><br><span class="line"><span class="comment"> * 参数：s，需要格式化的金额数值.</span></span><br><span class="line"><span class="comment"> * 参数：type,判断格式化后的金额是否需要小数位.</span></span><br><span class="line"><span class="comment"> * 返回：返回格式化后的数值字符串.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatMoney</span>(<span class="params">s, type</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> result = s;</span><br><span class="line">  <span class="keyword">if</span> (s &lt; <span class="number">0</span>) s = <span class="number">0</span> - s;</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/[^0-9\.]/</span>.<span class="title function_">test</span>(s)) <span class="keyword">return</span> <span class="string">&quot;0.00&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (s == <span class="literal">null</span> || s == <span class="string">&quot;null&quot;</span> || s == <span class="string">&quot;&quot;</span>) <span class="keyword">return</span> <span class="string">&quot;0.00&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (type &gt; <span class="number">0</span>) s = <span class="keyword">new</span> <span class="title class_">Number</span>(s).<span class="title function_">toFixed</span>(type);</span><br><span class="line">  s = s.<span class="title function_">toString</span>().<span class="title function_">replace</span>(<span class="regexp">/^(\d*)$/</span>, <span class="string">&quot;$1.&quot;</span>);</span><br><span class="line">  s = (s + <span class="string">&quot;00&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/(\d*\.\d\d)\d*/</span>, <span class="string">&quot;$1&quot;</span>);</span><br><span class="line">  s = s.<span class="title function_">replace</span>(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;,&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> re = <span class="regexp">/(\d)(\d&#123;3&#125;,)/</span>;</span><br><span class="line">  <span class="keyword">while</span> (re.<span class="title function_">test</span>(s)) s = s.<span class="title function_">replace</span>(re, <span class="string">&quot;$1,$2&quot;</span>);</span><br><span class="line">  s = s.<span class="title function_">replace</span>(<span class="regexp">/,(\d\d)$/</span>, <span class="string">&quot;.$1&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (type == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = s.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (a[<span class="number">1</span>] == <span class="string">&quot;00&quot;</span>) &#123;</span><br><span class="line">      s = a[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (result &lt; <span class="number">0</span>) result = <span class="string">&quot;-&quot;</span> + s;</span><br><span class="line">  <span class="keyword">else</span> result = s;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="手机号固话正则校验"><a href="#手机号固话正则校验" class="headerlink" title="手机号固话正则校验"></a>手机号固话正则校验</h2><p>支持手机号码，3-4 位区号，7-8 位直播号码，1－4 位分机号,支持支持手机号码，3-4 位区号，7-8 位直播号码，1－4 位分机号</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(^(<span class="number">1</span>[<span class="number">3</span>|<span class="number">4</span>|<span class="number">5</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]\d&#123;<span class="number">8</span>&#125;)$|^((\d&#123;<span class="number">7</span>,<span class="number">8</span>&#125;)|(\d&#123;<span class="number">4</span>&#125;|\d&#123;<span class="number">3</span>&#125;)-(\d&#123;<span class="number">7</span>,<span class="number">8</span>&#125;)|(\d&#123;<span class="number">4</span>&#125;|\d&#123;<span class="number">3</span>&#125;)-(\d&#123;<span class="number">7</span>,<span class="number">8</span>&#125;)-(\d&#123;<span class="number">4</span>&#125;|\d&#123;<span class="number">3</span>&#125;|\d&#123;<span class="number">2</span>&#125;|\d&#123;<span class="number">1</span>&#125;)|(\d&#123;<span class="number">7</span>,<span class="number">8</span>&#125;)-(\d&#123;<span class="number">4</span>&#125;|\d&#123;<span class="number">3</span>&#125;|\d&#123;<span class="number">2</span>&#125;|\d&#123;<span class="number">1</span>&#125;))$)/g;</span><br></pre></td></tr></table></figure>

<h2 id="JS-去重"><a href="#JS-去重" class="headerlink" title="JS 去重"></a>JS 去重</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//filter去重</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">expertList</span> = res.<span class="title function_">filter</span>(<span class="function">(<span class="params">item,index</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">findIndex</span>(<span class="function"><span class="params">i</span> =&gt;</span>item.<span class="property">userId</span> == i.<span class="property">userId</span>) == index</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//reduce去重</span></span><br><span class="line"><span class="keyword">const</span> hash = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> newArray = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">item, next</span>)=&gt;</span>&#123;</span><br><span class="line">  hash[next.<span class="property">key</span>] ? <span class="string">&#x27;&#x27;</span> : hash[next.<span class="property">key</span>] = <span class="literal">true</span> &amp;&amp; item.<span class="title function_">push</span>(next);</span><br><span class="line">  <span class="keyword">return</span> item;</span><br><span class="line">&#125;,[])</span><br><span class="line"></span><br><span class="line"><span class="comment">//new Set去重</span></span><br><span class="line"><span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">arr</span>) =&gt;</span> !res.<span class="title function_">has</span>(arr.<span class="property">id</span>) &amp;&amp; res.<span class="title function_">set</span>(arr.<span class="property">id</span>, <span class="number">1</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="多组对象转化数组-reduce"><a href="#多组对象转化数组-reduce" class="headerlink" title="多组对象转化数组(reduce)"></a>多组对象转化数组(reduce)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">normal</span>: &#123;</span><br><span class="line">    <span class="comment">//标准值</span></span><br><span class="line">    <span class="attr">timeOpenRate</span>: <span class="number">93.6</span>, <span class="comment">//时间开动率</span></span><br><span class="line">    <span class="attr">funOpenRate</span>: <span class="number">95.8</span>, <span class="comment">//性能开动率</span></span><br><span class="line">    <span class="attr">successRate</span>: <span class="number">97.5</span>, <span class="comment">//合格品率</span></span><br><span class="line">    <span class="attr">oeeRate</span>: <span class="number">87.43</span>, <span class="comment">//OEE</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actual</span>: &#123;</span><br><span class="line">    <span class="comment">//实际值</span></span><br><span class="line">    <span class="attr">timeOpenRate</span>: <span class="number">100.0</span>,</span><br><span class="line">    <span class="attr">funOpenRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    <span class="attr">successRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    <span class="attr">oeeRate</span>: <span class="number">0.0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">last</span>: &#123;</span><br><span class="line">    <span class="comment">//同期</span></span><br><span class="line">    <span class="attr">timeOpenRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    <span class="attr">funOpenRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    <span class="attr">successRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    <span class="attr">oeeRate</span>: <span class="number">0.0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj.<span class="property">normal</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">pre, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> now = &#123;</span><br><span class="line">    <span class="attr">type</span>: next,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    now[item] = obj[item][next];</span><br><span class="line">  &#125;);</span><br><span class="line">  pre.<span class="title function_">push</span>(now);</span><br><span class="line">  <span class="keyword">return</span> pre;</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`r`</span>, list);</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法二</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(obj.<span class="property">normal</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">type</span>: e,</span><br><span class="line">  ...<span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">map</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> [key, obj[key][e]];</span><br><span class="line">    &#125;)</span><br><span class="line">  ),</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     type: &#x27;timeOpenRate&#x27;,</span></span><br><span class="line"><span class="comment">//     actual:&#x27;&#x27;, //actual.timeOpenRate的值</span></span><br><span class="line"><span class="comment">//     normal:&#x27;&#x27;,//normal.timeOpenRate的值</span></span><br><span class="line"><span class="comment">//     last:&#x27;&#x27;,//last.timeOpenRate的值</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     type: &#x27;funOpenRate&#x27;,</span></span><br><span class="line"><span class="comment">//     actual:&#x27;&#x27;,//actual.funOpenRate的值</span></span><br><span class="line"><span class="comment">//     normal:&#x27;&#x27;,//normal.funOpenRate的值</span></span><br><span class="line"><span class="comment">//     last:&#x27;&#x27;,//last.funOpenRate的值</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     type: &#x27;successRate&#x27;,</span></span><br><span class="line"><span class="comment">//     actual:&#x27;&#x27;,</span></span><br><span class="line"><span class="comment">//     normal:&#x27;&#x27;,</span></span><br><span class="line"><span class="comment">//     last:&#x27;&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//     type: &#x27;oeeRate&#x27;,</span></span><br><span class="line"><span class="comment">//     actual:&#x27;&#x27;,</span></span><br><span class="line"><span class="comment">//     normal:&#x27;&#x27;,</span></span><br><span class="line"><span class="comment">//     last:&#x27;&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure>

<h2 id="多数组对象转换"><a href="#多数组对象转换" class="headerlink" title="多数组对象转换"></a>多数组对象转换</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dimensions: [&#x27;shiftDate&#x27;, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;D&#x27;],</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     shiftDate: &#x27;20211123&#x27;,</span></span><br><span class="line"><span class="comment">//     B:&#x27;&#x27;oeeRate, //item.oeeRate的值</span></span><br><span class="line"><span class="comment">//     D:&#x27;&#x27;oeeRate,//item.oeeRate的值</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     shiftDate: &#x27;20211112&#x27;,</span></span><br><span class="line"><span class="comment">//      A:&#x27;&#x27;oeeRate, //item.oeeRate的值</span></span><br><span class="line"><span class="comment">//     B:&#x27;&#x27;oeeRate,//item.oeeRate的值</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">  [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">timeOpenRate</span>: <span class="number">100.0</span>,</span><br><span class="line">      <span class="attr">teamGroup</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">      <span class="attr">funOpenRate</span>: <span class="number">4738500.0</span>,</span><br><span class="line">      <span class="attr">successRate</span>: <span class="number">0.0</span>,</span><br><span class="line">      <span class="attr">shiftDate</span>: <span class="string">&quot;20211123&quot;</span>,</span><br><span class="line">      <span class="attr">oeeRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">timeOpenRate</span>: <span class="number">96.67</span>,</span><br><span class="line">      <span class="attr">teamGroup</span>: <span class="string">&quot;D&quot;</span>,</span><br><span class="line">      <span class="attr">funOpenRate</span>: <span class="number">6700200.0</span>,</span><br><span class="line">      <span class="attr">successRate</span>: <span class="number">0.0</span>,</span><br><span class="line">      <span class="attr">shiftDate</span>: <span class="string">&quot;20211123&quot;</span>,</span><br><span class="line">      <span class="attr">oeeRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">timeOpenRate</span>: <span class="number">100.0</span>,</span><br><span class="line">      <span class="attr">teamGroup</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">      <span class="attr">funOpenRate</span>: <span class="number">170908400.0</span>,</span><br><span class="line">      <span class="attr">successRate</span>: <span class="number">0.0</span>,</span><br><span class="line">      <span class="attr">shiftDate</span>: <span class="string">&quot;20211112&quot;</span>,</span><br><span class="line">      <span class="attr">oeeRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">timeOpenRate</span>: <span class="number">100.0</span>,</span><br><span class="line">      <span class="attr">teamGroup</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">      <span class="attr">funOpenRate</span>: <span class="number">181821900.0</span>,</span><br><span class="line">      <span class="attr">successRate</span>: <span class="number">0.0</span>,</span><br><span class="line">      <span class="attr">shiftDate</span>: <span class="string">&quot;20211112&quot;</span>,</span><br><span class="line">      <span class="attr">oeeRate</span>: <span class="number">0.0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">];</span><br><span class="line">arr.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">  item.<span class="title function_">map</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">    obj.<span class="property">shiftDate</span> = i.<span class="property">shiftDate</span>;</span><br><span class="line">    obj[i.<span class="property">teamGroup</span>] = i.<span class="property">oeeRate</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="对象映射-mapping"><a href="#对象映射-mapping" class="headerlink" title="对象映射 mapping"></a>对象映射 mapping</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//订单状态颜色</span></span><br><span class="line">    <span class="title function_">handlerStatus</span>(<span class="params">status</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> mapping = &#123;</span><br><span class="line">        <span class="number">10</span>: <span class="string">&quot;info&quot;</span>,</span><br><span class="line">        <span class="number">20</span>: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">        <span class="number">30</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        <span class="number">40</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">        <span class="number">50</span>: <span class="string">&quot;primary&quot;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">return</span> mapping[status];</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="同名属性赋值"><a href="#同名属性赋值" class="headerlink" title="同名属性赋值"></a>同名属性赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历child(未赋值)中的属性，将parent中的同名属性赋值给child</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">this</span>.<span class="property">child</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">child</span>[key] = <span class="variable language_">this</span>.<span class="property">parent</span>[key];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="同名属性赋值-浅拷贝"><a href="#同名属性赋值-浅拷贝" class="headerlink" title="同名属性赋值(浅拷贝)"></a>同名属性赋值(浅拷贝)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  actualCustomerCode,</span><br><span class="line">  actualCustomerName,</span><br><span class="line">  demandId,</span><br><span class="line">  demandMonth,</span><br><span class="line">  machineCode,</span><br><span class="line">  productParentCode,</span><br><span class="line">  productParentName,</span><br><span class="line">  saleNetType,</span><br><span class="line">  saleNetworkCode,</span><br><span class="line">  sellerCode,</span><br><span class="line">&#125; = form;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ssdhOrderDemand</span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(</span><br><span class="line">  &#123;&#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    actualCustomerCode,</span><br><span class="line">    actualCustomerName,</span><br><span class="line">    demandId,</span><br><span class="line">    demandMonth,</span><br><span class="line">    machineCode,</span><br><span class="line">    productParentCode,</span><br><span class="line">    productParentName,</span><br><span class="line">    saleNetType,</span><br><span class="line">    saleNetworkCode,</span><br><span class="line">    sellerCode,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="数组对象中按顺序插入另一个数组的子项"><a href="#数组对象中按顺序插入另一个数组的子项" class="headerlink" title="数组对象中按顺序插入另一个数组的子项"></a>数组对象中按顺序插入另一个数组的子项</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [</span><br><span class="line">  &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">a</span>: <span class="number">5</span>, <span class="attr">b</span>: <span class="number">6</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> subList = [&#123; <span class="attr">c</span>: <span class="number">11</span> &#125;, &#123; <span class="attr">c</span>: <span class="number">22</span> &#125;, &#123; <span class="attr">c</span>: <span class="number">33</span> &#125;];</span><br><span class="line"><span class="keyword">let</span> arr = list.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, item, subList[index]));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br></pre></td></tr></table></figure>

<h1 id="对象转数组"><a href="#对象转数组" class="headerlink" title="对象转数组"></a>对象转数组</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> arr = [&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">b</span>: <span class="number">2</span> &#125;];</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">map</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> (&#123; [i]: obj[i] &#125;));</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">entries</span>(obj).<span class="title function_">map</span>(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> (&#123; [k]: v &#125;));</span><br></pre></td></tr></table></figure>

<h2 id="运算符的顺序"><a href="#运算符的顺序" class="headerlink" title="||运算符的顺序"></a><code>||</code>运算符的顺序</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="string">&quot;cc&quot;</span>;</span><br><span class="line">a = b || c ? <span class="number">123</span> : <span class="number">321</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">//123</span></span><br></pre></td></tr></table></figure>

<p>上面示例的顺序是先判断 b 或 c 是否存在,再进行三元运算</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&quot;bb&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="string">&quot;cc&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a == b || c); <span class="comment">//cc</span></span><br></pre></td></tr></table></figure>

<p>最后判断不是<code>a</code>是否等于 b 或 c,而是 a 是否等于 b,c 是否存在.<br>正常应该是两边都判断是否相等</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a == b || a == c);</span><br></pre></td></tr></table></figure>

<h2 id="return"><a href="#return" class="headerlink" title="return"></a>return</h2><p>只有一层 if 时,可以使用<code>return</code>中断.<br>多层 if 时,建议设置变量,例如<code>flag</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (flag) <span class="keyword">return</span>;</span><br></pre></td></tr></table></figure>

<h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//filter =&gt;map,push</span></span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"><span class="keyword">let</span> item = <span class="string">&quot;A&quot;</span>;</span><br><span class="line"><span class="comment">// this.category.map(i =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   item.includes(i.key) ? arr.push(i) : &quot;&quot;;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line">arr = <span class="variable language_">this</span>.<span class="property">category</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> item.<span class="title function_">includes</span>(i.<span class="property">key</span>));</span><br></pre></td></tr></table></figure>

<h3 id="toFixed"><a href="#toFixed" class="headerlink" title="toFixed"></a>toFixed</h3><p>oFixed()方法可把 Number 四舍五入为指定小数位数的数字.</p>
<h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><p>接收 4 个参数,acc(累加器),cur(当前值),idx(当前索引),src(源数组)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算数组中每个元素出现的次数</span></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Tiff&quot;</span>, <span class="string">&quot;Bruce&quot;</span>, <span class="string">&quot;Alice&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> countedNames = names.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">allNames, name</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (name <span class="keyword">in</span> allNames) &#123;</span><br><span class="line">    allNames[name]++;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    allNames[name] = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> allNames;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// countedNames is:</span></span><br><span class="line"><span class="comment">// &#123; &#x27;Alice&#x27;: 2, &#x27;Bob&#x27;: 1, &#x27;Tiff&#x27;: 1, &#x27;Bruce&#x27;: 1 &#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果code相同,就给name字符串加1做出区分.(比如,南风仓库1)</span></span><br><span class="line"><span class="keyword">let</span> data = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&quot;H1&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;东仓库&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&quot;H2&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;南仓库&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&quot;c&quot;</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&quot;H2&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;南仓库&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&quot;H3&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;西仓库&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> r = data.<span class="title function_">reduce</span>(</span><br><span class="line">  <span class="function">(<span class="params">prev, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> length = prev.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">code</span> === next.<span class="property">code</span>).<span class="property">length</span> || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    prev.<span class="title function_">push</span>(&#123;</span><br><span class="line">      ...next,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;next.name&#125;</span><span class="subst">$&#123;length&#125;</span>`</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">  &#125;,</span><br><span class="line">  [data[<span class="number">0</span>]]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组去重</span></span><br><span class="line"><span class="keyword">let</span> myArray = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;e&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> ordArray = myArray.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (acc.<span class="title function_">indexOf</span>(cur) === -<span class="number">1</span>) &#123;</span><br><span class="line">    acc.<span class="title function_">push</span>(cur);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> acc;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//如何取出最长的一个数组出来</span></span><br><span class="line"></span><br><span class="line">list.<span class="title function_">reduce</span>(<span class="function">(<span class="params">res, &#123; arr &#125;</span>) =&gt;</span> (res.<span class="property">length</span> &gt; arr.<span class="property">length</span> ? res : arr), []);</span><br></pre></td></tr></table></figure>

<h2 id="fill-数据填充"><a href="#fill-数据填充" class="headerlink" title="fill 数据填充"></a>fill 数据填充</h2><p>后端只返回空数组或者短于要求的数组,其他填充为 0,或者固定值.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> arr = [...list, ...[...<span class="title class_">Array</span>(<span class="number">12</span> - list.<span class="property">length</span>)].<span class="title function_">fill</span>(<span class="number">0</span>)].<span class="title function_">fill</span>(</span><br><span class="line">  &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  list.<span class="property">length</span>,</span><br><span class="line">  <span class="number">12</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h1 id="判断空对象"><a href="#判断空对象" class="headerlink" title="判断空对象"></a>判断空对象</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isEmpty</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    value === <span class="literal">null</span> ||</span><br><span class="line">    value === <span class="literal">undefined</span> ||</span><br><span class="line">    (<span class="keyword">typeof</span> value === <span class="string">&quot;object&quot;</span> &amp;&amp; <span class="title class_">Object</span>.<span class="title function_">keys</span>(value).<span class="property">length</span> === <span class="number">0</span>)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="修改数组对象"><a href="#修改数组对象" class="headerlink" title="修改数组对象"></a>修改数组对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; hyBlock, cpBlock, txBlock &#125; = data.<span class="property">data</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">list</span> = hyBlock.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span>(&#123;<span class="attr">label</span>: item.<span class="property">labelTitle</span>, <span class="attr">value</span>: item.<span class="property">labelId</span>&#125;))</span><br><span class="line"><span class="comment">//同名可以使用解构</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">list</span> = hyBlock.<span class="title function_">map</span>(&#123;labelTitle, labelId&#125;) =&gt;(&#123;labelTitle, labelId&#125;))</span><br></pre></td></tr></table></figure>

<h2 id="文章摘要截取"><a href="#文章摘要截取" class="headerlink" title="文章摘要截取"></a>文章摘要截取</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解析字符串</span></span><br><span class="line"><span class="title function_">htmlSlice</span>(<span class="params">content</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(content)&#123;</span><br><span class="line">        <span class="keyword">let</span> re1 = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;&lt;.+?&gt;&quot;</span>,<span class="string">&quot;g&quot;</span>);<span class="comment">//匹配html标签的正则表达式，&quot;g&quot;是搜索匹配多个符合的内容</span></span><br><span class="line">        <span class="keyword">let</span> re2 = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;&amp;.+?;&quot;</span>,<span class="string">&quot;g&quot;</span>);<span class="comment">//匹配html标签的正则表达式，&quot;g&quot;是搜索匹配多个符合的内容</span></span><br><span class="line">        <span class="keyword">let</span> msg1 = content.<span class="title function_">replace</span>(re1,<span class="string">&#x27;&#x27;</span>);<span class="comment">//执行替换成空字符</span></span><br><span class="line">        <span class="keyword">let</span> msg = msg1.<span class="title function_">replace</span>(re2,<span class="string">&#x27;&quot;&#x27;</span>);<span class="comment">//执行替换成空字符</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(msg.<span class="property">length</span> &gt; <span class="number">100</span>)&#123;</span><br><span class="line">          msg = msg.<span class="title function_">substr</span>(<span class="number">0</span>,<span class="number">100</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(msg.<span class="property">length</span>,<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> msg</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//css限定行数</span></span><br><span class="line">.<span class="property">content</span> &#123;</span><br><span class="line">  <span class="attr">overflow</span>: hidden;</span><br><span class="line">  text-<span class="attr">overflow</span>: ellipsis;</span><br><span class="line">  <span class="attr">display</span>: -webkit-box;</span><br><span class="line">  -webkit-line-<span class="attr">clamp</span>: <span class="number">4</span>;</span><br><span class="line">  -webkit-box-<span class="attr">orient</span>: vertical;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="表单重置"><a href="#表单重置" class="headerlink" title="表单重置"></a>表单重置</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">resetForm</span>(<span class="params">opt</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(opt).<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (opt[item] <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span><br><span class="line">      opt[item] = []</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (opt[item] <span class="keyword">instanceof</span> <span class="title class_">Object</span>) &#123;</span><br><span class="line">      opt[item] = &#123;&#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      opt[item] = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="使用-picker-组件自制时间区间"><a href="#使用-picker-组件自制时间区间" class="headerlink" title="使用 picker 组件自制时间区间"></a>使用 picker 组件自制时间区间</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//view</span></span><br><span class="line">&lt;picker mode=<span class="string">&quot;date&quot;</span> :value=<span class="string">&quot;defaultTime&quot;</span> :end=<span class="string">&quot;startDate&quot;</span> fields=<span class="string">&quot;day&quot;</span> @change=<span class="string">&quot;getData(&#x27;start&#x27;,$event)&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;line-box1 u-margin-right-10&quot;</span>&gt;</span>&#123;&#123;  &quot;起始日期&quot; &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/picker&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">&quot;date&quot;</span> <span class="attr">:end</span>=<span class="string">&quot;endDate&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;day&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;getData(&#x27;end&#x27;,$event)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;line-box1 u-margin-right-10&quot;</span>&gt;</span>&#123;&#123;  &quot;截止日期&quot; &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span></span><br><span class="line"><span class="comment">//script</span></span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> timeD = <span class="variable language_">this</span>.<span class="property">$u</span>.<span class="title function_">timeFormat</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() - <span class="number">7</span> * <span class="number">24</span> * <span class="number">3600</span> * <span class="number">1000</span> <span class="comment">//,默认7天范围</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">startDate</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//要return的日期比endDate数值小或===</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">endDate</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">endDate</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">      <span class="keyword">let</span> year = date.<span class="title function_">getFullYear</span>();</span><br><span class="line">      <span class="keyword">let</span> month = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">let</span> day = date.<span class="title function_">getDate</span>();</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;month&#125;</span>-<span class="subst">$&#123;day&#125;</span>`</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="格式化字符串时间"><a href="#格式化字符串时间" class="headerlink" title="格式化字符串时间"></a>格式化字符串时间</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将&#x27;20211102&#x27;格式化为&#x27;2021-11-02&#x27;</span></span><br><span class="line"><span class="title function_">formDateStr</span>(<span class="params">str</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">4</span>)+<span class="string">&#x27;-&#x27;</span>+str.<span class="title function_">slice</span>(<span class="number">4</span>,<span class="number">6</span>)+<span class="string">&#x27;-&#x27;</span>+str.<span class="title function_">slice</span>(<span class="number">6</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="仅修改对象数组里某个值"><a href="#仅修改对象数组里某个值" class="headerlink" title="仅修改对象数组里某个值"></a>仅修改对象数组里某个值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;bbb&quot;</span>, <span class="attr">age</span>: <span class="number">11</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;ccc&quot;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> newList = list.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (&#123;</span><br><span class="line">  ...item,</span><br><span class="line">  <span class="attr">age</span>: item.<span class="property">age</span> + <span class="number">1</span>,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<h2 id="判断类型的方法-toString"><a href="#判断类型的方法-toString" class="headerlink" title="判断类型的方法 toString()"></a>判断类型的方法 toString()</h2><p>toString() 是 Object 的原型方法，调用该方法，默认返回当前对象的 [[Class]] 。这是一个内部属性，其格式为 [object Xxx] ，其中 Xxx 就是对象的类型。</p>
<p>对于 Object 对象，直接调用 toString() 就能返回 [object Object] 。而对于其他对象，则需要通过 call &#x2F; apply 来调用才能返回正确的类型信息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// [object String]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="number">1</span>); <span class="comment">// [object Number]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="literal">true</span>); <span class="comment">// [object Boolean]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="title class_">Symbol</span>()); <span class="comment">//[object Symbol]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="literal">undefined</span>); <span class="comment">// [object Undefined]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="literal">null</span>); <span class="comment">// [object Null]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">Function</span>()); <span class="comment">// [object Function]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">Date</span>()); <span class="comment">// [object Date]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>([]); <span class="comment">// [object Array]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>()); <span class="comment">// [object RegExp]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">Error</span>()); <span class="comment">// [object Error]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="variable language_">document</span>); <span class="comment">// [object HTMLDocument]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="variable language_">window</span>); <span class="comment">//[object global] window 是全局对象 global 的引用</span></span><br></pre></td></tr></table></figure>

<p>使用函数封装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">filterClassName</span>(<span class="params">names</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> type = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(names).<span class="title function_">slice</span>(<span class="number">8</span>, -<span class="number">1</span>).<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;array&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> names.<span class="property">length</span> ? names.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;object&quot;</span>:</span><br><span class="line">      <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(names);</span><br><span class="line">      <span class="keyword">let</span> newClass = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span> keys.<span class="property">length</span></span><br><span class="line">        ? keys.<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> (newClass += names[key] + <span class="string">&quot; &quot;</span>))</span><br><span class="line">        : <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;string&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> names;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;number&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> names.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Json-转-tree"><a href="#Json-转-tree" class="headerlink" title="Json 转 tree"></a>Json 转 tree</h2><p>一维数组转树形结构</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&quot;25&quot;</span>,</span><br><span class="line">    <span class="attr">team</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">    <span class="attr">item</span>: <span class="string">&quot;SSR&quot;</span>,</span><br><span class="line">    <span class="attr">itemNum</span>: <span class="string">&quot;300&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&quot;25&quot;</span>,</span><br><span class="line">    <span class="attr">team</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">    <span class="attr">item</span>: <span class="string">&quot;SSk&quot;</span>,</span><br><span class="line">    <span class="attr">itemNum</span>: <span class="string">&quot;500&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Jim&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&quot;22&quot;</span>,</span><br><span class="line">    <span class="attr">team</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    <span class="attr">item</span>: <span class="string">&quot;KKR&quot;</span>,</span><br><span class="line">    <span class="attr">itemNum</span>: <span class="string">&quot;300&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Jim&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&quot;22&quot;</span>,</span><br><span class="line">    <span class="attr">team</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    <span class="attr">item</span>: <span class="string">&quot;KKS&quot;</span>,</span><br><span class="line">    <span class="attr">itemNum</span>: <span class="string">&quot;500&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> finList = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&quot;25&quot;</span>,</span><br><span class="line">    <span class="attr">team</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">    <span class="attr">itemGroup</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;SSR&quot;</span>,</span><br><span class="line">        <span class="attr">itemNum</span>: <span class="string">&quot;300&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;SSk&quot;</span>,</span><br><span class="line">        <span class="attr">itemNum</span>: <span class="string">&quot;500&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Jim&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&quot;22&quot;</span>,</span><br><span class="line">    <span class="attr">team</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    <span class="attr">itemGroup</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;KKR&quot;</span>,</span><br><span class="line">        <span class="attr">itemNum</span>: <span class="string">&quot;300&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;KKS&quot;</span>,</span><br><span class="line">        <span class="attr">itemNum</span>: <span class="string">&quot;500&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">convert</span>(<span class="params">list</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [];</span><br><span class="line">  list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">i, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; name, age, team, item, itemNum &#125; = i;</span><br><span class="line">    <span class="keyword">if</span> (!arr[name]) &#123;</span><br><span class="line">      arr[name] = &#123;</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        team,</span><br><span class="line">        <span class="attr">teamGroup</span>: [],</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[name].<span class="property">teamGroup</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">      item,</span><br><span class="line">      itemNum,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">values</span>(arr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> aaa = <span class="title function_">convert</span>(list);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(aaa);</span><br></pre></td></tr></table></figure>

<h3 id="不同-id-的情况"><a href="#不同-id-的情况" class="headerlink" title="不同 id 的情况"></a>不同 id 的情况</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flatArr = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;解忧杂货铺1&quot;</span>, <span class="attr">parent_id</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&quot;解忧杂货铺2&quot;</span>, <span class="attr">parent_id</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&quot;解忧杂货铺2-1&quot;</span>, <span class="attr">parent_id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">title</span>: <span class="string">&quot;解忧杂货铺3-1&quot;</span>, <span class="attr">parent_id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">title</span>: <span class="string">&quot;解忧杂货铺4-1&quot;</span>, <span class="attr">parent_id</span>: <span class="number">4</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">title</span>: <span class="string">&quot;解忧杂货铺2-2&quot;</span>, <span class="attr">parent_id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">convert</span>(<span class="params">list</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">const</span> map = list.<span class="title function_">reduce</span>(<span class="function">(<span class="params">res, v</span>) =&gt;</span> ((res[v.<span class="property">id</span>] = v), res), &#123;&#125;);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">parent_id</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      res.<span class="title function_">push</span>(item);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">parent_id</span> <span class="keyword">in</span> map) &#123;</span><br><span class="line">      <span class="keyword">const</span> parent = map[item.<span class="property">parent_id</span>];</span><br><span class="line">      parent.<span class="property">children</span> = parent.<span class="property">children</span> || [];</span><br><span class="line">      parent.<span class="property">children</span>.<span class="title function_">push</span>(item);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> returnTree = <span class="title function_">convert</span>(flatArr);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(returnTree);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/08/02/yuque/JS%E5%B7%A5%E5%85%B7/" data-id="cl9xpujsn005wdmop5ir2a2l9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/8/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/HTML%E5%9F%BA%E7%A1%80/">HTML基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/HTTP%E5%9F%BA%E7%A1%80/">HTTP基础</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/">HTML5</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/canvas/">canvas</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/ES6/">ES6</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/JS%E5%9F%BA%E7%A1%80/">JS基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/JS%E8%BF%9B%E9%98%B6/">JS进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/jQuery/">jQuery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/css/css3/">css3</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/Node-js/">Node.js</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E5%AE%89%E5%85%A8/" rel="tag">HTTP安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E8%BF%9B%E9%98%B6/" rel="tag">HTTP进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS%E6%B7%B1%E5%85%A5/" rel="tag">JS深入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS%E8%BF%9B%E9%98%B6/" rel="tag">JS进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-SSR/" rel="tag">Vue-SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js%E5%9F%BA%E7%A1%80/" rel="tag">Vue.js基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js%E8%BF%9B%E9%98%B6/" rel="tag">Vue.js进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/" rel="tag">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/" rel="tag">css3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag">移动端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTML/" style="font-size: 18.57px;">HTML</a> <a href="/tags/HTTP%E5%AE%89%E5%85%A8/" style="font-size: 10px;">HTTP安全</a> <a href="/tags/HTTP%E8%BF%9B%E9%98%B6/" style="font-size: 10px;">HTTP进阶</a> <a href="/tags/JS/" style="font-size: 12.86px;">JS</a> <a href="/tags/JS%E6%B7%B1%E5%85%A5/" style="font-size: 10px;">JS深入</a> <a href="/tags/JS%E8%BF%9B%E9%98%B6/" style="font-size: 11.43px;">JS进阶</a> <a href="/tags/React/" style="font-size: 17.14px;">React</a> <a href="/tags/Vue-SSR/" style="font-size: 15.71px;">Vue-SSR</a> <a href="/tags/Vue-js/" style="font-size: 20px;">Vue.js</a> <a href="/tags/Vue-js%E5%9F%BA%E7%A1%80/" style="font-size: 11.43px;">Vue.js基础</a> <a href="/tags/Vue-js%E8%BF%9B%E9%98%B6/" style="font-size: 17.14px;">Vue.js进阶</a> <a href="/tags/android/" style="font-size: 11.43px;">android</a> <a href="/tags/css/" style="font-size: 14.29px;">css</a> <a href="/tags/css3/" style="font-size: 11.43px;">css3</a> <a href="/tags/html5/" style="font-size: 12.86px;">html5</a> <a href="/tags/javascript/" style="font-size: 15.71px;">javascript</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 11.43px;">后端</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 11.43px;">基础</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 11.43px;">小程序</a> <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" style="font-size: 10px;">移动端</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 14.29px;">面试题</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 12.86px;">项目</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/01/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2022/10/25/yuque/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">自动化构建工具</a>
          </li>
        
          <li>
            <a href="/2022/10/25/yuque/%E8%84%9A%E6%89%8B%E6%9E%B6/">脚手架</a>
          </li>
        
          <li>
            <a href="/2022/10/24/yuque/React%20Query/">React Query</a>
          </li>
        
          <li>
            <a href="/2022/10/19/yuque/%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6/">常用组件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Zax Tseng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>