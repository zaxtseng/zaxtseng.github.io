<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":true,"version":"8.13.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="ZAX">
<meta property="og:url" content="http://example.com/page/7/index.html">
<meta property="og:site_name" content="ZAX">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Zax Tseng">
<meta property="article:tag" content="javascript, React, Vue, HTML5">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ZAX</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">ZAX</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zax Tseng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">123</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E6%BB%9A%E5%8A%A8%E9%98%85%E8%AF%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E6%BB%9A%E5%8A%A8%E9%98%85%E8%AF%BB/" class="post-title-link" itemprop="url">滚动阅读</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:15" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:15+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:43:59" itemprop="dateModified" datetime="2023-04-07T08:43:59+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-滚动阅读-date-2019-10-25-20-04-22"><a href="#title-滚动阅读-date-2019-10-25-20-04-22" class="headerlink" title="title: 滚动阅读 date: 2019-10-25 20:04:22"></a>title: 滚动阅读 date: 2019-10-25 20:04:22</h2><p>tags:</p>
<h1 id="初步构思"><a href="#初步构思" class="headerlink" title="初步构思"></a>初步构思</h1><ol>
<li>定时任务启动</li>
<li>滑到面板桌面(从常规桌面上滑)</li>
<li>点击礼盒图标(右上角,测量位置)</li>
<li>点击完成相关任务(位置)</li>
<li>自动唤醒京东读书 app</li>
<li>点击图书(位置)</li>
<li>自动翻页(swipe)</li>
<li>完成后返回打卡页面</li>
<li>点击完成打卡(位置)</li>
</ol>
<p>新增:</p>
<ol>
<li>时间统计(共阅读了多久)</li>
<li>页数统计(共阅读了多少页)</li>
</ol>
<h1 id="防检测"><a href="#防检测" class="headerlink" title="防检测"></a>防检测</h1><p>自动翻页位置</p>
<ol>
<li>滑动翻页(swipe) Math.random</li>
<li>点击翻页(touch),时间和位置都随机</li>
<li>映射音量键翻页</li>
</ol>
<p>该机分辨率为 1440*720</p>
<p>下一页触摸区域在 x(480-720),y(0-1440)</p>
<p>规则:</p>
<p>30 分钟阅读 300 页,则每分钟阅读 10 页,至少 6 秒阅读完一页.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>每页最少 6 秒,最多 12 秒不到.</p>
<p>每 300 页最少 30 分钟.最多 60 分钟不到.</p>
<h1 id="随机时间"><a href="#随机时间" class="headerlink" title="随机时间"></a>随机时间</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> initTime = <span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">0.33333</span>);</span><br><span class="line"><span class="keyword">if</span> (initTime &lt; <span class="number">6000</span>) &#123;</span><br><span class="line">  initTime += <span class="number">4000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">iTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> initTime = <span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">0.33333</span>);</span><br><span class="line">  <span class="keyword">if</span> (initTime &lt; <span class="number">6000</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (initTime += <span class="number">4000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> initTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">iTime</span>();</span><br></pre></td></tr></table></figure>

<p>每页最少 2 秒,最多 8 秒不到.</p>
<p>每 300 页最少不到 16 分钟.最多 40 分钟不到.</p>
<h1 id="定时运行脚本"><a href="#定时运行脚本" class="headerlink" title="定时运行脚本"></a>定时运行脚本</h1><p>点击脚本右边的菜单按钮-&gt;更多-&gt;定时任务设置定时运行脚本.注意<strong>必须保持 Auto.js 后台运行(自启动白名单、电源管理白名单等),不可加锁屏密码</strong>.</p>
<p>脚本的开头使用 device.wakeUp()来唤醒屏幕</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//# 启动app</span></span><br><span class="line">app.<span class="title function_">launchApp</span>(<span class="string">&quot;京东读书&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//暂停运行5秒</span></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<h1 id="气泡信息toast-message"><a href="#气泡信息toast-message" class="headerlink" title="气泡信息toast(message)"></a>气泡信息<code>toast(message)</code></h1><p>注意，信息的显示是”异步”执行的，并且，不会等待信息消失程序才继续执行。如果在循环中执行该命令，可能出现脚本停止运行后仍然有不断的气泡信息出现的情况</p>
<p>官方貌似说了会实时显示进度,那么下面的统计就不需要了.</p>
<p>这里可以显示已经看了几页(估计得写个函数),看具体是怎么翻页了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如果触发一次, 就次数<span class="string">`total += 1`</span>;</span><br><span class="line"><span class="keyword">if</span> (total == <span class="number">300</span>) &#123;</span><br><span class="line">  <span class="comment">//toast(&#x27;看完300页了,准备打卡去&#x27;)</span></span><br><span class="line">  <span class="comment">//建议此时不停,不知道时间够不够,继续刷一会</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (total &gt;= <span class="number">300</span> &amp;&amp; totalTime &gt;= <span class="number">30</span> * <span class="number">6000</span>) &#123;</span><br><span class="line">  <span class="comment">//条件满足,停止刷页</span></span><br><span class="line">  <span class="title function_">stop</span>();</span><br><span class="line">  <span class="comment">//跳转打卡页面</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//继续刷页</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="立即停止exit"><a href="#立即停止exit" class="headerlink" title="立即停止exit()"></a>立即停止<code>exit()</code></h1><h1 id="console-show"><a href="#console-show" class="headerlink" title="console.show()"></a><code>console.show()</code></h1><p>显示控制台。这会显示一个控制台的悬浮窗(需要悬浮窗权限)。</p>
<h2 id="print-text"><a href="#print-text" class="headerlink" title="print(text)"></a><code>print(text)</code></h2><p><code>text &#123;string&#125; | &#123;Object&#125;</code>要打印到控制台的信息,相当于 log(text)。</p>
<h1 id="基于坐标的触摸模拟"><a href="#基于坐标的触摸模拟" class="headerlink" title="基于坐标的触摸模拟"></a>基于坐标的触摸模拟</h1><p>要获取要点击的位置的坐标，可以在开发者选项中开启”指针位置”。</p>
<h2 id="setScreenMetrics-width-height"><a href="#setScreenMetrics-width-height" class="headerlink" title="setScreenMetrics(width, height)"></a>setScreenMetrics(width, height)</h2><p>设置脚本坐标点击所适合的屏幕宽高.</p>
<p>如果脚本运行时，屏幕宽度不一致会自动放缩坐标.</p>
<h1 id="安卓-7-0-以上的触摸和手势模拟"><a href="#安卓-7-0-以上的触摸和手势模拟" class="headerlink" title="安卓 7.0 以上的触摸和手势模拟"></a>安卓 7.0 以上的触摸和手势模拟</h1><h2 id="click-x-y"><a href="#click-x-y" class="headerlink" title="click(x, y)"></a>click(x, y)</h2><p>模拟点击坐标(x, y)，并返回是否点击成功。只有在点击执行完成后脚本才继续执行。</p>
<p>使用该函数模拟连续点击时可能有点击速度过慢的问题，这时可以用<code>press()</code>函数代替。</p>
<h2 id="press-x-y-duration"><a href="#press-x-y-duration" class="headerlink" title="press(x, y, duration)"></a>press(x, y, duration)</h2><p><code>duration: &#123;number&#125;</code> 按住时长，单位毫秒</p>
<p>模拟按住坐标(x, y), 并返回是否成功。只有按住操作执行完成时脚本才会继续执行。</p>
<p>如果按住时间过短，那么会被系统认为是点击；如果时长超过 500 毫秒，则认为是长按。</p>
<h2 id="swipe-x1-y1-x2-y2-duration"><a href="#swipe-x1-y1-x2-y2-duration" class="headerlink" title="swipe(x1, y1, x2, y2, duration)"></a>swipe(x1, y1, x2, y2, duration)</h2><p><code>x1</code> {number} 滑动的起始坐标的 x 值</p>
<p><code>y1</code> {number} 滑动的起始坐标的 y 值</p>
<p><code>x2</code> {number} 滑动的结束坐标的 x 值</p>
<p><code>y2</code> {number} 滑动的结束坐标的 y 值</p>
<p><code>duration</code> {number} 滑动时长，单位毫秒</p>
<p>模拟从坐标(x1, y1)滑动到坐标(x2, y2)，并返回是否成功。只有滑动操作执行完成时脚本才会继续执行。</p>
<h1 id="随机数-random"><a href="#随机数-random" class="headerlink" title="随机数 random"></a>随机数 random</h1><h1 id="random-min-max"><a href="#random-min-max" class="headerlink" title="random(min, max)"></a>random(min, max)</h1><p><code>min</code> {number} 随机数产生的区间下界</p>
<p><code>max</code> {number} 随机数产生的区间上界</p>
<p>返回 {number}</p>
<p>返回一个在<code>[min...max]</code>之间的随机数(正整数)。例如<code>random(0, 2)</code>可能产生 0, 1, 2。</p>
<h2 id="random"><a href="#random" class="headerlink" title="random()"></a>random()</h2><p>返回 {number}</p>
<p>返回在[0, 1)的随机浮点数。</p>
<h1 id="device-wakeUp"><a href="#device-wakeUp" class="headerlink" title="device.wakeUp()"></a>device.wakeUp()</h1><p>唤醒设备。包括唤醒设备 CPU、屏幕等。可以用来点亮屏幕。</p>
<h2 id="device-wakeUpIfNeeded"><a href="#device-wakeUpIfNeeded" class="headerlink" title="device.wakeUpIfNeeded()"></a>device.wakeUpIfNeeded()</h2><p>如果屏幕没有点亮，则唤醒设备。</p>
<h1 id="按键模拟"><a href="#按键模拟" class="headerlink" title="按键模拟"></a>按键模拟</h1><p>实体按键模拟依赖 root 权限,故放弃.</p>
<h1 id="基于控件的操作"><a href="#基于控件的操作" class="headerlink" title="基于控件的操作"></a>基于控件的操作</h1><p>推荐使用<code>auto()</code>函数来确保无障碍服务已启用.</p>
<h1 id="auto-mode"><a href="#auto-mode" class="headerlink" title="auto([mode])"></a>auto([mode])</h1><p>检查无障碍服务是否已经启用，如果没有启用则抛出异常并跳转到无障碍服务启用界面；同时设置无障碍模式为 mode。</p>
<p>如果不加 mode 参数，则为正常模式。</p>
<p>建议使用<code>auto.waitFor()</code>和<code>auto.setMode()</code>代替该函数，因为<code>auto()</code>函数如果无障碍服务未启动会停止脚本；而<code>auto.waitFor()</code>则会在在无障碍服务启动后继续运行。</p>
<h2 id="auto-waitFor"><a href="#auto-waitFor" class="headerlink" title="auto.waitFor()"></a>auto.waitFor()</h2><p>检查无障碍服务是否已经启用，如果没有启用则跳转到无障碍服务启用界面，并等待无障碍服务启动；当无障碍服务启动后脚本会继续运行。</p>
<h1 id="点击文本click-text-i"><a href="#点击文本click-text-i" class="headerlink" title="点击文本click(text[, i])"></a>点击文本<code>click(text[, i])</code></h1><p><code>text</code> {string} 要点击的文本</p>
<p><code>i</code> {number} 如果相同的文本在屏幕中出现多次，则 i 表示要点击第几个文本, i 从 0 开始计算</p>
<p>该函数可以点击大部分包含文字的按钮。例如微信主界面下方的”微信”, “联系人”, “发现”, “我”的按钮。</p>
<p>通常与 while 同时使用以便点击按钮直至成功。例如:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (!<span class="title function_">click</span>(<span class="string">&quot;扫一扫&quot;</span>));</span><br></pre></td></tr></table></figure>

<h1 id="UiSelector-exists"><a href="#UiSelector-exists" class="headerlink" title="UiSelector.exists()"></a>UiSelector.exists()</h1><p>返回 {Boolean}</p>
<p>判断屏幕上是否存在控件符合选择器所确定的条件。</p>
<p>例如要判断某个文本出现就执行某个动作，可以用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;某个文本&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//要支持的动作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="暂停-sleep"><a href="#暂停-sleep" class="headerlink" title="暂停 sleep()"></a>暂停 sleep()</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暂停1秒</span></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h1 id="选取控件"><a href="#选取控件" class="headerlink" title="选取控件"></a>选取控件</h1><p>一般软件的界面是由一个个控件构成的，例如图片部分是一个图片控件(ImageView)，文字部分是一个文字控件(TextView)；同时，通过各种布局来决定各个控件的位置，例如，线性布局(LinearLayout)里面的控件都是按水平或垂直一次叠放的，列表布局(AbsListView)则是以列表的形式显示控件。</p>
<p>控件有各种属性，包括文本(text), 描述(desc), 类名(className), id 等等。我们通常用一个控件的属性来找到这个控件，例如，想要点击 QQ 聊天窗口的”发送”按钮，我们就可以通过他的文本属性为”发送”来找到这个控件并点击他，具体代码为:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sendButton = <span class="title function_">text</span>(<span class="string">&quot;发送&quot;</span>).<span class="title function_">findOne</span>();</span><br><span class="line">sendButton.<span class="title function_">click</span>();</span><br></pre></td></tr></table></figure>

<p>在这个例子中, text(“发送”)表示一个条件(文本属性为”发送”)，findOne()表示基于这个条件找到一个符合条件的控件，从而我们可以得到发送按钮 sendButton，再执行 sendButton.click()即可点击”发送”按钮。</p>
<p>果一个控件是图片控件.我们注意到这个图标的 desc(描述)属性为”搜索”，那么我们就可以通过 desc 属性来定位这个控件，得到点击搜索图标的代码为:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">desc</span>(<span class="string">&quot;搜索&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br></pre></td></tr></table></figure>

<p>另外，对于这个搜索图标而言，id 属性也是唯一的，我们也可以用 id(“action_search”).findOne().click()来点击这个控件。如果一个控件有 id 属性，那么这个属性很可能是唯一的.</p>
<p>i_reader_folder</p>
<h1 id="定时器-Timers"><a href="#定时器-Timers" class="headerlink" title="定时器 Timers"></a>定时器 Timers</h1><h2 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout()"></a>setTimeout()</h2><p>与 web 端用法一致.但是使用了一个不同的内部实现，它是基于 Android Looper-Handler 消息循环机制构建的。其实现机制与 Node.js 比较相似.</p>
<h2 id="setInterval-callback-delay-…args"><a href="#setInterval-callback-delay-…args" class="headerlink" title="setInterval(callback, delay[,…args])"></a>setInterval(callback, delay[,…args])</h2><p>callback {Function} 当定时器到点时要调用的函数。</p>
<p>delay {number} 调用 callback 之前要等待的毫秒数。</p>
<p>…args {any} 当调用 callback 时要传入的可选参数。</p>
<p>因为定时器是异步执行,另外 delay 只能是 number,那么不采用这种方案.</p>
<h1 id="刷页函数"><a href="#刷页函数" class="headerlink" title="刷页函数"></a>刷页函数</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">turnPage</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>先打开京东读书,登录账号</p>
<p>点击书城-免费-点击一本书-加入书架-(多加几本)</p>
<h1 id="方案一-点击翻页"><a href="#方案一-点击翻页" class="headerlink" title="方案一: 点击翻页"></a>方案一: 点击翻页</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检查无障碍服务开启情况</span></span><br><span class="line">auto.<span class="title function_">waitFor</span>();</span><br><span class="line"><span class="comment">//显示控制台</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">show</span>();</span><br><span class="line"><span class="comment">//设置脚本适合的宽高</span></span><br><span class="line"><span class="title function_">setScreenMetrics</span>(<span class="number">720</span>, <span class="number">1440</span>);</span><br><span class="line"><span class="comment">//打开京东读书app</span></span><br><span class="line">app.<span class="title function_">launchApp</span>(<span class="string">&quot;京东读书&quot;</span>);</span><br><span class="line"><span class="title function_">toast</span>(<span class="string">&quot;开始打卡&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//等待启动</span></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//跳过</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;跳过&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//点击控件</span></span><br><span class="line">  <span class="title function_">text</span>(<span class="string">&quot;跳过&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//检测升级</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;下次再说&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//点击控件</span></span><br><span class="line">  <span class="title function_">text</span>(<span class="string">&quot;下次再说&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//点击控件,跳转书架</span></span><br><span class="line"><span class="title function_">id</span>(<span class="string">&quot;main_tab_bookshelf&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备开始图书</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//随机时间</span></span><br><span class="line"><span class="keyword">var</span> initTime = <span class="number">6000</span> * (<span class="title class_">Math</span>.<span class="title function_">random</span>() + <span class="number">0.33333</span>);</span><br><span class="line"><span class="keyword">if</span> (initTime &lt; <span class="number">6000</span>) &#123;</span><br><span class="line">  initTime += <span class="number">4000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="这里有问题"><a href="#这里有问题" class="headerlink" title="这里有问题"></a>这里有问题</h1><p>应该阅读到末尾结束,出现关闭阅读.点击关闭阅读.删除第一本.重新打开一本,开始阅读.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//已读完时,左上角出现关闭阅读</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">exists</span>()) &#123;</span><br><span class="line">  <span class="comment">//点击控件</span></span><br><span class="line">  <span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>();</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line">  <span class="comment">//长按第一本书,左下角删除,弹出确认删除,点击第二个删除.sleep(2000),右上角完成,继续阅读()</span></span><br><span class="line">  <span class="keyword">let</span> index;</span><br><span class="line">  <span class="title function_">deleteBook</span>();</span><br><span class="line">  <span class="comment">//继续阅读</span></span><br><span class="line">  <span class="comment">//删掉之后,加上已阅读200页,重新开始,又会阅读300页.</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">index</span> = index;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">readBook</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//执行自动阅读</span></span><br><span class="line">  <span class="title function_">readBook</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>开始阅读-阅读完-跳出阅读-删除-重新开始阅读</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//执行阅读主步骤</span></span><br><span class="line"><span class="title function_">mianStep</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mianStep</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">readeBook</span>()</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">exists</span>())&#123;</span><br><span class="line">    <span class="comment">//点击控件</span></span><br><span class="line">    <span class="title function_">text</span>(<span class="string">&quot;关闭阅读&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="title function_">sleep</span>(<span class="number">2000</span>)</span><br><span class="line">    <span class="comment">//长按第一本书,左下角删除,弹出确认删除,点击第二个删除.sleep(2000),右上角完成,继续阅读()</span></span><br><span class="line">    <span class="keyword">let</span> index</span><br><span class="line">    <span class="title function_">deleteBook</span>()</span><br><span class="line">    <span class="comment">//继续阅读</span></span><br><span class="line">    <span class="comment">//删掉之后,加上已阅读200页,重新开始,又会阅读300页.</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">index</span> = i</span><br><span class="line">    <span class="title function_">mianStep</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自动阅读</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readBook</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">toast</span>(<span class="string">&quot;开始阅读&quot;</span>)</span><br><span class="line">    <span class="comment">//选择第一本</span></span><br><span class="line">    <span class="title function_">id</span>(<span class="string">&quot;i_reader_folder&quot;</span>).<span class="title function_">indexInParent</span>(<span class="number">0</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="title function_">sleep</span>(<span class="number">3000</span>)</span><br><span class="line">    <span class="comment">//执行点击</span></span><br><span class="line">    <span class="title function_">clickPage</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//点击阅读</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clickPages</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//点击300页</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> &#123;i=<span class="number">0</span>&#125;=index; i&lt;<span class="number">300</span>; i++)&#123;</span><br><span class="line">    <span class="title function_">randomClick</span>()</span><br><span class="line">    <span class="comment">//间隔时间</span></span><br><span class="line">    <span class="title function_">sleep</span>(initTime)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定时器版</span></span><br><span class="line"><span class="comment">// for(var i=0; i&lt;5; i++)&#123;</span></span><br><span class="line"><span class="comment">//     setTimeout(randomClick(),initTime)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//随机点坐标</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomClick</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//随机坐标,各缩减20px,防止误触</span></span><br><span class="line">x = <span class="title function_">random</span>(<span class="number">500</span>, <span class="number">700</span>)</span><br><span class="line">y = <span class="title function_">random</span>(<span class="number">20</span>, <span class="number">1420</span>)</span><br><span class="line"><span class="comment">//点击随机坐标区域翻页</span></span><br><span class="line"><span class="title function_">click</span>(x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除已读数目</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deleteBook</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//长按图书,坐标就是第一本书的位置</span></span><br><span class="line">    <span class="comment">//press(x, y, 1500)</span></span><br><span class="line">    <span class="title function_">id</span>(<span class="string">&quot;i_reader_folder&quot;</span>).<span class="title function_">indexInParent</span>(<span class="number">0</span>).<span class="title function_">findOne</span>().<span class="title function_">longClick</span>()</span><br><span class="line">    <span class="comment">//删除图书</span></span><br><span class="line">    <span class="title function_">text</span>(<span class="string">&quot;删除&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="comment">//要确认删除了</span></span><br><span class="line">    <span class="title function_">id</span>(<span class="string">&quot;confirm&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">    <span class="comment">//右上角完成</span></span><br><span class="line">    <span class="title function_">text</span>(<span class="string">&quot;完成&quot;</span>).<span class="title function_">findOne</span>().<span class="title function_">click</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//点击打卡文本</span></span><br><span class="line"><span class="title function_">click</span>(text[<span class="string">&quot;立即打卡&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印结束</span></span><br><span class="line"><span class="title function_">toast</span>(<span class="string">&quot;打卡结束&quot;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="方案二-滑动翻页"><a href="#方案二-滑动翻页" class="headerlink" title="方案二: 滑动翻页"></a>方案二: 滑动翻页</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/vue%E5%8F%AF%E5%A4%8D%E7%94%A8%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/vue%E5%8F%AF%E5%A4%8D%E7%94%A8%E6%80%A7/" class="post-title-link" itemprop="url">vue可复用性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:10" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:10+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:43:59" itemprop="dateModified" datetime="2023-04-07T08:43:59+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: vue可复用性&amp;组合</p>
<p>date: 2019-10-14 15:08:18</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>Vue.js # 一级分类</li>
<li>Vue.js进阶 # 二级分类</li>
</ul>
<hr>
<h1 id="混入-mixin"><a href="#混入-mixin" class="headerlink" title="混入 mixin"></a>混入 mixin</h1><p>一个混入对象可以包含任意组件选项.当组件使用混入对象时,所有混入对象的选项将被”混合”进组件本身的选项.</p>
<p>例子:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个混入对象</span></span><br><span class="line"><span class="keyword">var</span> myMixin = &#123;</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">hello</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">hello</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello from mixin&quot;)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//定义一个使用混入对象的组件</span></span><br><span class="line"><span class="string">var Component = Vue.extend(&#123;</span></span><br><span class="line"><span class="string">    mixins: [myMixin]</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var component = new Component() //=&gt; &#x27;</span>hello <span class="keyword">from</span> mixin<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="选项合并"><a href="#选项合并" class="headerlink" title="选项合并"></a>选项合并</h2><p>当组件和混入对象含有同名选项时,这些选项将以恰当的方式进行”合并”.</p>
<p>比如,数据对象在内部会进行递归合并,并在发生冲突时以组件数据优先.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">      <span class="attr">foo</span>: <span class="string">&quot;abc&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">mixins</span>: [mixin],</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;goodbye&quot;</span>,</span><br><span class="line">      <span class="attr">bar</span>: <span class="string">&quot;def&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$data</span>);</span><br><span class="line">    <span class="comment">// =&gt; &#123; message: &#x27;goodbye&#x27;, foo:&#x27;abc&#x27;, bar: &#x27;def&#x27;&#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>同名钩子函数将合并成一个数组,因此都将被调用.另外,混入对象的钩子将在组件自身钩子之前调用.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;混入对象钩子被调用&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">mixins</span>: [mixin],</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件钩子被调用&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt; &#x27;混入对象钩子被调用&#x27;</span></span><br><span class="line"><span class="comment">//=&gt; &#x27;组件钩子被调用&#x27;</span></span><br></pre></td></tr></table></figure>

<p>值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象。两个对象键名冲突时，取组件对象的键值对。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixin = &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">conficting</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;from mixin&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">mixins</span>: [mixin],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">bar</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">conficting</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;from self&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">vm.<span class="title function_">foo</span>(); <span class="comment">// =&gt; &quot;foo&quot;</span></span><br><span class="line">vm.<span class="title function_">bar</span>(); <span class="comment">// =&gt; &quot;bar&quot;</span></span><br><span class="line">vm.<span class="title function_">conflicting</span>(); <span class="comment">// =&gt; &quot;from self&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：<code>Vue.extend()</code> 也使用同样的策略进行合并。</p>
</blockquote>
<h2 id="全局混入"><a href="#全局混入" class="headerlink" title="全局混入"></a>全局混入</h2><p>混入也可以进行全局注册,使用时需要小心.一但使用全局混入,他将影响每一个之后创建的 Vue 实例.</p>
<p>使用恰当时还可以用来为自定义选项注入处理逻辑.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为自定义的选项 &#x27;myOption&#x27; 注入一个处理器。</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> myOption = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">myOption</span>;</span><br><span class="line">    <span class="keyword">if</span> (myOption) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(myOption);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">myOption</span>: <span class="string">&quot;hello!&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// =&gt; &quot;hello!&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>请谨慎使用全局混入，因为它会影响每个单独创建的 Vue 实例 (包括第三方组件)。大多数情况下，只应当应用于自定义选项，就像上面示例一样。推荐将其作为插件发布，以避免重复应用混入。</p>
</blockquote>
<h2 id="自定义选项合并策略"><a href="#自定义选项合并策略" class="headerlink" title="自定义选项合并策略"></a>自定义选项合并策略</h2><p>自定义选项将使用默认策略，即简单地覆盖已有值。如果想让自定义选项以自定义逻辑合并，可以向 Vue.config.optionMergeStrategies 添加一个函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">myOption</span> = <span class="keyword">function</span> (<span class="params">toVal, fromVal</span>) &#123;</span><br><span class="line">  <span class="comment">// 返回合并后的值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>对于多数值为对象的选项，可以使用与 methods 相同的合并策略：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strategies = <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>;</span><br><span class="line">strategies.<span class="property">myOption</span> = strategies.<span class="property">methods</span>;</span><br></pre></td></tr></table></figure>

<p>可以在 Vuex 1.x 的混入策略里找到一个更高级的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">computed</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">vuex</span> = <span class="keyword">function</span> (<span class="params">toVal, fromVal</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!toVal) <span class="keyword">return</span> fromVal;</span><br><span class="line">  <span class="keyword">if</span> (!fromVal) <span class="keyword">return</span> toVal;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">getters</span>: <span class="title function_">merge</span>(toVal.<span class="property">getters</span>, fromVal.<span class="property">getters</span>),</span><br><span class="line">    <span class="attr">state</span>: <span class="title function_">merge</span>(toVal.<span class="property">state</span>, fromVal.<span class="property">state</span>),</span><br><span class="line">    <span class="attr">actions</span>: <span class="title function_">merge</span>(toVal.<span class="property">actions</span>, fromVal.<span class="property">actions</span>),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h1><p>输入框聚焦</p>
<p>当页面加载时，该元素将获得焦点 (注意：autofocus 在移动版 Safari 上不工作)。事实上，只要你在打开这个页面后还没点击过任何内容，这个输入框就应当还是处于聚焦状态。现在让我们用指令来实现这个功能：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册一个全局自定义指令v-focus</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;focus&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">//当被绑定的元素插入到DOM中时...</span></span><br><span class="line">  <span class="attr">inserted</span>: <span class="keyword">function</span> (<span class="params">el</span>) &#123;</span><br><span class="line">    <span class="comment">//聚焦元素</span></span><br><span class="line">    el.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>局部指令注册,组件中接受<code>directive</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">    <span class="attr">focus</span>: &#123;</span><br><span class="line">        <span class="comment">//指令的定义</span></span><br><span class="line">        <span class="attr">inserted</span>: <span class="keyword">function</span>(<span class="params">el</span>)&#123;</span><br><span class="line">            el.<span class="title function_">focus</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在模板中任何元素上使用<code>v-focus</code>属性,例如:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-focus&gt;</span><br></pre></td></tr></table></figure>

<h1 id="钩子函数"><a href="#钩子函数" class="headerlink" title="钩子函数"></a>钩子函数</h1><p>一个指令对象可以提供以下几个钩子函数:</p>
<ol>
<li><code>bind</code>: 只调用一次,指令第一次绑定到元素时调用.在这里进行一次性的初始化设置.</li>
<li><code>inserted</code>: 被绑定元素插入到父节点时调用.</li>
<li><code>update</code>: 所在组件的 VNode 更新时调用,但是可能发生在其子 VNode 更新之前.指令的值可能发生改变,也可能没有.</li>
<li><code>componentUpdated</code>: 指令所在组件的 VNode 及其子 VNode 全部更新后调用.</li>
<li><code>unbind</code>: 只调用一次,指令与元素解绑时调用.</li>
</ol>
<h2 id="钩子函数的参数"><a href="#钩子函数的参数" class="headerlink" title="钩子函数的参数"></a>钩子函数的参数</h2><p>指令钩子会被传入以下参数:</p>
<ul>
<li><p><code>el</code>: 指令所绑定的元素,可以直接操作 DOM.</p>
</li>
<li><p><code>binding</code>: 一个对象,包含以下属性:</p>
<ul>
<li><code>name</code>: 指令名,不包括<code>v-</code>前缀.</li>
<li><code>value</code>: 指令的绑定值.例如：<code>v-my-directive=&quot;1 + 1&quot;</code>中，绑定值为 2。</li>
<li><code>oldValue</code>: 指令绑定的上一个值.仅在 update 和 componentUpdated 钩子中可用.无论值是否改变都可用.</li>
<li><code>expression</code>: 字符串形式的指令表达式.例如 <code>v-my-directive=&quot;1 + 1&quot;</code>中，表达式为 <code>&quot;1 + 1&quot;</code>。</li>
<li><code>arg</code>: 传给指令的参数.可选.例如 <code>v-my-directive:foo</code> 中，参数为 “foo”。</li>
<li><code>modifiers</code>: 一个包含修饰符的对象.例如：<code>v-my-directive.foo.bar</code> 中，修饰符对象为 <code>&#123; foo: true, bar: true &#125;</code>。</li>
</ul>
</li>
<li><p><code>vnode</code>: Vue 编译生成的虚拟节点.</p>
</li>
<li><p><code>oldVNode</code>: 上一个虚拟节点.</p>
</li>
</ul>
<blockquote>
<p>除了 <code>el</code> 之外，其它参数都应该是只读的，切勿进行修改。如果需要在钩子之间共享数据，建议通过元素的 <code>dataset</code> 来进行。</p>
</blockquote>
<p>范例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html</span></span><br><span class="line">&lt;div id=<span class="string">&quot;hook-arguments-example&quot;</span> v-<span class="attr">demo</span>:foo.<span class="property">a</span>.<span class="property">b</span>=<span class="string">&quot;message&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//js</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;demo&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">bind</span>: <span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="title class_">JSON</span>.<span class="property">stringify</span></span><br><span class="line">    el.<span class="property">innerHTML</span> =</span><br><span class="line">      <span class="string">&#x27;name: &#x27;</span>       + <span class="title function_">s</span>(binding.<span class="property">name</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;value: &#x27;</span>      + <span class="title function_">s</span>(binding.<span class="property">value</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;expression: &#x27;</span> + <span class="title function_">s</span>(binding.<span class="property">expression</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;argument: &#x27;</span>   + <span class="title function_">s</span>(binding.<span class="property">arg</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;modifiers: &#x27;</span>  + <span class="title function_">s</span>(binding.<span class="property">modifiers</span>) + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;vnode keys: &#x27;</span> + <span class="title class_">Object</span>.<span class="title function_">keys</span>(vnode).<span class="title function_">join</span>(<span class="string">&#x27;, &#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#hook-arguments-example&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;hello!&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="动态指令参数"><a href="#动态指令参数" class="headerlink" title="动态指令参数"></a>动态指令参数</h1><p>在 <code>v-mydirective:[argument]=&quot;value&quot;</code> 中，argument 参数可以根据组件实例数据进行更新！</p>
<p>例如创建一个自定义指令,通过固定布局将元素固定在页面上.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;baseexample&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Scroll down this page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin</span>=<span class="string">&quot;200&quot;</span>&gt;</span>Stick me 200px from the top of the page<span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>自定义事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;pin&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">bind</span>: <span class="keyword">function</span>(<span class="params">el, bingding, vnode</span>)&#123;</span><br><span class="line">        el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span></span><br><span class="line">        el.<span class="property">style</span>.<span class="property">top</span> = binding.<span class="property">value</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#baseexample&quot;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>

<p>这会把元素固定在距离页面顶部 200px 的位置.</p>
<p>如果需要将元素固定在左侧呢?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;dynamicexample&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Scroll down this page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin:</span>[<span class="attr">direction</span>]=<span class="string">&quot;200&quot;</span>&gt;</span>I am pinned onto the page at 200px to the left.<span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;pin&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">bind</span>: <span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;fixed&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> s = binding.<span class="property">arg</span> == <span class="string">&quot;left&quot;</span> ? <span class="string">&quot;left&quot;</span> : <span class="string">&quot;top&quot;</span>;</span><br><span class="line">    el.<span class="property">style</span>[s] = binding.<span class="property">value</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#dynamicexample&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">direction</span>: <span class="string">&quot;left&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="函数简写"><a href="#函数简写" class="headerlink" title="函数简写"></a>函数简写</h2><p>在很多时候，你可能想在 bind 和 update 时触发相同行为，而不关心其它的钩子。比如这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;color-swatch&quot;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span><br><span class="line">  el.<span class="property">style</span>.<span class="property">backgroundColor</span> = binding.<span class="property">value</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="对象字面量"><a href="#对象字面量" class="headerlink" title="对象字面量"></a>对象字面量</h2><p>如果指令需要多个值，可以传入一个 JavaScript 对象字面量。记住，指令函数能够接受所有合法的 JavaScript 表达式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html</span></span><br><span class="line">&lt;div v-demo=<span class="string">&quot;&#123; color: &#x27;white&#x27;, text: &#x27;hello!&#x27; &#125;&quot;</span>&gt;&lt;/div&gt;;</span><br><span class="line"><span class="comment">//js</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;demo&quot;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">color</span>); <span class="comment">// =&gt; &quot;white&quot;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">text</span>); <span class="comment">// =&gt; &quot;hello!&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="渲染函数-amp-JSX"><a href="#渲染函数-amp-JSX" class="headerlink" title="渲染函数&amp;JSX"></a>渲染函数&amp;JSX</h1><p>渲染函数在 Vue.js 进阶里有讲到,JSX 先不看了.</p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p>插件用来为 Vue 添加全局功能.</p>
<p>插件常用功能:</p>
<ol>
<li>添加全局方法或属性.</li>
<li>添加全局资源: 指令,过滤器,过渡</li>
<li>通过全局混入来添加一些组件选项.</li>
<li>添加 Vue 实例方法,通过把他们添加到 Vue.prototype 上实现.</li>
<li>一个库,提供自己的 API,同时提供上面提到的一个或多个功能.如 Vue-router</li>
</ol>
<h2 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h2><p>通过全局方法<code>Vue.use()</code>使用插件.需要在<code>new Vue()</code>之前调用.</p>
<p>也可以传入一个可选的对象.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">MyPlugin</span>, &#123; <span class="attr">someOption</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>Vue.use 会自动阻止多次注册相同插件，届时即使多次调用也只会注册一次该插件。</p>
<p>Vue.js 官方提供的一些插件 (例如 vue-router) 在检测到 Vue 是可访问的全局变量时会自动调用 <code>Vue.use()</code>。然而在像 CommonJS 这样的模块环境中，你应该始终显式地调用 <code>Vue.use()</code></p>
<h2 id="开发插件"><a href="#开发插件" class="headerlink" title="开发插件"></a>开发插件</h2><p>Vue.js 的插件暴露一个 install 的方法.这个方法的第一个参数是 Vue 构造器,第二个参数是可选的选项对象:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MyPlugin</span>.<span class="property">install</span> = <span class="keyword">function</span> (<span class="params">Vue, options</span>) &#123;</span><br><span class="line">  <span class="comment">//1. 添加全局方法或属性</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="property">myGlobalMethod</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//逻辑..</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2.添加全局资源</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;my-directive&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, binding, vnode, oldVnode</span>) &#123;</span><br><span class="line">      <span class="comment">//逻辑</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//3. 注入组件选项</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//逻辑...</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4. 添加实例方法</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span> (<span class="params">methodOptions</span>) &#123;</span><br><span class="line">    <span class="comment">//逻辑...</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h1><p>过滤器可以用在：双花括号插值和 v-bind 表达式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在双花括号中 --&gt;</span><br><span class="line">&#123;&#123; message | capitalize &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 在 <span class="string">`v-bind`</span> 中 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;rawId | formatId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>在组件的选项中定义本地的过滤器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filters</span>: &#123;</span><br><span class="line">  <span class="attr">capitalize</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    value = value.<span class="title function_">toString</span>()</span><br><span class="line">    <span class="keyword">return</span> value.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + value.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者在创建 Vue 实例之前全局定义过滤器:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&quot;capitalize&quot;</span>, <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  value = value.<span class="title function_">toString</span>();</span><br><span class="line">  <span class="keyword">return</span> value.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + value.<span class="title function_">slice</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当全局过滤器和局部过滤器重名时，会采用局部过滤器。</p>
</blockquote>
<p>过滤器可以串联</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#123;</span><br><span class="line">    message | filterA | filterB;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，filterA 被定义为接收单个参数的过滤器函数，表达式 message 的值将作为参数传入到函数中。然后继续调用同样被定义为接收单个参数的过滤器函数 filterB，将 filterA 的结果传递到 filterB 中。</p>
<p>过滤器可以接收参数:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#123;</span><br><span class="line">    message | <span class="title function_">filterA</span>(<span class="string">&quot;arg1&quot;</span>, arg2);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里，filterA 被定义为接收三个参数的过滤器函数。其中 message 的值作为第一个参数，普通字符串 ‘arg1’ 作为第二个参数，表达式 arg2 的值作为第三个参数。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/vue%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/vue%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB/" class="post-title-link" itemprop="url">vue过渡和动画</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:05:00" itemprop="dateCreated datePublished" datetime="2022-09-26T21:05:00+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:43:59" itemprop="dateModified" datetime="2023-04-07T08:43:59+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: vue过渡和动画</p>
<p>date: 2019-10-14 12:08:18</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>Vue.js # 一级分类</li>
<li>Vue.js进阶 # 二级分类</li>
</ul>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/" class="post-title-link" itemprop="url">移动端适配</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:55" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:55+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:43:59" itemprop="dateModified" datetime="2023-04-07T08:43:59+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: 移动端适配<br>date: 2019-10-09 21:30:02<br>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>css # 一级分类</li>
<li>移动端 # 二级分类</li>
</ul>
<hr>
<h1 id="媒体查询-media-query"><a href="#媒体查询-media-query" class="headerlink" title="媒体查询 media-query"></a>媒体查询 media-query</h1><p>当媒体查询为 true 时，相关的样式表或样式规则会按照正常的级联规被应用。 当媒体查询返回 false， 标签上带有媒体查询的样式表仍将被下载 （只不过不会被应用）。</p>
<p>包含了一个媒体类型和至少一个使用宽度、高度和颜色等媒体属性来限制样式表范围的表达式。CSS3 加入的媒体查询使得无需修改内容便可以使样式应用于某些特定的设备范围。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@media (min-<span class="attr">width</span>: 700px) and (<span class="attr">orientation</span>: landscape)&#123;</span><br><span class="line">  <span class="comment">// 大于700px执行display：none</span></span><br><span class="line">    .<span class="property">sidebar</span> &#123;</span><br><span class="line">        <span class="attr">display</span>: none;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="视口-iewport"><a href="#视口-iewport" class="headerlink" title="视口 iewport"></a>视口 iewport</h1><p>为什么要设置 viewport<br>viewport 的设置不会对 PC 页面产生影响，但对于移动页面却很重要。下面我们举例来说明：</p>
<ol>
<li>媒体查询 @media 响应式布局中，会根据媒体查询功能来适配多端布局，必须对 viewport 进行设置，否则根据查询到的尺寸无法正确匹配视觉宽度而导致布局混乱。如不设置 viewport 参数，多说移动端媒体查询的结果将是 980px 这个节点布局的参数，而非我们通常设置的 768px 范围内的这个布局参数</li>
<li>由于目前多数手机的 dpr 都不再是 1，为了产出高保真页面，我们一般会给出 750px 的设计稿，那么就需要通过设置 viewport 的参数来进行整体换算，而不是在每次设置尺寸时进行长度的换算。</li>
</ol>
<h2 id="viewport-详解"><a href="#viewport-详解" class="headerlink" title="viewport 详解"></a>viewport 详解</h2><p>在移动端有三种类型的 viewport: layoutviewport、visualviewport、idealviewport。具体解释如下：</p>
<p><code>layoutviewport</code>:   大于实际屏幕， 元素的宽度继承于 layoutviewport，用于保证网站的外观特性与桌面浏览器一样。layoutviewport 到底多宽，每个浏览器不同。iPhone 的 safari 为 980px，通过 document.documentElement.clientWidth 获取。<br><code>visualviewport</code>: 当前显示在屏幕上的页面，即浏览器可视区域的宽度。<br><code>idealviewport</code>: 为浏览器定义的可完美适配移动端的理想 viewport，固定不变，可以认为是设备视口宽度。比如 iphone 7 为 375px, iphone 7p 为 414px。</p>
<h2 id="viewport-设置"><a href="#viewport-设置" class="headerlink" title="viewport 设置"></a>viewport 设置</h2><p><code>&lt;meta name=&#39;viewport&#39; content=&#39;width=device-width,initial-scale=1,user-scalable=no&#39;/&gt;</code><br>通过对 meta 标签三个 viewport 的设置，最终使页面完美展示。</p>
<ol>
<li>width 设置的是 layoutviewport 的宽度</li>
<li>initial-scale 设置页面的初始缩放值，并且这个初始缩放值是相对于 idealviewport 缩放的，最终得到的结果不仅会决定 visualviewport，还会影响到 layoutviewport</li>
<li>user-scalable 是否允许用户进行缩放的设置</li>
</ol>
<blockquote>
<p>只要 layoutviewport &#x3D;&#x3D;&#x3D; visualviewport，页面下面不会出现滚动条，默认只是把页面放大或缩小。</p>
</blockquote>
<h2 id="设备像素比-dpr-与-1px-物理像素"><a href="#设备像素比-dpr-与-1px-物理像素" class="headerlink" title="设备像素比 dpr 与 1px 物理像素"></a>设备像素比 dpr 与 1px 物理像素</h2><h4 id="物理像素（physical-pixel）"><a href="#物理像素（physical-pixel）" class="headerlink" title="物理像素（physical pixel）"></a>物理像素（physical pixel）</h4><p>手机屏幕上显示的最小单元，该最小单元具有颜色及亮度的属性可供设置，iphone6、7、8 为：750 _ 1334，iphone6+、7+、8+ 为 1242 _ 2208</p>
<h4 id="设备独立像素（density-indenpendent-pixel）"><a href="#设备独立像素（density-indenpendent-pixel）" class="headerlink" title="设备独立像素（density-indenpendent pixel）"></a>设备独立像素（density-indenpendent pixel）</h4><p>此为逻辑像素，计算机设备中的一个点，css 中设置的像素指的就是该像素。老早在没有 retina 屏之前，设备独立像素与物理像素是相等的。</p>
<h4 id="设备像素比（device-pixel-ratio）"><a href="#设备像素比（device-pixel-ratio）" class="headerlink" title="设备像素比（device pixel ratio）"></a>设备像素比（device pixel ratio）</h4><p>设备像素比(dpr) &#x3D; 物理像素&#x2F;设备独立像素。如 iphone 6、7、8 的 dpr 为 2，那么一个设备独立像素便为 4 个物理像素，因此在 css 上设置的 1px 在其屏幕上占据的是 2 个物理像素，0.5px 对应的才是其所能展示的最小单位。这就是 1px 在 retina 屏上变粗的原因，目前有很多办法来解决这一问题。</p>
<h4 id="1px-的物理像素的解决方案"><a href="#1px-的物理像素的解决方案" class="headerlink" title="1px 的物理像素的解决方案"></a>1px 的物理像素的解决方案</h4><p>从第一部分的讨论可知 viewport 的 initial-scale 具有缩放页面的效果。对于 dpr&#x3D;2 的屏幕，1px 压缩一半便可与 1px 的设备像素比匹配，这就可以通过将缩放比 initial-scale 设置为 0.5&#x3D;1&#x2F;2 而实现。以此类推 dpr&#x3D;3 的屏幕可以将 initial-scale 设置为 0.33&#x3D;1&#x2F;3 来实现。</p>
<h1 id="设备像素比-dpr-与-rem-的适配方案"><a href="#设备像素比-dpr-与-rem-的适配方案" class="headerlink" title="设备像素比 dpr 与 rem 的适配方案"></a>设备像素比 dpr 与 rem 的适配方案</h1><p>rem 是相对于根元素 html 的 font-size 来做计算。通常在页面初始化时加载时通过对 document.documentElement.style.fontSize 设置来实现。</p>
<h4 id="rem-适配规则"><a href="#rem-适配规则" class="headerlink" title="rem 适配规则"></a>rem 适配规则</h4><p>通过对 initial-scale &#x3D; 1&#x2F;dpr 的设置，已将对屏幕的描述从物理像素转化到了物理像素上了，这将是后续推导的基础，且设计稿为 750px。</p>
<p>物理像素为 750 &#x3D; 375 _ 2，若屏幕等分为 10 份，那么 1rem &#x3D; 75px，10rem &#x3D; 750px;<br>物理像素为 1125 &#x3D; 375 _ 3，若屏幕等分为 10 份，那么 1rem &#x3D; 112.5px, 10rem &#x3D; 1125px;<br>物理像素为 1242 &#x3D; 414 * 3, 若屏幕等分为 10 份，那么 1rem &#x3D; 124.2px, 10rem &#x3D; 1242px;</p>
<p>同时为了书写方便可以直接通过 px 布局，然后在打包时利用 pxtorem 库转化为基于 rem 的布局。</p>
<h1 id="视口单位-vw-vh-适配方案"><a href="#视口单位-vw-vh-适配方案" class="headerlink" title="视口单位(vw,vh)适配方案"></a>视口单位(vw,vh)适配方案</h1><p>将视口宽度 window.innerWidth 和视口高度 window.innerHeight 等分为 100 份，且将这里的视口理解成 idealviewport 更为贴切，并不会随着 viewport 的不同设置而改变。</p>
<p>vw : 1vw 为视口宽度的 1%<br>vh : 1vh 为视口高度的 1%<br>vmin :  vw 和 vh 中的较小值<br>vmax : 选取 vw 和 vh 中的较大值</p>
<p>如果设计稿为 750px，那么 1vw &#x3D; 7.5px，100vw &#x3D; 750px。其实设计稿按照设么都没多大关系，最终转化过来的都是相对单位，上面讲的 rem 也是对它的模拟。这里的比例关系也推荐不要自己换算，使用 pxtoviewport 的库就可以帮我们转换。当然每种方案都会有其弊端，这里就不展开讨论。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/canvas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/canvas/" class="post-title-link" itemprop="url">canvas</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:25" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:25+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:44:00" itemprop="dateModified" datetime="2023-04-07T08:44:00+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: canvas画板</p>
<p>date: 2019-08-27 13:39:26</p>
<p>tags: html5</p>
<p>categories:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>HTML5 # 一级分类</li>
<li>canvas # 二级分类</li>
</ul>
<hr>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>canvas 本身没有绘图能力，只是定义了一个容器，都是由 canvas 内部的 CanvasRenderingContext2D 对象来做，需要我们用 JavaScript 脚本完成绘制工作。</p>
<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><ol>
<li>html 引入<code>&lt;canvas&gt;</code>标签</li>
</ol>
<p><code>&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;</code></p>
<ol start="2">
<li>js 获取<code>&lt;canvas&gt;</code>属性,使用 2d 绘制上下文.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"><span class="comment">//使用context进行绘制</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>设置宽高</li>
</ol>
<p>使用<code>canvas.width</code>设置宽度.</p>
<p><code>canvas.height</code>设置高度.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">sytle</span>=<span class="string">&quot;border: 1px solid #aaa;display: block;margin: 50px auto;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        canvas.<span class="property">width</span>: <span class="number">1024</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        canvas.<span class="property">height</span>: <span class="number">768</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span>(canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>))&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//如果浏览器支持canvas,可以使用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;<span class="keyword">else</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="string">&#x27;当前浏览器不支持,请使用谷歌浏览器&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>设置全屏</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pageWidth = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>;</span><br><span class="line"><span class="keyword">let</span> pageHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line"></span><br><span class="line">canvas.<span class="property">width</span> = pageWidth;</span><br><span class="line">canvas.<span class="property">height</span> = pageHeight;</span><br></pre></td></tr></table></figure>

<h2 id="绘制线段"><a href="#绘制线段" class="headerlink" title="绘制线段"></a>绘制线段</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">conext.<span class="title function_">beginPath</span>(); <span class="comment">//开始第一段绘制,与其他绘制可以区别开</span></span><br><span class="line">context.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">//以画布左上角为原点,从坐标(100,100)开始</span></span><br><span class="line">context.<span class="title function_">lineTO</span>(<span class="number">700</span>, <span class="number">700</span>); <span class="comment">//把线画到(700,700)位置</span></span><br><span class="line">context.<span class="title function_">lineTO</span>(<span class="number">100</span>, <span class="number">700</span>); <span class="comment">//折到(100,700)位置</span></span><br><span class="line">context.<span class="title function_">lineTO</span>(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">//线段完成封闭,形成三角形</span></span><br><span class="line">context.<span class="title function_">closePath</span>(); <span class="comment">//结束本段状态</span></span><br><span class="line"></span><br><span class="line">context.<span class="property">fillStyle</span> = <span class="string">&quot;rgab(168,168,168)&quot;</span>; <span class="comment">//设置三角形填充颜色</span></span><br><span class="line">context.<span class="title function_">fill</span>(); <span class="comment">//执行填充颜色</span></span><br><span class="line"></span><br><span class="line">context.<span class="property">lineWidth</span> = <span class="number">5</span>; <span class="comment">//设置线段宽度</span></span><br><span class="line">context.<span class="property">strokeStyle</span> = <span class="string">&quot;red&quot;</span>; <span class="comment">//设置线段颜色</span></span><br><span class="line">context.<span class="property">stroke</span>; <span class="comment">//执行绘图</span></span><br><span class="line"></span><br><span class="line">conext.<span class="title function_">beginPath</span>(); <span class="comment">//开始第二段绘制,与其他绘制可以区别开</span></span><br><span class="line">context.<span class="title function_">moveTo</span>(<span class="number">200</span>, <span class="number">100</span>); <span class="comment">//以画布左上角为原点,从坐标(200,100)开始</span></span><br><span class="line">context.<span class="title function_">lineTO</span>(<span class="number">700</span>, <span class="number">600</span>); <span class="comment">//把线画到(700,600)位置</span></span><br><span class="line">context.<span class="title function_">closePath</span>(); <span class="comment">//结束本段状态</span></span><br><span class="line"></span><br><span class="line">context.<span class="property">strokeStyle</span> = <span class="string">&quot;blue&quot;</span>; <span class="comment">//设置线段颜色</span></span><br><span class="line">context.<span class="property">stroke</span>; <span class="comment">//执行第二段绘图</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>标签属性</p>
<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">height</td>
<td align="left">设置 canvas 的高度</td>
</tr>
<tr>
<td align="left">width</td>
<td align="left">设置 canvas 的宽度</td>
</tr>
<tr>
<td align="left">fill()</td>
<td align="left">可以填充</td>
</tr>
<tr>
<td align="left">fillRect(x,y,width,height)</td>
<td align="left">绘制一个矩形边框</td>
</tr>
<tr>
<td align="left">fillRect(x,y,width,height)</td>
<td align="left">绘制一个填充的矩形</td>
</tr>
<tr>
<td align="left">clearRect(x,y,width,height)</td>
<td align="left">清除指定矩形区域，让清除部分完全透明</td>
</tr>
<tr>
<td align="left">ctx.strokeStyle</td>
<td align="left">可以改变画笔颜色</td>
</tr>
<tr>
<td align="left">ctx.beginPath()</td>
<td align="left">设置开始路径</td>
</tr>
<tr>
<td align="left">ctx.moveTo(x,y)</td>
<td align="left">设置起点</td>
</tr>
<tr>
<td align="left">ctx.lineTo(x,y)</td>
<td align="left">设置终点</td>
</tr>
<tr>
<td align="left">ctx.stroke()</td>
<td align="left">绘制</td>
</tr>
<tr>
<td align="left">ctx.closePath()</td>
<td align="left">结束路径</td>
</tr>
<tr>
<td align="left">ctx.arc(弧形圆心 x 坐标，y 坐标，半径，起始角(以 3 点钟的位置开始)，结束角、方向(true 表示逆时针，false 表示顺时针))</td>
<td align="left">绘制一个弧形</td>
</tr>
<tr>
<td align="left">ctx.quadraticCurveTo(cpx,cpy,x,y)参数是控制点 x 坐标，控制点 y 坐标，结束点 x 坐标，结束点 y 坐标</td>
<td align="left">绘制二次贝塞尔曲线</td>
</tr>
<tr>
<td align="left">ctx.quadraticCurveTo(cpx1,cpy1,cpx2,cpy2,x,y)参数是控制点 1 的 x 坐标，控制点 1 的 y 坐标，控制点 2 的 x 坐标，控制点 2 的 y 坐标，结束点 x 坐标，结束点 y 坐标</td>
<td align="left">绘制三次贝塞尔曲线</td>
</tr>
</tbody></table>
</li>
<li><p>canvas 画板代码实现</p>
</li>
</ol>
<h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS Bin<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;actions&quot;</span><span class="attr">class</span>=<span class="string">&quot;actions x&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">&quot;pen&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-pencil&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">&quot;eraser&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-eraser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">&quot;clear&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-delete&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">&quot;download&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-download&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&#x27;colorCir&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;black&quot;</span><span class="attr">class</span>=<span class="string">&quot;black&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;red&quot;</span><span class="attr">class</span>=<span class="string">&quot;red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;yellow&quot;</span><span class="attr">class</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;blue&quot;</span><span class="attr">class</span>=<span class="string">&quot;blue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&#x27;lineWidth&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;thin&quot;</span> <span class="attr">class</span>=<span class="string">&quot;thin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;thick&quot;</span> <span class="attr">class</span>=<span class="string">&quot;thick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attr">margin</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attr">padding</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">body&#123;</span><br><span class="line">    <span class="attr">background</span>:#eee</span><br><span class="line">&#125;</span><br><span class="line">ul,ol&#123;</span><br><span class="line">    list-<span class="attr">style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">colorCir</span>&#123;</span><br><span class="line">    <span class="attr">top</span>:60px;</span><br><span class="line">    <span class="attr">left</span>:20px;</span><br><span class="line">    <span class="attr">position</span>: fixed;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">colorCir</span> li&#123;</span><br><span class="line">    <span class="attr">border</span>: 1px solid grey;</span><br><span class="line">    <span class="attr">height</span>:20px;</span><br><span class="line">    <span class="attr">width</span>: 20px;</span><br><span class="line">    border-<span class="attr">radius</span>: <span class="number">50</span>%;</span><br><span class="line">    margin-<span class="attr">bottom</span>:10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">red</span>&#123;</span><br><span class="line">    <span class="attr">background</span>:red;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">yellow</span>&#123;</span><br><span class="line">    <span class="attr">background</span>:yellow;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">blue</span>&#123;</span><br><span class="line">    <span class="attr">background</span>:blue;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">black</span>&#123;</span><br><span class="line">    <span class="attr">background</span>:black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">red</span>.<span class="property">active</span>&#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    <span class="attr">transition</span>: all <span class="number">0.</span>3s;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">yellow</span>.<span class="property">active</span>&#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    <span class="attr">transition</span>: all <span class="number">0.</span>3s;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">blue</span>.<span class="property">active</span>&#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    <span class="attr">transition</span>: all <span class="number">0.</span>3s;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">colorCir</span> .<span class="property">black</span>.<span class="property">active</span>&#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    <span class="attr">transition</span>: all <span class="number">0.</span>3s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">icon</span> &#123;</span><br><span class="line">    <span class="attr">width</span>: 1em; <span class="attr">height</span>: 1em;</span><br><span class="line">    vertical-<span class="attr">align</span>: -<span class="number">0.</span>15em;</span><br><span class="line">    <span class="attr">fill</span>: currentColor;</span><br><span class="line">    <span class="attr">overflow</span>: hidden;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">body&#123;</span><br><span class="line">    <span class="attr">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line">#canvas&#123;</span><br><span class="line">    <span class="attr">display</span>: block;</span><br><span class="line">    <span class="attr">position</span>: fixed;</span><br><span class="line">    <span class="attr">top</span>:0px;</span><br><span class="line">    <span class="attr">left</span>:0px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">actions</span>&#123;</span><br><span class="line">    <span class="attr">position</span>: fixed;</span><br><span class="line">    <span class="attr">top</span>:0px;</span><br><span class="line">    <span class="attr">left</span>:0px;</span><br><span class="line">    padding-<span class="attr">top</span>:20px;</span><br><span class="line">    padding-<span class="attr">left</span>:15px;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">actions</span> svg&#123;</span><br><span class="line">    <span class="attr">width</span>:<span class="number">1.</span>5em;</span><br><span class="line">    <span class="attr">height</span>:<span class="number">1.</span>5em;</span><br><span class="line">    <span class="attr">transition</span>: all <span class="number">0.</span>3s;</span><br><span class="line">    <span class="attr">margin</span>:<span class="number">0</span> 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">actions</span> svg.<span class="property">active</span>&#123;</span><br><span class="line">    <span class="attr">fill</span>:red;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">lineWidth</span>&#123;</span><br><span class="line">    <span class="attr">position</span>: relative;</span><br><span class="line">    <span class="attr">left</span>:-10px;</span><br><span class="line">    <span class="attr">top</span>:140px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">lineWidth</span> .<span class="property">thin</span>&#123;</span><br><span class="line">    <span class="attr">height</span>:0px;</span><br><span class="line">    <span class="attr">width</span>:40px;</span><br><span class="line">    border-<span class="attr">top</span>:2px solid black;</span><br><span class="line">    <span class="attr">margin</span>:15px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">lineWidth</span> .<span class="property">thick</span>&#123;</span><br><span class="line">    <span class="attr">height</span>:0px;</span><br><span class="line">    <span class="attr">width</span>:40px;</span><br><span class="line">    border-<span class="attr">top</span>:6px solid black;</span><br><span class="line">    <span class="attr">margin</span>:15px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">lineWidth</span> .<span class="property">thin</span>.<span class="property">active</span>&#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">lineWidth</span> .<span class="property">thick</span>.<span class="property">active</span>&#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> using = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> lastPoint = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">y</span>: <span class="literal">undefined</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*画板逻辑 */</span></span><br><span class="line"><span class="title function_">autoSetSize</span>(canvas);</span><br><span class="line"></span><br><span class="line"><span class="title function_">listenToUser</span>(canvas);</span><br><span class="line"></span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"><span class="comment">//画笔、橡皮擦按钮替换</span></span><br><span class="line"><span class="keyword">var</span> eraserEnabled = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">pen.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  eraserEnabled = <span class="literal">false</span>;</span><br><span class="line">  pen.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  eraser.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">eraser.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  eraserEnabled = <span class="literal">true</span>;</span><br><span class="line">  eraser.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  pen.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//颜色替换并高亮</span></span><br><span class="line">red.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  context.<span class="property">fillStyle</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">  context.<span class="property">strokeStyle</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">  red.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  yellow.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  blue.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  black.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">yellow.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  context.<span class="property">fillStyle</span> = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">  context.<span class="property">strokeStyle</span> = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">  yellow.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  red.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  blue.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  black.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">blue.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  context.<span class="property">fillStyle</span> = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">  context.<span class="property">strokeStyle</span> = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">  blue.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  yellow.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  red.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  black.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">black.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  context.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">  context.<span class="property">strokeStyle</span> = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">  black.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  yellow.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  blue.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  red.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/********/</span></span><br><span class="line"></span><br><span class="line">thin.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  thin.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  thick.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  context.<span class="property">lineWidth</span> = <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">thick.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  thick.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  thin.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  context.<span class="property">lineWidth</span> = <span class="number">4</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">clear.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  context.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">clientWidth</span>, canvas.<span class="property">clientHeight</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">download.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> url = canvas.<span class="title function_">toDataURL</span>(<span class="string">&quot;image/png&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a);</span><br><span class="line">  a.<span class="property">href</span> = url;</span><br><span class="line">  a.<span class="property">download</span> = <span class="string">&quot;my drawing&quot;</span>;</span><br><span class="line">  a.<span class="title function_">click</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//drawLine</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawLine</span>(<span class="params">x1, y1, x2, y2</span>) &#123;</span><br><span class="line">  context.<span class="title function_">beginPath</span>();</span><br><span class="line">  context.<span class="title function_">moveTo</span>(x1, y1);</span><br><span class="line">  context.<span class="title function_">lineTo</span>(x2, y2);</span><br><span class="line">  context.<span class="title function_">stroke</span>();</span><br><span class="line">  context.<span class="title function_">closePath</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//drawCir</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawCir</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  context.<span class="title function_">beginPath</span>();</span><br><span class="line">  context.<span class="title function_">arc</span>(x, y, <span class="number">0.1</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>);</span><br><span class="line">  context.<span class="title function_">fill</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重置canvas画板宽高</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setCanvasSize</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> pageWidth = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>;</span><br><span class="line">  <span class="keyword">var</span> pageHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line"></span><br><span class="line">  canvas.<span class="property">width</span> = pageWidth;</span><br><span class="line">  canvas.<span class="property">height</span> = pageHeight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自动设置canvas画板宽高</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">autoSetSize</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">setCanvasSize</span>();</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setCanvasSize</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">preventBehavior</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchmove&quot;</span>, preventBehavior, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">listenToUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//特性检测</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">ontouchstart</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="comment">//是触屏设备</span></span><br><span class="line">    canvas.<span class="property">ontouchstart</span> = <span class="keyword">function</span> (<span class="params">aaa</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> x = aaa.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientX</span>;</span><br><span class="line">      <span class="keyword">var</span> y = aaa.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span>;</span><br><span class="line">      using = <span class="literal">true</span>;</span><br><span class="line">      lastPoint = &#123; <span class="attr">x</span>: x, <span class="attr">y</span>: y &#125;;</span><br><span class="line">      <span class="keyword">if</span> (eraserEnabled) &#123;</span><br><span class="line">        context.<span class="title function_">clearRect</span>(x - <span class="number">10</span>, y - <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">drawCir</span>(x, y);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    canvas.<span class="property">ontouchmove</span> = <span class="keyword">function</span> (<span class="params">aaa</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> x = aaa.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientX</span>;</span><br><span class="line">      <span class="keyword">var</span> y = aaa.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span>;</span><br><span class="line">      <span class="keyword">var</span> newPoint = &#123; <span class="attr">x</span>: x, <span class="attr">y</span>: y &#125;;</span><br><span class="line">      <span class="keyword">if</span> (using) &#123;</span><br><span class="line">        <span class="keyword">if</span> (eraserEnabled) &#123;</span><br><span class="line">          context.<span class="title function_">clearRect</span>(x - <span class="number">10</span>, y - <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">drawCir</span>(x, y);</span><br><span class="line">          <span class="title function_">drawLine</span>(lastPoint.<span class="property">x</span>, lastPoint.<span class="property">y</span>, newPoint.<span class="property">x</span>, newPoint.<span class="property">y</span>);</span><br><span class="line">          lastPoint = newPoint;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    canvas.<span class="property">ontouchend</span> = <span class="keyword">function</span> (<span class="params">aaa</span>) &#123;</span><br><span class="line">      using = <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//不是触屏设备</span></span><br><span class="line">    canvas.<span class="property">onmousedown</span> = <span class="keyword">function</span> (<span class="params">aaa</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> x = aaa.<span class="property">clientX</span>;</span><br><span class="line">      <span class="keyword">var</span> y = aaa.<span class="property">clientY</span>;</span><br><span class="line">      using = <span class="literal">true</span>;</span><br><span class="line">      lastPoint = &#123; <span class="attr">x</span>: x, <span class="attr">y</span>: y &#125;;</span><br><span class="line">      <span class="keyword">if</span> (eraserEnabled) &#123;</span><br><span class="line">        context.<span class="title function_">clearRect</span>(x - <span class="number">10</span>, y - <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">drawCir</span>(x, y);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标移动监听</span></span><br><span class="line">    canvas.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">aaa</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> x = aaa.<span class="property">clientX</span>;</span><br><span class="line">      <span class="keyword">var</span> y = aaa.<span class="property">clientY</span>;</span><br><span class="line">      <span class="keyword">var</span> newPoint = &#123; <span class="attr">x</span>: x, <span class="attr">y</span>: y &#125;;</span><br><span class="line">      <span class="keyword">if</span> (using) &#123;</span><br><span class="line">        <span class="keyword">if</span> (eraserEnabled) &#123;</span><br><span class="line">          context.<span class="title function_">clearRect</span>(x - <span class="number">10</span>, y - <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">drawCir</span>(x, y);</span><br><span class="line">          <span class="title function_">drawLine</span>(lastPoint.<span class="property">x</span>, lastPoint.<span class="property">y</span>, newPoint.<span class="property">x</span>, newPoint.<span class="property">y</span>);</span><br><span class="line">          lastPoint = newPoint;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//鼠标松开监听</span></span><br><span class="line">    canvas.<span class="property">onmouseup</span> = <span class="keyword">function</span> (<span class="params">aaa</span>) &#123;</span><br><span class="line">      using = <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/Chart-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/Chart-js/" class="post-title-link" itemprop="url">Chart-js</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:20" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:20+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:44:00" itemprop="dateModified" datetime="2023-04-07T08:44:00+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: Chart.js</p>
<p>date: 2019-10-03 11:30:37</p>
<p>tags: html5</p>
<p>categories:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>HTML5 # 一级分类</li>
<li>canvas # 二级分类</li>
</ul>
<hr>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>而另一个版本 Chart.bundle.js 和 Chart.bundle.min.js 早就包含了 Moment.js 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install chart.<span class="property">js</span> --save</span><br></pre></td></tr></table></figure>

<h2 id="CDN-引入"><a href="#CDN-引入" class="headerlink" title="CDN 引入"></a>CDN 引入</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.bundle.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="模块化引入"><a href="#模块化引入" class="headerlink" title="模块化引入"></a>模块化引入</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Chart</span> <span class="keyword">from</span> <span class="string">&#x27;chart.js&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> myChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;...&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="简单上手"><a href="#简单上手" class="headerlink" title="简单上手"></a>简单上手</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;myChart&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 获取我们要选择的canvas元素的上下文</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> ctx = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myChart&quot;</span>).<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> myNewChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;...&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 使用jQuery获取上下文-使用jQuery的.get（）方法。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> ctx = $(<span class="string">&quot;#myChart&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 这将获取jQuery集合中第一个返回的节点。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> myNewChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果您希望所有创建的图表都具有响应性，并在浏览器窗口打开时调整大小，则可以更改以下设置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Chart</span>.<span class="property">defaults</span>.<span class="property">global</span>.<span class="property">responsive</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<h1 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h1><p>折线图是在一条线上绘制数据点的方法.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myLineChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: data,</span><br><span class="line">  <span class="attr">options</span>: options,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>数据结构</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  <span class="comment">//横坐标显示的值</span></span><br><span class="line">  <span class="attr">labels</span>: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>, <span class="number">2019</span>],</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//第一条线表示优酷</span></span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;优酷&quot;</span>,</span><br><span class="line">      <span class="comment">//设定data数值,表示每年用户总量</span></span><br><span class="line">      <span class="attr">data</span>: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//第二条线表示YouTube</span></span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;YouTube&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="设置坐标轴"><a href="#设置坐标轴" class="headerlink" title="设置坐标轴"></a>设置坐标轴</h2><h3 id="Y-轴"><a href="#Y-轴" class="headerlink" title="Y 轴"></a>Y 轴</h3><p>options.yAxes</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="comment">//设置缩放</span></span><br><span class="line">  <span class="attr">scales</span>: &#123;</span><br><span class="line">    <span class="comment">//设置Y轴</span></span><br><span class="line">    <span class="attr">yAxes</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//刻度</span></span><br><span class="line">        <span class="attr">ticks</span>: &#123;</span><br><span class="line">          <span class="comment">//固定最大最小</span></span><br><span class="line">          <span class="attr">min</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//建议最大最小</span></span><br><span class="line">          <span class="attr">suggestedMin</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">suggestedMax</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//跨度</span></span><br><span class="line">          <span class="attr">stepSize</span>: <span class="number">400</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//用回调函数设置单位</span></span><br><span class="line">          <span class="attr">callback</span>: <span class="keyword">function</span> (<span class="params">value, index, values</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value + <span class="string">&quot;人&quot;</span>;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="标题和图例"><a href="#标题和图例" class="headerlink" title="标题和图例"></a>标题和图例</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">    <span class="comment">//设置标题</span></span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">        <span class="attr">display</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;阿银&#x27;</span>,</span><br><span class="line">        <span class="attr">fontColor</span>: <span class="string">&#x27;black&#x27;</span>,</span><br><span class="line">        <span class="attr">fontSize</span>: <span class="string">&#x27;24&#x27;</span>,</span><br><span class="line">        <span class="attr">position</span>: <span class="string">&#x27;top&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">legend</span>: &#123;</span><br><span class="line">        <span class="comment">//设置图例</span></span><br><span class="line">        <span class="attr">position</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">        <span class="attr">display</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">animation</span>: &#123;</span><br><span class="line">        <span class="comment">//动态效果,为0时禁用动画</span></span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span>,</span><br><span class="line">        <span class="attr">easing</span>: <span class="string">&#x27;easeOutQuart&#x27;</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="线型变换"><a href="#线型变换" class="headerlink" title="线型变换"></a>线型变换</h1><p><code>data.datasets</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">    <span class="attr">labels</span>: [<span class="number">2014</span>,<span class="number">2015</span>,<span class="number">2016</span>,<span class="number">2017</span>,<span class="number">2018</span>,<span class="number">2019</span>],</span><br><span class="line">    <span class="attr">datasets</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">label</span>:  <span class="string">&#x27;优酷&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: [<span class="number">100</span>,<span class="number">200</span>,<span class="number">400</span>,<span class="number">800</span>,<span class="number">1600</span>],</span><br><span class="line">            <span class="comment">//线段颜色</span></span><br><span class="line">            <span class="attr">borderColor</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">            <span class="comment">//线宽</span></span><br><span class="line">            <span class="attr">borderWidth</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="comment">//背景色是否填充</span></span><br><span class="line">            <span class="attr">fill</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//背景色</span></span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;rgba(128,0,0,0.5),</span></span><br><span class="line"><span class="string">            //线段曲率,为0显示折线</span></span><br><span class="line"><span class="string">            lineTension: 0,</span></span><br><span class="line"><span class="string">            //折点的造型,默认是圆点.可选三角,方块,星星</span></span><br><span class="line"><span class="string">            pointStyle: &#x27;</span>rect<span class="string">&#x27;</span></span><br><span class="line"><span class="string">        &#125;,&#123;</span></span><br><span class="line"><span class="string">            label: &#x27;</span><span class="title class_">YouTube</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">            data: [50,100,200,400,600]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="条形图-柱状图"><a href="#条形图-柱状图" class="headerlink" title="条形图(柱状图)"></a>条形图(柱状图)</h1><p>垂直条形图: <code>type: bar</code></p>
<p>水平条形图: <code>type: horizontalBar</code></p>
<p>大部分属性类似于折线图</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  <span class="attr">labels</span>: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>],</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;优酷&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>],</span><br><span class="line">      <span class="comment">//为每个条形单独设置颜色</span></span><br><span class="line">      <span class="attr">backgroundColor</span>: [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;YouTube&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>还可以设置条形重叠(覆盖)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">scales</span>: &#123;</span><br><span class="line">            <span class="attr">xAxes</span>: [&#123;</span><br><span class="line">                <span class="comment">//设置覆盖</span></span><br><span class="line">                <span class="attr">stacked</span>: <span class="literal">true</span></span><br><span class="line">            &#125;],</span><br><span class="line">            <span class="attr">yAxes</span>: [&#123;</span><br><span class="line">                <span class="comment">//设置覆盖</span></span><br><span class="line">                <span class="attr">stacked</span>: <span class="literal">true</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="混合图"><a href="#混合图" class="headerlink" title="混合图"></a>混合图</h1><p>线形图和条形图的混合</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixedChart = <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx, &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">datasets</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&quot;优酷&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [<span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">800</span>, <span class="number">1600</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&quot;YouTube&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [<span class="number">50</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>],</span><br><span class="line">        <span class="comment">//再改成线图</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">        <span class="comment">//防止填充遮盖到条形图</span></span><br><span class="line">        <span class="attr">fill</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">labels</span>: [<span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>, <span class="number">2018</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">options</span>: options,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="雷达图-六边形图"><a href="#雷达图-六边形图" class="headerlink" title="雷达图(六边形图)"></a>雷达图(六边形图)</h1><p><code>type = &#39;radar&#39;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">type = <span class="string">&quot;radar&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  <span class="attr">labels</span>: [<span class="string">&quot;力量&quot;</span>, <span class="string">&quot;速度&quot;</span>, <span class="string">&quot;经验&quot;</span>, <span class="string">&quot;防守&quot;</span>, <span class="string">&quot;技术&quot;</span>, <span class="string">&quot;发球&quot;</span>],</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;帝国の破坏龙-马龙&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&quot;rgba(247,247,9,0.2)&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&quot;帝国の绝凶虎-张继科&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&quot;rgba(238,61,17,0.2)&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="attr">scale</span>: &#123;</span><br><span class="line">    <span class="attr">ticks</span>: &#123;</span><br><span class="line">      <span class="attr">suggestedMin</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">suggestedMax</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="attr">stepSize</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;桌球帝国战力值&quot;</span>,</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="string">&quot;24&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="饼图和甜甜圈"><a href="#饼图和甜甜圈" class="headerlink" title="饼图和甜甜圈"></a>饼图和甜甜圈</h1><p>饼图: <code>type: &#39;pie&#39;</code></p>
<p>甜甜圈: <code>type: &#39;doughnut&#39;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">  <span class="attr">datasets</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">data</span>: [<span class="number">30</span>, <span class="number">20</span>, <span class="number">30</span>],</span><br><span class="line">      <span class="attr">backgroundColor</span>: [<span class="string">&quot;green&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="string">&quot;yellow&quot;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="attr">labels</span>: [<span class="string">&quot;马龙&quot;</span>, <span class="string">&quot;张继科&quot;</span>, <span class="string">&quot;王浩&quot;</span>],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="comment">//50-用于甜甜圈，0-用于饼图</span></span><br><span class="line">  <span class="attr">cutoutPercentage</span>: <span class="number">80</span>,</span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;桌球帝国战力值&quot;</span>,</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="string">&quot;24&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="极区图"><a href="#极区图" class="headerlink" title="极区图"></a>极区图</h1><p><code>type: &#39;polarArea&#39;</code></p>
<p>极区图类似于饼图，但是每个线段具有相同的角度-线段的半径根据值而不同。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/TypeScript%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/TypeScript%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">TypeScript入门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:15" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:15+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:44:00" itemprop="dateModified" datetime="2023-04-07T08:44:00+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-TypeScript-入门-date-2019-10-03-16-00-08"><a href="#title-TypeScript-入门-date-2019-10-03-16-00-08" class="headerlink" title="title: TypeScript 入门 date: 2019-10-03 16:00:08"></a>title: TypeScript 入门 date: 2019-10-03 16:00:08</h2><p>tags:</p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>TypeScript 具有类型系统，且是 JavaScript 的超集。 它可以编译成普通的 JavaScript 代码。 TypeScript 支持任意浏览器，任意环境，任意系统并且是开源的。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br><span class="line">//查看版本号</span><br><span class="line">tsc -v</span><br><span class="line">//查看安装目录</span><br><span class="line">npm bin -g</span><br><span class="line"></span><br><span class="line">//代码编译</span><br><span class="line">tsc helloworld.ts</span><br><span class="line">//会出现一个helloworld.js</span><br></pre></td></tr></table></figure>

<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>输出文件夹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将文件编译到dist文件夹下</span></span><br><span class="line">tsc --outDir dist helloworld.<span class="property">ts</span></span><br></pre></td></tr></table></figure>

<h2 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用代码初始化,生成tsconfig.json</span></span><br><span class="line">tsc --init</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改文件内属性</span></span><br><span class="line"><span class="comment">//设置输出文件夹dist</span></span><br><span class="line"><span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;./dist&quot;</span></span><br><span class="line"><span class="comment">//设置源代码文件夹</span></span><br><span class="line"><span class="string">&quot;rootDir&quot;</span>: <span class="string">&quot;./src&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="动态监视"><a href="#动态监视" class="headerlink" title="动态监视"></a>动态监视</h2><p>发现代码变动,自动编译</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc - w;</span><br></pre></td></tr></table></figure>

<h1 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h1><ol>
<li>变量使用前要定义</li>
<li>变量类型</li>
<li>any 类型</li>
</ol>
<h2 id="变量使用前要定义"><a href="#变量使用前要定义" class="headerlink" title="变量使用前要定义"></a>变量使用前要定义</h2><p>let&#x2F;var 变量名:变量类型 &#x3D; 默认值</p>
<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><p>number,string,boolean,symbol,any,object</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: string = <span class="string">&quot;Tom&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My name is&quot;</span> + name);</span><br><span class="line">name = <span class="number">100</span>; <span class="comment">//编译错误,类型不匹配</span></span><br></pre></td></tr></table></figure>

<h2 id="any-类型"><a href="#any-类型" class="headerlink" title="any 类型"></a>any 类型</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//any类型让编译器忽略检测</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: any = <span class="string">&quot;Tom&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My name is&quot;</span> + name);</span><br><span class="line">name = <span class="number">100</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My name is&quot;</span> + name);</span><br></pre></td></tr></table></figure>

<h1 id="常量保存"><a href="#常量保存" class="headerlink" title="常量保存"></a>常量保存</h1><h2 id="常量定义方法"><a href="#常量定义方法" class="headerlink" title="常量定义方法"></a>常量定义方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常量的定义语法</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>: type = initial_value;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数据库连接串</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">dbstr</span>: string = <span class="string">&quot;ip=192.168.2.1;port=5433;uid=ayin;pwd=123123;&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dbstr);</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">DATA</span>: number[] = [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">DATA</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// DATA = [10,20,30]; //编译错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组地址并未改变,值可以改变</span></span><br><span class="line"><span class="comment">//正常赋值</span></span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">1</span>] = <span class="number">20</span>;</span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">2</span>] = <span class="number">30</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">DATA</span>); <span class="comment">//[10,20,30]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组元素增加</span></span><br><span class="line"><span class="variable constant_">DATA</span>[<span class="number">3</span>] = <span class="number">40</span>;</span><br></pre></td></tr></table></figure>

<h1 id="数组的使用"><a href="#数组的使用" class="headerlink" title="数组的使用"></a>数组的使用</h1><h2 id="定义方法"><a href="#定义方法" class="headerlink" title="定义方法"></a>定义方法</h2><p><code>let name:type[] = initial</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义数组</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>: string[] = [<span class="string">&quot;金&quot;</span>, <span class="string">&quot;木&quot;</span>, <span class="string">&quot;水&quot;</span>, <span class="string">&quot;火&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">//[&#x27;金&#x27;,&#x27;木&#x27;,&#x27;水&#x27;,&#x27;火&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>]); <span class="comment">//金</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//追加赋值</span></span><br><span class="line">data[<span class="number">4</span>] = <span class="string">&quot;土&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//越界赋值</span></span><br><span class="line">data[<span class="number">10</span>] = <span class="string">&quot;风&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="多维数组的定义"><a href="#多维数组的定义" class="headerlink" title="多维数组的定义"></a>多维数组的定义</h2><p><code>let name:type[][] = [[],[],[],...]</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义三行五列的数组</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>: number[][] = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>],</span><br><span class="line">  [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印第一行数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>]); <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//打印第一行第一个元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>][<span class="number">0</span>]); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h1 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h1><h2 id="定义方法-1"><a href="#定义方法-1" class="headerlink" title="定义方法"></a>定义方法</h2><p><code>enum name = &#123;name1, name2, name3, ...&#125;</code></p>
<p>注意定义的是常量,后期不会变化.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用枚举</span></span><br><span class="line">enum <span class="title class_">Sex</span> &#123;</span><br><span class="line">    <span class="variable constant_">MALE</span>,</span><br><span class="line">    <span class="variable constant_">FEMALE</span>,</span><br><span class="line">    <span class="variable constant_">UNKNOWN</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">member_sex</span>: <span class="title class_">Sex</span> = <span class="title class_">Sex</span>.<span class="property">FEMALE</span> <span class="comment">//默认为FEMALE</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(member_sex) <span class="comment">//输出1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Sex</span>[member_sex]) <span class="comment">//输出FEMALE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断中枚举需要在传入对象前加字符+</span></span><br><span class="line"><span class="keyword">switch</span> (+member_sex)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">MALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;男&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">FEMALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;女&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">UNKNOWN</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者将判断套入函数中</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkSex</span>(<span class="params">sex: Sex</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">result</span>:string = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">switch</span> (sex)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">MALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;男&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">FEMALE</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;女&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Sex</span>.<span class="property">UNKNOWN</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h1><p>指包含多种类型的变量类型,在实际项目中不常用.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//联合类型的定义</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>: type1 | type2 | type3 | ...</span><br><span class="line"></span><br><span class="line"><span class="comment">//联合类型的使用</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">mydata</span>: string | boolean</span><br><span class="line"></span><br><span class="line">mydata = <span class="string">&quot;hello TS&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mydata) <span class="comment">//hello TS</span></span><br><span class="line"></span><br><span class="line">mydata = <span class="literal">true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mydata) <span class="comment">//true,没有报错</span></span><br></pre></td></tr></table></figure>

<h1 id="null-空检查"><a href="#null-空检查" class="headerlink" title="null 空检查"></a>null 空检查</h1><p>空检查用于代码编译时对程序中的变量做 null 空值检查,避免业务级别的错误.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">data1</span>: string = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data2</span>: string = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">data3</span>: string = <span class="string">&quot;&quot;</span></span><br><span class="line">data3 = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在tsconfig.json中开启</span></span><br><span class="line"><span class="string">&quot;strickNullChecks&quot;</span>: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//输入tsc进行检查</span></span><br></pre></td></tr></table></figure>

<h1 id="第三方库的使用"><a href="#第三方库的使用" class="headerlink" title="第三方库的使用"></a>第三方库的使用</h1><p>node-request 库</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">request</span>(<span class="string">&#x27;http://api.komavideo.com/news/list&#x27;</span>, <span class="keyword">function</span>(<span class="params">error, response, body</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(body)</span><br><span class="line">        <span class="keyword">var</span> body = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(body)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; body.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">var</span> item = body[i]</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(item.<span class="property">title</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//直接使用是会报错的</span></span><br></pre></td></tr></table></figure>

<p>需要添加 tsd 文件</p>
<h2 id="如何找-tsd-文件"><a href="#如何找-tsd-文件" class="headerlink" title="如何找 tsd 文件"></a>如何找 tsd 文件</h2><p>网站: <code>http://microsoft.github.io/TypeSearch</code></p>
<p>直接搜索</p>
<h2 id="导入-tsd-文件"><a href="#导入-tsd-文件" class="headerlink" title="导入 tsd 文件"></a>导入 tsd 文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @types/request</span><br></pre></td></tr></table></figure>

<h1 id="函数的使用"><a href="#函数的使用" class="headerlink" title="函数的使用"></a>函数的使用</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//格式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fname</span>(<span class="params">param1:type, param2:type,...</span>) : return_type &#123;</span><br><span class="line">    <span class="comment">//函数内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x: number, y: number</span>): number &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">10</span>, <span class="number">5</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用变量</span></span><br><span class="line"><span class="keyword">let</span> func_add = add;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">func_add</span>(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p>范例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="attr">x</span>:number, <span class="attr">y</span>:number) : <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">10</span>, <span class="number">5</span>))</span><br></pre></td></tr></table></figure>

<h2 id="可省略参数"><a href="#可省略参数" class="headerlink" title="可省略参数"></a>可省略参数</h2><p>定义符号: ?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">sayHello</span>(name?: string): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(name == <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello ayin&quot;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sayHello</span>(<span class="string">&quot;Tom&quot;</span>)) <span class="comment">//Hello Tom</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sayHello</span>()) <span class="comment">//Hello ayin</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认值形式</span></span><br><span class="line"><span class="title function_">sayHello</span>(<span class="attr">name</span>: string = <span class="string">&quot;ayin&quot;</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name</span><br></pre></td></tr></table></figure>

<h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>定义符号: <code>...</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(...<span class="attr">vals</span>: number[]): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> val <span class="keyword">of</span> vals)&#123;</span><br><span class="line">        result += val</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment">//6</span></span><br></pre></td></tr></table></figure>

<h1 id="类的定义"><a href="#类的定义" class="headerlink" title="类的定义"></a>类的定义</h1><p>类似于 ES6</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: sting;</span><br><span class="line">  <span class="attr">sex</span>: number; <span class="comment">//0:女,1:男</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: string, sex: number</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,你好<span class="subst">$&#123;<span class="variable language_">this</span>.sex&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> qq = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;花藤&quot;</span>, <span class="number">1</span>);</span><br><span class="line">qq.<span class="title function_">sayHello</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(qq.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(qq.<span class="property">sex</span>);</span><br></pre></td></tr></table></figure>

<h2 id="类的访问限制"><a href="#类的访问限制" class="headerlink" title="类的访问限制"></a>类的访问限制</h2><p>类的访问修饰符</p>
<ul>
<li>public: 共有访问</li>
<li>protected: 本类和子类访问</li>
<li>private: 本类访问</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Datebase</span>&#123;</span><br><span class="line">    <span class="attr">dbname</span>: string</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">bdname: string</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dbname</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//外部调用</span></span><br><span class="line">public <span class="title function_">showDB</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`数据库:<span class="subst">$&#123;<span class="variable language_">this</span>.dbname&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//本类和子类调用</span></span><br><span class="line">protected <span class="title function_">connect</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>,<span class="string">&quot;连接中...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//本类调用</span></span><br><span class="line">private <span class="title function_">disconnect</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>,<span class="string">&quot;关闭&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> oracle = <span class="keyword">new</span> <span class="title class_">Database</span>(<span class="string">&quot;甲骨文&quot;</span>)</span><br><span class="line">oracle.<span class="title function_">showDB</span>()</span><br><span class="line"><span class="comment">//oracle.connect()</span></span><br><span class="line"><span class="comment">//oracle.disconnect()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PostgreSql</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Database</span>&#123;</span><br><span class="line">    public <span class="title function_">doIt</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">connect</span>()</span><br><span class="line">        <span class="comment">//super.disconnect()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> postgres = <span class="keyword">new</span> <span class="title class_">PostregSql</span>(<span class="string">&quot;小象&quot;</span>)</span><br><span class="line">postgres.<span class="title function_">showDB</span>()</span><br><span class="line">postgres.<span class="title function_">doIt</span>()</span><br></pre></td></tr></table></figure>

<h2 id="getter-和-setter"><a href="#getter-和-setter" class="headerlink" title="getter 和 setter"></a>getter 和 setter</h2><p>书接上回,由于<code>private</code>属于私有,无法直接访问.可以使用 get 进行访问.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Datebase</span>&#123;</span><br><span class="line">    private <span class="attr">dbname</span>: string</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">bdname: string</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dbname</span> = name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>(): string &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dbname</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">val: string</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dbname</span> = val</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过name属性访问到</span></span><br><span class="line"><span class="keyword">let</span> db = <span class="keyword">new</span> <span class="title class_">Database</span>(<span class="string">&#x27;oracle is good&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(db.<span class="property">name</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改name属性</span></span><br><span class="line">db.<span class="property">name</span> = <span class="string">&quot;mysql is better&#x27;</span></span><br><span class="line"><span class="string">console.log(db.name)</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/Git%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/Git%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">Git版本管理工具</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:10" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:10+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:44:00" itemprop="dateModified" datetime="2023-04-07T08:44:00+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<h2 id="title-Git版本管理工具date-2019-10-01-13-44-59"><a href="#title-Git版本管理工具date-2019-10-01-13-44-59" class="headerlink" title="title: Git版本管理工具date: 2019-10-01 13:44:59"></a>title: Git版本管理工具date: 2019-10-01 13:44:59</h2><p>tags:</p>
<h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><p>去官网下载吧</p>
<h1 id="建立Git库"><a href="#建立Git库" class="headerlink" title="建立Git库"></a>建立Git库</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//先新建一个空文件夹</span><br><span class="line">mkdir newBash</span><br><span class="line">//在git bash中</span><br><span class="line">cd newBash //切换到newBash文件夹下</span><br><span class="line">git  init //初始化仓库</span><br></pre></td></tr></table></figure>


<h1 id="设置基础信息"><a href="#设置基础信息" class="headerlink" title="设置基础信息"></a>设置基础信息</h1><p>配置相关信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//在git bash中</span><br><span class="line">git init</span><br><span class="line">git config -l  //查看当前配置</span><br><span class="line">git config --global user.name &quot;你的用户名&quot;</span><br><span class="line">git config --global user.email &quot;邮箱地址&quot;</span><br><span class="line">git config --global color.ui true  //代码颜色高亮显示</span><br><span class="line">git config -l  //再查看一下对不对</span><br></pre></td></tr></table></figure>


<h1 id="提交commit"><a href="#提交commit" class="headerlink" title="提交commit"></a>提交commit</h1><p>基本步骤:</p>
<ol>
<li>建立文件(本地工作文件夹)</li>
<li>追加文件(索引区stage)</li>
<li>提交文件(本地库local,远程库remote)</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//新建一个文件</span><br><span class="line">touch a.md</span><br><span class="line"></span><br><span class="line">//在文件中写字符</span><br><span class="line">echo &quot;helloworld&quot; &gt; a.md</span><br><span class="line"></span><br><span class="line">//查看此时状态</span><br><span class="line">git status (未提交文件名颜色为红色)</span><br><span class="line"></span><br><span class="line">//提交到索引区(也叫暂存区)</span><br><span class="line">git add a.md  (或者直接git add . 表示提交修改文件)</span><br><span class="line"></span><br><span class="line">//再看看状态</span><br><span class="line">git status  (提交了颜色变绿了)</span><br><span class="line"></span><br><span class="line">//将暂存区的文件提交到本地库(需要附带说明)</span><br><span class="line">git commit -m &quot;add file&quot;  //add file 就是说明,会显示在github的文件名后面</span><br><span class="line"></span><br><span class="line">//再看看状态</span><br><span class="line">git status  (提交到本地库后,暂存区里就空了)</span><br><span class="line"></span><br><span class="line">//看看提交历史</span><br><span class="line">git log </span><br><span class="line">//(会显示提交者的名字,时间,提交记录)</span><br><span class="line"></span><br><span class="line">//提交到远程仓库</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>


<h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><p>一般远程仓库有一个master主分支,多个其他分支.</p>
<p>现在展示如何从远端dev分支下载并修改,再推送.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//切换到一个文件夹下</span><br><span class="line">cd newclone</span><br><span class="line">//从远端仓库clone</span><br><span class="line">git clone git@xxx.com</span><br><span class="line"></span><br><span class="line">//查看当前分支</span><br><span class="line">git branch  (发现远端仓库只有master被clone下来,其他没有)</span><br><span class="line"></span><br><span class="line">//查看所有分支(包括远端分支)</span><br><span class="line">git branch -a  (此时出现远端dev分支)</span><br><span class="line"></span><br><span class="line">//创建dev分支,映射远端dev分支</span><br><span class="line">git branch dev remotes/origin/dev </span><br><span class="line"></span><br><span class="line">//上面几步不执行也可以,直接执行切换分支就可以clone数据</span><br><span class="line"></span><br><span class="line">//切换到dev分支</span><br><span class="line">git checkout dev (此时dev下所有文件都会clone下来)</span><br><span class="line"></span><br><span class="line">//修改其中的文件</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">//推送素质三连</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;修改情况&quot;</span><br><span class="line">git push origin dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="分支branch"><a href="#分支branch" class="headerlink" title="分支branch"></a>分支branch</h1><h2 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//查看当前分支状态</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line">//新建一个分支 dev</span><br><span class="line">git branch dev</span><br><span class="line"></span><br><span class="line">//切换到 dev 分支</span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line">//修改文件</span><br><span class="line">nano style.css</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">//提交 dev 分支中内容到索引区</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">//提交 dev 分支到本地库</span><br><span class="line">git commit -m &quot;added style.css&quot;</span><br><span class="line"></span><br><span class="line">//查看记录</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line">//切换到主分支 master</span><br><span class="line">git checkout master</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h2><p>书接上回</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//查看分支状态</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line">//在主分支 master 下,合并 dev 分支</span><br><span class="line">git merge dev</span><br><span class="line"></span><br><span class="line">//查看记录</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line">//查看后没有问题,删除开发分支</span><br><span class="line">git branch -d dev</span><br><span class="line"></span><br><span class="line">//最后查看分支状态</span><br><span class="line">git branch</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="分支冲突"><a href="#分支冲突" class="headerlink" title="分支冲突"></a>分支冲突</h2><p>案例分析:</p>
<p>在dev分支创建index文件并修改.在主分支创建index文件并修改.合并分支,必有冲突</p>
<p>代码重现:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//创建 dev 分支并切换到 dev</span><br><span class="line">git checkout -b dev</span><br><span class="line"></span><br><span class="line">//创建文件.修改文件</span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">//提交操作</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;modified by dev&quot;</span><br><span class="line"></span><br><span class="line">//切换到主分支</span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line">//重复上述操作</span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;modified by master&quot;</span><br><span class="line"></span><br><span class="line">//查看分支状态</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line">//合并分支(必有冲突)</span><br><span class="line">git merge dev</span><br><span class="line"></span><br><span class="line">//报错,在冲突文件中出现提示</span><br><span class="line"></span><br><span class="line">//由 leader 决定以哪个分支的信息为准</span><br><span class="line">//编辑文件,去掉冲突提示,选择以哪个分支的修改为准</span><br><span class="line">nano index.html</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">//重新提交,并将</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;meraged by leader.&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="查看提交历史"><a href="#查看提交历史" class="headerlink" title="查看提交历史"></a>查看提交历史</h1><p>书接上回</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//提交之后,查看提交历史</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line">//查看最近几次历史,接一个数字</span><br><span class="line">git log -3 (查看最近 3 次的)</span><br><span class="line"></span><br><span class="line">//把历史记录缩成一行.简略显示</span><br><span class="line">git log --oneline</span><br><span class="line"></span><br><span class="line">//详细显示</span><br><span class="line">git log -p (非常详细)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="提交回退"><a href="#提交回退" class="headerlink" title="提交回退"></a>提交回退</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//把刚修改的文件退到未修改状态</span><br><span class="line">git checkout -- a.md (取消修改,恢复到初始状态)</span><br><span class="line"></span><br><span class="line">//查看状态</span><br><span class="line">git status (文件已恢复)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>提交到索引区,想回退</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//把文件从索引区头部退出</span><br><span class="line">git reset HEAD a.md</span><br><span class="line"></span><br><span class="line">//把刚修改的文件退到未修改状态</span><br><span class="line">git checkout -- a.md</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h1><p>回退到远程库最后提交的版本,覆盖本地工作区</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//回退到最后一次</span><br><span class="line">git reset --hard HEAD</span><br><span class="line"></span><br><span class="line">//回退到倒数第二次</span><br><span class="line">git reset --hard HEAD~</span><br><span class="line"></span><br><span class="line">//回退到倒数第三次</span><br><span class="line">git reset --hard HEAD~2</span><br><span class="line"></span><br><span class="line">//回退到指定版本</span><br><span class="line">git reset --hard 5d79467</span><br><span class="line">(后面的数字是提交时的 ID)</span><br><span class="line"></span><br><span class="line">//如果没记住 ID,通过 reflog 找到现在位置的 id,再从过去返回来.</span><br><span class="line">git reflog (会出现所有最近的记录,可以加-3,显示最近 3 条记录)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="比较修改内容"><a href="#比较修改内容" class="headerlink" title="比较修改内容"></a>比较修改内容</h1><p>修改文件后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//和修改前进行比较</span><br><span class="line">git diff</span><br><span class="line"></span><br><span class="line">//把修改后的文件加到索引区</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">//和索引区的进行比较</span><br><span class="line">git diff --cached</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//将文件添加到索引区</span><br><span class="line">git add [file1 file2 ...]</span><br><span class="line"></span><br><span class="line">//将工作文件夹下所有文件添加到索引区</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">//删除</span><br><span class="line">git rm</span><br><span class="line">//删除索引区文件</span><br><span class="line">git rm --cached a.md</span><br><span class="line">//更名</span><br><span class="line">git mv a.md b.md</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="Git忽略管理"><a href="#Git忽略管理" class="headerlink" title="Git忽略管理"></a>Git忽略管理</h1><p>设置Git忽略文件,这些文件不参与Git库提交.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//新建.gitignore 文件</span><br><span class="line">在该文件中写入要忽略的文件名</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="更新最后的提交"><a href="#更新最后的提交" class="headerlink" title="更新最后的提交"></a>更新最后的提交</h1><p>最后一条提交代码里有bug,想更改,又不想新增一条提交.把更改追加到最后一条提交里.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git commit -m &quot;最后一次提交&quot;</span><br><span class="line"></span><br><span class="line">//发现 bug,修改 bug 后</span><br><span class="line">//此时文件已修改</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">//提交到最后一次修改里</span><br><span class="line">git commit --amend</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="使用Tag标签"><a href="#使用Tag标签" class="headerlink" title="使用Tag标签"></a>使用Tag标签</h1><p>系统版本号管理</p>
<p>例如: 1.1.3</p>
<p>格式: NNN.abc.xxx</p>
<ul>
<li>NNN: 大版本号</li>
<li>abc: 每次做出小的更新时发布的版本号</li>
<li>xxx: 每次bug修正时发布的版本号</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//查看当前版本号</span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line">//设置当前版本号</span><br><span class="line">git tag v1.0.0</span><br><span class="line"></span><br><span class="line">//查询该版本号时文件状态</span><br><span class="line">git show v1.0.0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>
</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E9%98%B2%E8%8C%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E9%98%B2%E8%8C%83/" class="post-title-link" itemprop="url">前端安全防范</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:05" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:05+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:44:00" itemprop="dateModified" datetime="2023-04-07T08:44:00+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: 前端安全防范</p>
<p>date: 2019-09-20 15:56:10</p>
<p>tags:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>HTML # 一级分类</li>
<li>HTTP安全 # 二级分类</li>
</ul>
<hr>
<h1 id="XSS-攻击"><a href="#XSS-攻击" class="headerlink" title="XSS 攻击"></a>XSS 攻击</h1><blockquote>
<p>什么是 XSS 攻击？如何防范 XSS 攻击？什么是 CSP？</p>
</blockquote>
<p>XSS 简单点来说，就是攻击者想尽一切办法将可以执行的代码注入到网页中。</p>
<p>XSS 可以分为多种类型，但是总体上我认为分为两类：持久型和非持久型。</p>
<p>持久型也就是攻击的代码被服务端写入进数据库中，这种攻击危害性很大，因为如果网站访问量很大的话，就会导 致大量正常访问页面的用户都受到攻击。</p>
<p>举个例子，对于评论功能来说，就得防范持久型 XSS 攻击，因为我可以在评论中输入以下内容<code>&lt;script&gt;alert(2)&lt;/script&gt;</code>.</p>
<p>这种情况如果前后端没有做好防御的话，这段评论就会被存储到数据库中，这样每个打开该页面的用户都会被攻击到。</p>
<p>非持久型相比于前者危害就小的多了，一般通过修改 URL 参数的方式加入攻击代码，诱导用户访问链接从而进行攻击。</p>
<p>举个例子，如果页面需要从 URL 中获取某些参数作为内容的话，不经过过滤就会导致攻击代码被执行.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="attr">http</span>:<span class="comment">//www.domain.com?name=&lt;script&gt;alert(1)&lt;/script&gt; --&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>但是对于这种攻击方式来说，如果用户使用 Chrome 这类浏览器的话，浏览器就能自动帮助用户防御攻击。但是我 们不能因此就不防御此类攻击了，因为我不能确保用户都使用了该类浏览器.</p>
<h2 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h2><p>对于 XSS 攻击来说，通常有两种方式可以用来防御。</p>
<h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><p>首先，对于用户的输入应该是永远不信任的。最普遍的做法就是转义输入输出的内容，对于引号、尖括号、斜杠进 行转义</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">escape</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    str = str.<span class="title function_">replace</span>(<span class="regexp">/&amp;/g</span>, <span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">    str = str.<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&#x27;&lt;&#x27;</span>)</span><br><span class="line">    str = str.<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">    str = str.<span class="title function_">replace</span>(<span class="regexp">/&quot;/g</span>, <span class="string">&#x27;&amp;quto;&#x27;</span>)</span><br><span class="line">    str = str.<span class="title function_">replace</span>(<span class="regexp">/&#x27;/g</span>, <span class="string">&#x27;&#x27;</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">    str = str.replace(/`/g, &#x27;</span><span class="string">`&#x27;)</span></span><br><span class="line"><span class="string">    str = str.replace(/\//g, &#x27;/&#x27;)</span></span><br><span class="line"><span class="string">    return str</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过转义可以将攻击代码  &lt;script&gt;alert(1)&lt;/script&gt;  变成</span></span><br><span class="line"><span class="comment">// -&gt; &lt;script&gt;alert(1)&lt;/script&gt;</span></span><br><span class="line"><span class="built_in">escape</span>(<span class="string">&quot;&lt;script&gt;alert(1)&lt;/script&gt;&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>但是对于显示富文本来说，显然不能通过上面的办法来转义所有字符，因为这样会把需要的格式也过滤掉。对于这种情况，通常采用白名单过滤的办法，当然也可以通过黑名单过滤，但是考虑到需要过滤的标签和标签属性实在太多，更加推荐使用白名单的方式。</p>
<h3 id="CSP-白名单"><a href="#CSP-白名单" class="headerlink" title="CSP(白名单)"></a>CSP(白名单)</h3><p>CSP 本质上就是建立白名单，开发者明确告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何 拦截是由浏览器自己实现的。我们可以通过这种方式来尽量减少 XSS 攻击。</p>
<p>通常可以通过两种方式来开启 CSP：</p>
<ol>
<li>设置 HTTP Header 中的  Content-Security-Policy</li>
<li>设置 meta 标签的方式 <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code></li>
</ol>
<p>这里以设置 HTTP Header 来举例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只允许加载本站资源</span></span><br><span class="line"><span class="title class_">Content</span>-<span class="title class_">Security</span>-<span class="title class_">Policy</span>: <span class="keyword">default</span>-src ‘self’</span><br><span class="line"><span class="comment">//只允许加载 HTTPS 协议图片</span></span><br><span class="line"><span class="title class_">Content</span>-<span class="title class_">Security</span>-<span class="title class_">Policy</span>: img-src <span class="attr">https</span>:<span class="comment">//*</span></span><br><span class="line"><span class="comment">//允许加载任何来源框架</span></span><br><span class="line"><span class="title class_">Content</span>-<span class="title class_">Security</span>-<span class="title class_">Policy</span>: child-src <span class="string">&#x27;none&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="CSRF-攻击"><a href="#CSRF-攻击" class="headerlink" title="CSRF 攻击"></a>CSRF 攻击</h1><blockquote>
<p>什么是 CSRF 攻击？如何防范 CSRF 攻击？</p>
</blockquote>
<p>CSRF 中文名为跨站请求伪造。</p>
<p>原理就是攻击者构造出一个后端请求地址，诱导用户点击或者通过某些途径自动发起请求。如果用户是在登录状态下的话，后端就以为是用户在操作，从而进行相应的逻辑。</p>
<p>举个例子，假设网站中有一个通过 GET 请求提交用户评论的接口，那么攻击者就可以在钓鱼网站中加入一个图片，图片的地址就是评论接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;http://www.domain.com/xxx?comment=&#x27;attack&#x27;&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>那么你是否会想到使用 POST 方式提交请求是不是就没有这个问题了呢？其实并不是，使用这种方式也不是百分百安全的，攻击者同样可以诱导用户进入某个页面，在页面中通过表单提交 POST 请求</p>
<h2 id="如何防御"><a href="#如何防御" class="headerlink" title="如何防御"></a>如何防御</h2><p>防范 CSRF 攻击可以遵循以下几种规则：</p>
<ol>
<li>GET 请求不对数据进行修改</li>
<li>不让第三方网站访问到用户 Cookie</li>
<li>阻止第三方网站请求接口</li>
<li>请求时附带验证信息，比如验证码或者 Token</li>
</ol>
<p><strong>SameSite</strong></p>
<p>可以对 Cookie 设置 SameSite 属性。该属性表示 Cookie 不随着跨域请求发送，可以很大程度减少 CSRF 的攻击，但是该属性目前并不是所有浏览器都兼容。</p>
<p><strong>验证 Referer</strong></p>
<p>对于需要防范 CSRF 的请求，我们可以通过验证 Referer 来判断该请求是否为第三方网站发起的。</p>
<p><strong>Token</strong></p>
<p>服务器下发一个随机 Token，每次发起请求时将 Token 携带上，服务器验证 Token 是否有效。</p>
<h1 id="点击劫持"><a href="#点击劫持" class="headerlink" title="点击劫持"></a>点击劫持</h1><blockquote>
<p>什么是点击劫持？如何防范点击劫持？</p>
</blockquote>
<p>点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。</p>
<h2 id="如何防御-1"><a href="#如何防御-1" class="headerlink" title="如何防御"></a>如何防御</h2><p><strong>X-FRAME-OPTIONS</strong></p>
<p>X-FRAME-OPTIONS 是一个 HTTP 响应头，在现代浏览器有一个很好的支持。这个 HTTP 响应头就是为了防御用 iframe 嵌套的点击劫持攻击。</p>
<p>该响应头有三个值可选，分别是</p>
<p>DENY，表示页面不允许通过 iframe 的方式展示 SAMEORIGIN，表示页面可以在相同域名下通过 iframe 的方式展示 ALLOW-FROM，表示页面可以在指定来源的 iframe 中展示</p>
<p><strong>JS 防御</strong></p>
<p>对于某些远古浏览器来说，并不能支持上面的这种方式，那我们只有通过 JS 的方式来防御点击劫持了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">id</span>=<span class="string">&quot;click-jack&quot;</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">html</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">display</span>: none <span class="meta">!important</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (self == top) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> style = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;click-jack&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(style)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        top.<span class="property">location</span> = self.<span class="property">location</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>以上代码的作用就是当通过<code>iframe</code>的方式加载页面时，攻击者的网页直接不显示所有内容了。</p>
<h1 id="中间人攻击"><a href="#中间人攻击" class="headerlink" title="中间人攻击"></a>中间人攻击</h1><blockquote>
<p>什么是中间人攻击？如何防范中间人攻击？</p>
</blockquote>
<p>中间人攻击是攻击方同时与服务端和客户端建立起了连接，并让对方认为连接是安全的，但是实际上整个通信过程都被攻击者控制了。攻击者不仅能获得双方的通信信息，还能修改通信信息。</p>
<p>通常来说不建议使用公共的 Wi-Fi，因为很可能就会发生中间人攻击的情况。如果你在通信的过程中涉及到了某些敏感信息，就完全暴露给攻击方了。</p>
<p>当然防御中间人攻击其实并不难，只需要增加一个安全通道来传输信息。HTTPS 就可以用来防御中间人攻击，但是并不是说使用了 HTTPS 就可以高枕无忧了，因为如果你没有完全关闭 HTTP 访问的话，攻击方可以通过某些方式将 HTTPS 降级为 HTTP 从而实现中间人攻击。</p>
<h1 id="网页验证码是干嘛的，是为了解决什么安全问题。"><a href="#网页验证码是干嘛的，是为了解决什么安全问题。" class="headerlink" title="网页验证码是干嘛的，是为了解决什么安全问题。"></a>网页验证码是干嘛的，是为了解决什么安全问题。</h1><p>区分用户是计算机还是人的公共全自动程序。可以防止恶意破解密码、刷票、论坛灌水；</p>
<p>有效防止黑客对某一个特定注册用户用特定程序暴力破解方式进行不断的登陆尝试。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/26/jQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zax Tseng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZAX">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | ZAX">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/26/jQuery/" class="post-title-link" itemprop="url">jQuery</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-26 21:04:01" itemprop="dateCreated datePublished" datetime="2022-09-26T21:04:01+08:00">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-04-07 08:44:00" itemprop="dateModified" datetime="2023-04-07T08:44:00+08:00">2023-04-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title: jQuery</p>
<p>date: 2019-08-22 13:14:59</p>
<p>tags: javascript</p>
<p>categories:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级</p>
<ul>
<li>JS # 一级分类</li>
<li>jQuery # 二级分类</li>
</ul>
<hr>
<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><table>
<thead>
<tr>
<th align="left">jQuery 基本选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘*‘)</td>
<td align="left">匹配所有元素</td>
</tr>
<tr>
<td align="left">$(‘#id’)</td>
<td align="left">id 选择器</td>
</tr>
<tr>
<td align="left">$(‘.class’)</td>
<td align="left">类选择器</td>
</tr>
<tr>
<td align="left">$(‘element’)</td>
<td align="left">标签选择器</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">组合选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E,F’)</td>
<td align="left">多元素选择器，同时匹配 E 和 F</td>
</tr>
<tr>
<td align="left">$(‘E F’)</td>
<td align="left">后代选择器,用空格分隔,匹配 E 元素所有后代</td>
</tr>
<tr>
<td align="left">$(‘E&gt;F’)</td>
<td align="left">子元素选择器,匹配 E 元素所有直接子元素</td>
</tr>
<tr>
<td align="left">$(‘E+F’)</td>
<td align="left">直接相邻元素,匹配 E 元素之后的相邻的同级元素 F</td>
</tr>
<tr>
<td align="left">$(‘E~F’)</td>
<td align="left">普通相邻元素(弟弟选择器),匹配 E 元素之后的同级元素 F(无论是否直接相邻)</td>
</tr>
<tr>
<td align="left">$(‘class1.class2’)</td>
<td align="left">匹配类名中既含有 class1 又含有 class2 的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">基本过滤选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:first’)</td>
<td align="left">所有 E 中的第一个</td>
</tr>
<tr>
<td align="left">$(‘E:last’)</td>
<td align="left">所有 E 中的最后一个</td>
</tr>
<tr>
<td align="left">$(‘E:not(selector)’)</td>
<td align="left">按照 selector 过滤 E</td>
</tr>
<tr>
<td align="left">$(‘E:even’)</td>
<td align="left">所有 E 中 index 是偶数</td>
</tr>
<tr>
<td align="left">$(‘E:odd’)</td>
<td align="left">所有 E 中 index 是奇数</td>
</tr>
<tr>
<td align="left">$(‘E:eq(n)’)</td>
<td align="left">所有 E 中 index 为 n 的元素</td>
</tr>
<tr>
<td align="left">$(‘E:gt(n)’)</td>
<td align="left">所有 E 中 index 大于 n 的元素</td>
</tr>
<tr>
<td align="left">$(‘E:lt(n)’)</td>
<td align="left">所有 E 中 index 小于 n 的元素</td>
</tr>
<tr>
<td align="left">$(‘header’)</td>
<td align="left">选择 h1~h6 元素</td>
</tr>
<tr>
<td align="left">$(‘div:animated’)</td>
<td align="left">选择正在执行动画效果的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">内容过滤器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:contains(value)’)</td>
<td align="left">内容包含 value 的元素</td>
</tr>
<tr>
<td align="left">$(‘E:empty’)</td>
<td align="left">内容为空的元素</td>
</tr>
<tr>
<td align="left">$(‘E:has(F)’)</td>
<td align="left">子元素中有 F 的元素,$(‘div:has(a)’):包含 a 标签的 div</td>
</tr>
<tr>
<td align="left">$(‘E:parent’)</td>
<td align="left">父元素是 E 的元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">可视化选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:hidden’)</td>
<td align="left">所有被隐藏的 E</td>
</tr>
<tr>
<td align="left">$(‘E:visible’)</td>
<td align="left">所有可见的 E</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">属性过滤选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E[attr]’)</td>
<td align="left">含有属性 attr 的 E</td>
</tr>
<tr>
<td align="left">$(‘E[attr&#x3D;value]’)</td>
<td align="left">属性 attr&#x3D;value 的 E</td>
</tr>
<tr>
<td align="left">$(‘E[attr !&#x3D;value]’)</td>
<td align="left">属性 attr！&#x3D;value 的 E</td>
</tr>
<tr>
<td align="left">$(‘E[attr ^&#x3D;value]’)</td>
<td align="left">属性 attr 以 value 开头的 E</td>
</tr>
<tr>
<td align="left">$(‘E[attr $&#x3D;value]’)</td>
<td align="left">属性 attr 以 value 结尾的 E</td>
</tr>
<tr>
<td align="left">$(‘E[attr *&#x3D;value]’)</td>
<td align="left">属性 attr 包含 value 的 E</td>
</tr>
<tr>
<td align="left">$(‘E[attr][attr*value]’)</td>
<td align="left">可以连用</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">子元素过滤器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:nth-child(n)’)</td>
<td align="left">E 的第 n 个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(3n+1)’)</td>
<td align="left">E 的第 3n+1 个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(even)’)</td>
<td align="left">E 的 index 为偶数的子节点</td>
</tr>
<tr>
<td align="left">$(‘E:nth-child(odd)’)</td>
<td align="left">E 的 index 为奇数的子节点</td>
</tr>
<tr>
<td align="left">$(‘E:first-child’)</td>
<td align="left">所有 E 的第一个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:last-child’)</td>
<td align="left">所有 E 的最后一个子节点</td>
</tr>
<tr>
<td align="left">$(‘E:only-child’)</td>
<td align="left">只有唯一子节点的 E 的子节点</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">表单元素选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$(‘E:type’)</td>
<td align="left">特定类型的 input</td>
</tr>
<tr>
<td align="left">$(‘:checked’)</td>
<td align="left">被选中的 checkbox 或者 radio</td>
</tr>
<tr>
<td align="left">$(‘option:selected’)</td>
<td align="left">被选中的 option</td>
</tr>
</tbody></table>
<h3 id="其他查找相关元素的方法"><a href="#其他查找相关元素的方法" class="headerlink" title="其他查找相关元素的方法"></a>其他查找相关元素的方法</h3><h4 id="eq-index-get-index"><a href="#eq-index-get-index" class="headerlink" title=".eq(index), .get([index])"></a>.eq(index), .get([index])</h4><p><code>$(&#39;div&#39;).eq(3) //获取所有div中第4个jQuery对象</code></p>
<p><code>$(&#39;div&#39;)[2] 或者 $(&#39;div&#39;).get(2) //获取第三个的DOM对象</code></p>
<p><code>get()</code>不写参数把所有对象转为 DOM 对象返回</p>
<h4 id="兄弟元素获取"><a href="#兄弟元素获取" class="headerlink" title="兄弟元素获取"></a>兄弟元素获取</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.next([selector])</td>
<td align="left">没有写 selcetor,返回所有后面的兄弟元素.写了就返回满足条件的</td>
</tr>
<tr>
<td align="left">.prev([selector])</td>
<td align="left">和上面相反,获取前面的兄弟元素</td>
</tr>
<tr>
<td align="left">.nextAll([selector])</td>
<td align="left">获取所有后面的兄弟元素</td>
</tr>
<tr>
<td align="left">.prevAll([selector])</td>
<td align="left">获取所有前面的兄弟元素</td>
</tr>
<tr>
<td align="left">.siblings([selector])</td>
<td align="left">获取所有前后邻居的元素</td>
</tr>
</tbody></table>
<h4 id="父子元素获取"><a href="#父子元素获取" class="headerlink" title="父子元素获取"></a>父子元素获取</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.parent([selector])</td>
<td align="left">获取父元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.parents([selector])</td>
<td align="left">获取祖先元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.children([selector])</td>
<td align="left">获取子元素,可选筛选器</td>
</tr>
<tr>
<td align="left">.find([selector])</td>
<td align="left">查找符合选择器的后代</td>
</tr>
</tbody></table>
<h4 id="筛选当前结果集"><a href="#筛选当前结果集" class="headerlink" title="筛选当前结果集"></a>筛选当前结果集</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.first()</td>
<td align="left">获取当前结果集第一个对象</td>
</tr>
<tr>
<td align="left">.last()</td>
<td align="left">获取当前结果集最后一个对象</td>
</tr>
<tr>
<td align="left">.filter(slector), .filter(function(index))</td>
<td align="left">筛选当前结果集符合条件的对象</td>
</tr>
<tr>
<td align="left">.not(selector), .not(function(index))</td>
<td align="left">从当前结果集中移除指定元素</td>
</tr>
<tr>
<td align="left">.is(selector), is(function(index)), is(dom&#x2F;jqObj)</td>
<td align="left">判断结果集中的元素，是否为一个选择器，DOM 元素，或者 jQuery 对象，如果这些元素至少一个匹配给定的参数，那么返回 true</td>
</tr>
<tr>
<td align="left">.has(seletor), has(dom)</td>
<td align="left">筛选匹配结果集中符合条件的后代元素</td>
</tr>
</tbody></table>
<h2 id="jQueryDOM-操作"><a href="#jQueryDOM-操作" class="headerlink" title="jQueryDOM 操作"></a>jQueryDOM 操作</h2><h3 id="创建元素"><a href="#创建元素" class="headerlink" title="创建元素"></a>创建元素</h3><p>将 DOM 传入$方法即可返回一个 jQuery 对象</p>
<p><code>var obj = $(&#39;&lt;div class=&quot;test&quot;&gt;&lt;p&gt;&lt;span&gt;Done&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&#39;)</code></p>
<h3 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.append(content[,content]) &#x2F; .append(function(index,html))</td>
<td align="left">可以添加多个内容,DOM 对象,字符串,jQuery 对象</td>
<td align="left"><img src="https://g.yuque.com/gr/latex?(%27p%27).append(#card=math&code=%28%27p%27%29.append%28)newdiv">; <img src="https://g.yuque.com/gr/latex?(%27p%27).append(#card=math&code=%28%27p%27%29.append%28)('strong')">; $(‘p’).append(document.createTextNode(‘hello’))</td>
</tr>
<tr>
<td align="left">.appendTo(target)</td>
<td align="left">把对象插入到目标 target 尾部,可以是 selector,DOM 对象,字符串,元素集合,jQuery 对象(最后一个孩子)</td>
<td align="left"><img src="https://g.yuque.com/gr/latex?(%27h2%27).appendTo(#card=math&code=%28%27h2%27%29.appendTo%28)('.container')">; $(‘<p>Test</p>‘).appendTo(‘.inner’)</td>
</tr>
<tr>
<td align="left">.prepend(content[,content]) &#x2F; .prepend(function(index, html))</td>
<td align="left">向头部追加内容,内容添加到最前面(第一个孩子)</td>
<td align="left">$(‘.inner’).prepend(‘<p>Test</p>‘)</td>
</tr>
<tr>
<td align="left">.prependTo(Target)</td>
<td align="left">把对象插入到目标头部</td>
<td align="left">$(‘<p>Test</p>‘).prependTo(‘.inner’)</td>
</tr>
<tr>
<td align="left">.before([content][,content]) &#x2F; .before(function)</td>
<td align="left">在对象前面(不是头部,而是外面,和对象并列同级)插入内容(放到前面做邻居)</td>
<td align="left">$(‘.inner’).before(‘<p>Test</p>‘); <img src="https://g.yuque.com/gr/latex?(%27.container%27).before(#card=math&code=%28%27.container%27%29.before%28)('h2')">; $( “p” ).before( document.createTextNode( “Hello” ) )</td>
</tr>
<tr>
<td align="left">.insertBefore(target)</td>
<td align="left">把对象插入到 target 之前(不是头部,是同级)(做邻居)</td>
<td align="left"><img src="https://g.yuque.com/gr/latex?(%27h2%27).insertBefore(#card=math&code=%28%27h2%27%29.insertBefore%28)('.container)"></td>
</tr>
<tr>
<td align="left">.after([content][,content]) &#x2F; .after(function（index）)</td>
<td align="left">和 before 相反，在对象后面(不是尾部，而是外面，和对象并列同级)插入内容，参数和 append 类似</td>
<td align="left">$( “.inner” ).after( “<p>Test</p>“ ); $( “p” ).after( document.createTextNode( “Hello” ) );</td>
</tr>
<tr>
<td align="left">.insertAfter(target)</td>
<td align="left">和 insertBefore 相反，把对象插入到 target 之后（同样不是尾部，是同级）</td>
<td align="left">$( “<p>Test</p>“ ).insertAfter( “.inner” ); $( “p” ).insertAfter( “#foo” );</td>
</tr>
</tbody></table>
<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.remove([selector])</td>
<td align="left">删除被选元素及其子元素</td>
<td align="left">$(‘.div’).remove()</td>
</tr>
<tr>
<td align="left">.empty()</td>
<td align="left">清空被选元素内所有子元素</td>
<td align="left">$(‘body’).empty()</td>
</tr>
<tr>
<td align="left">.detach()</td>
<td align="left">.detach() 方法和.remove()一样, 除了 .detach()保存所有 jQuery 数据和被移走的元素相关联。当需要移走一个元素，不久又将该元素插入 DOM 时，这种方法很有用。</td>
<td align="left">$(‘.div’).detach()</td>
</tr>
</tbody></table>
<h3 id="包裹元素"><a href="#包裹元素" class="headerlink" title="包裹元素"></a>包裹元素</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">解释</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.wrap(wrapElement) &#x2F; .wrap(function(index))</td>
<td align="left">为每个对象包裹一层 HTML 结构，可以是 selector, element, HTML string, jQuery object</td>
<td align="left">$( “.inner” ).wrap( “<div class='new'></div>“ )</td>
</tr>
<tr>
<td align="left">.wrapAll(wrappingElement)</td>
<td align="left">把所有匹配对象包裹在同一个 html 结构里</td>
<td align="left">$(‘.inner’).wrapAll(‘<div class="new"></div>)</td>
</tr>
<tr>
<td align="left">.wrapInner(wrapingElement)</td>
<td align="left">为每个匹配的对象包裹一层 HTML 结构</td>
<td align="left">$(‘.inner’).wrapInner(‘<div class="new"></div>)</td>
</tr>
<tr>
<td align="left">.unwrap</td>
<td align="left">把 DOM 元素外的壳去掉</td>
<td align="left">$(‘p’).unwrap()</td>
</tr>
</tbody></table>
<h3 id="html-string"><a href="#html-string" class="headerlink" title="html([string])"></a>html([string])</h3><p><code>$(&#39;div&#39;).html()</code></p>
<p><code>$(&#39;div&#39;).html(&#39;123&#39;)</code></p>
<p>这是一个读写两用的方法,用于获取修改元素的 innerHTML</p>
<ol>
<li>没有传递参数的时候,返回元素的 innerHTML</li>
<li>当传递一个 string 参数时,修改元素的 innerHTML 为参数值</li>
</ol>
<h3 id="text"><a href="#text" class="headerlink" title="text()"></a>text()</h3><p>和 html 方法类似，操作的是 DOM 的 innerText 值</p>
<h2 id="jQuery-属性操作"><a href="#jQuery-属性操作" class="headerlink" title="jQuery 属性操作"></a>jQuery 属性操作</h2><h3 id="属性相关"><a href="#属性相关" class="headerlink" title="属性相关"></a>属性相关</h3><h4 id="val-value"><a href="#val-value" class="headerlink" title=".val([value])"></a>.val([value])</h4><p>这是一个读写双用的方法,用来处理 input 的 value 值,当方法没有参数时返回 input 的 value 值.</p>
<p>当传递一个参数时,方法修改 input 的 value 值为参数值.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.input&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">$(<span class="string">&quot;.input&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;newValue&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="attr"><a href="#attr" class="headerlink" title=".attr()"></a>.attr()</h4><h5 id="attr-attributeName"><a href="#attr-attributeName" class="headerlink" title=".attr(attributeName)"></a>.attr(attributeName)</h5><p>获取元素特定属性的值</p>
<p><code>var title = $(&#39;em&#39;).attr(&#39;title&#39;)</code></p>
<h5 id="attr-attributeName-value-x2F-attr-attributesJson-x2F-attr-attributeName-funtion-index-attr"><a href="#attr-attributeName-value-x2F-attr-attributesJson-x2F-attr-attributeName-funtion-index-attr" class="headerlink" title=".attr(attributeName,value)&#x2F;.attr(attributesJson)&#x2F;.attr(attributeName,funtion(index,attr))"></a>.attr(attributeName,value)&#x2F;.attr(attributesJson)&#x2F;.attr(attributeName,funtion(index,attr))</h5><p>为元素属性赋值</p>
<p><code>$( &quot;#greatphoto&quot; ).attr( &quot;alt&quot;, &quot;Beijing&quot; )</code></p>
<h5 id="removeAttr"><a href="#removeAttr" class="headerlink" title=".removeAttr()"></a>.removeAttr()</h5><p>为匹配的元素集合中的每个元素移除一个属性</p>
<p><code>$(&#39;div&#39;).removeAttr(&#39;id&#39;)</code></p>
<h5 id="prop-x2F-removeProp"><a href="#prop-x2F-removeProp" class="headerlink" title=".prop()&#x2F;.removeProp()"></a>.prop()&#x2F;.removeProp()</h5><p>这两个方法是用来操作元素的 property 的</p>
<h3 id="CSS-相关"><a href="#CSS-相关" class="headerlink" title="CSS 相关"></a>CSS 相关</h3><h4 id="css"><a href="#css" class="headerlink" title=".css()"></a>.css()</h4><h5 id="css-propertyName-x2F-css-propertyNames"><a href="#css-propertyName-x2F-css-propertyNames" class="headerlink" title=".css(propertyName) &#x2F; .css(propertyNames)"></a>.css(propertyName) &#x2F; .css(propertyNames)</h5><p>获取元素 style 特定 property 的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color = $(<span class="variable language_">this</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> styleProps = $(<span class="variable language_">this</span>).<span class="title function_">css</span>([<span class="string">&quot;width&quot;</span>, <span class="string">&quot;height&quot;</span>, <span class="string">&quot;color&quot;</span>, <span class="string">&quot;background-color&quot;</span>]);</span><br></pre></td></tr></table></figure>

<h5 id="css-propertyName-value-x2F-css-propertyName-function-index-value-x2F-css-propertiesJson"><a href="#css-propertyName-value-x2F-css-propertyName-function-index-value-x2F-css-propertiesJson" class="headerlink" title=".css(propertyName,value)&#x2F;.css(propertyName,function(index,value))&#x2F; .css(propertiesJson)"></a>.css(propertyName,value)&#x2F;.css(propertyName,function(index,value))&#x2F; .css(propertiesJson)</h5><p>设置元素 style 特定 property 的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;div.example&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;width&quot;</span>, <span class="keyword">function</span> (<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> index * <span class="number">50</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">this</span>).<span class="title function_">css</span>(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;+=200&quot;</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">this</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;yellow&quot;</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">this</span>).<span class="title function_">css</span>(&#123;</span><br><span class="line">  <span class="string">&quot;background-color&quot;</span>: <span class="string">&quot;yellow&quot;</span>,</span><br><span class="line">  <span class="string">&quot;font-weight&quot;</span>: <span class="string">&quot;bolder&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="addClass-className-x2F-addClass-function-index-currentClass"><a href="#addClass-className-x2F-addClass-function-index-currentClass" class="headerlink" title=".addClass(className) &#x2F; .addClass(function(index,currentClass))"></a>.addClass(className) &#x2F; .addClass(function(index,currentClass))</h5><p>为元素添加 class，不是覆盖原 class，是追加，也不会检查重复</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;p&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;myClass yourClass&quot;</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;ul li&quot;</span>).<span class="title function_">addClass</span>(<span class="keyword">function</span> (<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;item-&quot;</span> + index;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="removeClass-className-x2F-removeClass-function-index-class"><a href="#removeClass-className-x2F-removeClass-function-index-class" class="headerlink" title=".removeClass([className])&#x2F;.removeClass(function(index,class))"></a>.removeClass([className])&#x2F;.removeClass(function(index,class))</h5><p>移除元素单个&#x2F;多个&#x2F;所有 class</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;p&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;myClass yourClass&quot;</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;li:last&quot;</span>).<span class="title function_">removeClass</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> $(<span class="variable language_">this</span>).<span class="title function_">prev</span>().<span class="title function_">attr</span>(<span class="string">&quot;class&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="hasClass-className"><a href="#hasClass-className" class="headerlink" title=".hasClass(className)"></a>.hasClass(className)</h5><p>检查元素是否包含某个 class，返回 true&#x2F;false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#mydiv&quot;</span>).<span class="title function_">hasClass</span>(<span class="string">&quot;foo&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="toggleClass-className"><a href="#toggleClass-className" class="headerlink" title=".toggleClass(className)"></a>.toggleClass(className)</h5><p>toggle 是切换的意思，方法用于切换，switch 是个 bool 类型值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;tumble&quot;</span>&gt;<span class="title class_">Some</span> text.&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第一次执行</span></span><br><span class="line">$( <span class="string">&quot;div.tumble&quot;</span> ).<span class="title function_">toggleClass</span>( <span class="string">&quot;bounce&quot;</span> )</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;tumble bounce&quot;</span>&gt;<span class="title class_">Some</span> text.&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二次执行</span></span><br><span class="line">$( <span class="string">&quot;div.tumble&quot;</span> ).<span class="title function_">toggleClass</span>( <span class="string">&quot;bounce&quot;</span> )</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;tumble&quot;</span>&gt;<span class="title class_">Some</span> text.&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="jQuery-常用方法"><a href="#jQuery-常用方法" class="headerlink" title="jQuery 常用方法"></a>jQuery 常用方法</h2><h4 id="each-fnction-index-Element"><a href="#each-fnction-index-Element" class="headerlink" title=".each(fnction(index, Element))"></a>.each(fnction(index, Element))</h4><p>遍历一个 jQuery 对象,为每个匹配元素执行一个函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;li&quot;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index + <span class="string">&quot;:&quot;</span> + $(<span class="variable language_">this</span>).<span class="title function_">text</span>());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//回调函数返回的是DOM对象,所以this需要加$变成jQuery对象才能使用.text()方法</span></span><br><span class="line"><span class="comment">//否则使用this.innerText方法</span></span><br></pre></td></tr></table></figure>

<h4 id="jQuery-each-collection-callback-indexInArray-valueOfElement"><a href="#jQuery-each-collection-callback-indexInArray-valueOfElement" class="headerlink" title="jQuery.each(collection, callback(indexInArray, valueOfElement))"></a>jQuery.each(collection, callback(indexInArray, valueOfElement))</h4><p>一个通用迭代函数,可以迭代对象和数组.数组和类数组对象通过长度属性来迭代数字索引,从 0 到 length-1.</p>
<p>其他对象通过其属性名进行迭代.</p>
<p>上面 jQuery 可以用<img src="https://g.yuque.com/gr/latex?%E6%9B%BF%E4%BB%A3,%E5%8D%B3%60#card=math&code=%E6%9B%BF%E4%BB%A3%2C%E5%8D%B3%60">.each()&#96;.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="string">&quot;fla&quot;</span> : <span class="string">&quot;infla&quot;</span>,</span><br><span class="line">    <span class="string">&quot;duh&quot;</span> : <span class="string">&quot; no duh&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">$.<span class="title function_">each</span>(obj, <span class="keyword">function</span>(<span class="params">key, value</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;:&quot;</span> + value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="map-callback-index-domElement"><a href="#map-callback-index-domElement" class="headerlink" title=".map(callback(index, domElement))"></a>.map(callback(index, domElement))</h4><p>通过一个函数匹配当前集合中的每个元素,返回一个包含新的 jQuery 对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.div&quot;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">i, ele</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="jQuery-extend-deep-target-ovject1-objectN"><a href="#jQuery-extend-deep-target-ovject1-objectN" class="headerlink" title="jQuery.extend([deep,]target[,ovject1][,objectN])"></a>jQuery.extend([deep,]target[,ovject1][,objectN])</h4><ol>
<li>当提供两个或多个对象给$.extend(),对象的所有属性都添加到目标对象(target 参数).</li>
<li>如果只有一个参数提供给$.extend(),这意味着目标参数被省略,在这种情况下,jQuery 对象本身默认为目标对象.</li>
</ol>
<p>这样我们可以在 jQuery 的命名空间下添加新功能.</p>
<p><code>var obj = $.extend(&#123;&#125;, object1, object2)</code></p>
<p><code>object1,object2</code>会被添加到{}中</p>
<p>如果第一个对象的属性本身是一个数组或对象,那它将完全用第二个对象相同的 key 重写一个属性.</p>
<p>这些值不会被合并.如果 true 作为第一个参数,那么会在对象上进行递归的合并.</p>
<h4 id="clone-withDataAndEvents"><a href="#clone-withDataAndEvents" class="headerlink" title=".clone([withDataAndEvents])"></a>.clone([withDataAndEvents])</h4><p>.clone()方法深度复制所有匹配的元素集合,包括所有匹配元素,匹配元素的下级,文字节点.</p>
<p><code>$(&#39;.hello&#39;).clone().appendTo(&#39;.Goodbye&#39;)</code></p>
<h4 id="index-x2F-index-selector-x2F-index-element"><a href="#index-x2F-index-selector-x2F-index-element" class="headerlink" title=".index()&#x2F;.index(selector)&#x2F;.index(element)"></a>.index()&#x2F;.index(selector)&#x2F;.index(element)</h4><p>从给定集合中查找特定元素 index</p>
<ol>
<li>没参数返回第一个元素 index</li>
<li>如果参数是 DOM 对象或 jQuery 对象,则返回参数在集合中的 index</li>
<li>如果参数是选择器,返回第一个匹配元素的 index,没有找到返回-1</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> listItem = $(<span class="string">&quot;.bar&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Index:&quot;</span> + $(<span class="string">&quot;li&quot;</span>).<span class="title function_">index</span>(listItem));</span><br></pre></td></tr></table></figure>

<h4 id="ready-handler"><a href="#ready-handler" class="headerlink" title=".ready(handler)"></a>.ready(handler)</h4><p>当 DOM 加载完毕,执行.</p>
<p>下面两种等价</p>
<ul>
<li><code>$(document).ready(handler)</code></li>
<li><code>$(handler)</code></li>
</ul>
<h2 id="jQuery-事件"><a href="#jQuery-事件" class="headerlink" title="jQuery 事件"></a>jQuery 事件</h2><h4 id="on-events-selector-data-handler-eventObject"><a href="#on-events-selector-data-handler-eventObject" class="headerlink" title=".on(events[,selector][,data],handler(eventObject))"></a>.on(events[,selector][,data],handler(eventObject))</h4><ol>
<li>events: 一个或多个空格分隔的事件类型和可选空间</li>
<li>selector: 一个选择器字符串,用于过滤被选中的元素中能触发事件的后代元素.</li>
</ol>
<p>如果选择器是 null 或者忽略,那么被选中的元素总能触发事件 3. data: 当一个事件被触发,要传递给事件处理函数的 event.data 4. handler(eventObject): 事件被触发时,执行的函数.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$(<span class="string">&#x27;.box li&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> str = $(<span class="variable language_">this</span>).<span class="title function_">text</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  $(<span class="string">&#x27;#wrap&#x27;</span>).<span class="title function_">text</span>(str)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//等同于</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$(<span class="string">&#x27;.box&gt;ul&gt;li&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> str = $(<span class="variable language_">this</span>).<span class="title function_">text</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  $(<span class="string">&#x27;#wrap&#x27;</span>).<span class="title function_">text</span>(str)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//下面新增的元素是没有绑定事件的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$(<span class="string">&#x27;btn&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> value = $(<span class="string">&#x27;#ipt&#x27;</span>).<span class="title function_">val</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  $(<span class="string">&#x27;.box&gt;li&#x27;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;li&gt;&#x27;</span> + value + <span class="string">&#x27;&lt;/li&gt;&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//可以用事件代理</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$(<span class="string">&#x27;.box ul&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="string">&#x27;li&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> str = $(<span class="variable language_">this</span>).<span class="title function_">text</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  $(<span class="string">&#x27;#wrap&#x27;</span>).<span class="title function_">text</span>(<span class="title class_">Str</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//上面代码换成原生js代码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box ul&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span>(e.<span class="property">target</span>.<span class="property">tagName</span>.<span class="title function_">toLowerCase</span>() === <span class="string">&#x27;li&#x27;</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//do something</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="one-events-selector-data-handler-eventObject"><a href="#one-events-selector-data-handler-eventObject" class="headerlink" title=".one(events[,selector][,data],handler(eventObject))"></a>.one(events[,selector][,data],handler(eventObject))</h4><p>同 on，绑定事件，但只执行一次</p>
<h4 id="off-events-selector-handler"><a href="#off-events-selector-handler" class="headerlink" title=".off(events[,selector][,handler])"></a>.off(events[,selector][,handler])</h4><p>移除一个事件处理函数</p>
<p><code>$(&#39;.box li&#39;).off(&#39;click&#39;)</code></p>
<h4 id="trigger-eventType-extraParameters"><a href="#trigger-eventType-extraParameters" class="headerlink" title=".trigger(eventType[,extraParameters])"></a>.trigger(eventType[,extraParameters])</h4><p>根据绑定到匹配元素的给定的事件类型执行所有的处理程序和行为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#foo&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="variable language_">this</span>).<span class="title function_">text</span>());</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;#foo&quot;</span>).<span class="title function_">trigger</span>(<span class="string">&quot;click&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><p>blur([[data],fn])</p>
<p>change([[data],fn])</p>
<p>click([[data],fn])</p>
<p>dblclick([[data],fn])</p>
<p>error([[data],fn])</p>
<p>focus([[data],fn])</p>
<p>focusin([data],fn)</p>
<p>focusout([data],fn)</p>
<p>keydown([[data],fn])</p>
<p>keypress([[data],fn])</p>
<p>keyup([[data],fn])</p>
<p>mousedown([[data],fn])</p>
<p>mouseenter([[data],fn])</p>
<p>mouseleave([[data],fn])</p>
<p>mousemove([[data],fn])</p>
<p>mouseout([[data],fn])</p>
<p>mouseover([[data],fn])</p>
<p>mouseup([[data],fn])</p>
<p>resize([[data],fn])</p>
<p>scroll([[data],fn])</p>
<p>select([[data],fn])</p>
<p>submit([[data],fn])</p>
<h4 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h4><p>eve.currentTarget</p>
<p>eve.data</p>
<p>eve.delegateTarget</p>
<p>eve.isDefaultPrevented()</p>
<p>eve.isImmediatePropag…()</p>
<p>eve.isPropagationStopped()</p>
<p>eve.namespace</p>
<p>eve.pageX</p>
<p>eve.pageY</p>
<p>eve.preventDefault()</p>
<p>eve.relatedTarget</p>
<p>eve.result</p>
<p>eve.stopImmediatePro…()</p>
<p>eve.stopPropagation()</p>
<p>eve.target</p>
<p>eve.timeStamp</p>
<p>eve.type</p>
<p>eve.which</p>
<h2 id="jQuery-动画"><a href="#jQuery-动画" class="headerlink" title="jQuery 动画"></a>jQuery 动画</h2><h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><h4 id="hide-duration-easting-fn"><a href="#hide-duration-easting-fn" class="headerlink" title=".hide([duration][,easting][,fn])"></a>.hide([duration][,easting][,fn])</h4><ul>
<li>duration: 三种预定速度之一的字符串(“slow”,”normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)</li>
<li>easing: 用来指定切换效果，默认是”swing”，可用参数”linear”</li>
<li>fn: 在动画完成时执行的函数，每个元素执行一次。</li>
</ul>
<p>用于隐藏元素,没有参数等同于直接设置 display 属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.target&quot;</span>).<span class="title function_">hide</span>();</span><br><span class="line"><span class="comment">//等同于$(&#x27;.target&#x27;).css(&#x27;display&#x27;,&#x27;none&#x27;)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#book&quot;</span>).<span class="title function_">hide</span>(<span class="number">300</span>, <span class="string">&quot;linear&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Animation complete.&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="show-duration-easing-fn"><a href="#show-duration-easing-fn" class="headerlink" title=".show([duration][,easing][,fn])"></a>.show([duration][,easing][,fn])</h4><p>显示元素,用法类似 hide</p>
<h4 id="toggle-duration-easing-fn"><a href="#toggle-duration-easing-fn" class="headerlink" title=".toggle([duration][,easing][,fn])"></a>.toggle([duration][,easing][,fn])</h4><p>事件处理套件也有一个名为.toggle()方法。哪一个被调用取决于传递的参数的设置</p>
<p>用来切换元素的隐藏、显示，类似于 toggleClass，用法和 show、hide 类似</p>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><h4 id="fadeIn-duration-easing-complete"><a href="#fadeIn-duration-easing-complete" class="headerlink" title=".fadeIn( [duration ] [, easing ] [, complete ] )"></a>.fadeIn( [duration ] [, easing ] [, complete ] )</h4><p>渐入效果</p>
<h4 id="fadeOut-duration-easing-complete"><a href="#fadeOut-duration-easing-complete" class="headerlink" title=".fadeOut( [duration ] [, easing ] [, complete ] )"></a>.fadeOut( [duration ] [, easing ] [, complete ] )</h4><p>渐出效果</p>
<h4 id="fadeTo-duration-opacity-easing-complete"><a href="#fadeTo-duration-opacity-easing-complete" class="headerlink" title=".fadeTo( duration, opacity [, easing ] [, complete ] )"></a>.fadeTo( duration, opacity [, easing ] [, complete ] )</h4><p>调整匹配元素的透明度，方法通过匹配元素的不透明度做动画效果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#book&quot;</span>).<span class="title function_">fadeTo</span>(<span class="string">&quot;slow&quot;</span>, <span class="number">0.5</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// Animation complete.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="fadeToggle-speed-easing-fn"><a href="#fadeToggle-speed-easing-fn" class="headerlink" title="fadeToggle([speed,[easing],[fn]])"></a>fadeToggle([speed,[easing],[fn]])</h4><p>通过不透明度的变化来开关所有匹配元素的淡入和淡出效果，并在动画完成后可选地触发一个回调函数。</p>
<p>这个动画只调整元素的不透明度，也就是说所有匹配的元素的高度和宽度不会发生变化。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;p&quot;</span>).<span class="title function_">fadeToggle</span>(<span class="string">&quot;fast&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;Animation Done.&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//用200毫秒快速将段落淡入，之后弹出一个对话框</span></span><br></pre></td></tr></table></figure>

<h4 id="slideDown-speed-easing-fn"><a href="#slideDown-speed-easing-fn" class="headerlink" title="slideDown([speed],[easing],[fn])"></a>slideDown([speed],[easing],[fn])</h4><p>下拉动画.这个动画效果只调整元素的高度，可以使匹配的元素以“滑动”的方式显示出来。</p>
<h4 id="slideUp-speed-easing-fn"><a href="#slideUp-speed-easing-fn" class="headerlink" title="slideUp([speed,[easing],[fn]])"></a>slideUp([speed,[easing],[fn]])</h4><p>上浮动画,向上隐藏,在隐藏完成后可选地触发一个回调函数。</p>
<h4 id="slideToggle-speed-easing-fn"><a href="#slideToggle-speed-easing-fn" class="headerlink" title="slideToggle([speed],[easing],[fn])"></a>slideToggle([speed],[easing],[fn])</h4><p>上下切换</p>
<h3 id="动画队列"><a href="#动画队列" class="headerlink" title="动画队列"></a>动画队列</h3><p>因为动画是异步,所以将动画执行函数放入回调函数中,等动画执行完毕再执行其他的.</p>
<p>但是这样写会形成回调地狱.又因为存在动画队列,可以按代码二方法执行会有同样效果.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$box.<span class="title function_">hide</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $box.<span class="title function_">show</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $box.<span class="title function_">fadeOut</span>(<span class="string">&quot;slow&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      $box.<span class="title function_">fadeIn</span>(<span class="string">&quot;slow&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        $box.<span class="title function_">slideUp</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">          $box.<span class="title function_">slideDown</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;动画执行完毕&quot;</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">$box</span><br><span class="line">  .<span class="title function_">hide</span>(<span class="number">1000</span>)</span><br><span class="line">  .<span class="title function_">show</span>(<span class="number">1000</span>)</span><br><span class="line">  .<span class="title function_">fadeOut</span>()</span><br><span class="line">  .<span class="title function_">fadeIn</span>()</span><br><span class="line">  .<span class="title function_">slideUp</span>()</span><br><span class="line">  .<span class="title function_">slideDown</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;真的完毕了&quot;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="自定义动画"><a href="#自定义动画" class="headerlink" title="自定义动画"></a>自定义动画</h3><p><code>animate(params,[speed],[easing],[fn])</code></p>
<p>这个函数的关键在于指定动画形式及结果样式属性对象。</p>
<p>这个对象中每个属性都表示一个可以变化的样式属性（如“height”、“top”或“opacity”）。</p>
<p>注意：所有指定的属性必须用驼峰形式，比如用 marginLeft 代替 margin-left.</p>
<ul>
<li>params:一组包含作为动画属性和终值的样式属性和及其值的集合</li>
<li>speed:三种预定速度之一的字符串(“slow”,”normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)</li>
<li>easing:要使用的擦除效果的名称(需要插件支持).默认 jQuery 提供”linear” 和 “swing”.</li>
<li>fn:在动画完成时执行的函数，每个元素执行一次。</li>
</ul>
<h4 id="finish"><a href="#finish" class="headerlink" title=".finish"></a>.finish</h4><p>停止当前动画，并清除动画队列中所有未完成的动画,最终展示动画队列最后一帧的最终状态</p>
<h4 id="stop-clearQueue-jumpToEnd"><a href="#stop-clearQueue-jumpToEnd" class="headerlink" title=".stop( [clearQueue] [,jumpToEnd])"></a>.stop( [clearQueue] [,jumpToEnd])</h4><p>停止当前正在运行的动画</p>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><h3 id="jQuery-ajax-url-settings"><a href="#jQuery-ajax-url-settings" class="headerlink" title="jQuery.ajax(url,[settings])"></a>jQuery.ajax(url,[settings])</h3><p>jQuery 底层 AJAX 实现.<code>$.ajax()</code>返回其创建的 XMLHttpRequest 对象。</p>
<p>大多数情况下你无需直接操作该函数，除非你需要操作不常用的选项，以获得更多的灵活性。</p>
<p>最简单的情况下，<code>$.ajax()</code>可以不带任何参数直接使用。</p>
<p>注意，所有的选项都可以通过<code>$.ajaxSetup()</code>函数来全局设置。</p>
<p><strong>回调函数</strong></p>
<p>如果要处理<code>$.ajax()</code>得到的数据，则需要使用回调函数。beforeSend、error、dataFilter、success、complete。</p>
<ul>
<li>beforeSend 在发送请求之前调用，并且传入一个 XMLHttpRequest 作为参数。</li>
<li>error 在请求出错时调用。传入 XMLHttpRequest 对象，描述错误类型的字符串以及一个异常对象（如果有的话）</li>
<li>dataFilter 在请求成功之后调用。传入返回的数据以及”<code>dataType</code>“参数的值。</li>
</ul>
<p>并且必须返回新的数据（可能是处理过的）传递给 success 回调函数。</p>
<ul>
<li>success 当请求之后调用。传入返回后的数据，以及包含成功代码的字符串。</li>
<li>complete 当请求完成之后调用这个函数，无论成功或失败。传入 XMLHttpRequest 对象，以及一个包含成功或错误代码的字符串。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;test.com&#x27;</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">datatype</span>: json,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;12&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &lt;!-- <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">result</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">  &#125; --&gt;</span><br><span class="line">&#125;).<span class="title function_">done</span>(<span class="keyword">function</span>(<span class="params">result</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">&#125;).<span class="title function_">fail</span>(<span class="keyword">function</span>(<span class="params">jqXHR, textStatus</span>)&#123;</span><br><span class="line">  consloe.<span class="title function_">log</span>(textStatus)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>url: 一个用来包含发送请求的 URL 字符串。</p>
<p>settings: AJAX 请求设置。所有选项都是可选的。</p>
<h5 id="seting-中的设置"><a href="#seting-中的设置" class="headerlink" title="seting 中的设置"></a>seting 中的设置</h5><ol>
<li><code>async</code>：默认设置下，所有请求均为异步请求（也就是说这是默认设置为 true ）。</li>
</ol>
<p>如果需要发送同步请求，请将此选项设置为 false 2. <code>beforeSend</code>：请求发送前的回调函数，用来修改请求发送前 jqXHR 对象，此功能用来设置自定义 HTTP 头信息</p>
<p>该 jqXHR 和设置对象作为参数传递 3. <code>cache</code>：如果设置为 false ，浏览器将不缓存此页面。</p>
<p>注意: 设置 cache 为 false 将在 HEAD 和 GET 请求中正常工作。</p>
<p>它的工作原理是在 GET 请求参数中附加”_&#x3D;{timestamp}” 4. <code>context</code>：这个对象用于设置 Ajax 相关回调函数的上下文。</p>
<p>默认情况下，这个上下文是一个 ajax 请求使用的参数设置对象 5. <code>data</code>：发送到服务器的数据。将自动转换为请求字符串格式。</p>
<p>GET 请求中将附加在 URL 后面，POST 请求作为表单数据 6. <code>headers</code>：一个额外的{键:值}对映射到请求一起发送。此设置会在 beforeSend 函数调用之前被设置;</p>
<p>因此，请求头中的设置值，会被 beforeSend 函数内的设置覆盖 7. <code>type</code>: 请求方式 (“POST” 或 “GET”)，默认为 “GET”。</p>
<p>注意:其它 HTTP 请求方法，如 PUT 和 DELETE 也可以使用，但仅部分浏览器支持。</p>
<h3 id="jQuery-get-settings-x2F-jQuery-post-settings"><a href="#jQuery-get-settings-x2F-jQuery-post-settings" class="headerlink" title="jQuery.get( [settings] ) &#x2F; jQuery.post( [settings ] )"></a>jQuery.get( [settings] ) &#x2F; jQuery.post( [settings ] )</h3><p>这两个方法专门用来处理 get 和 post 请求</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(<span class="string">&quot;test.html&quot;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  $(<span class="string">&quot;.result&quot;</span>).<span class="title function_">html</span>(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="jQuery-getJSON-url-data-success-data-textStatus-jqXHR"><a href="#jQuery-getJSON-url-data-success-data-textStatus-jqXHR" class="headerlink" title="jQuery.getJSON(url[,data][,success(data,textStatus,jqXHR)])"></a>jQuery.getJSON(url[,data][,success(data,textStatus,jqXHR)])</h3><p>使用一个 HTTP GET 请求从服务器加载 JSON 编码的数据</p>
<p>范例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">getJSON</span>(<span class="string">&quot;ajax/test.json&quot;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> items = [];</span><br><span class="line"></span><br><span class="line">  $.<span class="title function_">each</span>(data, <span class="keyword">function</span> (<span class="params">key, val</span>) &#123;</span><br><span class="line">    items.<span class="title function_">push</span>(<span class="string">&#x27;&lt;li id=&quot;&#x27;</span> + key + <span class="string">&#x27;&quot;&gt;&#x27;</span> + val + <span class="string">&quot;&lt;/li&gt;&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&quot;&lt;ul/&gt;&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&quot;my-new-list&quot;</span>,</span><br><span class="line">    <span class="attr">html</span>: items.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>),</span><br><span class="line">  &#125;).<span class="title function_">appendTo</span>(<span class="string">&quot;body&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="load-url-data-complete-responseText-textStatus-XMLHttpRequest"><a href="#load-url-data-complete-responseText-textStatus-XMLHttpRequest" class="headerlink" title=".load(url[,data][,complete(responseText,textStatus,XMLHttpRequest)])"></a>.load(url[,data][,complete(responseText,textStatus,XMLHttpRequest)])</h3><p>从服务器载入数据并且将返回的 HTML 代码并插入至匹配的元素中</p>
<p><code>$(&#39;#result&#39;).load(&#39;ajax/test.html&#39;)</code></p>
<h3 id="serialize-x2F-serializeArray"><a href="#serialize-x2F-serializeArray" class="headerlink" title=".serialize() &#x2F; serializeArray()"></a><code>.serialize()</code> &#x2F; <code>serializeArray()</code></h3><p>将用作提交的表单元素的值编译成字符串，方法没有参数，使用标准的 URL-encoded 符号上建立一个文本字符串.</p>
<p>它可以对一个代表一组表单元素的 jQuery 对象进行操作，比如<code>&lt;input&gt;, &lt;textarea&gt;, 和 &lt;select&gt;</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">&quot;holder&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;a&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;b&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;b&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;c&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;f&quot;</span> <span class="attr">value</span>=<span class="string">&quot;8&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;f&quot;</span> <span class="attr">value</span>=<span class="string">&quot;9&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/form&gt;;</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;#holder&quot;</span>).<span class="title function_">serialize</span>(); <span class="comment">//a=1&amp;b=2&amp;c=3&amp;f=8&amp;f=9</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;#holder&quot;</span>).<span class="title function_">serializeArray</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;a&#x27;, value: &#x27;1&#x27;&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;b&#x27;, value: &#x27;2&#x27;&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;c&#x27;, value: &#x27;3&#x27;&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;f&#x27;, value: &#x27;8&#x27;&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;f&#x27;, value: &#x27;9&#x27;&#125;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>serialize 和 serializeArray 都是针对 JQuery 对象(选中的 form 元素)进行操作，只是返回值格式不同而已。</p>
</blockquote>
<p>这里特别要注意：这 2 个 API 只能操作 form，如果将 holder 改成 div，会发现不起作用</p>
<h2 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getBooks</span>(<span class="params"></span>) &#123;</span><br><span class="line">  $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://test.com/bookservice.php&quot;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&quot;jsonp&quot;</span>,</span><br><span class="line">    <span class="attr">jsonp</span>: <span class="string">&quot;callback&quot;</span>,</span><br><span class="line">    <span class="attr">jsonpCallback</span>: <span class="string">&quot;displayBooks&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然使用 jsonp 会在一定程度上造成安全性问题，如果请求的站点不是信任站点，那么可能会在返回的方法调用中包含一些恶意代码。</p>
</blockquote>
<p>所以尽量向信任的站点发送请求。另外 xss 也经常会利用 jsonp 向站点注入恶意代码。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zax Tseng</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
